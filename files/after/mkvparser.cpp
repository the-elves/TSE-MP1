<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>libvpx/third_party/libwebm/mkvparser.cpp - platform/external/libvpx - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.YxgkRP5in5Amk_r7PKOxxA.cache.css"><link rel="stylesheet" type="text/css" href="/+static/prettify/prettify.AOMOBqJIPcDq491E2ExAAw.cache.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/external/libvpx/%2B/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx/third_party/libwebm/mkvparser.cpp">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/external/">external</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libvpx/">libvpx</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libvpx/+/5a9753fca56f0eeb9f61e342b2fccffc364f9426">5a9753fca56f0eeb9f61e342b2fccffc364f9426</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libvpx/+/5a9753fca56f0eeb9f61e342b2fccffc364f9426/">.</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libvpx/+/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx">libvpx</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libvpx/+/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx/third_party">third_party</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libvpx/+/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx/third_party/libwebm">libwebm</a> / <span class="Breadcrumbs-crumb">mkvparser.cpp</span></div><div class="u-sha1 u-monospace BlobSha1">blob: fc01be526409dafd5c1b6e4c173f052d5fbf2dab [<a href="/platform/external/libvpx/+/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx/third_party/libwebm/mkvparser.cpp">file</a>] [<a href="/platform/external/libvpx/+log/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx/third_party/libwebm/mkvparser.cpp">log</a>] [<a href="/platform/external/libvpx/+blame/5a9753fca56f0eeb9f61e342b2fccffc364f9426/libvpx/third_party/libwebm/mkvparser.cpp">blame</a>]</div><table class="FileContents"><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1" onclick="window.location.hash='#1'"></td><td class="FileContents-lineContents" id="1"><span class="com">// Copyright (c) 2012 The WebM project authors. All Rights Reserved.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2" onclick="window.location.hash='#2'"></td><td class="FileContents-lineContents" id="2"><span class="com">//</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3" onclick="window.location.hash='#3'"></td><td class="FileContents-lineContents" id="3"><span class="com">// Use of this source code is governed by a BSD-style license</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4" onclick="window.location.hash='#4'"></td><td class="FileContents-lineContents" id="4"><span class="com">// that can be found in the LICENSE file in the root of the source</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5" onclick="window.location.hash='#5'"></td><td class="FileContents-lineContents" id="5"><span class="com">// tree. An additional intellectual property rights grant can be found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6" onclick="window.location.hash='#6'"></td><td class="FileContents-lineContents" id="6"><span class="com">// in the file PATENTS.  All contributing project authors may</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7" onclick="window.location.hash='#7'"></td><td class="FileContents-lineContents" id="7"><span class="com">// be found in the AUTHORS file in the root of the source tree.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="8" onclick="window.location.hash='#8'"></td><td class="FileContents-lineContents" id="8"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="9" onclick="window.location.hash='#9'"></td><td class="FileContents-lineContents" id="9"><span class="com">#include</span><span class="pln"> </span><span class="str">&quot;mkvparser.hpp&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="10" onclick="window.location.hash='#10'"></td><td class="FileContents-lineContents" id="10"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cassert&gt;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="11" onclick="window.location.hash='#11'"></td><td class="FileContents-lineContents" id="11"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cstring&gt;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="12" onclick="window.location.hash='#12'"></td><td class="FileContents-lineContents" id="12"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;new&gt;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="13" onclick="window.location.hash='#13'"></td><td class="FileContents-lineContents" id="13"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;climits&gt;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="14" onclick="window.location.hash='#14'"></td><td class="FileContents-lineContents" id="14"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="15" onclick="window.location.hash='#15'"></td><td class="FileContents-lineContents" id="15"><span class="com">#ifdef</span><span class="pln"> _MSC_VER</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="16" onclick="window.location.hash='#16'"></td><td class="FileContents-lineContents" id="16"><span class="com">// Disable MSVC warnings that suggest making code non-portable.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="17" onclick="window.location.hash='#17'"></td><td class="FileContents-lineContents" id="17"><span class="com">#pragma</span><span class="pln"> warning</span><span class="pun">(</span><span class="pln">disable </span><span class="pun">:</span><span class="pln"> </span><span class="lit">4996</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="18" onclick="window.location.hash='#18'"></td><td class="FileContents-lineContents" id="18"><span class="com">#endif</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="19" onclick="window.location.hash='#19'"></td><td class="FileContents-lineContents" id="19"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="20" onclick="window.location.hash='#20'"></td><td class="FileContents-lineContents" id="20"><span class="pln">mkvparser</span><span class="pun">::</span><span class="typ">IMkvReader</span><span class="pun">::~</span><span class="typ">IMkvReader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="21" onclick="window.location.hash='#21'"></td><td class="FileContents-lineContents" id="21"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="22" onclick="window.location.hash='#22'"></td><td class="FileContents-lineContents" id="22"><span class="kwd">void</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">GetVersion</span><span class="pun">(</span><span class="typ">int</span><span class="pun">&amp;</span><span class="pln"> major</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">&amp;</span><span class="pln"> minor</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">&amp;</span><span class="pln"> build</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">&amp;</span><span class="pln"> revision</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="23" onclick="window.location.hash='#23'"></td><td class="FileContents-lineContents" id="23"><span class="pln">  major </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="24" onclick="window.location.hash='#24'"></td><td class="FileContents-lineContents" id="24"><span class="pln">  minor </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="25" onclick="window.location.hash='#25'"></td><td class="FileContents-lineContents" id="25"><span class="pln">  build </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="26" onclick="window.location.hash='#26'"></td><td class="FileContents-lineContents" id="26"><span class="pln">  revision </span><span class="pun">=</span><span class="pln"> </span><span class="lit">30</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="27" onclick="window.location.hash='#27'"></td><td class="FileContents-lineContents" id="27"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="28" onclick="window.location.hash='#28'"></td><td class="FileContents-lineContents" id="28"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="29" onclick="window.location.hash='#29'"></td><td class="FileContents-lineContents" id="29"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="30" onclick="window.location.hash='#30'"></td><td class="FileContents-lineContents" id="30"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="31" onclick="window.location.hash='#31'"></td><td class="FileContents-lineContents" id="31"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="32" onclick="window.location.hash='#32'"></td><td class="FileContents-lineContents" id="32"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="33" onclick="window.location.hash='#33'"></td><td class="FileContents-lineContents" id="33"><span class="pln">  </span><span class="typ">int</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="34" onclick="window.location.hash='#34'"></td><td class="FileContents-lineContents" id="34"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="35" onclick="window.location.hash='#35'"></td><td class="FileContents-lineContents" id="35"><span class="pln">  </span><span class="com">//#ifdef _DEBUG</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="36" onclick="window.location.hash='#36'"></td><td class="FileContents-lineContents" id="36"><span class="pln">  </span><span class="com">//    long long total, available;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="37" onclick="window.location.hash='#37'"></td><td class="FileContents-lineContents" id="37"><span class="pln">  </span><span class="com">//    status = pReader-&gt;Length(&amp;total, &amp;available);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="38" onclick="window.location.hash='#38'"></td><td class="FileContents-lineContents" id="38"><span class="pln">  </span><span class="com">//    assert(status &gt;= 0);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="39" onclick="window.location.hash='#39'"></td><td class="FileContents-lineContents" id="39"><span class="pln">  </span><span class="com">//    assert((total &lt; 0) || (available &lt;= total));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="40" onclick="window.location.hash='#40'"></td><td class="FileContents-lineContents" id="40"><span class="pln">  </span><span class="com">//    assert(pos &lt; available);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="41" onclick="window.location.hash='#41'"></td><td class="FileContents-lineContents" id="41"><span class="pln">  </span><span class="com">//    assert((available - pos) &gt;= 1);  //assume here max u-int len is 8</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="42" onclick="window.location.hash='#42'"></td><td class="FileContents-lineContents" id="42"><span class="pln">  </span><span class="com">//#endif</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="43" onclick="window.location.hash='#43'"></td><td class="FileContents-lineContents" id="43"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="44" onclick="window.location.hash='#44'"></td><td class="FileContents-lineContents" id="44"><span class="pln">  len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="45" onclick="window.location.hash='#45'"></td><td class="FileContents-lineContents" id="45"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="46" onclick="window.location.hash='#46'"></td><td class="FileContents-lineContents" id="46"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="47" onclick="window.location.hash='#47'"></td><td class="FileContents-lineContents" id="47"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="48" onclick="window.location.hash='#48'"></td><td class="FileContents-lineContents" id="48"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="49" onclick="window.location.hash='#49'"></td><td class="FileContents-lineContents" id="49"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="50" onclick="window.location.hash='#50'"></td><td class="FileContents-lineContents" id="50"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="51" onclick="window.location.hash='#51'"></td><td class="FileContents-lineContents" id="51"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="52" onclick="window.location.hash='#52'"></td><td class="FileContents-lineContents" id="52"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="53" onclick="window.location.hash='#53'"></td><td class="FileContents-lineContents" id="53"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// interpreted as &quot;underflow&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="54" onclick="window.location.hash='#54'"></td><td class="FileContents-lineContents" id="54"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="55" onclick="window.location.hash='#55'"></td><td class="FileContents-lineContents" id="55"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="56" onclick="window.location.hash='#56'"></td><td class="FileContents-lineContents" id="56"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// we can&#39;t handle u-int values larger than 8 bytes</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="57" onclick="window.location.hash='#57'"></td><td class="FileContents-lineContents" id="57"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="58" onclick="window.location.hash='#58'"></td><td class="FileContents-lineContents" id="58"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="59" onclick="window.location.hash='#59'"></td><td class="FileContents-lineContents" id="59"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x80</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="60" onclick="window.location.hash='#60'"></td><td class="FileContents-lineContents" id="60"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="61" onclick="window.location.hash='#61'"></td><td class="FileContents-lineContents" id="61"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">b </span><span class="pun">&amp;</span><span class="pln"> m</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="62" onclick="window.location.hash='#62'"></td><td class="FileContents-lineContents" id="62"><span class="pln">    m </span><span class="pun">&gt;&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="63" onclick="window.location.hash='#63'"></td><td class="FileContents-lineContents" id="63"><span class="pln">    </span><span class="pun">++</span><span class="pln">len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="64" onclick="window.location.hash='#64'"></td><td class="FileContents-lineContents" id="64"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="65" onclick="window.location.hash='#65'"></td><td class="FileContents-lineContents" id="65"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="66" onclick="window.location.hash='#66'"></td><td class="FileContents-lineContents" id="66"><span class="pln">  </span><span class="com">//#ifdef _DEBUG</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="67" onclick="window.location.hash='#67'"></td><td class="FileContents-lineContents" id="67"><span class="pln">  </span><span class="com">//    assert((available - pos) &gt;= len);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="68" onclick="window.location.hash='#68'"></td><td class="FileContents-lineContents" id="68"><span class="pln">  </span><span class="com">//#endif</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="69" onclick="window.location.hash='#69'"></td><td class="FileContents-lineContents" id="69"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="70" onclick="window.location.hash='#70'"></td><td class="FileContents-lineContents" id="70"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> b </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">(~</span><span class="pln">m</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="71" onclick="window.location.hash='#71'"></td><td class="FileContents-lineContents" id="71"><span class="pln">  </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="72" onclick="window.location.hash='#72'"></td><td class="FileContents-lineContents" id="72"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="73" onclick="window.location.hash='#73'"></td><td class="FileContents-lineContents" id="73"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="74" onclick="window.location.hash='#74'"></td><td class="FileContents-lineContents" id="74"><span class="pln">    status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="75" onclick="window.location.hash='#75'"></td><td class="FileContents-lineContents" id="75"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="76" onclick="window.location.hash='#76'"></td><td class="FileContents-lineContents" id="76"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="77" onclick="window.location.hash='#77'"></td><td class="FileContents-lineContents" id="77"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="78" onclick="window.location.hash='#78'"></td><td class="FileContents-lineContents" id="78"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="79" onclick="window.location.hash='#79'"></td><td class="FileContents-lineContents" id="79"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="80" onclick="window.location.hash='#80'"></td><td class="FileContents-lineContents" id="80"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="81" onclick="window.location.hash='#81'"></td><td class="FileContents-lineContents" id="81"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="82" onclick="window.location.hash='#82'"></td><td class="FileContents-lineContents" id="82"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="83" onclick="window.location.hash='#83'"></td><td class="FileContents-lineContents" id="83"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="84" onclick="window.location.hash='#84'"></td><td class="FileContents-lineContents" id="84"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="85" onclick="window.location.hash='#85'"></td><td class="FileContents-lineContents" id="85"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="86" onclick="window.location.hash='#86'"></td><td class="FileContents-lineContents" id="86"><span class="pln">    result </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="87" onclick="window.location.hash='#87'"></td><td class="FileContents-lineContents" id="87"><span class="pln">    result </span><span class="pun">|=</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="88" onclick="window.location.hash='#88'"></td><td class="FileContents-lineContents" id="88"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="89" onclick="window.location.hash='#89'"></td><td class="FileContents-lineContents" id="89"><span class="pln">    </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="90" onclick="window.location.hash='#90'"></td><td class="FileContents-lineContents" id="90"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="91" onclick="window.location.hash='#91'"></td><td class="FileContents-lineContents" id="91"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="92" onclick="window.location.hash='#92'"></td><td class="FileContents-lineContents" id="92"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="93" onclick="window.location.hash='#93'"></td><td class="FileContents-lineContents" id="93"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="94" onclick="window.location.hash='#94'"></td><td class="FileContents-lineContents" id="94"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="95" onclick="window.location.hash='#95'"></td><td class="FileContents-lineContents" id="95"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="96" onclick="window.location.hash='#96'"></td><td class="FileContents-lineContents" id="96"><span class="pln">                                   </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="97" onclick="window.location.hash='#97'"></td><td class="FileContents-lineContents" id="97"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="98" onclick="window.location.hash='#98'"></td><td class="FileContents-lineContents" id="98"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="99" onclick="window.location.hash='#99'"></td><td class="FileContents-lineContents" id="99"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="100" onclick="window.location.hash='#100'"></td><td class="FileContents-lineContents" id="100"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="101" onclick="window.location.hash='#101'"></td><td class="FileContents-lineContents" id="101"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="102" onclick="window.location.hash='#102'"></td><td class="FileContents-lineContents" id="102"><span class="pln">  </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="103" onclick="window.location.hash='#103'"></td><td class="FileContents-lineContents" id="103"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="104" onclick="window.location.hash='#104'"></td><td class="FileContents-lineContents" id="104"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="105" onclick="window.location.hash='#105'"></td><td class="FileContents-lineContents" id="105"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="106" onclick="window.location.hash='#106'"></td><td class="FileContents-lineContents" id="106"><span class="pln">  len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="107" onclick="window.location.hash='#107'"></td><td class="FileContents-lineContents" id="107"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="108" onclick="window.location.hash='#108'"></td><td class="FileContents-lineContents" id="108"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="109" onclick="window.location.hash='#109'"></td><td class="FileContents-lineContents" id="109"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// too few bytes available</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="110" onclick="window.location.hash='#110'"></td><td class="FileContents-lineContents" id="110"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="111" onclick="window.location.hash='#111'"></td><td class="FileContents-lineContents" id="111"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="112" onclick="window.location.hash='#112'"></td><td class="FileContents-lineContents" id="112"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="113" onclick="window.location.hash='#113'"></td><td class="FileContents-lineContents" id="113"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="114" onclick="window.location.hash='#114'"></td><td class="FileContents-lineContents" id="114"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="115" onclick="window.location.hash='#115'"></td><td class="FileContents-lineContents" id="115"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="116" onclick="window.location.hash='#116'"></td><td class="FileContents-lineContents" id="116"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="117" onclick="window.location.hash='#117'"></td><td class="FileContents-lineContents" id="117"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="118" onclick="window.location.hash='#118'"></td><td class="FileContents-lineContents" id="118"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="119" onclick="window.location.hash='#119'"></td><td class="FileContents-lineContents" id="119"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="120" onclick="window.location.hash='#120'"></td><td class="FileContents-lineContents" id="120"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// we can&#39;t handle u-int values larger than 8 bytes</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="121" onclick="window.location.hash='#121'"></td><td class="FileContents-lineContents" id="121"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="122" onclick="window.location.hash='#122'"></td><td class="FileContents-lineContents" id="122"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="123" onclick="window.location.hash='#123'"></td><td class="FileContents-lineContents" id="123"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x80</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="124" onclick="window.location.hash='#124'"></td><td class="FileContents-lineContents" id="124"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="125" onclick="window.location.hash='#125'"></td><td class="FileContents-lineContents" id="125"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">b </span><span class="pun">&amp;</span><span class="pln"> m</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="126" onclick="window.location.hash='#126'"></td><td class="FileContents-lineContents" id="126"><span class="pln">    m </span><span class="pun">&gt;&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="127" onclick="window.location.hash='#127'"></td><td class="FileContents-lineContents" id="127"><span class="pln">    </span><span class="pun">++</span><span class="pln">len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="128" onclick="window.location.hash='#128'"></td><td class="FileContents-lineContents" id="128"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="129" onclick="window.location.hash='#129'"></td><td class="FileContents-lineContents" id="129"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="130" onclick="window.location.hash='#130'"></td><td class="FileContents-lineContents" id="130"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="131" onclick="window.location.hash='#131'"></td><td class="FileContents-lineContents" id="131"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="132" onclick="window.location.hash='#132'"></td><td class="FileContents-lineContents" id="132"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="133" onclick="window.location.hash='#133'"></td><td class="FileContents-lineContents" id="133"><span class="com">// TODO(vigneshv): This function assumes that unsigned values never have their</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="134" onclick="window.location.hash='#134'"></td><td class="FileContents-lineContents" id="134"><span class="com">// high bit set.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="135" onclick="window.location.hash='#135'"></td><td class="FileContents-lineContents" id="135"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="136" onclick="window.location.hash='#136'"></td><td class="FileContents-lineContents" id="136"><span class="pln">                                     </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="137" onclick="window.location.hash='#137'"></td><td class="FileContents-lineContents" id="137"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="138" onclick="window.location.hash='#138'"></td><td class="FileContents-lineContents" id="138"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="139" onclick="window.location.hash='#139'"></td><td class="FileContents-lineContents" id="139"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="140" onclick="window.location.hash='#140'"></td><td class="FileContents-lineContents" id="140"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">8</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="141" onclick="window.location.hash='#141'"></td><td class="FileContents-lineContents" id="141"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="142" onclick="window.location.hash='#142'"></td><td class="FileContents-lineContents" id="142"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="143" onclick="window.location.hash='#143'"></td><td class="FileContents-lineContents" id="143"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="144" onclick="window.location.hash='#144'"></td><td class="FileContents-lineContents" id="144"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="145" onclick="window.location.hash='#145'"></td><td class="FileContents-lineContents" id="145"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> size</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="146" onclick="window.location.hash='#146'"></td><td class="FileContents-lineContents" id="146"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="147" onclick="window.location.hash='#147'"></td><td class="FileContents-lineContents" id="147"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="148" onclick="window.location.hash='#148'"></td><td class="FileContents-lineContents" id="148"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="149" onclick="window.location.hash='#149'"></td><td class="FileContents-lineContents" id="149"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="150" onclick="window.location.hash='#150'"></td><td class="FileContents-lineContents" id="150"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="151" onclick="window.location.hash='#151'"></td><td class="FileContents-lineContents" id="151"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="152" onclick="window.location.hash='#152'"></td><td class="FileContents-lineContents" id="152"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="153" onclick="window.location.hash='#153'"></td><td class="FileContents-lineContents" id="153"><span class="pln">    result </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="154" onclick="window.location.hash='#154'"></td><td class="FileContents-lineContents" id="154"><span class="pln">    result </span><span class="pun">|=</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="155" onclick="window.location.hash='#155'"></td><td class="FileContents-lineContents" id="155"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="156" onclick="window.location.hash='#156'"></td><td class="FileContents-lineContents" id="156"><span class="pln">    </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="157" onclick="window.location.hash='#157'"></td><td class="FileContents-lineContents" id="157"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="158" onclick="window.location.hash='#158'"></td><td class="FileContents-lineContents" id="158"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="159" onclick="window.location.hash='#159'"></td><td class="FileContents-lineContents" id="159"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="160" onclick="window.location.hash='#160'"></td><td class="FileContents-lineContents" id="160"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="161" onclick="window.location.hash='#161'"></td><td class="FileContents-lineContents" id="161"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="162" onclick="window.location.hash='#162'"></td><td class="FileContents-lineContents" id="162"><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">UnserializeFloat</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="163" onclick="window.location.hash='#163'"></td><td class="FileContents-lineContents" id="163"><span class="pln">                                 </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">&amp;</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="164" onclick="window.location.hash='#164'"></td><td class="FileContents-lineContents" id="164"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="165" onclick="window.location.hash='#165'"></td><td class="FileContents-lineContents" id="165"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="166" onclick="window.location.hash='#166'"></td><td class="FileContents-lineContents" id="166"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="167" onclick="window.location.hash='#167'"></td><td class="FileContents-lineContents" id="167"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">size_ </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size_ </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="168" onclick="window.location.hash='#168'"></td><td class="FileContents-lineContents" id="168"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="169" onclick="window.location.hash='#169'"></td><td class="FileContents-lineContents" id="169"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="170" onclick="window.location.hash='#170'"></td><td class="FileContents-lineContents" id="170"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="171" onclick="window.location.hash='#171'"></td><td class="FileContents-lineContents" id="171"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="172" onclick="window.location.hash='#172'"></td><td class="FileContents-lineContents" id="172"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> buf</span><span class="pun">[</span><span class="lit">8</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="173" onclick="window.location.hash='#173'"></td><td class="FileContents-lineContents" id="173"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="174" onclick="window.location.hash='#174'"></td><td class="FileContents-lineContents" id="174"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="175" onclick="window.location.hash='#175'"></td><td class="FileContents-lineContents" id="175"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="176" onclick="window.location.hash='#176'"></td><td class="FileContents-lineContents" id="176"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="177" onclick="window.location.hash='#177'"></td><td class="FileContents-lineContents" id="177"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="178" onclick="window.location.hash='#178'"></td><td class="FileContents-lineContents" id="178"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="179" onclick="window.location.hash='#179'"></td><td class="FileContents-lineContents" id="179"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="180" onclick="window.location.hash='#180'"></td><td class="FileContents-lineContents" id="180"><span class="pln">    </span><span class="kwd">union</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="181" onclick="window.location.hash='#181'"></td><td class="FileContents-lineContents" id="181"><span class="pln">      </span><span class="typ">float</span><span class="pln"> f</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="182" onclick="window.location.hash='#182'"></td><td class="FileContents-lineContents" id="182"><span class="pln">      </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> ff</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="183" onclick="window.location.hash='#183'"></td><td class="FileContents-lineContents" id="183"><span class="pln">    </span><span class="pun">};</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="184" onclick="window.location.hash='#184'"></td><td class="FileContents-lineContents" id="184"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="185" onclick="window.location.hash='#185'"></td><td class="FileContents-lineContents" id="185"><span class="pln">    ff </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="186" onclick="window.location.hash='#186'"></td><td class="FileContents-lineContents" id="186"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="187" onclick="window.location.hash='#187'"></td><td class="FileContents-lineContents" id="187"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="188" onclick="window.location.hash='#188'"></td><td class="FileContents-lineContents" id="188"><span class="pln">      ff </span><span class="pun">|=</span><span class="pln"> buf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="189" onclick="window.location.hash='#189'"></td><td class="FileContents-lineContents" id="189"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="190" onclick="window.location.hash='#190'"></td><td class="FileContents-lineContents" id="190"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">i </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="191" onclick="window.location.hash='#191'"></td><td class="FileContents-lineContents" id="191"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="192" onclick="window.location.hash='#192'"></td><td class="FileContents-lineContents" id="192"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="193" onclick="window.location.hash='#193'"></td><td class="FileContents-lineContents" id="193"><span class="pln">      ff </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="194" onclick="window.location.hash='#194'"></td><td class="FileContents-lineContents" id="194"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="195" onclick="window.location.hash='#195'"></td><td class="FileContents-lineContents" id="195"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="196" onclick="window.location.hash='#196'"></td><td class="FileContents-lineContents" id="196"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="197" onclick="window.location.hash='#197'"></td><td class="FileContents-lineContents" id="197"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="198" onclick="window.location.hash='#198'"></td><td class="FileContents-lineContents" id="198"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="199" onclick="window.location.hash='#199'"></td><td class="FileContents-lineContents" id="199"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="200" onclick="window.location.hash='#200'"></td><td class="FileContents-lineContents" id="200"><span class="pln">    </span><span class="kwd">union</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="201" onclick="window.location.hash='#201'"></td><td class="FileContents-lineContents" id="201"><span class="pln">      </span><span class="kwd">double</span><span class="pln"> d</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="202" onclick="window.location.hash='#202'"></td><td class="FileContents-lineContents" id="202"><span class="pln">      </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> dd</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="203" onclick="window.location.hash='#203'"></td><td class="FileContents-lineContents" id="203"><span class="pln">    </span><span class="pun">};</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="204" onclick="window.location.hash='#204'"></td><td class="FileContents-lineContents" id="204"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="205" onclick="window.location.hash='#205'"></td><td class="FileContents-lineContents" id="205"><span class="pln">    dd </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="206" onclick="window.location.hash='#206'"></td><td class="FileContents-lineContents" id="206"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="207" onclick="window.location.hash='#207'"></td><td class="FileContents-lineContents" id="207"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="208" onclick="window.location.hash='#208'"></td><td class="FileContents-lineContents" id="208"><span class="pln">      dd </span><span class="pun">|=</span><span class="pln"> buf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="209" onclick="window.location.hash='#209'"></td><td class="FileContents-lineContents" id="209"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="210" onclick="window.location.hash='#210'"></td><td class="FileContents-lineContents" id="210"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">i </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="211" onclick="window.location.hash='#211'"></td><td class="FileContents-lineContents" id="211"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="212" onclick="window.location.hash='#212'"></td><td class="FileContents-lineContents" id="212"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="213" onclick="window.location.hash='#213'"></td><td class="FileContents-lineContents" id="213"><span class="pln">      dd </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="214" onclick="window.location.hash='#214'"></td><td class="FileContents-lineContents" id="214"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="215" onclick="window.location.hash='#215'"></td><td class="FileContents-lineContents" id="215"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="216" onclick="window.location.hash='#216'"></td><td class="FileContents-lineContents" id="216"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> d</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="217" onclick="window.location.hash='#217'"></td><td class="FileContents-lineContents" id="217"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="218" onclick="window.location.hash='#218'"></td><td class="FileContents-lineContents" id="218"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="219" onclick="window.location.hash='#219'"></td><td class="FileContents-lineContents" id="219"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="220" onclick="window.location.hash='#220'"></td><td class="FileContents-lineContents" id="220"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="221" onclick="window.location.hash='#221'"></td><td class="FileContents-lineContents" id="221"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="222" onclick="window.location.hash='#222'"></td><td class="FileContents-lineContents" id="222"><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">UnserializeInt</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="223" onclick="window.location.hash='#223'"></td><td class="FileContents-lineContents" id="223"><span class="pln">                               </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="224" onclick="window.location.hash='#224'"></td><td class="FileContents-lineContents" id="224"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="225" onclick="window.location.hash='#225'"></td><td class="FileContents-lineContents" id="225"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="226" onclick="window.location.hash='#226'"></td><td class="FileContents-lineContents" id="226"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="227" onclick="window.location.hash='#227'"></td><td class="FileContents-lineContents" id="227"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="228" onclick="window.location.hash='#228'"></td><td class="FileContents-lineContents" id="228"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="229" onclick="window.location.hash='#229'"></td><td class="FileContents-lineContents" id="229"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="230" onclick="window.location.hash='#230'"></td><td class="FileContents-lineContents" id="230"><span class="pln">    </span><span class="kwd">signed</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="231" onclick="window.location.hash='#231'"></td><td class="FileContents-lineContents" id="231"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="232" onclick="window.location.hash='#232'"></td><td class="FileContents-lineContents" id="232"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*)&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="233" onclick="window.location.hash='#233'"></td><td class="FileContents-lineContents" id="233"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="234" onclick="window.location.hash='#234'"></td><td class="FileContents-lineContents" id="234"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="235" onclick="window.location.hash='#235'"></td><td class="FileContents-lineContents" id="235"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="236" onclick="window.location.hash='#236'"></td><td class="FileContents-lineContents" id="236"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="237" onclick="window.location.hash='#237'"></td><td class="FileContents-lineContents" id="237"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="238" onclick="window.location.hash='#238'"></td><td class="FileContents-lineContents" id="238"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="239" onclick="window.location.hash='#239'"></td><td class="FileContents-lineContents" id="239"><span class="pln">    </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="240" onclick="window.location.hash='#240'"></td><td class="FileContents-lineContents" id="240"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="241" onclick="window.location.hash='#241'"></td><td class="FileContents-lineContents" id="241"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="242" onclick="window.location.hash='#242'"></td><td class="FileContents-lineContents" id="242"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> size</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="243" onclick="window.location.hash='#243'"></td><td class="FileContents-lineContents" id="243"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="244" onclick="window.location.hash='#244'"></td><td class="FileContents-lineContents" id="244"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="245" onclick="window.location.hash='#245'"></td><td class="FileContents-lineContents" id="245"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="246" onclick="window.location.hash='#246'"></td><td class="FileContents-lineContents" id="246"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="247" onclick="window.location.hash='#247'"></td><td class="FileContents-lineContents" id="247"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="248" onclick="window.location.hash='#248'"></td><td class="FileContents-lineContents" id="248"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="249" onclick="window.location.hash='#249'"></td><td class="FileContents-lineContents" id="249"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="250" onclick="window.location.hash='#250'"></td><td class="FileContents-lineContents" id="250"><span class="pln">    result </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="251" onclick="window.location.hash='#251'"></td><td class="FileContents-lineContents" id="251"><span class="pln">    result </span><span class="pun">|=</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="252" onclick="window.location.hash='#252'"></td><td class="FileContents-lineContents" id="252"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="253" onclick="window.location.hash='#253'"></td><td class="FileContents-lineContents" id="253"><span class="pln">    </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="254" onclick="window.location.hash='#254'"></td><td class="FileContents-lineContents" id="254"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="255" onclick="window.location.hash='#255'"></td><td class="FileContents-lineContents" id="255"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="256" onclick="window.location.hash='#256'"></td><td class="FileContents-lineContents" id="256"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="257" onclick="window.location.hash='#257'"></td><td class="FileContents-lineContents" id="257"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="258" onclick="window.location.hash='#258'"></td><td class="FileContents-lineContents" id="258"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="259" onclick="window.location.hash='#259'"></td><td class="FileContents-lineContents" id="259"><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="260" onclick="window.location.hash='#260'"></td><td class="FileContents-lineContents" id="260"><span class="pln">                                  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*&amp;</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="261" onclick="window.location.hash='#261'"></td><td class="FileContents-lineContents" id="261"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> str</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="262" onclick="window.location.hash='#262'"></td><td class="FileContents-lineContents" id="262"><span class="pln">  str </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="263" onclick="window.location.hash='#263'"></td><td class="FileContents-lineContents" id="263"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="264" onclick="window.location.hash='#264'"></td><td class="FileContents-lineContents" id="264"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size_ </span><span class="pun">&gt;=</span><span class="pln"> LONG_MAX</span><span class="pun">)</span><span class="pln">  </span><span class="com">// we need (size+1) chars</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="265" onclick="window.location.hash='#265'"></td><td class="FileContents-lineContents" id="265"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="266" onclick="window.location.hash='#266'"></td><td class="FileContents-lineContents" id="266"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="267" onclick="window.location.hash='#267'"></td><td class="FileContents-lineContents" id="267"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="268" onclick="window.location.hash='#268'"></td><td class="FileContents-lineContents" id="268"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="269" onclick="window.location.hash='#269'"></td><td class="FileContents-lineContents" id="269"><span class="pln">  str </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">size </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="270" onclick="window.location.hash='#270'"></td><td class="FileContents-lineContents" id="270"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="271" onclick="window.location.hash='#271'"></td><td class="FileContents-lineContents" id="271"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">str </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="272" onclick="window.location.hash='#272'"></td><td class="FileContents-lineContents" id="272"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="273" onclick="window.location.hash='#273'"></td><td class="FileContents-lineContents" id="273"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="274" onclick="window.location.hash='#274'"></td><td class="FileContents-lineContents" id="274"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">reinterpret_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*&gt;(</span><span class="pln">str</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="275" onclick="window.location.hash='#275'"></td><td class="FileContents-lineContents" id="275"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="276" onclick="window.location.hash='#276'"></td><td class="FileContents-lineContents" id="276"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="277" onclick="window.location.hash='#277'"></td><td class="FileContents-lineContents" id="277"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="278" onclick="window.location.hash='#278'"></td><td class="FileContents-lineContents" id="278"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="279" onclick="window.location.hash='#279'"></td><td class="FileContents-lineContents" id="279"><span class="pln">    </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> str</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="280" onclick="window.location.hash='#280'"></td><td class="FileContents-lineContents" id="280"><span class="pln">    str </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="281" onclick="window.location.hash='#281'"></td><td class="FileContents-lineContents" id="281"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="282" onclick="window.location.hash='#282'"></td><td class="FileContents-lineContents" id="282"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="283" onclick="window.location.hash='#283'"></td><td class="FileContents-lineContents" id="283"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="284" onclick="window.location.hash='#284'"></td><td class="FileContents-lineContents" id="284"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="285" onclick="window.location.hash='#285'"></td><td class="FileContents-lineContents" id="285"><span class="pln">  str</span><span class="pun">[</span><span class="pln">size</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;\0&#39;</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="286" onclick="window.location.hash='#286'"></td><td class="FileContents-lineContents" id="286"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="287" onclick="window.location.hash='#287'"></td><td class="FileContents-lineContents" id="287"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="288" onclick="window.location.hash='#288'"></td><td class="FileContents-lineContents" id="288"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="289" onclick="window.location.hash='#289'"></td><td class="FileContents-lineContents" id="289"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="290" onclick="window.location.hash='#290'"></td><td class="FileContents-lineContents" id="290"><span class="kwd">long</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="291" onclick="window.location.hash='#291'"></td><td class="FileContents-lineContents" id="291"><span class="pln">                                   </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> id</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="292" onclick="window.location.hash='#292'"></td><td class="FileContents-lineContents" id="292"><span class="pln">                                   </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="293" onclick="window.location.hash='#293'"></td><td class="FileContents-lineContents" id="293"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="294" onclick="window.location.hash='#294'"></td><td class="FileContents-lineContents" id="294"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="295" onclick="window.location.hash='#295'"></td><td class="FileContents-lineContents" id="295"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="296" onclick="window.location.hash='#296'"></td><td class="FileContents-lineContents" id="296"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="297" onclick="window.location.hash='#297'"></td><td class="FileContents-lineContents" id="297"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="298" onclick="window.location.hash='#298'"></td><td class="FileContents-lineContents" id="298"><span class="pln">  id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="299" onclick="window.location.hash='#299'"></td><td class="FileContents-lineContents" id="299"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="300" onclick="window.location.hash='#300'"></td><td class="FileContents-lineContents" id="300"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="301" onclick="window.location.hash='#301'"></td><td class="FileContents-lineContents" id="301"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="302" onclick="window.location.hash='#302'"></td><td class="FileContents-lineContents" id="302"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="303" onclick="window.location.hash='#303'"></td><td class="FileContents-lineContents" id="303"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="304" onclick="window.location.hash='#304'"></td><td class="FileContents-lineContents" id="304"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="305" onclick="window.location.hash='#305'"></td><td class="FileContents-lineContents" id="305"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="306" onclick="window.location.hash='#306'"></td><td class="FileContents-lineContents" id="306"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="307" onclick="window.location.hash='#307'"></td><td class="FileContents-lineContents" id="307"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="308" onclick="window.location.hash='#308'"></td><td class="FileContents-lineContents" id="308"><span class="pln">  size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="309" onclick="window.location.hash='#309'"></td><td class="FileContents-lineContents" id="309"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="310" onclick="window.location.hash='#310'"></td><td class="FileContents-lineContents" id="310"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="311" onclick="window.location.hash='#311'"></td><td class="FileContents-lineContents" id="311"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="312" onclick="window.location.hash='#312'"></td><td class="FileContents-lineContents" id="312"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="313" onclick="window.location.hash='#313'"></td><td class="FileContents-lineContents" id="313"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="314" onclick="window.location.hash='#314'"></td><td class="FileContents-lineContents" id="314"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="315" onclick="window.location.hash='#315'"></td><td class="FileContents-lineContents" id="315"><span class="pln">  </span><span class="com">// pos now designates payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="316" onclick="window.location.hash='#316'"></td><td class="FileContents-lineContents" id="316"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="317" onclick="window.location.hash='#317'"></td><td class="FileContents-lineContents" id="317"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="318" onclick="window.location.hash='#318'"></td><td class="FileContents-lineContents" id="318"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="319" onclick="window.location.hash='#319'"></td><td class="FileContents-lineContents" id="319"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="320" onclick="window.location.hash='#320'"></td><td class="FileContents-lineContents" id="320"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="321" onclick="window.location.hash='#321'"></td><td class="FileContents-lineContents" id="321"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="322" onclick="window.location.hash='#322'"></td><td class="FileContents-lineContents" id="322"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="323" onclick="window.location.hash='#323'"></td><td class="FileContents-lineContents" id="323"><span class="kwd">bool</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">Match</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="324" onclick="window.location.hash='#324'"></td><td class="FileContents-lineContents" id="324"><span class="pln">                      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> val</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="325" onclick="window.location.hash='#325'"></td><td class="FileContents-lineContents" id="325"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="326" onclick="window.location.hash='#326'"></td><td class="FileContents-lineContents" id="326"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="327" onclick="window.location.hash='#327'"></td><td class="FileContents-lineContents" id="327"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="328" onclick="window.location.hash='#328'"></td><td class="FileContents-lineContents" id="328"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="329" onclick="window.location.hash='#329'"></td><td class="FileContents-lineContents" id="329"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="330" onclick="window.location.hash='#330'"></td><td class="FileContents-lineContents" id="330"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="331" onclick="window.location.hash='#331'"></td><td class="FileContents-lineContents" id="331"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="332" onclick="window.location.hash='#332'"></td><td class="FileContents-lineContents" id="332"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="333" onclick="window.location.hash='#333'"></td><td class="FileContents-lineContents" id="333"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="334" onclick="window.location.hash='#334'"></td><td class="FileContents-lineContents" id="334"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="335" onclick="window.location.hash='#335'"></td><td class="FileContents-lineContents" id="335"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="336" onclick="window.location.hash='#336'"></td><td class="FileContents-lineContents" id="336"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="337" onclick="window.location.hash='#337'"></td><td class="FileContents-lineContents" id="337"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="338" onclick="window.location.hash='#338'"></td><td class="FileContents-lineContents" id="338"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="339" onclick="window.location.hash='#339'"></td><td class="FileContents-lineContents" id="339"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="340" onclick="window.location.hash='#340'"></td><td class="FileContents-lineContents" id="340"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="341" onclick="window.location.hash='#341'"></td><td class="FileContents-lineContents" id="341"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="342" onclick="window.location.hash='#342'"></td><td class="FileContents-lineContents" id="342"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="343" onclick="window.location.hash='#343'"></td><td class="FileContents-lineContents" id="343"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="344" onclick="window.location.hash='#344'"></td><td class="FileContents-lineContents" id="344"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">)</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> id_</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="345" onclick="window.location.hash='#345'"></td><td class="FileContents-lineContents" id="345"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="346" onclick="window.location.hash='#346'"></td><td class="FileContents-lineContents" id="346"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="347" onclick="window.location.hash='#347'"></td><td class="FileContents-lineContents" id="347"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="348" onclick="window.location.hash='#348'"></td><td class="FileContents-lineContents" id="348"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="349" onclick="window.location.hash='#349'"></td><td class="FileContents-lineContents" id="349"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="350" onclick="window.location.hash='#350'"></td><td class="FileContents-lineContents" id="350"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="351" onclick="window.location.hash='#351'"></td><td class="FileContents-lineContents" id="351"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="352" onclick="window.location.hash='#352'"></td><td class="FileContents-lineContents" id="352"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="353" onclick="window.location.hash='#353'"></td><td class="FileContents-lineContents" id="353"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="354" onclick="window.location.hash='#354'"></td><td class="FileContents-lineContents" id="354"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="355" onclick="window.location.hash='#355'"></td><td class="FileContents-lineContents" id="355"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="356" onclick="window.location.hash='#356'"></td><td class="FileContents-lineContents" id="356"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="357" onclick="window.location.hash='#357'"></td><td class="FileContents-lineContents" id="357"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="358" onclick="window.location.hash='#358'"></td><td class="FileContents-lineContents" id="358"><span class="pln">  val </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="359" onclick="window.location.hash='#359'"></td><td class="FileContents-lineContents" id="359"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">val </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="360" onclick="window.location.hash='#360'"></td><td class="FileContents-lineContents" id="360"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="361" onclick="window.location.hash='#361'"></td><td class="FileContents-lineContents" id="361"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="362" onclick="window.location.hash='#362'"></td><td class="FileContents-lineContents" id="362"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="363" onclick="window.location.hash='#363'"></td><td class="FileContents-lineContents" id="363"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="364" onclick="window.location.hash='#364'"></td><td class="FileContents-lineContents" id="364"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="365" onclick="window.location.hash='#365'"></td><td class="FileContents-lineContents" id="365"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="366" onclick="window.location.hash='#366'"></td><td class="FileContents-lineContents" id="366"><span class="kwd">bool</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">Match</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="367" onclick="window.location.hash='#367'"></td><td class="FileContents-lineContents" id="367"><span class="pln">                      </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*&amp;</span><span class="pln"> buf</span><span class="pun">,</span><span class="pln"> </span><span class="typ">size_t</span><span class="pun">&amp;</span><span class="pln"> buflen</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="368" onclick="window.location.hash='#368'"></td><td class="FileContents-lineContents" id="368"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="369" onclick="window.location.hash='#369'"></td><td class="FileContents-lineContents" id="369"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="370" onclick="window.location.hash='#370'"></td><td class="FileContents-lineContents" id="370"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="371" onclick="window.location.hash='#371'"></td><td class="FileContents-lineContents" id="371"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="372" onclick="window.location.hash='#372'"></td><td class="FileContents-lineContents" id="372"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="373" onclick="window.location.hash='#373'"></td><td class="FileContents-lineContents" id="373"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="374" onclick="window.location.hash='#374'"></td><td class="FileContents-lineContents" id="374"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="375" onclick="window.location.hash='#375'"></td><td class="FileContents-lineContents" id="375"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="376" onclick="window.location.hash='#376'"></td><td class="FileContents-lineContents" id="376"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="377" onclick="window.location.hash='#377'"></td><td class="FileContents-lineContents" id="377"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="378" onclick="window.location.hash='#378'"></td><td class="FileContents-lineContents" id="378"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="379" onclick="window.location.hash='#379'"></td><td class="FileContents-lineContents" id="379"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="380" onclick="window.location.hash='#380'"></td><td class="FileContents-lineContents" id="380"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="381" onclick="window.location.hash='#381'"></td><td class="FileContents-lineContents" id="381"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="382" onclick="window.location.hash='#382'"></td><td class="FileContents-lineContents" id="382"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="383" onclick="window.location.hash='#383'"></td><td class="FileContents-lineContents" id="383"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="384" onclick="window.location.hash='#384'"></td><td class="FileContents-lineContents" id="384"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="385" onclick="window.location.hash='#385'"></td><td class="FileContents-lineContents" id="385"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="386" onclick="window.location.hash='#386'"></td><td class="FileContents-lineContents" id="386"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">)</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> id_</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="387" onclick="window.location.hash='#387'"></td><td class="FileContents-lineContents" id="387"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="388" onclick="window.location.hash='#388'"></td><td class="FileContents-lineContents" id="388"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="389" onclick="window.location.hash='#389'"></td><td class="FileContents-lineContents" id="389"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="390" onclick="window.location.hash='#390'"></td><td class="FileContents-lineContents" id="390"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="391" onclick="window.location.hash='#391'"></td><td class="FileContents-lineContents" id="391"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="392" onclick="window.location.hash='#392'"></td><td class="FileContents-lineContents" id="392"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size_ </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="393" onclick="window.location.hash='#393'"></td><td class="FileContents-lineContents" id="393"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="394" onclick="window.location.hash='#394'"></td><td class="FileContents-lineContents" id="394"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="395" onclick="window.location.hash='#395'"></td><td class="FileContents-lineContents" id="395"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="396" onclick="window.location.hash='#396'"></td><td class="FileContents-lineContents" id="396"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="397" onclick="window.location.hash='#397'"></td><td class="FileContents-lineContents" id="397"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="398" onclick="window.location.hash='#398'"></td><td class="FileContents-lineContents" id="398"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size_</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="399" onclick="window.location.hash='#399'"></td><td class="FileContents-lineContents" id="399"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="400" onclick="window.location.hash='#400'"></td><td class="FileContents-lineContents" id="400"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> buflen_ </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="401" onclick="window.location.hash='#401'"></td><td class="FileContents-lineContents" id="401"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="402" onclick="window.location.hash='#402'"></td><td class="FileContents-lineContents" id="402"><span class="pln">  buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">buflen_</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="403" onclick="window.location.hash='#403'"></td><td class="FileContents-lineContents" id="403"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">buf</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="404" onclick="window.location.hash='#404'"></td><td class="FileContents-lineContents" id="404"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="405" onclick="window.location.hash='#405'"></td><td class="FileContents-lineContents" id="405"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> buflen_</span><span class="pun">,</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="406" onclick="window.location.hash='#406'"></td><td class="FileContents-lineContents" id="406"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="407" onclick="window.location.hash='#407'"></td><td class="FileContents-lineContents" id="407"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="408" onclick="window.location.hash='#408'"></td><td class="FileContents-lineContents" id="408"><span class="pln">  buflen </span><span class="pun">=</span><span class="pln"> buflen_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="409" onclick="window.location.hash='#409'"></td><td class="FileContents-lineContents" id="409"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="410" onclick="window.location.hash='#410'"></td><td class="FileContents-lineContents" id="410"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> size_</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="411" onclick="window.location.hash='#411'"></td><td class="FileContents-lineContents" id="411"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="412" onclick="window.location.hash='#412'"></td><td class="FileContents-lineContents" id="412"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="413" onclick="window.location.hash='#413'"></td><td class="FileContents-lineContents" id="413"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="414" onclick="window.location.hash='#414'"></td><td class="FileContents-lineContents" id="414"><span class="kwd">namespace</span><span class="pln"> mkvparser </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="415" onclick="window.location.hash='#415'"></td><td class="FileContents-lineContents" id="415"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="416" onclick="window.location.hash='#416'"></td><td class="FileContents-lineContents" id="416"><span class="typ">EBMLHeader</span><span class="pun">::</span><span class="typ">EBMLHeader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_docType</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Init</span><span class="pun">();</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="417" onclick="window.location.hash='#417'"></td><td class="FileContents-lineContents" id="417"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="418" onclick="window.location.hash='#418'"></td><td class="FileContents-lineContents" id="418"><span class="typ">EBMLHeader</span><span class="pun">::~</span><span class="typ">EBMLHeader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_docType</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="419" onclick="window.location.hash='#419'"></td><td class="FileContents-lineContents" id="419"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="420" onclick="window.location.hash='#420'"></td><td class="FileContents-lineContents" id="420"><span class="kwd">void</span><span class="pln"> </span><span class="typ">EBMLHeader</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="421" onclick="window.location.hash='#421'"></td><td class="FileContents-lineContents" id="421"><span class="pln">  m_version </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="422" onclick="window.location.hash='#422'"></td><td class="FileContents-lineContents" id="422"><span class="pln">  m_readVersion </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="423" onclick="window.location.hash='#423'"></td><td class="FileContents-lineContents" id="423"><span class="pln">  m_maxIdLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="424" onclick="window.location.hash='#424'"></td><td class="FileContents-lineContents" id="424"><span class="pln">  m_maxSizeLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="425" onclick="window.location.hash='#425'"></td><td class="FileContents-lineContents" id="425"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="426" onclick="window.location.hash='#426'"></td><td class="FileContents-lineContents" id="426"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_docType</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="427" onclick="window.location.hash='#427'"></td><td class="FileContents-lineContents" id="427"><span class="pln">    </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_docType</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="428" onclick="window.location.hash='#428'"></td><td class="FileContents-lineContents" id="428"><span class="pln">    m_docType </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="429" onclick="window.location.hash='#429'"></td><td class="FileContents-lineContents" id="429"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="430" onclick="window.location.hash='#430'"></td><td class="FileContents-lineContents" id="430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="431" onclick="window.location.hash='#431'"></td><td class="FileContents-lineContents" id="431"><span class="pln">  m_docTypeVersion </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="432" onclick="window.location.hash='#432'"></td><td class="FileContents-lineContents" id="432"><span class="pln">  m_docTypeReadVersion </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="433" onclick="window.location.hash='#433'"></td><td class="FileContents-lineContents" id="433"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="434" onclick="window.location.hash='#434'"></td><td class="FileContents-lineContents" id="434"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="435" onclick="window.location.hash='#435'"></td><td class="FileContents-lineContents" id="435"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">EBMLHeader</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="436" onclick="window.location.hash='#436'"></td><td class="FileContents-lineContents" id="436"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="437" onclick="window.location.hash='#437'"></td><td class="FileContents-lineContents" id="437"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="438" onclick="window.location.hash='#438'"></td><td class="FileContents-lineContents" id="438"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="439" onclick="window.location.hash='#439'"></td><td class="FileContents-lineContents" id="439"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="440" onclick="window.location.hash='#440'"></td><td class="FileContents-lineContents" id="440"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="441" onclick="window.location.hash='#441'"></td><td class="FileContents-lineContents" id="441"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="442" onclick="window.location.hash='#442'"></td><td class="FileContents-lineContents" id="442"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="443" onclick="window.location.hash='#443'"></td><td class="FileContents-lineContents" id="443"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="444" onclick="window.location.hash='#444'"></td><td class="FileContents-lineContents" id="444"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="445" onclick="window.location.hash='#445'"></td><td class="FileContents-lineContents" id="445"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="446" onclick="window.location.hash='#446'"></td><td class="FileContents-lineContents" id="446"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> end </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1024</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="447" onclick="window.location.hash='#447'"></td><td class="FileContents-lineContents" id="447"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="448" onclick="window.location.hash='#448'"></td><td class="FileContents-lineContents" id="448"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="449" onclick="window.location.hash='#449'"></td><td class="FileContents-lineContents" id="449"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="450" onclick="window.location.hash='#450'"></td><td class="FileContents-lineContents" id="450"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="451" onclick="window.location.hash='#451'"></td><td class="FileContents-lineContents" id="451"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="452" onclick="window.location.hash='#452'"></td><td class="FileContents-lineContents" id="452"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="453" onclick="window.location.hash='#453'"></td><td class="FileContents-lineContents" id="453"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="454" onclick="window.location.hash='#454'"></td><td class="FileContents-lineContents" id="454"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="455" onclick="window.location.hash='#455'"></td><td class="FileContents-lineContents" id="455"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="456" onclick="window.location.hash='#456'"></td><td class="FileContents-lineContents" id="456"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="457" onclick="window.location.hash='#457'"></td><td class="FileContents-lineContents" id="457"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1A</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="458" onclick="window.location.hash='#458'"></td><td class="FileContents-lineContents" id="458"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="459" onclick="window.location.hash='#459'"></td><td class="FileContents-lineContents" id="459"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="460" onclick="window.location.hash='#460'"></td><td class="FileContents-lineContents" id="460"><span class="pln">      </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="461" onclick="window.location.hash='#461'"></td><td class="FileContents-lineContents" id="461"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="462" onclick="window.location.hash='#462'"></td><td class="FileContents-lineContents" id="462"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="463" onclick="window.location.hash='#463'"></td><td class="FileContents-lineContents" id="463"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x1A</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="464" onclick="window.location.hash='#464'"></td><td class="FileContents-lineContents" id="464"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="465" onclick="window.location.hash='#465'"></td><td class="FileContents-lineContents" id="465"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// don&#39;t bother looking anymore</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="466" onclick="window.location.hash='#466'"></td><td class="FileContents-lineContents" id="466"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="467" onclick="window.location.hash='#467'"></td><td class="FileContents-lineContents" id="467"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">-</span><span class="pln"> available</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="468" onclick="window.location.hash='#468'"></td><td class="FileContents-lineContents" id="468"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="469" onclick="window.location.hash='#469'"></td><td class="FileContents-lineContents" id="469"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="470" onclick="window.location.hash='#470'"></td><td class="FileContents-lineContents" id="470"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> available </span><span class="pun">+</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 5 = 4-byte ID + 1st byte of size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="471" onclick="window.location.hash='#471'"></td><td class="FileContents-lineContents" id="471"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="472" onclick="window.location.hash='#472'"></td><td class="FileContents-lineContents" id="472"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="473" onclick="window.location.hash='#473'"></td><td class="FileContents-lineContents" id="473"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="474" onclick="window.location.hash='#474'"></td><td class="FileContents-lineContents" id="474"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="475" onclick="window.location.hash='#475'"></td><td class="FileContents-lineContents" id="475"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="476" onclick="window.location.hash='#476'"></td><td class="FileContents-lineContents" id="476"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">available </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="477" onclick="window.location.hash='#477'"></td><td class="FileContents-lineContents" id="477"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span><span class="pln">  </span><span class="com">// try again later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="478" onclick="window.location.hash='#478'"></td><td class="FileContents-lineContents" id="478"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="479" onclick="window.location.hash='#479'"></td><td class="FileContents-lineContents" id="479"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="480" onclick="window.location.hash='#480'"></td><td class="FileContents-lineContents" id="480"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="481" onclick="window.location.hash='#481'"></td><td class="FileContents-lineContents" id="481"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="482" onclick="window.location.hash='#482'"></td><td class="FileContents-lineContents" id="482"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="483" onclick="window.location.hash='#483'"></td><td class="FileContents-lineContents" id="483"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="484" onclick="window.location.hash='#484'"></td><td class="FileContents-lineContents" id="484"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="485" onclick="window.location.hash='#485'"></td><td class="FileContents-lineContents" id="485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="486" onclick="window.location.hash='#486'"></td><td class="FileContents-lineContents" id="486"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0A45DFA3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// EBML Header ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="487" onclick="window.location.hash='#487'"></td><td class="FileContents-lineContents" id="487"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="488" onclick="window.location.hash='#488'"></td><td class="FileContents-lineContents" id="488"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="489" onclick="window.location.hash='#489'"></td><td class="FileContents-lineContents" id="489"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="490" onclick="window.location.hash='#490'"></td><td class="FileContents-lineContents" id="490"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="491" onclick="window.location.hash='#491'"></td><td class="FileContents-lineContents" id="491"><span class="pln">    </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// throw away just the 0x1A byte, and try again</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="492" onclick="window.location.hash='#492'"></td><td class="FileContents-lineContents" id="492"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="493" onclick="window.location.hash='#493'"></td><td class="FileContents-lineContents" id="493"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="494" onclick="window.location.hash='#494'"></td><td class="FileContents-lineContents" id="494"><span class="pln">  </span><span class="com">// pos designates start of size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="495" onclick="window.location.hash='#495'"></td><td class="FileContents-lineContents" id="495"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="496" onclick="window.location.hash='#496'"></td><td class="FileContents-lineContents" id="496"><span class="pln">  </span><span class="com">// get length of size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="497" onclick="window.location.hash='#497'"></td><td class="FileContents-lineContents" id="497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="498" onclick="window.location.hash='#498'"></td><td class="FileContents-lineContents" id="498"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="499" onclick="window.location.hash='#499'"></td><td class="FileContents-lineContents" id="499"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="500" onclick="window.location.hash='#500'"></td><td class="FileContents-lineContents" id="500"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="501" onclick="window.location.hash='#501'"></td><td class="FileContents-lineContents" id="501"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="502" onclick="window.location.hash='#502'"></td><td class="FileContents-lineContents" id="502"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="503" onclick="window.location.hash='#503'"></td><td class="FileContents-lineContents" id="503"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="504" onclick="window.location.hash='#504'"></td><td class="FileContents-lineContents" id="504"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// need more data</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="505" onclick="window.location.hash='#505'"></td><td class="FileContents-lineContents" id="505"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="506" onclick="window.location.hash='#506'"></td><td class="FileContents-lineContents" id="506"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="507" onclick="window.location.hash='#507'"></td><td class="FileContents-lineContents" id="507"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="508" onclick="window.location.hash='#508'"></td><td class="FileContents-lineContents" id="508"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">len </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="509" onclick="window.location.hash='#509'"></td><td class="FileContents-lineContents" id="509"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="510" onclick="window.location.hash='#510'"></td><td class="FileContents-lineContents" id="510"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="511" onclick="window.location.hash='#511'"></td><td class="FileContents-lineContents" id="511"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="512" onclick="window.location.hash='#512'"></td><td class="FileContents-lineContents" id="512"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="513" onclick="window.location.hash='#513'"></td><td class="FileContents-lineContents" id="513"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">available </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="514" onclick="window.location.hash='#514'"></td><td class="FileContents-lineContents" id="514"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// try again later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="515" onclick="window.location.hash='#515'"></td><td class="FileContents-lineContents" id="515"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="516" onclick="window.location.hash='#516'"></td><td class="FileContents-lineContents" id="516"><span class="pln">  </span><span class="com">// get the EBML header size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="517" onclick="window.location.hash='#517'"></td><td class="FileContents-lineContents" id="517"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="518" onclick="window.location.hash='#518'"></td><td class="FileContents-lineContents" id="518"><span class="pln">  result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="519" onclick="window.location.hash='#519'"></td><td class="FileContents-lineContents" id="519"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="520" onclick="window.location.hash='#520'"></td><td class="FileContents-lineContents" id="520"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="521" onclick="window.location.hash='#521'"></td><td class="FileContents-lineContents" id="521"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="522" onclick="window.location.hash='#522'"></td><td class="FileContents-lineContents" id="522"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="523" onclick="window.location.hash='#523'"></td><td class="FileContents-lineContents" id="523"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="524" onclick="window.location.hash='#524'"></td><td class="FileContents-lineContents" id="524"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="525" onclick="window.location.hash='#525'"></td><td class="FileContents-lineContents" id="525"><span class="pln">  </span><span class="com">// pos now designates start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="526" onclick="window.location.hash='#526'"></td><td class="FileContents-lineContents" id="526"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="527" onclick="window.location.hash='#527'"></td><td class="FileContents-lineContents" id="527"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> result</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="528" onclick="window.location.hash='#528'"></td><td class="FileContents-lineContents" id="528"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="529" onclick="window.location.hash='#529'"></td><td class="FileContents-lineContents" id="529"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="530" onclick="window.location.hash='#530'"></td><td class="FileContents-lineContents" id="530"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">available </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> result</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="531" onclick="window.location.hash='#531'"></td><td class="FileContents-lineContents" id="531"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="532" onclick="window.location.hash='#532'"></td><td class="FileContents-lineContents" id="532"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="533" onclick="window.location.hash='#533'"></td><td class="FileContents-lineContents" id="533"><span class="pln">  end </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="534" onclick="window.location.hash='#534'"></td><td class="FileContents-lineContents" id="534"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="535" onclick="window.location.hash='#535'"></td><td class="FileContents-lineContents" id="535"><span class="pln">  </span><span class="typ">Init</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="536" onclick="window.location.hash='#536'"></td><td class="FileContents-lineContents" id="536"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="537" onclick="window.location.hash='#537'"></td><td class="FileContents-lineContents" id="537"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="538" onclick="window.location.hash='#538'"></td><td class="FileContents-lineContents" id="538"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="539" onclick="window.location.hash='#539'"></td><td class="FileContents-lineContents" id="539"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="540" onclick="window.location.hash='#540'"></td><td class="FileContents-lineContents" id="540"><span class="pln">    status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> end</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="541" onclick="window.location.hash='#541'"></td><td class="FileContents-lineContents" id="541"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="542" onclick="window.location.hash='#542'"></td><td class="FileContents-lineContents" id="542"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="543" onclick="window.location.hash='#543'"></td><td class="FileContents-lineContents" id="543"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="544" onclick="window.location.hash='#544'"></td><td class="FileContents-lineContents" id="544"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="545" onclick="window.location.hash='#545'"></td><td class="FileContents-lineContents" id="545"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="546" onclick="window.location.hash='#546'"></td><td class="FileContents-lineContents" id="546"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="547" onclick="window.location.hash='#547'"></td><td class="FileContents-lineContents" id="547"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="548" onclick="window.location.hash='#548'"></td><td class="FileContents-lineContents" id="548"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0286</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// version</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="549" onclick="window.location.hash='#549'"></td><td class="FileContents-lineContents" id="549"><span class="pln">      m_version </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="550" onclick="window.location.hash='#550'"></td><td class="FileContents-lineContents" id="550"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="551" onclick="window.location.hash='#551'"></td><td class="FileContents-lineContents" id="551"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_version </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="552" onclick="window.location.hash='#552'"></td><td class="FileContents-lineContents" id="552"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="553" onclick="window.location.hash='#553'"></td><td class="FileContents-lineContents" id="553"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x02F7</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// read version</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="554" onclick="window.location.hash='#554'"></td><td class="FileContents-lineContents" id="554"><span class="pln">      m_readVersion </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="555" onclick="window.location.hash='#555'"></td><td class="FileContents-lineContents" id="555"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="556" onclick="window.location.hash='#556'"></td><td class="FileContents-lineContents" id="556"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_readVersion </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="557" onclick="window.location.hash='#557'"></td><td class="FileContents-lineContents" id="557"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="558" onclick="window.location.hash='#558'"></td><td class="FileContents-lineContents" id="558"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x02F2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// max id length</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="559" onclick="window.location.hash='#559'"></td><td class="FileContents-lineContents" id="559"><span class="pln">      m_maxIdLength </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="560" onclick="window.location.hash='#560'"></td><td class="FileContents-lineContents" id="560"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="561" onclick="window.location.hash='#561'"></td><td class="FileContents-lineContents" id="561"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_maxIdLength </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="562" onclick="window.location.hash='#562'"></td><td class="FileContents-lineContents" id="562"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="563" onclick="window.location.hash='#563'"></td><td class="FileContents-lineContents" id="563"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x02F3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// max size length</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="564" onclick="window.location.hash='#564'"></td><td class="FileContents-lineContents" id="564"><span class="pln">      m_maxSizeLength </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="565" onclick="window.location.hash='#565'"></td><td class="FileContents-lineContents" id="565"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="566" onclick="window.location.hash='#566'"></td><td class="FileContents-lineContents" id="566"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_maxSizeLength </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="567" onclick="window.location.hash='#567'"></td><td class="FileContents-lineContents" id="567"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="568" onclick="window.location.hash='#568'"></td><td class="FileContents-lineContents" id="568"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0282</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// doctype</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="569" onclick="window.location.hash='#569'"></td><td class="FileContents-lineContents" id="569"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_docType</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="570" onclick="window.location.hash='#570'"></td><td class="FileContents-lineContents" id="570"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="571" onclick="window.location.hash='#571'"></td><td class="FileContents-lineContents" id="571"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="572" onclick="window.location.hash='#572'"></td><td class="FileContents-lineContents" id="572"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_docType</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="573" onclick="window.location.hash='#573'"></td><td class="FileContents-lineContents" id="573"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="574" onclick="window.location.hash='#574'"></td><td class="FileContents-lineContents" id="574"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="575" onclick="window.location.hash='#575'"></td><td class="FileContents-lineContents" id="575"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="576" onclick="window.location.hash='#576'"></td><td class="FileContents-lineContents" id="576"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0287</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// doctype version</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="577" onclick="window.location.hash='#577'"></td><td class="FileContents-lineContents" id="577"><span class="pln">      m_docTypeVersion </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="578" onclick="window.location.hash='#578'"></td><td class="FileContents-lineContents" id="578"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="579" onclick="window.location.hash='#579'"></td><td class="FileContents-lineContents" id="579"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_docTypeVersion </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="580" onclick="window.location.hash='#580'"></td><td class="FileContents-lineContents" id="580"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="581" onclick="window.location.hash='#581'"></td><td class="FileContents-lineContents" id="581"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0285</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// doctype read version</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="582" onclick="window.location.hash='#582'"></td><td class="FileContents-lineContents" id="582"><span class="pln">      m_docTypeReadVersion </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="583" onclick="window.location.hash='#583'"></td><td class="FileContents-lineContents" id="583"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="584" onclick="window.location.hash='#584'"></td><td class="FileContents-lineContents" id="584"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_docTypeReadVersion </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="585" onclick="window.location.hash='#585'"></td><td class="FileContents-lineContents" id="585"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="586" onclick="window.location.hash='#586'"></td><td class="FileContents-lineContents" id="586"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="587" onclick="window.location.hash='#587'"></td><td class="FileContents-lineContents" id="587"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="588" onclick="window.location.hash='#588'"></td><td class="FileContents-lineContents" id="588"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="589" onclick="window.location.hash='#589'"></td><td class="FileContents-lineContents" id="589"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="590" onclick="window.location.hash='#590'"></td><td class="FileContents-lineContents" id="590"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="591" onclick="window.location.hash='#591'"></td><td class="FileContents-lineContents" id="591"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="592" onclick="window.location.hash='#592'"></td><td class="FileContents-lineContents" id="592"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="593" onclick="window.location.hash='#593'"></td><td class="FileContents-lineContents" id="593"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="594" onclick="window.location.hash='#594'"></td><td class="FileContents-lineContents" id="594"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="595" onclick="window.location.hash='#595'"></td><td class="FileContents-lineContents" id="595"><span class="typ">Segment</span><span class="pun">::</span><span class="typ">Segment</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> elem_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="596" onclick="window.location.hash='#596'"></td><td class="FileContents-lineContents" id="596"><span class="pln">                 </span><span class="com">// long long elem_size,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="597" onclick="window.location.hash='#597'"></td><td class="FileContents-lineContents" id="597"><span class="pln">                 </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="598" onclick="window.location.hash='#598'"></td><td class="FileContents-lineContents" id="598"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pReader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="599" onclick="window.location.hash='#599'"></td><td class="FileContents-lineContents" id="599"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">elem_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="600" onclick="window.location.hash='#600'"></td><td class="FileContents-lineContents" id="600"><span class="pln">      </span><span class="com">// m_element_size(elem_size),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="601" onclick="window.location.hash='#601'"></td><td class="FileContents-lineContents" id="601"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="602" onclick="window.location.hash='#602'"></td><td class="FileContents-lineContents" id="602"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="603" onclick="window.location.hash='#603'"></td><td class="FileContents-lineContents" id="603"><span class="pln">      m_pos</span><span class="pun">(</span><span class="pln">start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="604" onclick="window.location.hash='#604'"></td><td class="FileContents-lineContents" id="604"><span class="pln">      m_pUnknownSize</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="605" onclick="window.location.hash='#605'"></td><td class="FileContents-lineContents" id="605"><span class="pln">      m_pSeekHead</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="606" onclick="window.location.hash='#606'"></td><td class="FileContents-lineContents" id="606"><span class="pln">      m_pInfo</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="607" onclick="window.location.hash='#607'"></td><td class="FileContents-lineContents" id="607"><span class="pln">      m_pTracks</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="608" onclick="window.location.hash='#608'"></td><td class="FileContents-lineContents" id="608"><span class="pln">      m_pCues</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="609" onclick="window.location.hash='#609'"></td><td class="FileContents-lineContents" id="609"><span class="pln">      m_pChapters</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="610" onclick="window.location.hash='#610'"></td><td class="FileContents-lineContents" id="610"><span class="pln">      m_pTags</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="611" onclick="window.location.hash='#611'"></td><td class="FileContents-lineContents" id="611"><span class="pln">      m_clusters</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="612" onclick="window.location.hash='#612'"></td><td class="FileContents-lineContents" id="612"><span class="pln">      m_clusterCount</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="613" onclick="window.location.hash='#613'"></td><td class="FileContents-lineContents" id="613"><span class="pln">      m_clusterPreloadCount</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="614" onclick="window.location.hash='#614'"></td><td class="FileContents-lineContents" id="614"><span class="pln">      m_clusterSize</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="615" onclick="window.location.hash='#615'"></td><td class="FileContents-lineContents" id="615"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="616" onclick="window.location.hash='#616'"></td><td class="FileContents-lineContents" id="616"><span class="typ">Segment</span><span class="pun">::~</span><span class="typ">Segment</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="617" onclick="window.location.hash='#617'"></td><td class="FileContents-lineContents" id="617"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_clusterCount </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="618" onclick="window.location.hash='#618'"></td><td class="FileContents-lineContents" id="618"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="619" onclick="window.location.hash='#619'"></td><td class="FileContents-lineContents" id="619"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="620" onclick="window.location.hash='#620'"></td><td class="FileContents-lineContents" id="620"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> m_clusters </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="621" onclick="window.location.hash='#621'"></td><td class="FileContents-lineContents" id="621"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="622" onclick="window.location.hash='#622'"></td><td class="FileContents-lineContents" id="622"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="623" onclick="window.location.hash='#623'"></td><td class="FileContents-lineContents" id="623"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="624" onclick="window.location.hash='#624'"></td><td class="FileContents-lineContents" id="624"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">p</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="625" onclick="window.location.hash='#625'"></td><td class="FileContents-lineContents" id="625"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="626" onclick="window.location.hash='#626'"></td><td class="FileContents-lineContents" id="626"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> p</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="627" onclick="window.location.hash='#627'"></td><td class="FileContents-lineContents" id="627"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="628" onclick="window.location.hash='#628'"></td><td class="FileContents-lineContents" id="628"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="629" onclick="window.location.hash='#629'"></td><td class="FileContents-lineContents" id="629"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="630" onclick="window.location.hash='#630'"></td><td class="FileContents-lineContents" id="630"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="631" onclick="window.location.hash='#631'"></td><td class="FileContents-lineContents" id="631"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> m_pTracks</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="632" onclick="window.location.hash='#632'"></td><td class="FileContents-lineContents" id="632"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> m_pInfo</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="633" onclick="window.location.hash='#633'"></td><td class="FileContents-lineContents" id="633"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> m_pCues</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="634" onclick="window.location.hash='#634'"></td><td class="FileContents-lineContents" id="634"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> m_pChapters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="635" onclick="window.location.hash='#635'"></td><td class="FileContents-lineContents" id="635"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> m_pTags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="636" onclick="window.location.hash='#636'"></td><td class="FileContents-lineContents" id="636"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> m_pSeekHead</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="637" onclick="window.location.hash='#637'"></td><td class="FileContents-lineContents" id="637"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="638" onclick="window.location.hash='#638'"></td><td class="FileContents-lineContents" id="638"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="639" onclick="window.location.hash='#639'"></td><td class="FileContents-lineContents" id="639"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">CreateInstance</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="640" onclick="window.location.hash='#640'"></td><td class="FileContents-lineContents" id="640"><span class="pln">                                  </span><span class="typ">Segment</span><span class="pun">*&amp;</span><span class="pln"> pSegment</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="641" onclick="window.location.hash='#641'"></td><td class="FileContents-lineContents" id="641"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="642" onclick="window.location.hash='#642'"></td><td class="FileContents-lineContents" id="642"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="643" onclick="window.location.hash='#643'"></td><td class="FileContents-lineContents" id="643"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="644" onclick="window.location.hash='#644'"></td><td class="FileContents-lineContents" id="644"><span class="pln">  pSegment </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="645" onclick="window.location.hash='#645'"></td><td class="FileContents-lineContents" id="645"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="646" onclick="window.location.hash='#646'"></td><td class="FileContents-lineContents" id="646"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="647" onclick="window.location.hash='#647'"></td><td class="FileContents-lineContents" id="647"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="648" onclick="window.location.hash='#648'"></td><td class="FileContents-lineContents" id="648"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="649" onclick="window.location.hash='#649'"></td><td class="FileContents-lineContents" id="649"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="650" onclick="window.location.hash='#650'"></td><td class="FileContents-lineContents" id="650"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="651" onclick="window.location.hash='#651'"></td><td class="FileContents-lineContents" id="651"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="652" onclick="window.location.hash='#652'"></td><td class="FileContents-lineContents" id="652"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="653" onclick="window.location.hash='#653'"></td><td class="FileContents-lineContents" id="653"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="654" onclick="window.location.hash='#654'"></td><td class="FileContents-lineContents" id="654"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="655" onclick="window.location.hash='#655'"></td><td class="FileContents-lineContents" id="655"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="656" onclick="window.location.hash='#656'"></td><td class="FileContents-lineContents" id="656"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="657" onclick="window.location.hash='#657'"></td><td class="FileContents-lineContents" id="657"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="658" onclick="window.location.hash='#658'"></td><td class="FileContents-lineContents" id="658"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="659" onclick="window.location.hash='#659'"></td><td class="FileContents-lineContents" id="659"><span class="pln">  </span><span class="com">// I would assume that in practice this loop would execute</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="660" onclick="window.location.hash='#660'"></td><td class="FileContents-lineContents" id="660"><span class="pln">  </span><span class="com">// exactly once, but we allow for other elements (e.g. Void)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="661" onclick="window.location.hash='#661'"></td><td class="FileContents-lineContents" id="661"><span class="pln">  </span><span class="com">// to immediately follow the EBML header.  This is fine for</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="662" onclick="window.location.hash='#662'"></td><td class="FileContents-lineContents" id="662"><span class="pln">  </span><span class="com">// the source filter case (since the entire file is available),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="663" onclick="window.location.hash='#663'"></td><td class="FileContents-lineContents" id="663"><span class="pln">  </span><span class="com">// but in the splitter case over a network we should probably</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="664" onclick="window.location.hash='#664'"></td><td class="FileContents-lineContents" id="664"><span class="pln">  </span><span class="com">// just give up early.  We could for example decide only to</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="665" onclick="window.location.hash='#665'"></td><td class="FileContents-lineContents" id="665"><span class="pln">  </span><span class="com">// execute this loop a maximum of, say, 10 times.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="666" onclick="window.location.hash='#666'"></td><td class="FileContents-lineContents" id="666"><span class="pln">  </span><span class="com">// TODO:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="667" onclick="window.location.hash='#667'"></td><td class="FileContents-lineContents" id="667"><span class="pln">  </span><span class="com">// There is an implied &quot;give up early&quot; by only parsing up</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="668" onclick="window.location.hash='#668'"></td><td class="FileContents-lineContents" id="668"><span class="pln">  </span><span class="com">// to the available limit.  We do do that, but only if the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="669" onclick="window.location.hash='#669'"></td><td class="FileContents-lineContents" id="669"><span class="pln">  </span><span class="com">// total file size is unknown.  We could decide to always</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="670" onclick="window.location.hash='#670'"></td><td class="FileContents-lineContents" id="670"><span class="pln">  </span><span class="com">// use what&#39;s available as our limit (irrespective of whether</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="671" onclick="window.location.hash='#671'"></td><td class="FileContents-lineContents" id="671"><span class="pln">  </span><span class="com">// we happen to know the total file length).  This would have</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="672" onclick="window.location.hash='#672'"></td><td class="FileContents-lineContents" id="672"><span class="pln">  </span><span class="com">// as its sense &quot;parse this much of the file before giving up&quot;,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="673" onclick="window.location.hash='#673'"></td><td class="FileContents-lineContents" id="673"><span class="pln">  </span><span class="com">// which a slightly different sense from &quot;try to parse up to</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="674" onclick="window.location.hash='#674'"></td><td class="FileContents-lineContents" id="674"><span class="pln">  </span><span class="com">// 10 EMBL elements before giving up&quot;.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="675" onclick="window.location.hash='#675'"></td><td class="FileContents-lineContents" id="675"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="676" onclick="window.location.hash='#676'"></td><td class="FileContents-lineContents" id="676"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="677" onclick="window.location.hash='#677'"></td><td class="FileContents-lineContents" id="677"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="678" onclick="window.location.hash='#678'"></td><td class="FileContents-lineContents" id="678"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="679" onclick="window.location.hash='#679'"></td><td class="FileContents-lineContents" id="679"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="680" onclick="window.location.hash='#680'"></td><td class="FileContents-lineContents" id="680"><span class="pln">    </span><span class="com">// Read ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="681" onclick="window.location.hash='#681'"></td><td class="FileContents-lineContents" id="681"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="682" onclick="window.location.hash='#682'"></td><td class="FileContents-lineContents" id="682"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="683" onclick="window.location.hash='#683'"></td><td class="FileContents-lineContents" id="683"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="684" onclick="window.location.hash='#684'"></td><td class="FileContents-lineContents" id="684"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error, or too few available bytes</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="685" onclick="window.location.hash='#685'"></td><td class="FileContents-lineContents" id="685"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="686" onclick="window.location.hash='#686'"></td><td class="FileContents-lineContents" id="686"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="687" onclick="window.location.hash='#687'"></td><td class="FileContents-lineContents" id="687"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="688" onclick="window.location.hash='#688'"></td><td class="FileContents-lineContents" id="688"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="689" onclick="window.location.hash='#689'"></td><td class="FileContents-lineContents" id="689"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="690" onclick="window.location.hash='#690'"></td><td class="FileContents-lineContents" id="690"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="691" onclick="window.location.hash='#691'"></td><td class="FileContents-lineContents" id="691"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="692" onclick="window.location.hash='#692'"></td><td class="FileContents-lineContents" id="692"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="693" onclick="window.location.hash='#693'"></td><td class="FileContents-lineContents" id="693"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="694" onclick="window.location.hash='#694'"></td><td class="FileContents-lineContents" id="694"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="695" onclick="window.location.hash='#695'"></td><td class="FileContents-lineContents" id="695"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="696" onclick="window.location.hash='#696'"></td><td class="FileContents-lineContents" id="696"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="697" onclick="window.location.hash='#697'"></td><td class="FileContents-lineContents" id="697"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> id</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="698" onclick="window.location.hash='#698'"></td><td class="FileContents-lineContents" id="698"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="699" onclick="window.location.hash='#699'"></td><td class="FileContents-lineContents" id="699"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="700" onclick="window.location.hash='#700'"></td><td class="FileContents-lineContents" id="700"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="701" onclick="window.location.hash='#701'"></td><td class="FileContents-lineContents" id="701"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="702" onclick="window.location.hash='#702'"></td><td class="FileContents-lineContents" id="702"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="703" onclick="window.location.hash='#703'"></td><td class="FileContents-lineContents" id="703"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="704" onclick="window.location.hash='#704'"></td><td class="FileContents-lineContents" id="704"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="705" onclick="window.location.hash='#705'"></td><td class="FileContents-lineContents" id="705"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error, or too few available bytes</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="706" onclick="window.location.hash='#706'"></td><td class="FileContents-lineContents" id="706"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="707" onclick="window.location.hash='#707'"></td><td class="FileContents-lineContents" id="707"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="708" onclick="window.location.hash='#708'"></td><td class="FileContents-lineContents" id="708"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="709" onclick="window.location.hash='#709'"></td><td class="FileContents-lineContents" id="709"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="710" onclick="window.location.hash='#710'"></td><td class="FileContents-lineContents" id="710"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="711" onclick="window.location.hash='#711'"></td><td class="FileContents-lineContents" id="711"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="712" onclick="window.location.hash='#712'"></td><td class="FileContents-lineContents" id="712"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="713" onclick="window.location.hash='#713'"></td><td class="FileContents-lineContents" id="713"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="714" onclick="window.location.hash='#714'"></td><td class="FileContents-lineContents" id="714"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="715" onclick="window.location.hash='#715'"></td><td class="FileContents-lineContents" id="715"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="716" onclick="window.location.hash='#716'"></td><td class="FileContents-lineContents" id="716"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="717" onclick="window.location.hash='#717'"></td><td class="FileContents-lineContents" id="717"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="718" onclick="window.location.hash='#718'"></td><td class="FileContents-lineContents" id="718"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="719" onclick="window.location.hash='#719'"></td><td class="FileContents-lineContents" id="719"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="720" onclick="window.location.hash='#720'"></td><td class="FileContents-lineContents" id="720"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="721" onclick="window.location.hash='#721'"></td><td class="FileContents-lineContents" id="721"><span class="pln">    </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="722" onclick="window.location.hash='#722'"></td><td class="FileContents-lineContents" id="722"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="723" onclick="window.location.hash='#723'"></td><td class="FileContents-lineContents" id="723"><span class="pln">    </span><span class="com">// Handle &quot;unknown size&quot; for live streaming of webm files.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="724" onclick="window.location.hash='#724'"></td><td class="FileContents-lineContents" id="724"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="725" onclick="window.location.hash='#725'"></td><td class="FileContents-lineContents" id="725"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="726" onclick="window.location.hash='#726'"></td><td class="FileContents-lineContents" id="726"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x08538067</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Segment ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="727" onclick="window.location.hash='#727'"></td><td class="FileContents-lineContents" id="727"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="728" onclick="window.location.hash='#728'"></td><td class="FileContents-lineContents" id="728"><span class="pln">        size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="729" onclick="window.location.hash='#729'"></td><td class="FileContents-lineContents" id="729"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="730" onclick="window.location.hash='#730'"></td><td class="FileContents-lineContents" id="730"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="731" onclick="window.location.hash='#731'"></td><td class="FileContents-lineContents" id="731"><span class="pln">        size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="732" onclick="window.location.hash='#732'"></td><td class="FileContents-lineContents" id="732"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="733" onclick="window.location.hash='#733'"></td><td class="FileContents-lineContents" id="733"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="734" onclick="window.location.hash='#734'"></td><td class="FileContents-lineContents" id="734"><span class="pln">        size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="735" onclick="window.location.hash='#735'"></td><td class="FileContents-lineContents" id="735"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="736" onclick="window.location.hash='#736'"></td><td class="FileContents-lineContents" id="736"><span class="pln">      pSegment </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="737" onclick="window.location.hash='#737'"></td><td class="FileContents-lineContents" id="737"><span class="pln">                                            </span><span class="com">// elem_size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="738" onclick="window.location.hash='#738'"></td><td class="FileContents-lineContents" id="738"><span class="pln">                                            pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="739" onclick="window.location.hash='#739'"></td><td class="FileContents-lineContents" id="739"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="740" onclick="window.location.hash='#740'"></td><td class="FileContents-lineContents" id="740"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pSegment </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="741" onclick="window.location.hash='#741'"></td><td class="FileContents-lineContents" id="741"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="742" onclick="window.location.hash='#742'"></td><td class="FileContents-lineContents" id="742"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="743" onclick="window.location.hash='#743'"></td><td class="FileContents-lineContents" id="743"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="744" onclick="window.location.hash='#744'"></td><td class="FileContents-lineContents" id="744"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="745" onclick="window.location.hash='#745'"></td><td class="FileContents-lineContents" id="745"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="746" onclick="window.location.hash='#746'"></td><td class="FileContents-lineContents" id="746"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="747" onclick="window.location.hash='#747'"></td><td class="FileContents-lineContents" id="747"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="748" onclick="window.location.hash='#748'"></td><td class="FileContents-lineContents" id="748"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="749" onclick="window.location.hash='#749'"></td><td class="FileContents-lineContents" id="749"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="750" onclick="window.location.hash='#750'"></td><td class="FileContents-lineContents" id="750"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="751" onclick="window.location.hash='#751'"></td><td class="FileContents-lineContents" id="751"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="752" onclick="window.location.hash='#752'"></td><td class="FileContents-lineContents" id="752"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="753" onclick="window.location.hash='#753'"></td><td class="FileContents-lineContents" id="753"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="754" onclick="window.location.hash='#754'"></td><td class="FileContents-lineContents" id="754"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="755" onclick="window.location.hash='#755'"></td><td class="FileContents-lineContents" id="755"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="756" onclick="window.location.hash='#756'"></td><td class="FileContents-lineContents" id="756"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="757" onclick="window.location.hash='#757'"></td><td class="FileContents-lineContents" id="757"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="758" onclick="window.location.hash='#758'"></td><td class="FileContents-lineContents" id="758"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="759" onclick="window.location.hash='#759'"></td><td class="FileContents-lineContents" id="759"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">ParseHeaders</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="760" onclick="window.location.hash='#760'"></td><td class="FileContents-lineContents" id="760"><span class="pln">  </span><span class="com">// Outermost (level 0) segment object has been constructed,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="761" onclick="window.location.hash='#761'"></td><td class="FileContents-lineContents" id="761"><span class="pln">  </span><span class="com">// and pos designates start of payload.  We need to find the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="762" onclick="window.location.hash='#762'"></td><td class="FileContents-lineContents" id="762"><span class="pln">  </span><span class="com">// inner (level 1) elements.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="763" onclick="window.location.hash='#763'"></td><td class="FileContents-lineContents" id="763"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> available</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="764" onclick="window.location.hash='#764'"></td><td class="FileContents-lineContents" id="764"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="765" onclick="window.location.hash='#765'"></td><td class="FileContents-lineContents" id="765"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">available</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="766" onclick="window.location.hash='#766'"></td><td class="FileContents-lineContents" id="766"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="767" onclick="window.location.hash='#767'"></td><td class="FileContents-lineContents" id="767"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="768" onclick="window.location.hash='#768'"></td><td class="FileContents-lineContents" id="768"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="769" onclick="window.location.hash='#769'"></td><td class="FileContents-lineContents" id="769"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="770" onclick="window.location.hash='#770'"></td><td class="FileContents-lineContents" id="770"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">available </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="771" onclick="window.location.hash='#771'"></td><td class="FileContents-lineContents" id="771"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="772" onclick="window.location.hash='#772'"></td><td class="FileContents-lineContents" id="772"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> segment_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="773" onclick="window.location.hash='#773'"></td><td class="FileContents-lineContents" id="773"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">segment_stop </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="774" onclick="window.location.hash='#774'"></td><td class="FileContents-lineContents" id="774"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="775" onclick="window.location.hash='#775'"></td><td class="FileContents-lineContents" id="775"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="776" onclick="window.location.hash='#776'"></td><td class="FileContents-lineContents" id="776"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="777" onclick="window.location.hash='#777'"></td><td class="FileContents-lineContents" id="777"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="778" onclick="window.location.hash='#778'"></td><td class="FileContents-lineContents" id="778"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="779" onclick="window.location.hash='#779'"></td><td class="FileContents-lineContents" id="779"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="780" onclick="window.location.hash='#780'"></td><td class="FileContents-lineContents" id="780"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="781" onclick="window.location.hash='#781'"></td><td class="FileContents-lineContents" id="781"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="782" onclick="window.location.hash='#782'"></td><td class="FileContents-lineContents" id="782"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="783" onclick="window.location.hash='#783'"></td><td class="FileContents-lineContents" id="783"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="784" onclick="window.location.hash='#784'"></td><td class="FileContents-lineContents" id="784"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="785" onclick="window.location.hash='#785'"></td><td class="FileContents-lineContents" id="785"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="786" onclick="window.location.hash='#786'"></td><td class="FileContents-lineContents" id="786"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="787" onclick="window.location.hash='#787'"></td><td class="FileContents-lineContents" id="787"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="788" onclick="window.location.hash='#788'"></td><td class="FileContents-lineContents" id="788"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="789" onclick="window.location.hash='#789'"></td><td class="FileContents-lineContents" id="789"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="790" onclick="window.location.hash='#790'"></td><td class="FileContents-lineContents" id="790"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="791" onclick="window.location.hash='#791'"></td><td class="FileContents-lineContents" id="791"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="792" onclick="window.location.hash='#792'"></td><td class="FileContents-lineContents" id="792"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="793" onclick="window.location.hash='#793'"></td><td class="FileContents-lineContents" id="793"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="794" onclick="window.location.hash='#794'"></td><td class="FileContents-lineContents" id="794"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="795" onclick="window.location.hash='#795'"></td><td class="FileContents-lineContents" id="795"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow (weird)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="796" onclick="window.location.hash='#796'"></td><td class="FileContents-lineContents" id="796"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="797" onclick="window.location.hash='#797'"></td><td class="FileContents-lineContents" id="797"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="798" onclick="window.location.hash='#798'"></td><td class="FileContents-lineContents" id="798"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="799" onclick="window.location.hash='#799'"></td><td class="FileContents-lineContents" id="799"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="800" onclick="window.location.hash='#800'"></td><td class="FileContents-lineContents" id="800"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="801" onclick="window.location.hash='#801'"></td><td class="FileContents-lineContents" id="801"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="802" onclick="window.location.hash='#802'"></td><td class="FileContents-lineContents" id="802"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="803" onclick="window.location.hash='#803'"></td><td class="FileContents-lineContents" id="803"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="804" onclick="window.location.hash='#804'"></td><td class="FileContents-lineContents" id="804"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="805" onclick="window.location.hash='#805'"></td><td class="FileContents-lineContents" id="805"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="806" onclick="window.location.hash='#806'"></td><td class="FileContents-lineContents" id="806"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="807" onclick="window.location.hash='#807'"></td><td class="FileContents-lineContents" id="807"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="808" onclick="window.location.hash='#808'"></td><td class="FileContents-lineContents" id="808"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> id</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="809" onclick="window.location.hash='#809'"></td><td class="FileContents-lineContents" id="809"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="810" onclick="window.location.hash='#810'"></td><td class="FileContents-lineContents" id="810"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="811" onclick="window.location.hash='#811'"></td><td class="FileContents-lineContents" id="811"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="812" onclick="window.location.hash='#812'"></td><td class="FileContents-lineContents" id="812"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="813" onclick="window.location.hash='#813'"></td><td class="FileContents-lineContents" id="813"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="814" onclick="window.location.hash='#814'"></td><td class="FileContents-lineContents" id="814"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="815" onclick="window.location.hash='#815'"></td><td class="FileContents-lineContents" id="815"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="816" onclick="window.location.hash='#816'"></td><td class="FileContents-lineContents" id="816"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="817" onclick="window.location.hash='#817'"></td><td class="FileContents-lineContents" id="817"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="818" onclick="window.location.hash='#818'"></td><td class="FileContents-lineContents" id="818"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="819" onclick="window.location.hash='#819'"></td><td class="FileContents-lineContents" id="819"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="820" onclick="window.location.hash='#820'"></td><td class="FileContents-lineContents" id="820"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="821" onclick="window.location.hash='#821'"></td><td class="FileContents-lineContents" id="821"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="822" onclick="window.location.hash='#822'"></td><td class="FileContents-lineContents" id="822"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="823" onclick="window.location.hash='#823'"></td><td class="FileContents-lineContents" id="823"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="824" onclick="window.location.hash='#824'"></td><td class="FileContents-lineContents" id="824"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow (weird)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="825" onclick="window.location.hash='#825'"></td><td class="FileContents-lineContents" id="825"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="826" onclick="window.location.hash='#826'"></td><td class="FileContents-lineContents" id="826"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="827" onclick="window.location.hash='#827'"></td><td class="FileContents-lineContents" id="827"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="828" onclick="window.location.hash='#828'"></td><td class="FileContents-lineContents" id="828"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="829" onclick="window.location.hash='#829'"></td><td class="FileContents-lineContents" id="829"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="830" onclick="window.location.hash='#830'"></td><td class="FileContents-lineContents" id="830"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="831" onclick="window.location.hash='#831'"></td><td class="FileContents-lineContents" id="831"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="832" onclick="window.location.hash='#832'"></td><td class="FileContents-lineContents" id="832"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="833" onclick="window.location.hash='#833'"></td><td class="FileContents-lineContents" id="833"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="834" onclick="window.location.hash='#834'"></td><td class="FileContents-lineContents" id="834"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="835" onclick="window.location.hash='#835'"></td><td class="FileContents-lineContents" id="835"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="836" onclick="window.location.hash='#836'"></td><td class="FileContents-lineContents" id="836"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="837" onclick="window.location.hash='#837'"></td><td class="FileContents-lineContents" id="837"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="838" onclick="window.location.hash='#838'"></td><td class="FileContents-lineContents" id="838"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="839" onclick="window.location.hash='#839'"></td><td class="FileContents-lineContents" id="839"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="840" onclick="window.location.hash='#840'"></td><td class="FileContents-lineContents" id="840"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> size </span><span class="pun">+</span><span class="pln"> pos </span><span class="pun">-</span><span class="pln"> element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="841" onclick="window.location.hash='#841'"></td><td class="FileContents-lineContents" id="841"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="842" onclick="window.location.hash='#842'"></td><td class="FileContents-lineContents" id="842"><span class="pln">    </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="843" onclick="window.location.hash='#843'"></td><td class="FileContents-lineContents" id="843"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="844" onclick="window.location.hash='#844'"></td><td class="FileContents-lineContents" id="844"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="845" onclick="window.location.hash='#845'"></td><td class="FileContents-lineContents" id="845"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="846" onclick="window.location.hash='#846'"></td><td class="FileContents-lineContents" id="846"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="847" onclick="window.location.hash='#847'"></td><td class="FileContents-lineContents" id="847"><span class="pln">    </span><span class="com">// We read EBML elements either in total or nothing at all.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="848" onclick="window.location.hash='#848'"></td><td class="FileContents-lineContents" id="848"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="849" onclick="window.location.hash='#849'"></td><td class="FileContents-lineContents" id="849"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> available</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="850" onclick="window.location.hash='#850'"></td><td class="FileContents-lineContents" id="850"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="851" onclick="window.location.hash='#851'"></td><td class="FileContents-lineContents" id="851"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="852" onclick="window.location.hash='#852'"></td><td class="FileContents-lineContents" id="852"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0549A966</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Segment Info ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="853" onclick="window.location.hash='#853'"></td><td class="FileContents-lineContents" id="853"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pInfo</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="854" onclick="window.location.hash='#854'"></td><td class="FileContents-lineContents" id="854"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="855" onclick="window.location.hash='#855'"></td><td class="FileContents-lineContents" id="855"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="856" onclick="window.location.hash='#856'"></td><td class="FileContents-lineContents" id="856"><span class="pln">      m_pInfo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="857" onclick="window.location.hash='#857'"></td><td class="FileContents-lineContents" id="857"><span class="pln">          </span><span class="typ">SegmentInfo</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="858" onclick="window.location.hash='#858'"></td><td class="FileContents-lineContents" id="858"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="859" onclick="window.location.hash='#859'"></td><td class="FileContents-lineContents" id="859"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pInfo </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="860" onclick="window.location.hash='#860'"></td><td class="FileContents-lineContents" id="860"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="861" onclick="window.location.hash='#861'"></td><td class="FileContents-lineContents" id="861"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="862" onclick="window.location.hash='#862'"></td><td class="FileContents-lineContents" id="862"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pInfo</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="863" onclick="window.location.hash='#863'"></td><td class="FileContents-lineContents" id="863"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="864" onclick="window.location.hash='#864'"></td><td class="FileContents-lineContents" id="864"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="865" onclick="window.location.hash='#865'"></td><td class="FileContents-lineContents" id="865"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="866" onclick="window.location.hash='#866'"></td><td class="FileContents-lineContents" id="866"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0654AE6B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Tracks ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="867" onclick="window.location.hash='#867'"></td><td class="FileContents-lineContents" id="867"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pTracks</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="868" onclick="window.location.hash='#868'"></td><td class="FileContents-lineContents" id="868"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="869" onclick="window.location.hash='#869'"></td><td class="FileContents-lineContents" id="869"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="870" onclick="window.location.hash='#870'"></td><td class="FileContents-lineContents" id="870"><span class="pln">      m_pTracks </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="871" onclick="window.location.hash='#871'"></td><td class="FileContents-lineContents" id="871"><span class="pln">          </span><span class="typ">Tracks</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="872" onclick="window.location.hash='#872'"></td><td class="FileContents-lineContents" id="872"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="873" onclick="window.location.hash='#873'"></td><td class="FileContents-lineContents" id="873"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pTracks </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="874" onclick="window.location.hash='#874'"></td><td class="FileContents-lineContents" id="874"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="875" onclick="window.location.hash='#875'"></td><td class="FileContents-lineContents" id="875"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="876" onclick="window.location.hash='#876'"></td><td class="FileContents-lineContents" id="876"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pTracks</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="877" onclick="window.location.hash='#877'"></td><td class="FileContents-lineContents" id="877"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="878" onclick="window.location.hash='#878'"></td><td class="FileContents-lineContents" id="878"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="879" onclick="window.location.hash='#879'"></td><td class="FileContents-lineContents" id="879"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="880" onclick="window.location.hash='#880'"></td><td class="FileContents-lineContents" id="880"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="881" onclick="window.location.hash='#881'"></td><td class="FileContents-lineContents" id="881"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pCues </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="882" onclick="window.location.hash='#882'"></td><td class="FileContents-lineContents" id="882"><span class="pln">        m_pCues </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="883" onclick="window.location.hash='#883'"></td><td class="FileContents-lineContents" id="883"><span class="pln">            </span><span class="typ">Cues</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="884" onclick="window.location.hash='#884'"></td><td class="FileContents-lineContents" id="884"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="885" onclick="window.location.hash='#885'"></td><td class="FileContents-lineContents" id="885"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pCues </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="886" onclick="window.location.hash='#886'"></td><td class="FileContents-lineContents" id="886"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="887" onclick="window.location.hash='#887'"></td><td class="FileContents-lineContents" id="887"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="888" onclick="window.location.hash='#888'"></td><td class="FileContents-lineContents" id="888"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x014D9B74</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// SeekHead ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="889" onclick="window.location.hash='#889'"></td><td class="FileContents-lineContents" id="889"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pSeekHead </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="890" onclick="window.location.hash='#890'"></td><td class="FileContents-lineContents" id="890"><span class="pln">        m_pSeekHead </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="891" onclick="window.location.hash='#891'"></td><td class="FileContents-lineContents" id="891"><span class="pln">            </span><span class="typ">SeekHead</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="892" onclick="window.location.hash='#892'"></td><td class="FileContents-lineContents" id="892"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="893" onclick="window.location.hash='#893'"></td><td class="FileContents-lineContents" id="893"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pSeekHead </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="894" onclick="window.location.hash='#894'"></td><td class="FileContents-lineContents" id="894"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="895" onclick="window.location.hash='#895'"></td><td class="FileContents-lineContents" id="895"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="896" onclick="window.location.hash='#896'"></td><td class="FileContents-lineContents" id="896"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pSeekHead</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="897" onclick="window.location.hash='#897'"></td><td class="FileContents-lineContents" id="897"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="898" onclick="window.location.hash='#898'"></td><td class="FileContents-lineContents" id="898"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="899" onclick="window.location.hash='#899'"></td><td class="FileContents-lineContents" id="899"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="900" onclick="window.location.hash='#900'"></td><td class="FileContents-lineContents" id="900"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="901" onclick="window.location.hash='#901'"></td><td class="FileContents-lineContents" id="901"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0043A770</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Chapters ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="902" onclick="window.location.hash='#902'"></td><td class="FileContents-lineContents" id="902"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pChapters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="903" onclick="window.location.hash='#903'"></td><td class="FileContents-lineContents" id="903"><span class="pln">        m_pChapters </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="904" onclick="window.location.hash='#904'"></td><td class="FileContents-lineContents" id="904"><span class="pln">            </span><span class="typ">Chapters</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="905" onclick="window.location.hash='#905'"></td><td class="FileContents-lineContents" id="905"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="906" onclick="window.location.hash='#906'"></td><td class="FileContents-lineContents" id="906"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pChapters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="907" onclick="window.location.hash='#907'"></td><td class="FileContents-lineContents" id="907"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="908" onclick="window.location.hash='#908'"></td><td class="FileContents-lineContents" id="908"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="909" onclick="window.location.hash='#909'"></td><td class="FileContents-lineContents" id="909"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pChapters</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="910" onclick="window.location.hash='#910'"></td><td class="FileContents-lineContents" id="910"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="911" onclick="window.location.hash='#911'"></td><td class="FileContents-lineContents" id="911"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="912" onclick="window.location.hash='#912'"></td><td class="FileContents-lineContents" id="912"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="913" onclick="window.location.hash='#913'"></td><td class="FileContents-lineContents" id="913"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="914" onclick="window.location.hash='#914'"></td><td class="FileContents-lineContents" id="914"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0254C367</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Tags ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="915" onclick="window.location.hash='#915'"></td><td class="FileContents-lineContents" id="915"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pTags </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="916" onclick="window.location.hash='#916'"></td><td class="FileContents-lineContents" id="916"><span class="pln">        m_pTags </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="917" onclick="window.location.hash='#917'"></td><td class="FileContents-lineContents" id="917"><span class="pln">            </span><span class="typ">Tags</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="918" onclick="window.location.hash='#918'"></td><td class="FileContents-lineContents" id="918"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="919" onclick="window.location.hash='#919'"></td><td class="FileContents-lineContents" id="919"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pTags </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="920" onclick="window.location.hash='#920'"></td><td class="FileContents-lineContents" id="920"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="921" onclick="window.location.hash='#921'"></td><td class="FileContents-lineContents" id="921"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="922" onclick="window.location.hash='#922'"></td><td class="FileContents-lineContents" id="922"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pTags</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="923" onclick="window.location.hash='#923'"></td><td class="FileContents-lineContents" id="923"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="924" onclick="window.location.hash='#924'"></td><td class="FileContents-lineContents" id="924"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="925" onclick="window.location.hash='#925'"></td><td class="FileContents-lineContents" id="925"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="926" onclick="window.location.hash='#926'"></td><td class="FileContents-lineContents" id="926"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="927" onclick="window.location.hash='#927'"></td><td class="FileContents-lineContents" id="927"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="928" onclick="window.location.hash='#928'"></td><td class="FileContents-lineContents" id="928"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="929" onclick="window.location.hash='#929'"></td><td class="FileContents-lineContents" id="929"><span class="pln">    m_pos </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="930" onclick="window.location.hash='#930'"></td><td class="FileContents-lineContents" id="930"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="931" onclick="window.location.hash='#931'"></td><td class="FileContents-lineContents" id="931"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="932" onclick="window.location.hash='#932'"></td><td class="FileContents-lineContents" id="932"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="933" onclick="window.location.hash='#933'"></td><td class="FileContents-lineContents" id="933"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="934" onclick="window.location.hash='#934'"></td><td class="FileContents-lineContents" id="934"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pInfo </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">  </span><span class="com">// TODO: liberalize this behavior</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="935" onclick="window.location.hash='#935'"></td><td class="FileContents-lineContents" id="935"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="936" onclick="window.location.hash='#936'"></td><td class="FileContents-lineContents" id="936"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="937" onclick="window.location.hash='#937'"></td><td class="FileContents-lineContents" id="937"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pTracks </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="938" onclick="window.location.hash='#938'"></td><td class="FileContents-lineContents" id="938"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="939" onclick="window.location.hash='#939'"></td><td class="FileContents-lineContents" id="939"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="940" onclick="window.location.hash='#940'"></td><td class="FileContents-lineContents" id="940"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="941" onclick="window.location.hash='#941'"></td><td class="FileContents-lineContents" id="941"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="942" onclick="window.location.hash='#942'"></td><td class="FileContents-lineContents" id="942"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="943" onclick="window.location.hash='#943'"></td><td class="FileContents-lineContents" id="943"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">LoadCluster</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="944" onclick="window.location.hash='#944'"></td><td class="FileContents-lineContents" id="944"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="945" onclick="window.location.hash='#945'"></td><td class="FileContents-lineContents" id="945"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DoLoadCluster</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="946" onclick="window.location.hash='#946'"></td><td class="FileContents-lineContents" id="946"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="947" onclick="window.location.hash='#947'"></td><td class="FileContents-lineContents" id="947"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="948" onclick="window.location.hash='#948'"></td><td class="FileContents-lineContents" id="948"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="949" onclick="window.location.hash='#949'"></td><td class="FileContents-lineContents" id="949"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="950" onclick="window.location.hash='#950'"></td><td class="FileContents-lineContents" id="950"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="951" onclick="window.location.hash='#951'"></td><td class="FileContents-lineContents" id="951"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="952" onclick="window.location.hash='#952'"></td><td class="FileContents-lineContents" id="952"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">DoLoadCluster</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="953" onclick="window.location.hash='#953'"></td><td class="FileContents-lineContents" id="953"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="954" onclick="window.location.hash='#954'"></td><td class="FileContents-lineContents" id="954"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">DoLoadClusterUnknownSize</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="955" onclick="window.location.hash='#955'"></td><td class="FileContents-lineContents" id="955"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="956" onclick="window.location.hash='#956'"></td><td class="FileContents-lineContents" id="956"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="957" onclick="window.location.hash='#957'"></td><td class="FileContents-lineContents" id="957"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="958" onclick="window.location.hash='#958'"></td><td class="FileContents-lineContents" id="958"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="959" onclick="window.location.hash='#959'"></td><td class="FileContents-lineContents" id="959"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="960" onclick="window.location.hash='#960'"></td><td class="FileContents-lineContents" id="960"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="961" onclick="window.location.hash='#961'"></td><td class="FileContents-lineContents" id="961"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="962" onclick="window.location.hash='#962'"></td><td class="FileContents-lineContents" id="962"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="963" onclick="window.location.hash='#963'"></td><td class="FileContents-lineContents" id="963"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="964" onclick="window.location.hash='#964'"></td><td class="FileContents-lineContents" id="964"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="965" onclick="window.location.hash='#965'"></td><td class="FileContents-lineContents" id="965"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> segment_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="966" onclick="window.location.hash='#966'"></td><td class="FileContents-lineContents" id="966"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="967" onclick="window.location.hash='#967'"></td><td class="FileContents-lineContents" id="967"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_off </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// offset relative to start of segment</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="968" onclick="window.location.hash='#968'"></td><td class="FileContents-lineContents" id="968"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// size of cluster payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="969" onclick="window.location.hash='#969'"></td><td class="FileContents-lineContents" id="969"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="970" onclick="window.location.hash='#970'"></td><td class="FileContents-lineContents" id="970"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="971" onclick="window.location.hash='#971'"></td><td class="FileContents-lineContents" id="971"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="972" onclick="window.location.hash='#972'"></td><td class="FileContents-lineContents" id="972"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="973" onclick="window.location.hash='#973'"></td><td class="FileContents-lineContents" id="973"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="974" onclick="window.location.hash='#974'"></td><td class="FileContents-lineContents" id="974"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="975" onclick="window.location.hash='#975'"></td><td class="FileContents-lineContents" id="975"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="976" onclick="window.location.hash='#976'"></td><td class="FileContents-lineContents" id="976"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="977" onclick="window.location.hash='#977'"></td><td class="FileContents-lineContents" id="977"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> m_pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="978" onclick="window.location.hash='#978'"></td><td class="FileContents-lineContents" id="978"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="979" onclick="window.location.hash='#979'"></td><td class="FileContents-lineContents" id="979"><span class="pln">    </span><span class="com">// Read ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="980" onclick="window.location.hash='#980'"></td><td class="FileContents-lineContents" id="980"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="981" onclick="window.location.hash='#981'"></td><td class="FileContents-lineContents" id="981"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="982" onclick="window.location.hash='#982'"></td><td class="FileContents-lineContents" id="982"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="983" onclick="window.location.hash='#983'"></td><td class="FileContents-lineContents" id="983"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="984" onclick="window.location.hash='#984'"></td><td class="FileContents-lineContents" id="984"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="985" onclick="window.location.hash='#985'"></td><td class="FileContents-lineContents" id="985"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="986" onclick="window.location.hash='#986'"></td><td class="FileContents-lineContents" id="986"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="987" onclick="window.location.hash='#987'"></td><td class="FileContents-lineContents" id="987"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="988" onclick="window.location.hash='#988'"></td><td class="FileContents-lineContents" id="988"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="989" onclick="window.location.hash='#989'"></td><td class="FileContents-lineContents" id="989"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="990" onclick="window.location.hash='#990'"></td><td class="FileContents-lineContents" id="990"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="991" onclick="window.location.hash='#991'"></td><td class="FileContents-lineContents" id="991"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="992" onclick="window.location.hash='#992'"></td><td class="FileContents-lineContents" id="992"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="993" onclick="window.location.hash='#993'"></td><td class="FileContents-lineContents" id="993"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="994" onclick="window.location.hash='#994'"></td><td class="FileContents-lineContents" id="994"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="995" onclick="window.location.hash='#995'"></td><td class="FileContents-lineContents" id="995"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="996" onclick="window.location.hash='#996'"></td><td class="FileContents-lineContents" id="996"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="997" onclick="window.location.hash='#997'"></td><td class="FileContents-lineContents" id="997"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="998" onclick="window.location.hash='#998'"></td><td class="FileContents-lineContents" id="998"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="999" onclick="window.location.hash='#999'"></td><td class="FileContents-lineContents" id="999"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1000" onclick="window.location.hash='#1000'"></td><td class="FileContents-lineContents" id="1000"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1001" onclick="window.location.hash='#1001'"></td><td class="FileContents-lineContents" id="1001"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1002" onclick="window.location.hash='#1002'"></td><td class="FileContents-lineContents" id="1002"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1003" onclick="window.location.hash='#1003'"></td><td class="FileContents-lineContents" id="1003"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error (or underflow)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1004" onclick="window.location.hash='#1004'"></td><td class="FileContents-lineContents" id="1004"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1005" onclick="window.location.hash='#1005'"></td><td class="FileContents-lineContents" id="1005"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1006" onclick="window.location.hash='#1006'"></td><td class="FileContents-lineContents" id="1006"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1007" onclick="window.location.hash='#1007'"></td><td class="FileContents-lineContents" id="1007"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1008" onclick="window.location.hash='#1008'"></td><td class="FileContents-lineContents" id="1008"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1009" onclick="window.location.hash='#1009'"></td><td class="FileContents-lineContents" id="1009"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1010" onclick="window.location.hash='#1010'"></td><td class="FileContents-lineContents" id="1010"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1011" onclick="window.location.hash='#1011'"></td><td class="FileContents-lineContents" id="1011"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1012" onclick="window.location.hash='#1012'"></td><td class="FileContents-lineContents" id="1012"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1013" onclick="window.location.hash='#1013'"></td><td class="FileContents-lineContents" id="1013"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1014" onclick="window.location.hash='#1014'"></td><td class="FileContents-lineContents" id="1014"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1015" onclick="window.location.hash='#1015'"></td><td class="FileContents-lineContents" id="1015"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1016" onclick="window.location.hash='#1016'"></td><td class="FileContents-lineContents" id="1016"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1017" onclick="window.location.hash='#1017'"></td><td class="FileContents-lineContents" id="1017"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1018" onclick="window.location.hash='#1018'"></td><td class="FileContents-lineContents" id="1018"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1019" onclick="window.location.hash='#1019'"></td><td class="FileContents-lineContents" id="1019"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1020" onclick="window.location.hash='#1020'"></td><td class="FileContents-lineContents" id="1020"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1021" onclick="window.location.hash='#1021'"></td><td class="FileContents-lineContents" id="1021"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1022" onclick="window.location.hash='#1022'"></td><td class="FileContents-lineContents" id="1022"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1023" onclick="window.location.hash='#1023'"></td><td class="FileContents-lineContents" id="1023"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1024" onclick="window.location.hash='#1024'"></td><td class="FileContents-lineContents" id="1024"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1025" onclick="window.location.hash='#1025'"></td><td class="FileContents-lineContents" id="1025"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1026" onclick="window.location.hash='#1026'"></td><td class="FileContents-lineContents" id="1026"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1027" onclick="window.location.hash='#1027'"></td><td class="FileContents-lineContents" id="1027"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1028" onclick="window.location.hash='#1028'"></td><td class="FileContents-lineContents" id="1028"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1029" onclick="window.location.hash='#1029'"></td><td class="FileContents-lineContents" id="1029"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1030" onclick="window.location.hash='#1030'"></td><td class="FileContents-lineContents" id="1030"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1031" onclick="window.location.hash='#1031'"></td><td class="FileContents-lineContents" id="1031"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1032" onclick="window.location.hash='#1032'"></td><td class="FileContents-lineContents" id="1032"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1033" onclick="window.location.hash='#1033'"></td><td class="FileContents-lineContents" id="1033"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1034" onclick="window.location.hash='#1034'"></td><td class="FileContents-lineContents" id="1034"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1035" onclick="window.location.hash='#1035'"></td><td class="FileContents-lineContents" id="1035"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1036" onclick="window.location.hash='#1036'"></td><td class="FileContents-lineContents" id="1036"><span class="pln">    </span><span class="com">// pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1037" onclick="window.location.hash='#1037'"></td><td class="FileContents-lineContents" id="1037"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1038" onclick="window.location.hash='#1038'"></td><td class="FileContents-lineContents" id="1038"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1039" onclick="window.location.hash='#1039'"></td><td class="FileContents-lineContents" id="1039"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1040" onclick="window.location.hash='#1040'"></td><td class="FileContents-lineContents" id="1040"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1041" onclick="window.location.hash='#1041'"></td><td class="FileContents-lineContents" id="1041"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1042" onclick="window.location.hash='#1042'"></td><td class="FileContents-lineContents" id="1042"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1043" onclick="window.location.hash='#1043'"></td><td class="FileContents-lineContents" id="1043"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1044" onclick="window.location.hash='#1044'"></td><td class="FileContents-lineContents" id="1044"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1045" onclick="window.location.hash='#1045'"></td><td class="FileContents-lineContents" id="1045"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">!=</span><span class="pln"> unknown_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1046" onclick="window.location.hash='#1046'"></td><td class="FileContents-lineContents" id="1046"><span class="pln">        </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1047" onclick="window.location.hash='#1047'"></td><td class="FileContents-lineContents" id="1047"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1048" onclick="window.location.hash='#1048'"></td><td class="FileContents-lineContents" id="1048"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1049" onclick="window.location.hash='#1049'"></td><td class="FileContents-lineContents" id="1049"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1050" onclick="window.location.hash='#1050'"></td><td class="FileContents-lineContents" id="1050"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1051" onclick="window.location.hash='#1051'"></td><td class="FileContents-lineContents" id="1051"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1052" onclick="window.location.hash='#1052'"></td><td class="FileContents-lineContents" id="1052"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// TODO: liberalize</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1053" onclick="window.location.hash='#1053'"></td><td class="FileContents-lineContents" id="1053"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1054" onclick="window.location.hash='#1054'"></td><td class="FileContents-lineContents" id="1054"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pCues </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1055" onclick="window.location.hash='#1055'"></td><td class="FileContents-lineContents" id="1055"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">-</span><span class="pln"> idpos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1056" onclick="window.location.hash='#1056'"></td><td class="FileContents-lineContents" id="1056"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1057" onclick="window.location.hash='#1057'"></td><td class="FileContents-lineContents" id="1057"><span class="pln">        m_pCues </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1058" onclick="window.location.hash='#1058'"></td><td class="FileContents-lineContents" id="1058"><span class="pln">        assert</span><span class="pun">(</span><span class="pln">m_pCues</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1059" onclick="window.location.hash='#1059'"></td><td class="FileContents-lineContents" id="1059"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1060" onclick="window.location.hash='#1060'"></td><td class="FileContents-lineContents" id="1060"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1061" onclick="window.location.hash='#1061'"></td><td class="FileContents-lineContents" id="1061"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1062" onclick="window.location.hash='#1062'"></td><td class="FileContents-lineContents" id="1062"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1063" onclick="window.location.hash='#1063'"></td><td class="FileContents-lineContents" id="1063"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1064" onclick="window.location.hash='#1064'"></td><td class="FileContents-lineContents" id="1064"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1065" onclick="window.location.hash='#1065'"></td><td class="FileContents-lineContents" id="1065"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1066" onclick="window.location.hash='#1066'"></td><td class="FileContents-lineContents" id="1066"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1067" onclick="window.location.hash='#1067'"></td><td class="FileContents-lineContents" id="1067"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// TODO: liberalize</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1068" onclick="window.location.hash='#1068'"></td><td class="FileContents-lineContents" id="1068"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1069" onclick="window.location.hash='#1069'"></td><td class="FileContents-lineContents" id="1069"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1070" onclick="window.location.hash='#1070'"></td><td class="FileContents-lineContents" id="1070"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1071" onclick="window.location.hash='#1071'"></td><td class="FileContents-lineContents" id="1071"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1072" onclick="window.location.hash='#1072'"></td><td class="FileContents-lineContents" id="1072"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1073" onclick="window.location.hash='#1073'"></td><td class="FileContents-lineContents" id="1073"><span class="pln">    </span><span class="com">// We have a cluster.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1074" onclick="window.location.hash='#1074'"></td><td class="FileContents-lineContents" id="1074"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1075" onclick="window.location.hash='#1075'"></td><td class="FileContents-lineContents" id="1075"><span class="pln">    cluster_off </span><span class="pun">=</span><span class="pln"> idpos </span><span class="pun">-</span><span class="pln"> m_start</span><span class="pun">;</span><span class="pln">  </span><span class="com">// relative pos</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1076" onclick="window.location.hash='#1076'"></td><td class="FileContents-lineContents" id="1076"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1077" onclick="window.location.hash='#1077'"></td><td class="FileContents-lineContents" id="1077"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">!=</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1078" onclick="window.location.hash='#1078'"></td><td class="FileContents-lineContents" id="1078"><span class="pln">      cluster_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1079" onclick="window.location.hash='#1079'"></td><td class="FileContents-lineContents" id="1079"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1080" onclick="window.location.hash='#1080'"></td><td class="FileContents-lineContents" id="1080"><span class="pln">    </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1081" onclick="window.location.hash='#1081'"></td><td class="FileContents-lineContents" id="1081"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1082" onclick="window.location.hash='#1082'"></td><td class="FileContents-lineContents" id="1082"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1083" onclick="window.location.hash='#1083'"></td><td class="FileContents-lineContents" id="1083"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">cluster_off </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// have cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1084" onclick="window.location.hash='#1084'"></td><td class="FileContents-lineContents" id="1084"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1085" onclick="window.location.hash='#1085'"></td><td class="FileContents-lineContents" id="1085"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1086" onclick="window.location.hash='#1086'"></td><td class="FileContents-lineContents" id="1086"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1087" onclick="window.location.hash='#1087'"></td><td class="FileContents-lineContents" id="1087"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1088" onclick="window.location.hash='#1088'"></td><td class="FileContents-lineContents" id="1088"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">HasBlockEntries</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> cluster_off</span><span class="pun">,</span><span class="pln"> pos_</span><span class="pun">,</span><span class="pln"> len_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1089" onclick="window.location.hash='#1089'"></td><td class="FileContents-lineContents" id="1089"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1090" onclick="window.location.hash='#1090'"></td><td class="FileContents-lineContents" id="1090"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error, or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1091" onclick="window.location.hash='#1091'"></td><td class="FileContents-lineContents" id="1091"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1092" onclick="window.location.hash='#1092'"></td><td class="FileContents-lineContents" id="1092"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> len_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1093" onclick="window.location.hash='#1093'"></td><td class="FileContents-lineContents" id="1093"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1094" onclick="window.location.hash='#1094'"></td><td class="FileContents-lineContents" id="1094"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1095" onclick="window.location.hash='#1095'"></td><td class="FileContents-lineContents" id="1095"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1096" onclick="window.location.hash='#1096'"></td><td class="FileContents-lineContents" id="1096"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1097" onclick="window.location.hash='#1097'"></td><td class="FileContents-lineContents" id="1097"><span class="pln">  </span><span class="com">// status == 0 means &quot;no block entries found&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1098" onclick="window.location.hash='#1098'"></td><td class="FileContents-lineContents" id="1098"><span class="pln">  </span><span class="com">// status &gt; 0 means &quot;found at least one block entry&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1099" onclick="window.location.hash='#1099'"></td><td class="FileContents-lineContents" id="1099"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1100" onclick="window.location.hash='#1100'"></td><td class="FileContents-lineContents" id="1100"><span class="pln">  </span><span class="com">// TODO:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1101" onclick="window.location.hash='#1101'"></td><td class="FileContents-lineContents" id="1101"><span class="pln">  </span><span class="com">// The issue here is that the segment increments its own</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1102" onclick="window.location.hash='#1102'"></td><td class="FileContents-lineContents" id="1102"><span class="pln">  </span><span class="com">// pos ptr past the most recent cluster parsed, and then</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1103" onclick="window.location.hash='#1103'"></td><td class="FileContents-lineContents" id="1103"><span class="pln">  </span><span class="com">// starts from there to parse the next cluster.  If we</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1104" onclick="window.location.hash='#1104'"></td><td class="FileContents-lineContents" id="1104"><span class="pln">  </span><span class="com">// don&#39;t know the size of the current cluster, then we</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1105" onclick="window.location.hash='#1105'"></td><td class="FileContents-lineContents" id="1105"><span class="pln">  </span><span class="com">// must either parse its payload (as we do below), looking</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1106" onclick="window.location.hash='#1106'"></td><td class="FileContents-lineContents" id="1106"><span class="pln">  </span><span class="com">// for the cluster (or cues) ID to terminate the parse.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1107" onclick="window.location.hash='#1107'"></td><td class="FileContents-lineContents" id="1107"><span class="pln">  </span><span class="com">// This isn&#39;t really what we want: rather, we really need</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1108" onclick="window.location.hash='#1108'"></td><td class="FileContents-lineContents" id="1108"><span class="pln">  </span><span class="com">// a way to create the curr cluster object immediately.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1109" onclick="window.location.hash='#1109'"></td><td class="FileContents-lineContents" id="1109"><span class="pln">  </span><span class="com">// The pity is that cluster::parse can determine its own</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1110" onclick="window.location.hash='#1110'"></td><td class="FileContents-lineContents" id="1110"><span class="pln">  </span><span class="com">// boundary, and we largely duplicate that same logic here.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1111" onclick="window.location.hash='#1111'"></td><td class="FileContents-lineContents" id="1111"><span class="pln">  </span><span class="com">//</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1112" onclick="window.location.hash='#1112'"></td><td class="FileContents-lineContents" id="1112"><span class="pln">  </span><span class="com">// Maybe we need to get rid of our look-ahead preloading</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1113" onclick="window.location.hash='#1113'"></td><td class="FileContents-lineContents" id="1113"><span class="pln">  </span><span class="com">// in source::parse???</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1114" onclick="window.location.hash='#1114'"></td><td class="FileContents-lineContents" id="1114"><span class="pln">  </span><span class="com">//</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1115" onclick="window.location.hash='#1115'"></td><td class="FileContents-lineContents" id="1115"><span class="pln">  </span><span class="com">// As we&#39;re parsing the blocks in the curr cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1116" onclick="window.location.hash='#1116'"></td><td class="FileContents-lineContents" id="1116"><span class="pln">  </span><span class="com">//(in cluster::parse), we should have some way to signal</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1117" onclick="window.location.hash='#1117'"></td><td class="FileContents-lineContents" id="1117"><span class="pln">  </span><span class="com">// to the segment that we have determined the boundary,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1118" onclick="window.location.hash='#1118'"></td><td class="FileContents-lineContents" id="1118"><span class="pln">  </span><span class="com">// so it can adjust its own segment::m_pos member.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1119" onclick="window.location.hash='#1119'"></td><td class="FileContents-lineContents" id="1119"><span class="pln">  </span><span class="com">//</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1120" onclick="window.location.hash='#1120'"></td><td class="FileContents-lineContents" id="1120"><span class="pln">  </span><span class="com">// The problem is that we&#39;re asserting in asyncreadinit,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1121" onclick="window.location.hash='#1121'"></td><td class="FileContents-lineContents" id="1121"><span class="pln">  </span><span class="com">// because we adjust the pos down to the curr seek pos,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1122" onclick="window.location.hash='#1122'"></td><td class="FileContents-lineContents" id="1122"><span class="pln">  </span><span class="com">// and the resulting adjusted len is &gt; 2GB.  I&#39;m suspicious</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1123" onclick="window.location.hash='#1123'"></td><td class="FileContents-lineContents" id="1123"><span class="pln">  </span><span class="com">// that this is even correct, but even if it is, we can&#39;t</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1124" onclick="window.location.hash='#1124'"></td><td class="FileContents-lineContents" id="1124"><span class="pln">  </span><span class="com">// be loading that much data in the cache anyway.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1125" onclick="window.location.hash='#1125'"></td><td class="FileContents-lineContents" id="1125"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1126" onclick="window.location.hash='#1126'"></td><td class="FileContents-lineContents" id="1126"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1127" onclick="window.location.hash='#1127'"></td><td class="FileContents-lineContents" id="1127"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1128" onclick="window.location.hash='#1128'"></td><td class="FileContents-lineContents" id="1128"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusterPreloadCount </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1129" onclick="window.location.hash='#1129'"></td><td class="FileContents-lineContents" id="1129"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> m_clusterSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1130" onclick="window.location.hash='#1130'"></td><td class="FileContents-lineContents" id="1130"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1131" onclick="window.location.hash='#1131'"></td><td class="FileContents-lineContents" id="1131"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1132" onclick="window.location.hash='#1132'"></td><td class="FileContents-lineContents" id="1132"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1133" onclick="window.location.hash='#1133'"></td><td class="FileContents-lineContents" id="1133"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1134" onclick="window.location.hash='#1134'"></td><td class="FileContents-lineContents" id="1134"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1135" onclick="window.location.hash='#1135'"></td><td class="FileContents-lineContents" id="1135"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetPosition</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1136" onclick="window.location.hash='#1136'"></td><td class="FileContents-lineContents" id="1136"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">off </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1137" onclick="window.location.hash='#1137'"></td><td class="FileContents-lineContents" id="1137"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1138" onclick="window.location.hash='#1138'"></td><td class="FileContents-lineContents" id="1138"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">off </span><span class="pun">==</span><span class="pln"> cluster_off</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// preloaded already</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1139" onclick="window.location.hash='#1139'"></td><td class="FileContents-lineContents" id="1139"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// no entries found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1140" onclick="window.location.hash='#1140'"></td><td class="FileContents-lineContents" id="1140"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1141" onclick="window.location.hash='#1141'"></td><td class="FileContents-lineContents" id="1141"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1142" onclick="window.location.hash='#1142'"></td><td class="FileContents-lineContents" id="1142"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1143" onclick="window.location.hash='#1143'"></td><td class="FileContents-lineContents" id="1143"><span class="pln">        pos </span><span class="pun">+=</span><span class="pln"> cluster_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1144" onclick="window.location.hash='#1144'"></td><td class="FileContents-lineContents" id="1144"><span class="pln">      </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1145" onclick="window.location.hash='#1145'"></td><td class="FileContents-lineContents" id="1145"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetElementSize</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1146" onclick="window.location.hash='#1146'"></td><td class="FileContents-lineContents" id="1146"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1147" onclick="window.location.hash='#1147'"></td><td class="FileContents-lineContents" id="1147"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">element_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1148" onclick="window.location.hash='#1148'"></td><td class="FileContents-lineContents" id="1148"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// TODO: handle this case</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1149" onclick="window.location.hash='#1149'"></td><td class="FileContents-lineContents" id="1149"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1150" onclick="window.location.hash='#1150'"></td><td class="FileContents-lineContents" id="1150"><span class="pln">        pos </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="pln">m_element_start </span><span class="pun">+</span><span class="pln"> element_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1151" onclick="window.location.hash='#1151'"></td><td class="FileContents-lineContents" id="1151"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1152" onclick="window.location.hash='#1152'"></td><td class="FileContents-lineContents" id="1152"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1153" onclick="window.location.hash='#1153'"></td><td class="FileContents-lineContents" id="1153"><span class="pln">      pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">=</span><span class="pln"> idx</span><span class="pun">;</span><span class="pln">  </span><span class="com">// move from preloaded to loaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1154" onclick="window.location.hash='#1154'"></td><td class="FileContents-lineContents" id="1154"><span class="pln">      </span><span class="pun">++</span><span class="pln">m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1155" onclick="window.location.hash='#1155'"></td><td class="FileContents-lineContents" id="1155"><span class="pln">      </span><span class="pun">--</span><span class="pln">m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1156" onclick="window.location.hash='#1156'"></td><td class="FileContents-lineContents" id="1156"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1157" onclick="window.location.hash='#1157'"></td><td class="FileContents-lineContents" id="1157"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1158" onclick="window.location.hash='#1158'"></td><td class="FileContents-lineContents" id="1158"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1159" onclick="window.location.hash='#1159'"></td><td class="FileContents-lineContents" id="1159"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1160" onclick="window.location.hash='#1160'"></td><td class="FileContents-lineContents" id="1160"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1161" onclick="window.location.hash='#1161'"></td><td class="FileContents-lineContents" id="1161"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1162" onclick="window.location.hash='#1162'"></td><td class="FileContents-lineContents" id="1162"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1163" onclick="window.location.hash='#1163'"></td><td class="FileContents-lineContents" id="1163"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1164" onclick="window.location.hash='#1164'"></td><td class="FileContents-lineContents" id="1164"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// no entries found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1165" onclick="window.location.hash='#1165'"></td><td class="FileContents-lineContents" id="1165"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1166" onclick="window.location.hash='#1166'"></td><td class="FileContents-lineContents" id="1166"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> cluster_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1167" onclick="window.location.hash='#1167'"></td><td class="FileContents-lineContents" id="1167"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1168" onclick="window.location.hash='#1168'"></td><td class="FileContents-lineContents" id="1168"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1169" onclick="window.location.hash='#1169'"></td><td class="FileContents-lineContents" id="1169"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> total</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1170" onclick="window.location.hash='#1170'"></td><td class="FileContents-lineContents" id="1170"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1171" onclick="window.location.hash='#1171'"></td><td class="FileContents-lineContents" id="1171"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1172" onclick="window.location.hash='#1172'"></td><td class="FileContents-lineContents" id="1172"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1173" onclick="window.location.hash='#1173'"></td><td class="FileContents-lineContents" id="1173"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> segment_stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1174" onclick="window.location.hash='#1174'"></td><td class="FileContents-lineContents" id="1174"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> segment_stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1175" onclick="window.location.hash='#1175'"></td><td class="FileContents-lineContents" id="1175"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1176" onclick="window.location.hash='#1176'"></td><td class="FileContents-lineContents" id="1176"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1177" onclick="window.location.hash='#1177'"></td><td class="FileContents-lineContents" id="1177"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1178" onclick="window.location.hash='#1178'"></td><td class="FileContents-lineContents" id="1178"><span class="pln">    m_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1179" onclick="window.location.hash='#1179'"></td><td class="FileContents-lineContents" id="1179"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">  </span><span class="com">// try again</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1180" onclick="window.location.hash='#1180'"></td><td class="FileContents-lineContents" id="1180"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1181" onclick="window.location.hash='#1181'"></td><td class="FileContents-lineContents" id="1181"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1182" onclick="window.location.hash='#1182'"></td><td class="FileContents-lineContents" id="1182"><span class="pln">  </span><span class="com">// status &gt; 0 means we have an entry</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1183" onclick="window.location.hash='#1183'"></td><td class="FileContents-lineContents" id="1183"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1184" onclick="window.location.hash='#1184'"></td><td class="FileContents-lineContents" id="1184"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> cluster_off</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1185" onclick="window.location.hash='#1185'"></td><td class="FileContents-lineContents" id="1185"><span class="pln">  </span><span class="com">// element_size);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1186" onclick="window.location.hash='#1186'"></td><td class="FileContents-lineContents" id="1186"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1187" onclick="window.location.hash='#1187'"></td><td class="FileContents-lineContents" id="1187"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1188" onclick="window.location.hash='#1188'"></td><td class="FileContents-lineContents" id="1188"><span class="pln">  </span><span class="typ">AppendCluster</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1189" onclick="window.location.hash='#1189'"></td><td class="FileContents-lineContents" id="1189"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1190" onclick="window.location.hash='#1190'"></td><td class="FileContents-lineContents" id="1190"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> m_clusterSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1191" onclick="window.location.hash='#1191'"></td><td class="FileContents-lineContents" id="1191"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1192" onclick="window.location.hash='#1192'"></td><td class="FileContents-lineContents" id="1192"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1193" onclick="window.location.hash='#1193'"></td><td class="FileContents-lineContents" id="1193"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1194" onclick="window.location.hash='#1194'"></td><td class="FileContents-lineContents" id="1194"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> cluster_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1195" onclick="window.location.hash='#1195'"></td><td class="FileContents-lineContents" id="1195"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1196" onclick="window.location.hash='#1196'"></td><td class="FileContents-lineContents" id="1196"><span class="pln">    m_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1197" onclick="window.location.hash='#1197'"></td><td class="FileContents-lineContents" id="1197"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1198" onclick="window.location.hash='#1198'"></td><td class="FileContents-lineContents" id="1198"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1199" onclick="window.location.hash='#1199'"></td><td class="FileContents-lineContents" id="1199"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1200" onclick="window.location.hash='#1200'"></td><td class="FileContents-lineContents" id="1200"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1201" onclick="window.location.hash='#1201'"></td><td class="FileContents-lineContents" id="1201"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1202" onclick="window.location.hash='#1202'"></td><td class="FileContents-lineContents" id="1202"><span class="pln">  m_pUnknownSize </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1203" onclick="window.location.hash='#1203'"></td><td class="FileContents-lineContents" id="1203"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1204" onclick="window.location.hash='#1204'"></td><td class="FileContents-lineContents" id="1204"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1205" onclick="window.location.hash='#1205'"></td><td class="FileContents-lineContents" id="1205"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// partial success, since we have a new cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1206" onclick="window.location.hash='#1206'"></td><td class="FileContents-lineContents" id="1206"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1207" onclick="window.location.hash='#1207'"></td><td class="FileContents-lineContents" id="1207"><span class="pln">  </span><span class="com">// status == 0 means &quot;no block entries found&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1208" onclick="window.location.hash='#1208'"></td><td class="FileContents-lineContents" id="1208"><span class="pln">  </span><span class="com">// pos designates start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1209" onclick="window.location.hash='#1209'"></td><td class="FileContents-lineContents" id="1209"><span class="pln">  </span><span class="com">// m_pos has NOT been adjusted yet (in case we need to come back here)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1210" onclick="window.location.hash='#1210'"></td><td class="FileContents-lineContents" id="1210"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1211" onclick="window.location.hash='#1211'"></td><td class="FileContents-lineContents" id="1211"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1212" onclick="window.location.hash='#1212'"></td><td class="FileContents-lineContents" id="1212"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">DoLoadClusterUnknownSize</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1213" onclick="window.location.hash='#1213'"></td><td class="FileContents-lineContents" id="1213"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1214" onclick="window.location.hash='#1214'"></td><td class="FileContents-lineContents" id="1214"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pUnknownSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1215" onclick="window.location.hash='#1215'"></td><td class="FileContents-lineContents" id="1215"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1216" onclick="window.location.hash='#1216'"></td><td class="FileContents-lineContents" id="1216"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pUnknownSize</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1217" onclick="window.location.hash='#1217'"></td><td class="FileContents-lineContents" id="1217"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1218" onclick="window.location.hash='#1218'"></td><td class="FileContents-lineContents" id="1218"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1219" onclick="window.location.hash='#1219'"></td><td class="FileContents-lineContents" id="1219"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1220" onclick="window.location.hash='#1220'"></td><td class="FileContents-lineContents" id="1220"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1221" onclick="window.location.hash='#1221'"></td><td class="FileContents-lineContents" id="1221"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// parsed a block</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1222" onclick="window.location.hash='#1222'"></td><td class="FileContents-lineContents" id="1222"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">  </span><span class="com">// continue parsing</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1223" onclick="window.location.hash='#1223'"></td><td class="FileContents-lineContents" id="1223"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1224" onclick="window.location.hash='#1224'"></td><td class="FileContents-lineContents" id="1224"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// nothing left to parse of this cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1225" onclick="window.location.hash='#1225'"></td><td class="FileContents-lineContents" id="1225"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1226" onclick="window.location.hash='#1226'"></td><td class="FileContents-lineContents" id="1226"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> m_pUnknownSize</span><span class="pun">-&gt;</span><span class="pln">m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1227" onclick="window.location.hash='#1227'"></td><td class="FileContents-lineContents" id="1227"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1228" onclick="window.location.hash='#1228'"></td><td class="FileContents-lineContents" id="1228"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> m_pUnknownSize</span><span class="pun">-&gt;</span><span class="typ">GetElementSize</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1229" onclick="window.location.hash='#1229'"></td><td class="FileContents-lineContents" id="1229"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1230" onclick="window.location.hash='#1230'"></td><td class="FileContents-lineContents" id="1230"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1231" onclick="window.location.hash='#1231'"></td><td class="FileContents-lineContents" id="1231"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1232" onclick="window.location.hash='#1232'"></td><td class="FileContents-lineContents" id="1232"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1233" onclick="window.location.hash='#1233'"></td><td class="FileContents-lineContents" id="1233"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1234" onclick="window.location.hash='#1234'"></td><td class="FileContents-lineContents" id="1234"><span class="pln">  m_pUnknownSize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1235" onclick="window.location.hash='#1235'"></td><td class="FileContents-lineContents" id="1235"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1236" onclick="window.location.hash='#1236'"></td><td class="FileContents-lineContents" id="1236"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">  </span><span class="com">// continue parsing</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1237" onclick="window.location.hash='#1237'"></td><td class="FileContents-lineContents" id="1237"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1238" onclick="window.location.hash='#1238'"></td><td class="FileContents-lineContents" id="1238"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1239" onclick="window.location.hash='#1239'"></td><td class="FileContents-lineContents" id="1239"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">AppendCluster</span><span class="pun">(</span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1240" onclick="window.location.hash='#1240'"></td><td class="FileContents-lineContents" id="1240"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1241" onclick="window.location.hash='#1241'"></td><td class="FileContents-lineContents" id="1241"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1242" onclick="window.location.hash='#1242'"></td><td class="FileContents-lineContents" id="1242"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1243" onclick="window.location.hash='#1243'"></td><td class="FileContents-lineContents" id="1243"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_clusterCount </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1244" onclick="window.location.hash='#1244'"></td><td class="FileContents-lineContents" id="1244"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1245" onclick="window.location.hash='#1245'"></td><td class="FileContents-lineContents" id="1245"><span class="pln">  </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> m_clusterSize</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1246" onclick="window.location.hash='#1246'"></td><td class="FileContents-lineContents" id="1246"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1247" onclick="window.location.hash='#1247'"></td><td class="FileContents-lineContents" id="1247"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1248" onclick="window.location.hash='#1248'"></td><td class="FileContents-lineContents" id="1248"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1249" onclick="window.location.hash='#1249'"></td><td class="FileContents-lineContents" id="1249"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">==</span><span class="pln"> m_clusterCount</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1250" onclick="window.location.hash='#1250'"></td><td class="FileContents-lineContents" id="1250"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1251" onclick="window.location.hash='#1251'"></td><td class="FileContents-lineContents" id="1251"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1252" onclick="window.location.hash='#1252'"></td><td class="FileContents-lineContents" id="1252"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">2048</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1253" onclick="window.location.hash='#1253'"></td><td class="FileContents-lineContents" id="1253"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1254" onclick="window.location.hash='#1254'"></td><td class="FileContents-lineContents" id="1254"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> qq </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*[</span><span class="pln">n</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1255" onclick="window.location.hash='#1255'"></td><td class="FileContents-lineContents" id="1255"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1256" onclick="window.location.hash='#1256'"></td><td class="FileContents-lineContents" id="1256"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1257" onclick="window.location.hash='#1257'"></td><td class="FileContents-lineContents" id="1257"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1258" onclick="window.location.hash='#1258'"></td><td class="FileContents-lineContents" id="1258"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pp </span><span class="pun">=</span><span class="pln"> p </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1259" onclick="window.location.hash='#1259'"></td><td class="FileContents-lineContents" id="1259"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1260" onclick="window.location.hash='#1260'"></td><td class="FileContents-lineContents" id="1260"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p </span><span class="pun">!=</span><span class="pln"> pp</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1261" onclick="window.location.hash='#1261'"></td><td class="FileContents-lineContents" id="1261"><span class="pln">      </span><span class="pun">*</span><span class="pln">q</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">p</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1262" onclick="window.location.hash='#1262'"></td><td class="FileContents-lineContents" id="1262"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1263" onclick="window.location.hash='#1263'"></td><td class="FileContents-lineContents" id="1263"><span class="pln">    </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1264" onclick="window.location.hash='#1264'"></td><td class="FileContents-lineContents" id="1264"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1265" onclick="window.location.hash='#1265'"></td><td class="FileContents-lineContents" id="1265"><span class="pln">    m_clusters </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1266" onclick="window.location.hash='#1266'"></td><td class="FileContents-lineContents" id="1266"><span class="pln">    size </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1267" onclick="window.location.hash='#1267'"></td><td class="FileContents-lineContents" id="1267"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1268" onclick="window.location.hash='#1268'"></td><td class="FileContents-lineContents" id="1268"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1269" onclick="window.location.hash='#1269'"></td><td class="FileContents-lineContents" id="1269"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusterPreloadCount </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1270" onclick="window.location.hash='#1270'"></td><td class="FileContents-lineContents" id="1270"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1271" onclick="window.location.hash='#1271'"></td><td class="FileContents-lineContents" id="1271"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1272" onclick="window.location.hash='#1272'"></td><td class="FileContents-lineContents" id="1272"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_clusters </span><span class="pun">+</span><span class="pln"> m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1273" onclick="window.location.hash='#1273'"></td><td class="FileContents-lineContents" id="1273"><span class="pln">    assert</span><span class="pun">(*</span><span class="pln">p</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1274" onclick="window.location.hash='#1274'"></td><td class="FileContents-lineContents" id="1274"><span class="pln">    assert</span><span class="pun">((*</span><span class="pln">p</span><span class="pun">)-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1275" onclick="window.location.hash='#1275'"></td><td class="FileContents-lineContents" id="1275"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1276" onclick="window.location.hash='#1276'"></td><td class="FileContents-lineContents" id="1276"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> p </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1277" onclick="window.location.hash='#1277'"></td><td class="FileContents-lineContents" id="1277"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">q </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusters </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1278" onclick="window.location.hash='#1278'"></td><td class="FileContents-lineContents" id="1278"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1279" onclick="window.location.hash='#1279'"></td><td class="FileContents-lineContents" id="1279"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1280" onclick="window.location.hash='#1280'"></td><td class="FileContents-lineContents" id="1280"><span class="pln">      </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> qq </span><span class="pun">=</span><span class="pln"> q </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1281" onclick="window.location.hash='#1281'"></td><td class="FileContents-lineContents" id="1281"><span class="pln">      assert</span><span class="pun">((*</span><span class="pln">qq</span><span class="pun">)-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1282" onclick="window.location.hash='#1282'"></td><td class="FileContents-lineContents" id="1282"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1283" onclick="window.location.hash='#1283'"></td><td class="FileContents-lineContents" id="1283"><span class="pln">      </span><span class="pun">*</span><span class="pln">q </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1284" onclick="window.location.hash='#1284'"></td><td class="FileContents-lineContents" id="1284"><span class="pln">      q </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1285" onclick="window.location.hash='#1285'"></td><td class="FileContents-lineContents" id="1285"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1286" onclick="window.location.hash='#1286'"></td><td class="FileContents-lineContents" id="1286"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">q </span><span class="pun">==</span><span class="pln"> p</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1287" onclick="window.location.hash='#1287'"></td><td class="FileContents-lineContents" id="1287"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1288" onclick="window.location.hash='#1288'"></td><td class="FileContents-lineContents" id="1288"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1289" onclick="window.location.hash='#1289'"></td><td class="FileContents-lineContents" id="1289"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1290" onclick="window.location.hash='#1290'"></td><td class="FileContents-lineContents" id="1290"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1291" onclick="window.location.hash='#1291'"></td><td class="FileContents-lineContents" id="1291"><span class="pln">  m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1292" onclick="window.location.hash='#1292'"></td><td class="FileContents-lineContents" id="1292"><span class="pln">  </span><span class="pun">++</span><span class="pln">m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1293" onclick="window.location.hash='#1293'"></td><td class="FileContents-lineContents" id="1293"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1294" onclick="window.location.hash='#1294'"></td><td class="FileContents-lineContents" id="1294"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1295" onclick="window.location.hash='#1295'"></td><td class="FileContents-lineContents" id="1295"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">PreloadCluster</span><span class="pun">(</span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1296" onclick="window.location.hash='#1296'"></td><td class="FileContents-lineContents" id="1296"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1297" onclick="window.location.hash='#1297'"></td><td class="FileContents-lineContents" id="1297"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1298" onclick="window.location.hash='#1298'"></td><td class="FileContents-lineContents" id="1298"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> m_clusterCount</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1299" onclick="window.location.hash='#1299'"></td><td class="FileContents-lineContents" id="1299"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1300" onclick="window.location.hash='#1300'"></td><td class="FileContents-lineContents" id="1300"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_clusterCount </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1301" onclick="window.location.hash='#1301'"></td><td class="FileContents-lineContents" id="1301"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1302" onclick="window.location.hash='#1302'"></td><td class="FileContents-lineContents" id="1302"><span class="pln">  </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> m_clusterSize</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1303" onclick="window.location.hash='#1303'"></td><td class="FileContents-lineContents" id="1303"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1304" onclick="window.location.hash='#1304'"></td><td class="FileContents-lineContents" id="1304"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1305" onclick="window.location.hash='#1305'"></td><td class="FileContents-lineContents" id="1305"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1306" onclick="window.location.hash='#1306'"></td><td class="FileContents-lineContents" id="1306"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">2048</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1307" onclick="window.location.hash='#1307'"></td><td class="FileContents-lineContents" id="1307"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1308" onclick="window.location.hash='#1308'"></td><td class="FileContents-lineContents" id="1308"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> qq </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*[</span><span class="pln">n</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1309" onclick="window.location.hash='#1309'"></td><td class="FileContents-lineContents" id="1309"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1310" onclick="window.location.hash='#1310'"></td><td class="FileContents-lineContents" id="1310"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1311" onclick="window.location.hash='#1311'"></td><td class="FileContents-lineContents" id="1311"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1312" onclick="window.location.hash='#1312'"></td><td class="FileContents-lineContents" id="1312"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pp </span><span class="pun">=</span><span class="pln"> p </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1313" onclick="window.location.hash='#1313'"></td><td class="FileContents-lineContents" id="1313"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1314" onclick="window.location.hash='#1314'"></td><td class="FileContents-lineContents" id="1314"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p </span><span class="pun">!=</span><span class="pln"> pp</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1315" onclick="window.location.hash='#1315'"></td><td class="FileContents-lineContents" id="1315"><span class="pln">      </span><span class="pun">*</span><span class="pln">q</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">p</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1316" onclick="window.location.hash='#1316'"></td><td class="FileContents-lineContents" id="1316"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1317" onclick="window.location.hash='#1317'"></td><td class="FileContents-lineContents" id="1317"><span class="pln">    </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1318" onclick="window.location.hash='#1318'"></td><td class="FileContents-lineContents" id="1318"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1319" onclick="window.location.hash='#1319'"></td><td class="FileContents-lineContents" id="1319"><span class="pln">    m_clusters </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1320" onclick="window.location.hash='#1320'"></td><td class="FileContents-lineContents" id="1320"><span class="pln">    size </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1321" onclick="window.location.hash='#1321'"></td><td class="FileContents-lineContents" id="1321"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1322" onclick="window.location.hash='#1322'"></td><td class="FileContents-lineContents" id="1322"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1323" onclick="window.location.hash='#1323'"></td><td class="FileContents-lineContents" id="1323"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1324" onclick="window.location.hash='#1324'"></td><td class="FileContents-lineContents" id="1324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1325" onclick="window.location.hash='#1325'"></td><td class="FileContents-lineContents" id="1325"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_clusters </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1326" onclick="window.location.hash='#1326'"></td><td class="FileContents-lineContents" id="1326"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1327" onclick="window.location.hash='#1327'"></td><td class="FileContents-lineContents" id="1327"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> m_clusters </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1328" onclick="window.location.hash='#1328'"></td><td class="FileContents-lineContents" id="1328"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">q </span><span class="pun">&gt;=</span><span class="pln"> p</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1329" onclick="window.location.hash='#1329'"></td><td class="FileContents-lineContents" id="1329"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">q </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusters </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1330" onclick="window.location.hash='#1330'"></td><td class="FileContents-lineContents" id="1330"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1331" onclick="window.location.hash='#1331'"></td><td class="FileContents-lineContents" id="1331"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">q </span><span class="pun">&gt;</span><span class="pln"> p</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1332" onclick="window.location.hash='#1332'"></td><td class="FileContents-lineContents" id="1332"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> qq </span><span class="pun">=</span><span class="pln"> q </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1333" onclick="window.location.hash='#1333'"></td><td class="FileContents-lineContents" id="1333"><span class="pln">    assert</span><span class="pun">((*</span><span class="pln">qq</span><span class="pun">)-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1334" onclick="window.location.hash='#1334'"></td><td class="FileContents-lineContents" id="1334"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1335" onclick="window.location.hash='#1335'"></td><td class="FileContents-lineContents" id="1335"><span class="pln">    </span><span class="pun">*</span><span class="pln">q </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1336" onclick="window.location.hash='#1336'"></td><td class="FileContents-lineContents" id="1336"><span class="pln">    q </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1337" onclick="window.location.hash='#1337'"></td><td class="FileContents-lineContents" id="1337"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1338" onclick="window.location.hash='#1338'"></td><td class="FileContents-lineContents" id="1338"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1339" onclick="window.location.hash='#1339'"></td><td class="FileContents-lineContents" id="1339"><span class="pln">  m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1340" onclick="window.location.hash='#1340'"></td><td class="FileContents-lineContents" id="1340"><span class="pln">  </span><span class="pun">++</span><span class="pln">m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1341" onclick="window.location.hash='#1341'"></td><td class="FileContents-lineContents" id="1341"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1342" onclick="window.location.hash='#1342'"></td><td class="FileContents-lineContents" id="1342"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1343" onclick="window.location.hash='#1343'"></td><td class="FileContents-lineContents" id="1343"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">Load</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1344" onclick="window.location.hash='#1344'"></td><td class="FileContents-lineContents" id="1344"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1345" onclick="window.location.hash='#1345'"></td><td class="FileContents-lineContents" id="1345"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusterSize </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1346" onclick="window.location.hash='#1346'"></td><td class="FileContents-lineContents" id="1346"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusterCount </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1347" onclick="window.location.hash='#1347'"></td><td class="FileContents-lineContents" id="1347"><span class="pln">  </span><span class="com">// assert(m_size &gt;= 0);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1348" onclick="window.location.hash='#1348'"></td><td class="FileContents-lineContents" id="1348"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1349" onclick="window.location.hash='#1349'"></td><td class="FileContents-lineContents" id="1349"><span class="pln">  </span><span class="com">// Outermost (level 0) segment object has been constructed,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1350" onclick="window.location.hash='#1350'"></td><td class="FileContents-lineContents" id="1350"><span class="pln">  </span><span class="com">// and pos designates start of payload.  We need to find the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1351" onclick="window.location.hash='#1351'"></td><td class="FileContents-lineContents" id="1351"><span class="pln">  </span><span class="com">// inner (level 1) elements.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1352" onclick="window.location.hash='#1352'"></td><td class="FileContents-lineContents" id="1352"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1353" onclick="window.location.hash='#1353'"></td><td class="FileContents-lineContents" id="1353"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> header_status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseHeaders</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1354" onclick="window.location.hash='#1354'"></td><td class="FileContents-lineContents" id="1354"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1355" onclick="window.location.hash='#1355'"></td><td class="FileContents-lineContents" id="1355"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">header_status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1356" onclick="window.location.hash='#1356'"></td><td class="FileContents-lineContents" id="1356"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">header_status</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1357" onclick="window.location.hash='#1357'"></td><td class="FileContents-lineContents" id="1357"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1358" onclick="window.location.hash='#1358'"></td><td class="FileContents-lineContents" id="1358"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">header_status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1359" onclick="window.location.hash='#1359'"></td><td class="FileContents-lineContents" id="1359"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1360" onclick="window.location.hash='#1360'"></td><td class="FileContents-lineContents" id="1360"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1361" onclick="window.location.hash='#1361'"></td><td class="FileContents-lineContents" id="1361"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pInfo</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1362" onclick="window.location.hash='#1362'"></td><td class="FileContents-lineContents" id="1362"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pTracks</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1363" onclick="window.location.hash='#1363'"></td><td class="FileContents-lineContents" id="1363"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1364" onclick="window.location.hash='#1364'"></td><td class="FileContents-lineContents" id="1364"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1365" onclick="window.location.hash='#1365'"></td><td class="FileContents-lineContents" id="1365"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoadCluster</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1366" onclick="window.location.hash='#1366'"></td><td class="FileContents-lineContents" id="1366"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1367" onclick="window.location.hash='#1367'"></td><td class="FileContents-lineContents" id="1367"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1368" onclick="window.location.hash='#1368'"></td><td class="FileContents-lineContents" id="1368"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1369" onclick="window.location.hash='#1369'"></td><td class="FileContents-lineContents" id="1369"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1370" onclick="window.location.hash='#1370'"></td><td class="FileContents-lineContents" id="1370"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1371" onclick="window.location.hash='#1371'"></td><td class="FileContents-lineContents" id="1371"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1372" onclick="window.location.hash='#1372'"></td><td class="FileContents-lineContents" id="1372"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1373" onclick="window.location.hash='#1373'"></td><td class="FileContents-lineContents" id="1373"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1374" onclick="window.location.hash='#1374'"></td><td class="FileContents-lineContents" id="1374"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1375" onclick="window.location.hash='#1375'"></td><td class="FileContents-lineContents" id="1375"><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">SeekHead</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1376" onclick="window.location.hash='#1376'"></td><td class="FileContents-lineContents" id="1376"><span class="pln">                   </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1377" onclick="window.location.hash='#1377'"></td><td class="FileContents-lineContents" id="1377"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1378" onclick="window.location.hash='#1378'"></td><td class="FileContents-lineContents" id="1378"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1379" onclick="window.location.hash='#1379'"></td><td class="FileContents-lineContents" id="1379"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1380" onclick="window.location.hash='#1380'"></td><td class="FileContents-lineContents" id="1380"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1381" onclick="window.location.hash='#1381'"></td><td class="FileContents-lineContents" id="1381"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1382" onclick="window.location.hash='#1382'"></td><td class="FileContents-lineContents" id="1382"><span class="pln">      m_entries</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1383" onclick="window.location.hash='#1383'"></td><td class="FileContents-lineContents" id="1383"><span class="pln">      m_entry_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1384" onclick="window.location.hash='#1384'"></td><td class="FileContents-lineContents" id="1384"><span class="pln">      m_void_elements</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1385" onclick="window.location.hash='#1385'"></td><td class="FileContents-lineContents" id="1385"><span class="pln">      m_void_element_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1386" onclick="window.location.hash='#1386'"></td><td class="FileContents-lineContents" id="1386"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1387" onclick="window.location.hash='#1387'"></td><td class="FileContents-lineContents" id="1387"><span class="typ">SeekHead</span><span class="pun">::~</span><span class="typ">SeekHead</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1388" onclick="window.location.hash='#1388'"></td><td class="FileContents-lineContents" id="1388"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1389" onclick="window.location.hash='#1389'"></td><td class="FileContents-lineContents" id="1389"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_void_elements</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1390" onclick="window.location.hash='#1390'"></td><td class="FileContents-lineContents" id="1390"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1391" onclick="window.location.hash='#1391'"></td><td class="FileContents-lineContents" id="1391"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1392" onclick="window.location.hash='#1392'"></td><td class="FileContents-lineContents" id="1392"><span class="kwd">long</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1393" onclick="window.location.hash='#1393'"></td><td class="FileContents-lineContents" id="1393"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1394" onclick="window.location.hash='#1394'"></td><td class="FileContents-lineContents" id="1394"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1395" onclick="window.location.hash='#1395'"></td><td class="FileContents-lineContents" id="1395"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1396" onclick="window.location.hash='#1396'"></td><td class="FileContents-lineContents" id="1396"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1397" onclick="window.location.hash='#1397'"></td><td class="FileContents-lineContents" id="1397"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1398" onclick="window.location.hash='#1398'"></td><td class="FileContents-lineContents" id="1398"><span class="pln">  </span><span class="com">// first count the seek head entries</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1399" onclick="window.location.hash='#1399'"></td><td class="FileContents-lineContents" id="1399"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1400" onclick="window.location.hash='#1400'"></td><td class="FileContents-lineContents" id="1400"><span class="pln">  </span><span class="typ">int</span><span class="pln"> entry_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1401" onclick="window.location.hash='#1401'"></td><td class="FileContents-lineContents" id="1401"><span class="pln">  </span><span class="typ">int</span><span class="pln"> void_element_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1402" onclick="window.location.hash='#1402'"></td><td class="FileContents-lineContents" id="1402"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1403" onclick="window.location.hash='#1403'"></td><td class="FileContents-lineContents" id="1403"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1404" onclick="window.location.hash='#1404'"></td><td class="FileContents-lineContents" id="1404"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1405" onclick="window.location.hash='#1405'"></td><td class="FileContents-lineContents" id="1405"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1406" onclick="window.location.hash='#1406'"></td><td class="FileContents-lineContents" id="1406"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1407" onclick="window.location.hash='#1407'"></td><td class="FileContents-lineContents" id="1407"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1408" onclick="window.location.hash='#1408'"></td><td class="FileContents-lineContents" id="1408"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1409" onclick="window.location.hash='#1409'"></td><td class="FileContents-lineContents" id="1409"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1410" onclick="window.location.hash='#1410'"></td><td class="FileContents-lineContents" id="1410"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1411" onclick="window.location.hash='#1411'"></td><td class="FileContents-lineContents" id="1411"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0DBB</span><span class="pun">)</span><span class="pln">  </span><span class="com">// SeekEntry ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1412" onclick="window.location.hash='#1412'"></td><td class="FileContents-lineContents" id="1412"><span class="pln">      </span><span class="pun">++</span><span class="pln">entry_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1413" onclick="window.location.hash='#1413'"></td><td class="FileContents-lineContents" id="1413"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x6C</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Void ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1414" onclick="window.location.hash='#1414'"></td><td class="FileContents-lineContents" id="1414"><span class="pln">      </span><span class="pun">++</span><span class="pln">void_element_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1415" onclick="window.location.hash='#1415'"></td><td class="FileContents-lineContents" id="1415"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1416" onclick="window.location.hash='#1416'"></td><td class="FileContents-lineContents" id="1416"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1417" onclick="window.location.hash='#1417'"></td><td class="FileContents-lineContents" id="1417"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1418" onclick="window.location.hash='#1418'"></td><td class="FileContents-lineContents" id="1418"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1419" onclick="window.location.hash='#1419'"></td><td class="FileContents-lineContents" id="1419"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1420" onclick="window.location.hash='#1420'"></td><td class="FileContents-lineContents" id="1420"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1421" onclick="window.location.hash='#1421'"></td><td class="FileContents-lineContents" id="1421"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1422" onclick="window.location.hash='#1422'"></td><td class="FileContents-lineContents" id="1422"><span class="pln">  m_entries </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">[</span><span class="pln">entry_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1423" onclick="window.location.hash='#1423'"></td><td class="FileContents-lineContents" id="1423"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1424" onclick="window.location.hash='#1424'"></td><td class="FileContents-lineContents" id="1424"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1425" onclick="window.location.hash='#1425'"></td><td class="FileContents-lineContents" id="1425"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1426" onclick="window.location.hash='#1426'"></td><td class="FileContents-lineContents" id="1426"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1427" onclick="window.location.hash='#1427'"></td><td class="FileContents-lineContents" id="1427"><span class="pln">  m_void_elements </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">VoidElement</span><span class="pun">[</span><span class="pln">void_element_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1428" onclick="window.location.hash='#1428'"></td><td class="FileContents-lineContents" id="1428"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1429" onclick="window.location.hash='#1429'"></td><td class="FileContents-lineContents" id="1429"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_void_elements </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1430" onclick="window.location.hash='#1430'"></td><td class="FileContents-lineContents" id="1430"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1431" onclick="window.location.hash='#1431'"></td><td class="FileContents-lineContents" id="1431"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1432" onclick="window.location.hash='#1432'"></td><td class="FileContents-lineContents" id="1432"><span class="pln">  </span><span class="com">// now parse the entries and void elements</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1433" onclick="window.location.hash='#1433'"></td><td class="FileContents-lineContents" id="1433"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1434" onclick="window.location.hash='#1434'"></td><td class="FileContents-lineContents" id="1434"><span class="pln">  </span><span class="typ">Entry</span><span class="pun">*</span><span class="pln"> pEntry </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1435" onclick="window.location.hash='#1435'"></td><td class="FileContents-lineContents" id="1435"><span class="pln">  </span><span class="typ">VoidElement</span><span class="pun">*</span><span class="pln"> pVoidElement </span><span class="pun">=</span><span class="pln"> m_void_elements</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1436" onclick="window.location.hash='#1436'"></td><td class="FileContents-lineContents" id="1436"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1437" onclick="window.location.hash='#1437'"></td><td class="FileContents-lineContents" id="1437"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1438" onclick="window.location.hash='#1438'"></td><td class="FileContents-lineContents" id="1438"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1439" onclick="window.location.hash='#1439'"></td><td class="FileContents-lineContents" id="1439"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1440" onclick="window.location.hash='#1440'"></td><td class="FileContents-lineContents" id="1440"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1441" onclick="window.location.hash='#1441'"></td><td class="FileContents-lineContents" id="1441"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1442" onclick="window.location.hash='#1442'"></td><td class="FileContents-lineContents" id="1442"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1443" onclick="window.location.hash='#1443'"></td><td class="FileContents-lineContents" id="1443"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1444" onclick="window.location.hash='#1444'"></td><td class="FileContents-lineContents" id="1444"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1445" onclick="window.location.hash='#1445'"></td><td class="FileContents-lineContents" id="1445"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1446" onclick="window.location.hash='#1446'"></td><td class="FileContents-lineContents" id="1446"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1447" onclick="window.location.hash='#1447'"></td><td class="FileContents-lineContents" id="1447"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1448" onclick="window.location.hash='#1448'"></td><td class="FileContents-lineContents" id="1448"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1449" onclick="window.location.hash='#1449'"></td><td class="FileContents-lineContents" id="1449"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0DBB</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// SeekEntry ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1450" onclick="window.location.hash='#1450'"></td><td class="FileContents-lineContents" id="1450"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">ParseEntry</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> pEntry</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1451" onclick="window.location.hash='#1451'"></td><td class="FileContents-lineContents" id="1451"><span class="pln">        </span><span class="typ">Entry</span><span class="pun">&amp;</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pEntry</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1452" onclick="window.location.hash='#1452'"></td><td class="FileContents-lineContents" id="1452"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1453" onclick="window.location.hash='#1453'"></td><td class="FileContents-lineContents" id="1453"><span class="pln">        e</span><span class="pun">.</span><span class="pln">element_start </span><span class="pun">=</span><span class="pln"> idpos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1454" onclick="window.location.hash='#1454'"></td><td class="FileContents-lineContents" id="1454"><span class="pln">        e</span><span class="pun">.</span><span class="pln">element_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> idpos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1455" onclick="window.location.hash='#1455'"></td><td class="FileContents-lineContents" id="1455"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1456" onclick="window.location.hash='#1456'"></td><td class="FileContents-lineContents" id="1456"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x6C</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Void ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1457" onclick="window.location.hash='#1457'"></td><td class="FileContents-lineContents" id="1457"><span class="pln">      </span><span class="typ">VoidElement</span><span class="pun">&amp;</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pVoidElement</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1458" onclick="window.location.hash='#1458'"></td><td class="FileContents-lineContents" id="1458"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1459" onclick="window.location.hash='#1459'"></td><td class="FileContents-lineContents" id="1459"><span class="pln">      e</span><span class="pun">.</span><span class="pln">element_start </span><span class="pun">=</span><span class="pln"> idpos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1460" onclick="window.location.hash='#1460'"></td><td class="FileContents-lineContents" id="1460"><span class="pln">      e</span><span class="pun">.</span><span class="pln">element_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> idpos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1461" onclick="window.location.hash='#1461'"></td><td class="FileContents-lineContents" id="1461"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1462" onclick="window.location.hash='#1462'"></td><td class="FileContents-lineContents" id="1462"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1463" onclick="window.location.hash='#1463'"></td><td class="FileContents-lineContents" id="1463"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1464" onclick="window.location.hash='#1464'"></td><td class="FileContents-lineContents" id="1464"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1465" onclick="window.location.hash='#1465'"></td><td class="FileContents-lineContents" id="1465"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1466" onclick="window.location.hash='#1466'"></td><td class="FileContents-lineContents" id="1466"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1467" onclick="window.location.hash='#1467'"></td><td class="FileContents-lineContents" id="1467"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1468" onclick="window.location.hash='#1468'"></td><td class="FileContents-lineContents" id="1468"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1469" onclick="window.location.hash='#1469'"></td><td class="FileContents-lineContents" id="1469"><span class="pln">  </span><span class="typ">ptrdiff_t</span><span class="pln"> count_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pun">(</span><span class="pln">pEntry </span><span class="pun">-</span><span class="pln"> m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1470" onclick="window.location.hash='#1470'"></td><td class="FileContents-lineContents" id="1470"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count_ </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1471" onclick="window.location.hash='#1471'"></td><td class="FileContents-lineContents" id="1471"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count_ </span><span class="pun">&lt;=</span><span class="pln"> entry_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1472" onclick="window.location.hash='#1472'"></td><td class="FileContents-lineContents" id="1472"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1473" onclick="window.location.hash='#1473'"></td><td class="FileContents-lineContents" id="1473"><span class="pln">  m_entry_count </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;int&gt;</span><span class="pun">(</span><span class="pln">count_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1474" onclick="window.location.hash='#1474'"></td><td class="FileContents-lineContents" id="1474"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1475" onclick="window.location.hash='#1475'"></td><td class="FileContents-lineContents" id="1475"><span class="pln">  count_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pun">(</span><span class="pln">pVoidElement </span><span class="pun">-</span><span class="pln"> m_void_elements</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1476" onclick="window.location.hash='#1476'"></td><td class="FileContents-lineContents" id="1476"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count_ </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1477" onclick="window.location.hash='#1477'"></td><td class="FileContents-lineContents" id="1477"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count_ </span><span class="pun">&lt;=</span><span class="pln"> void_element_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1478" onclick="window.location.hash='#1478'"></td><td class="FileContents-lineContents" id="1478"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1479" onclick="window.location.hash='#1479'"></td><td class="FileContents-lineContents" id="1479"><span class="pln">  m_void_element_count </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;int&gt;</span><span class="pun">(</span><span class="pln">count_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1480" onclick="window.location.hash='#1480'"></td><td class="FileContents-lineContents" id="1480"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1481" onclick="window.location.hash='#1481'"></td><td class="FileContents-lineContents" id="1481"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1482" onclick="window.location.hash='#1482'"></td><td class="FileContents-lineContents" id="1482"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1483" onclick="window.location.hash='#1483'"></td><td class="FileContents-lineContents" id="1483"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1484" onclick="window.location.hash='#1484'"></td><td class="FileContents-lineContents" id="1484"><span class="typ">int</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">GetCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_entry_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1485" onclick="window.location.hash='#1485'"></td><td class="FileContents-lineContents" id="1485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1486" onclick="window.location.hash='#1486'"></td><td class="FileContents-lineContents" id="1486"><span class="kwd">const</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">Entry</span><span class="pun">*</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1487" onclick="window.location.hash='#1487'"></td><td class="FileContents-lineContents" id="1487"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1488" onclick="window.location.hash='#1488'"></td><td class="FileContents-lineContents" id="1488"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1489" onclick="window.location.hash='#1489'"></td><td class="FileContents-lineContents" id="1489"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1490" onclick="window.location.hash='#1490'"></td><td class="FileContents-lineContents" id="1490"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> m_entry_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1491" onclick="window.location.hash='#1491'"></td><td class="FileContents-lineContents" id="1491"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1492" onclick="window.location.hash='#1492'"></td><td class="FileContents-lineContents" id="1492"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1493" onclick="window.location.hash='#1493'"></td><td class="FileContents-lineContents" id="1493"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_entries </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1494" onclick="window.location.hash='#1494'"></td><td class="FileContents-lineContents" id="1494"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1495" onclick="window.location.hash='#1495'"></td><td class="FileContents-lineContents" id="1495"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1496" onclick="window.location.hash='#1496'"></td><td class="FileContents-lineContents" id="1496"><span class="typ">int</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">GetVoidElementCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_void_element_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1497" onclick="window.location.hash='#1497'"></td><td class="FileContents-lineContents" id="1497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1498" onclick="window.location.hash='#1498'"></td><td class="FileContents-lineContents" id="1498"><span class="kwd">const</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">VoidElement</span><span class="pun">*</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">GetVoidElement</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1499" onclick="window.location.hash='#1499'"></td><td class="FileContents-lineContents" id="1499"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1500" onclick="window.location.hash='#1500'"></td><td class="FileContents-lineContents" id="1500"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1501" onclick="window.location.hash='#1501'"></td><td class="FileContents-lineContents" id="1501"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1502" onclick="window.location.hash='#1502'"></td><td class="FileContents-lineContents" id="1502"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> m_void_element_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1503" onclick="window.location.hash='#1503'"></td><td class="FileContents-lineContents" id="1503"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1504" onclick="window.location.hash='#1504'"></td><td class="FileContents-lineContents" id="1504"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1505" onclick="window.location.hash='#1505'"></td><td class="FileContents-lineContents" id="1505"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_void_elements </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1506" onclick="window.location.hash='#1506'"></td><td class="FileContents-lineContents" id="1506"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1507" onclick="window.location.hash='#1507'"></td><td class="FileContents-lineContents" id="1507"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1508" onclick="window.location.hash='#1508'"></td><td class="FileContents-lineContents" id="1508"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">ParseCues</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1509" onclick="window.location.hash='#1509'"></td><td class="FileContents-lineContents" id="1509"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pCues</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1510" onclick="window.location.hash='#1510'"></td><td class="FileContents-lineContents" id="1510"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1511" onclick="window.location.hash='#1511'"></td><td class="FileContents-lineContents" id="1511"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1512" onclick="window.location.hash='#1512'"></td><td class="FileContents-lineContents" id="1512"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">off </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1513" onclick="window.location.hash='#1513'"></td><td class="FileContents-lineContents" id="1513"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1514" onclick="window.location.hash='#1514'"></td><td class="FileContents-lineContents" id="1514"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1515" onclick="window.location.hash='#1515'"></td><td class="FileContents-lineContents" id="1515"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1516" onclick="window.location.hash='#1516'"></td><td class="FileContents-lineContents" id="1516"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1517" onclick="window.location.hash='#1517'"></td><td class="FileContents-lineContents" id="1517"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1518" onclick="window.location.hash='#1518'"></td><td class="FileContents-lineContents" id="1518"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1519" onclick="window.location.hash='#1519'"></td><td class="FileContents-lineContents" id="1519"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1520" onclick="window.location.hash='#1520'"></td><td class="FileContents-lineContents" id="1520"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1521" onclick="window.location.hash='#1521'"></td><td class="FileContents-lineContents" id="1521"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1522" onclick="window.location.hash='#1522'"></td><td class="FileContents-lineContents" id="1522"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1523" onclick="window.location.hash='#1523'"></td><td class="FileContents-lineContents" id="1523"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1524" onclick="window.location.hash='#1524'"></td><td class="FileContents-lineContents" id="1524"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> off</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1525" onclick="window.location.hash='#1525'"></td><td class="FileContents-lineContents" id="1525"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1526" onclick="window.location.hash='#1526'"></td><td class="FileContents-lineContents" id="1526"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1527" onclick="window.location.hash='#1527'"></td><td class="FileContents-lineContents" id="1527"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// don&#39;t bother parsing cues</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1528" onclick="window.location.hash='#1528'"></td><td class="FileContents-lineContents" id="1528"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1529" onclick="window.location.hash='#1529'"></td><td class="FileContents-lineContents" id="1529"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1530" onclick="window.location.hash='#1530'"></td><td class="FileContents-lineContents" id="1530"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> segment_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1531" onclick="window.location.hash='#1531'"></td><td class="FileContents-lineContents" id="1531"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1532" onclick="window.location.hash='#1532'"></td><td class="FileContents-lineContents" id="1532"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1533" onclick="window.location.hash='#1533'"></td><td class="FileContents-lineContents" id="1533"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1534" onclick="window.location.hash='#1534'"></td><td class="FileContents-lineContents" id="1534"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1535" onclick="window.location.hash='#1535'"></td><td class="FileContents-lineContents" id="1535"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1536" onclick="window.location.hash='#1536'"></td><td class="FileContents-lineContents" id="1536"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1537" onclick="window.location.hash='#1537'"></td><td class="FileContents-lineContents" id="1537"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1538" onclick="window.location.hash='#1538'"></td><td class="FileContents-lineContents" id="1538"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1539" onclick="window.location.hash='#1539'"></td><td class="FileContents-lineContents" id="1539"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1540" onclick="window.location.hash='#1540'"></td><td class="FileContents-lineContents" id="1540"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1541" onclick="window.location.hash='#1541'"></td><td class="FileContents-lineContents" id="1541"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1542" onclick="window.location.hash='#1542'"></td><td class="FileContents-lineContents" id="1542"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow (weird)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1543" onclick="window.location.hash='#1543'"></td><td class="FileContents-lineContents" id="1543"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1544" onclick="window.location.hash='#1544'"></td><td class="FileContents-lineContents" id="1544"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1545" onclick="window.location.hash='#1545'"></td><td class="FileContents-lineContents" id="1545"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1546" onclick="window.location.hash='#1546'"></td><td class="FileContents-lineContents" id="1546"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1547" onclick="window.location.hash='#1547'"></td><td class="FileContents-lineContents" id="1547"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1548" onclick="window.location.hash='#1548'"></td><td class="FileContents-lineContents" id="1548"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1549" onclick="window.location.hash='#1549'"></td><td class="FileContents-lineContents" id="1549"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1550" onclick="window.location.hash='#1550'"></td><td class="FileContents-lineContents" id="1550"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1551" onclick="window.location.hash='#1551'"></td><td class="FileContents-lineContents" id="1551"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1552" onclick="window.location.hash='#1552'"></td><td class="FileContents-lineContents" id="1552"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1553" onclick="window.location.hash='#1553'"></td><td class="FileContents-lineContents" id="1553"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1554" onclick="window.location.hash='#1554'"></td><td class="FileContents-lineContents" id="1554"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1555" onclick="window.location.hash='#1555'"></td><td class="FileContents-lineContents" id="1555"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1556" onclick="window.location.hash='#1556'"></td><td class="FileContents-lineContents" id="1556"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1557" onclick="window.location.hash='#1557'"></td><td class="FileContents-lineContents" id="1557"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1558" onclick="window.location.hash='#1558'"></td><td class="FileContents-lineContents" id="1558"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1559" onclick="window.location.hash='#1559'"></td><td class="FileContents-lineContents" id="1559"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1560" onclick="window.location.hash='#1560'"></td><td class="FileContents-lineContents" id="1560"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1561" onclick="window.location.hash='#1561'"></td><td class="FileContents-lineContents" id="1561"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1562" onclick="window.location.hash='#1562'"></td><td class="FileContents-lineContents" id="1562"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1563" onclick="window.location.hash='#1563'"></td><td class="FileContents-lineContents" id="1563"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1564" onclick="window.location.hash='#1564'"></td><td class="FileContents-lineContents" id="1564"><span class="pln">  </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1565" onclick="window.location.hash='#1565'"></td><td class="FileContents-lineContents" id="1565"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1566" onclick="window.location.hash='#1566'"></td><td class="FileContents-lineContents" id="1566"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1567" onclick="window.location.hash='#1567'"></td><td class="FileContents-lineContents" id="1567"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1568" onclick="window.location.hash='#1568'"></td><td class="FileContents-lineContents" id="1568"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1569" onclick="window.location.hash='#1569'"></td><td class="FileContents-lineContents" id="1569"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1570" onclick="window.location.hash='#1570'"></td><td class="FileContents-lineContents" id="1570"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1571" onclick="window.location.hash='#1571'"></td><td class="FileContents-lineContents" id="1571"><span class="pln">  result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1572" onclick="window.location.hash='#1572'"></td><td class="FileContents-lineContents" id="1572"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1573" onclick="window.location.hash='#1573'"></td><td class="FileContents-lineContents" id="1573"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1574" onclick="window.location.hash='#1574'"></td><td class="FileContents-lineContents" id="1574"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1575" onclick="window.location.hash='#1575'"></td><td class="FileContents-lineContents" id="1575"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1576" onclick="window.location.hash='#1576'"></td><td class="FileContents-lineContents" id="1576"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow (weird)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1577" onclick="window.location.hash='#1577'"></td><td class="FileContents-lineContents" id="1577"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1578" onclick="window.location.hash='#1578'"></td><td class="FileContents-lineContents" id="1578"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1579" onclick="window.location.hash='#1579'"></td><td class="FileContents-lineContents" id="1579"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1580" onclick="window.location.hash='#1580'"></td><td class="FileContents-lineContents" id="1580"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1581" onclick="window.location.hash='#1581'"></td><td class="FileContents-lineContents" id="1581"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1582" onclick="window.location.hash='#1582'"></td><td class="FileContents-lineContents" id="1582"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1583" onclick="window.location.hash='#1583'"></td><td class="FileContents-lineContents" id="1583"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1584" onclick="window.location.hash='#1584'"></td><td class="FileContents-lineContents" id="1584"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1585" onclick="window.location.hash='#1585'"></td><td class="FileContents-lineContents" id="1585"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1586" onclick="window.location.hash='#1586'"></td><td class="FileContents-lineContents" id="1586"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1587" onclick="window.location.hash='#1587'"></td><td class="FileContents-lineContents" id="1587"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1588" onclick="window.location.hash='#1588'"></td><td class="FileContents-lineContents" id="1588"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1589" onclick="window.location.hash='#1589'"></td><td class="FileContents-lineContents" id="1589"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1590" onclick="window.location.hash='#1590'"></td><td class="FileContents-lineContents" id="1590"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1591" onclick="window.location.hash='#1591'"></td><td class="FileContents-lineContents" id="1591"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1592" onclick="window.location.hash='#1592'"></td><td class="FileContents-lineContents" id="1592"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1593" onclick="window.location.hash='#1593'"></td><td class="FileContents-lineContents" id="1593"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird, although technically not illegal</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1594" onclick="window.location.hash='#1594'"></td><td class="FileContents-lineContents" id="1594"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// done</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1595" onclick="window.location.hash='#1595'"></td><td class="FileContents-lineContents" id="1595"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1596" onclick="window.location.hash='#1596'"></td><td class="FileContents-lineContents" id="1596"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1597" onclick="window.location.hash='#1597'"></td><td class="FileContents-lineContents" id="1597"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1598" onclick="window.location.hash='#1598'"></td><td class="FileContents-lineContents" id="1598"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1599" onclick="window.location.hash='#1599'"></td><td class="FileContents-lineContents" id="1599"><span class="pln">  </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1600" onclick="window.location.hash='#1600'"></td><td class="FileContents-lineContents" id="1600"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1601" onclick="window.location.hash='#1601'"></td><td class="FileContents-lineContents" id="1601"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1602" onclick="window.location.hash='#1602'"></td><td class="FileContents-lineContents" id="1602"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1603" onclick="window.location.hash='#1603'"></td><td class="FileContents-lineContents" id="1603"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">element_stop </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1604" onclick="window.location.hash='#1604'"></td><td class="FileContents-lineContents" id="1604"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1605" onclick="window.location.hash='#1605'"></td><td class="FileContents-lineContents" id="1605"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1606" onclick="window.location.hash='#1606'"></td><td class="FileContents-lineContents" id="1606"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">element_stop </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1607" onclick="window.location.hash='#1607'"></td><td class="FileContents-lineContents" id="1607"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// don&#39;t bother parsing anymore</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1608" onclick="window.location.hash='#1608'"></td><td class="FileContents-lineContents" id="1608"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1609" onclick="window.location.hash='#1609'"></td><td class="FileContents-lineContents" id="1609"><span class="pln">  len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1610" onclick="window.location.hash='#1610'"></td><td class="FileContents-lineContents" id="1610"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1611" onclick="window.location.hash='#1611'"></td><td class="FileContents-lineContents" id="1611"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">element_stop </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1612" onclick="window.location.hash='#1612'"></td><td class="FileContents-lineContents" id="1612"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1613" onclick="window.location.hash='#1613'"></td><td class="FileContents-lineContents" id="1613"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1614" onclick="window.location.hash='#1614'"></td><td class="FileContents-lineContents" id="1614"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> element_stop </span><span class="pun">-</span><span class="pln"> element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1615" onclick="window.location.hash='#1615'"></td><td class="FileContents-lineContents" id="1615"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1616" onclick="window.location.hash='#1616'"></td><td class="FileContents-lineContents" id="1616"><span class="pln">  m_pCues </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1617" onclick="window.location.hash='#1617'"></td><td class="FileContents-lineContents" id="1617"><span class="pln">      </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1618" onclick="window.location.hash='#1618'"></td><td class="FileContents-lineContents" id="1618"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pCues</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1619" onclick="window.location.hash='#1619'"></td><td class="FileContents-lineContents" id="1619"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1620" onclick="window.location.hash='#1620'"></td><td class="FileContents-lineContents" id="1620"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1621" onclick="window.location.hash='#1621'"></td><td class="FileContents-lineContents" id="1621"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1622" onclick="window.location.hash='#1622'"></td><td class="FileContents-lineContents" id="1622"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1623" onclick="window.location.hash='#1623'"></td><td class="FileContents-lineContents" id="1623"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">::</span><span class="typ">ParseEntry</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1624" onclick="window.location.hash='#1624'"></td><td class="FileContents-lineContents" id="1624"><span class="pln">                          </span><span class="typ">Entry</span><span class="pun">*</span><span class="pln"> pEntry</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1625" onclick="window.location.hash='#1625'"></td><td class="FileContents-lineContents" id="1625"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size_ </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1626" onclick="window.location.hash='#1626'"></td><td class="FileContents-lineContents" id="1626"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1627" onclick="window.location.hash='#1627'"></td><td class="FileContents-lineContents" id="1627"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1628" onclick="window.location.hash='#1628'"></td><td class="FileContents-lineContents" id="1628"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1629" onclick="window.location.hash='#1629'"></td><td class="FileContents-lineContents" id="1629"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1630" onclick="window.location.hash='#1630'"></td><td class="FileContents-lineContents" id="1630"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1631" onclick="window.location.hash='#1631'"></td><td class="FileContents-lineContents" id="1631"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1632" onclick="window.location.hash='#1632'"></td><td class="FileContents-lineContents" id="1632"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1633" onclick="window.location.hash='#1633'"></td><td class="FileContents-lineContents" id="1633"><span class="pln">  </span><span class="com">// parse the container for the level-1 element ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1634" onclick="window.location.hash='#1634'"></td><td class="FileContents-lineContents" id="1634"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1635" onclick="window.location.hash='#1635'"></td><td class="FileContents-lineContents" id="1635"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> seekIdId </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1636" onclick="window.location.hash='#1636'"></td><td class="FileContents-lineContents" id="1636"><span class="pln">  </span><span class="com">// seekIdId;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1637" onclick="window.location.hash='#1637'"></td><td class="FileContents-lineContents" id="1637"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1638" onclick="window.location.hash='#1638'"></td><td class="FileContents-lineContents" id="1638"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">seekIdId </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x13AB</span><span class="pun">)</span><span class="pln">  </span><span class="com">// SeekID ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1639" onclick="window.location.hash='#1639'"></td><td class="FileContents-lineContents" id="1639"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1640" onclick="window.location.hash='#1640'"></td><td class="FileContents-lineContents" id="1640"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1641" onclick="window.location.hash='#1641'"></td><td class="FileContents-lineContents" id="1641"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1642" onclick="window.location.hash='#1642'"></td><td class="FileContents-lineContents" id="1642"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1643" onclick="window.location.hash='#1643'"></td><td class="FileContents-lineContents" id="1643"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1644" onclick="window.location.hash='#1644'"></td><td class="FileContents-lineContents" id="1644"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume SeekID id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1645" onclick="window.location.hash='#1645'"></td><td class="FileContents-lineContents" id="1645"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1646" onclick="window.location.hash='#1646'"></td><td class="FileContents-lineContents" id="1646"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> seekIdSize </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1647" onclick="window.location.hash='#1647'"></td><td class="FileContents-lineContents" id="1647"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1648" onclick="window.location.hash='#1648'"></td><td class="FileContents-lineContents" id="1648"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">seekIdSize </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1649" onclick="window.location.hash='#1649'"></td><td class="FileContents-lineContents" id="1649"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1650" onclick="window.location.hash='#1650'"></td><td class="FileContents-lineContents" id="1650"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1651" onclick="window.location.hash='#1651'"></td><td class="FileContents-lineContents" id="1651"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1652" onclick="window.location.hash='#1652'"></td><td class="FileContents-lineContents" id="1652"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1653" onclick="window.location.hash='#1653'"></td><td class="FileContents-lineContents" id="1653"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1654" onclick="window.location.hash='#1654'"></td><td class="FileContents-lineContents" id="1654"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size of field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1655" onclick="window.location.hash='#1655'"></td><td class="FileContents-lineContents" id="1655"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1656" onclick="window.location.hash='#1656'"></td><td class="FileContents-lineContents" id="1656"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> seekIdSize</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1657" onclick="window.location.hash='#1657'"></td><td class="FileContents-lineContents" id="1657"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1658" onclick="window.location.hash='#1658'"></td><td class="FileContents-lineContents" id="1658"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1659" onclick="window.location.hash='#1659'"></td><td class="FileContents-lineContents" id="1659"><span class="pln">  </span><span class="com">// Note that the SeekId payload really is serialized</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1660" onclick="window.location.hash='#1660'"></td><td class="FileContents-lineContents" id="1660"><span class="pln">  </span><span class="com">// as a &quot;Matroska integer&quot;, not as a plain binary value.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1661" onclick="window.location.hash='#1661'"></td><td class="FileContents-lineContents" id="1661"><span class="pln">  </span><span class="com">// In fact, Matroska requires that ID values in the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1662" onclick="window.location.hash='#1662'"></td><td class="FileContents-lineContents" id="1662"><span class="pln">  </span><span class="com">// stream exactly match the binary representation as listed</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1663" onclick="window.location.hash='#1663'"></td><td class="FileContents-lineContents" id="1663"><span class="pln">  </span><span class="com">// in the Matroska specification.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1664" onclick="window.location.hash='#1664'"></td><td class="FileContents-lineContents" id="1664"><span class="pln">  </span><span class="com">//</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1665" onclick="window.location.hash='#1665'"></td><td class="FileContents-lineContents" id="1665"><span class="pln">  </span><span class="com">// This parser is more liberal, and permits IDs to have</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1666" onclick="window.location.hash='#1666'"></td><td class="FileContents-lineContents" id="1666"><span class="pln">  </span><span class="com">// any width.  (This could make the representation in the stream</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1667" onclick="window.location.hash='#1667'"></td><td class="FileContents-lineContents" id="1667"><span class="pln">  </span><span class="com">// different from what&#39;s in the spec, but it doesn&#39;t matter here,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1668" onclick="window.location.hash='#1668'"></td><td class="FileContents-lineContents" id="1668"><span class="pln">  </span><span class="com">// since we always normalize &quot;Matroska integer&quot; values.)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1669" onclick="window.location.hash='#1669'"></td><td class="FileContents-lineContents" id="1669"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1670" onclick="window.location.hash='#1670'"></td><td class="FileContents-lineContents" id="1670"><span class="pln">  pEntry</span><span class="pun">-&gt;</span><span class="pln">id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span><span class="pln">  </span><span class="com">// payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1671" onclick="window.location.hash='#1671'"></td><td class="FileContents-lineContents" id="1671"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1672" onclick="window.location.hash='#1672'"></td><td class="FileContents-lineContents" id="1672"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">-&gt;</span><span class="pln">id </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1673" onclick="window.location.hash='#1673'"></td><td class="FileContents-lineContents" id="1673"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1674" onclick="window.location.hash='#1674'"></td><td class="FileContents-lineContents" id="1674"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1675" onclick="window.location.hash='#1675'"></td><td class="FileContents-lineContents" id="1675"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">len </span><span class="pun">!=</span><span class="pln"> seekIdSize</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1676" onclick="window.location.hash='#1676'"></td><td class="FileContents-lineContents" id="1676"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1677" onclick="window.location.hash='#1677'"></td><td class="FileContents-lineContents" id="1677"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1678" onclick="window.location.hash='#1678'"></td><td class="FileContents-lineContents" id="1678"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> seekIdSize</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume SeekID payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1679" onclick="window.location.hash='#1679'"></td><td class="FileContents-lineContents" id="1679"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1680" onclick="window.location.hash='#1680'"></td><td class="FileContents-lineContents" id="1680"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> seekPosId </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1681" onclick="window.location.hash='#1681'"></td><td class="FileContents-lineContents" id="1681"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1682" onclick="window.location.hash='#1682'"></td><td class="FileContents-lineContents" id="1682"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">seekPosId </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x13AC</span><span class="pun">)</span><span class="pln">  </span><span class="com">// SeekPos ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1683" onclick="window.location.hash='#1683'"></td><td class="FileContents-lineContents" id="1683"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1684" onclick="window.location.hash='#1684'"></td><td class="FileContents-lineContents" id="1684"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1685" onclick="window.location.hash='#1685'"></td><td class="FileContents-lineContents" id="1685"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1686" onclick="window.location.hash='#1686'"></td><td class="FileContents-lineContents" id="1686"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1687" onclick="window.location.hash='#1687'"></td><td class="FileContents-lineContents" id="1687"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1688" onclick="window.location.hash='#1688'"></td><td class="FileContents-lineContents" id="1688"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1689" onclick="window.location.hash='#1689'"></td><td class="FileContents-lineContents" id="1689"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1690" onclick="window.location.hash='#1690'"></td><td class="FileContents-lineContents" id="1690"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> seekPosSize </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1691" onclick="window.location.hash='#1691'"></td><td class="FileContents-lineContents" id="1691"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1692" onclick="window.location.hash='#1692'"></td><td class="FileContents-lineContents" id="1692"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">seekPosSize </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1693" onclick="window.location.hash='#1693'"></td><td class="FileContents-lineContents" id="1693"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1694" onclick="window.location.hash='#1694'"></td><td class="FileContents-lineContents" id="1694"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1695" onclick="window.location.hash='#1695'"></td><td class="FileContents-lineContents" id="1695"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1696" onclick="window.location.hash='#1696'"></td><td class="FileContents-lineContents" id="1696"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1697" onclick="window.location.hash='#1697'"></td><td class="FileContents-lineContents" id="1697"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1698" onclick="window.location.hash='#1698'"></td><td class="FileContents-lineContents" id="1698"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1699" onclick="window.location.hash='#1699'"></td><td class="FileContents-lineContents" id="1699"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1700" onclick="window.location.hash='#1700'"></td><td class="FileContents-lineContents" id="1700"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> seekPosSize</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1701" onclick="window.location.hash='#1701'"></td><td class="FileContents-lineContents" id="1701"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1702" onclick="window.location.hash='#1702'"></td><td class="FileContents-lineContents" id="1702"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1703" onclick="window.location.hash='#1703'"></td><td class="FileContents-lineContents" id="1703"><span class="pln">  pEntry</span><span class="pun">-&gt;</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> seekPosSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1704" onclick="window.location.hash='#1704'"></td><td class="FileContents-lineContents" id="1704"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1705" onclick="window.location.hash='#1705'"></td><td class="FileContents-lineContents" id="1705"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">-&gt;</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1706" onclick="window.location.hash='#1706'"></td><td class="FileContents-lineContents" id="1706"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1707" onclick="window.location.hash='#1707'"></td><td class="FileContents-lineContents" id="1707"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1708" onclick="window.location.hash='#1708'"></td><td class="FileContents-lineContents" id="1708"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> seekPosSize</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1709" onclick="window.location.hash='#1709'"></td><td class="FileContents-lineContents" id="1709"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1710" onclick="window.location.hash='#1710'"></td><td class="FileContents-lineContents" id="1710"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">!=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1711" onclick="window.location.hash='#1711'"></td><td class="FileContents-lineContents" id="1711"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1712" onclick="window.location.hash='#1712'"></td><td class="FileContents-lineContents" id="1712"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1713" onclick="window.location.hash='#1713'"></td><td class="FileContents-lineContents" id="1713"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1714" onclick="window.location.hash='#1714'"></td><td class="FileContents-lineContents" id="1714"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1715" onclick="window.location.hash='#1715'"></td><td class="FileContents-lineContents" id="1715"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1716" onclick="window.location.hash='#1716'"></td><td class="FileContents-lineContents" id="1716"><span class="typ">Cues</span><span class="pun">::</span><span class="typ">Cues</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start_</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1717" onclick="window.location.hash='#1717'"></td><td class="FileContents-lineContents" id="1717"><span class="pln">           </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1718" onclick="window.location.hash='#1718'"></td><td class="FileContents-lineContents" id="1718"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1719" onclick="window.location.hash='#1719'"></td><td class="FileContents-lineContents" id="1719"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">start_</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1720" onclick="window.location.hash='#1720'"></td><td class="FileContents-lineContents" id="1720"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1721" onclick="window.location.hash='#1721'"></td><td class="FileContents-lineContents" id="1721"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1722" onclick="window.location.hash='#1722'"></td><td class="FileContents-lineContents" id="1722"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1723" onclick="window.location.hash='#1723'"></td><td class="FileContents-lineContents" id="1723"><span class="pln">      m_cue_points</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1724" onclick="window.location.hash='#1724'"></td><td class="FileContents-lineContents" id="1724"><span class="pln">      m_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1725" onclick="window.location.hash='#1725'"></td><td class="FileContents-lineContents" id="1725"><span class="pln">      m_preload_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1726" onclick="window.location.hash='#1726'"></td><td class="FileContents-lineContents" id="1726"><span class="pln">      m_pos</span><span class="pun">(</span><span class="pln">start_</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1727" onclick="window.location.hash='#1727'"></td><td class="FileContents-lineContents" id="1727"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1728" onclick="window.location.hash='#1728'"></td><td class="FileContents-lineContents" id="1728"><span class="typ">Cues</span><span class="pun">::~</span><span class="typ">Cues</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1729" onclick="window.location.hash='#1729'"></td><td class="FileContents-lineContents" id="1729"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> m_count </span><span class="pun">+</span><span class="pln"> m_preload_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1730" onclick="window.location.hash='#1730'"></td><td class="FileContents-lineContents" id="1730"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1731" onclick="window.location.hash='#1731'"></td><td class="FileContents-lineContents" id="1731"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1732" onclick="window.location.hash='#1732'"></td><td class="FileContents-lineContents" id="1732"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> p </span><span class="pun">+</span><span class="pln"> n</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1733" onclick="window.location.hash='#1733'"></td><td class="FileContents-lineContents" id="1733"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1734" onclick="window.location.hash='#1734'"></td><td class="FileContents-lineContents" id="1734"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p </span><span class="pun">!=</span><span class="pln"> q</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1735" onclick="window.location.hash='#1735'"></td><td class="FileContents-lineContents" id="1735"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCP </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">p</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1736" onclick="window.location.hash='#1736'"></td><td class="FileContents-lineContents" id="1736"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1737" onclick="window.location.hash='#1737'"></td><td class="FileContents-lineContents" id="1737"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1738" onclick="window.location.hash='#1738'"></td><td class="FileContents-lineContents" id="1738"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> pCP</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1739" onclick="window.location.hash='#1739'"></td><td class="FileContents-lineContents" id="1739"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1740" onclick="window.location.hash='#1740'"></td><td class="FileContents-lineContents" id="1740"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1741" onclick="window.location.hash='#1741'"></td><td class="FileContents-lineContents" id="1741"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1742" onclick="window.location.hash='#1742'"></td><td class="FileContents-lineContents" id="1742"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1743" onclick="window.location.hash='#1743'"></td><td class="FileContents-lineContents" id="1743"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1744" onclick="window.location.hash='#1744'"></td><td class="FileContents-lineContents" id="1744"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">GetCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1745" onclick="window.location.hash='#1745'"></td><td class="FileContents-lineContents" id="1745"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_cue_points </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1746" onclick="window.location.hash='#1746'"></td><td class="FileContents-lineContents" id="1746"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1747" onclick="window.location.hash='#1747'"></td><td class="FileContents-lineContents" id="1747"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1748" onclick="window.location.hash='#1748'"></td><td class="FileContents-lineContents" id="1748"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_count</span><span class="pun">;</span><span class="pln">  </span><span class="com">// TODO: really ignore preload count?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1749" onclick="window.location.hash='#1749'"></td><td class="FileContents-lineContents" id="1749"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1750" onclick="window.location.hash='#1750'"></td><td class="FileContents-lineContents" id="1750"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1751" onclick="window.location.hash='#1751'"></td><td class="FileContents-lineContents" id="1751"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">DoneParsing</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1752" onclick="window.location.hash='#1752'"></td><td class="FileContents-lineContents" id="1752"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1753" onclick="window.location.hash='#1753'"></td><td class="FileContents-lineContents" id="1753"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1754" onclick="window.location.hash='#1754'"></td><td class="FileContents-lineContents" id="1754"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1755" onclick="window.location.hash='#1755'"></td><td class="FileContents-lineContents" id="1755"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1756" onclick="window.location.hash='#1756'"></td><td class="FileContents-lineContents" id="1756"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1757" onclick="window.location.hash='#1757'"></td><td class="FileContents-lineContents" id="1757"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_cue_points</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1758" onclick="window.location.hash='#1758'"></td><td class="FileContents-lineContents" id="1758"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1759" onclick="window.location.hash='#1759'"></td><td class="FileContents-lineContents" id="1759"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1760" onclick="window.location.hash='#1760'"></td><td class="FileContents-lineContents" id="1760"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1761" onclick="window.location.hash='#1761'"></td><td class="FileContents-lineContents" id="1761"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_preload_count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1762" onclick="window.location.hash='#1762'"></td><td class="FileContents-lineContents" id="1762"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1763" onclick="window.location.hash='#1763'"></td><td class="FileContents-lineContents" id="1763"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1764" onclick="window.location.hash='#1764'"></td><td class="FileContents-lineContents" id="1764"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1765" onclick="window.location.hash='#1765'"></td><td class="FileContents-lineContents" id="1765"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1766" onclick="window.location.hash='#1766'"></td><td class="FileContents-lineContents" id="1766"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1767" onclick="window.location.hash='#1767'"></td><td class="FileContents-lineContents" id="1767"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1768" onclick="window.location.hash='#1768'"></td><td class="FileContents-lineContents" id="1768"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> cue_points_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1769" onclick="window.location.hash='#1769'"></td><td class="FileContents-lineContents" id="1769"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1770" onclick="window.location.hash='#1770'"></td><td class="FileContents-lineContents" id="1770"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1771" onclick="window.location.hash='#1771'"></td><td class="FileContents-lineContents" id="1771"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1772" onclick="window.location.hash='#1772'"></td><td class="FileContents-lineContents" id="1772"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1773" onclick="window.location.hash='#1773'"></td><td class="FileContents-lineContents" id="1773"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1774" onclick="window.location.hash='#1774'"></td><td class="FileContents-lineContents" id="1774"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1775" onclick="window.location.hash='#1775'"></td><td class="FileContents-lineContents" id="1775"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1776" onclick="window.location.hash='#1776'"></td><td class="FileContents-lineContents" id="1776"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1777" onclick="window.location.hash='#1777'"></td><td class="FileContents-lineContents" id="1777"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1778" onclick="window.location.hash='#1778'"></td><td class="FileContents-lineContents" id="1778"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1779" onclick="window.location.hash='#1779'"></td><td class="FileContents-lineContents" id="1779"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1780" onclick="window.location.hash='#1780'"></td><td class="FileContents-lineContents" id="1780"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1781" onclick="window.location.hash='#1781'"></td><td class="FileContents-lineContents" id="1781"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1782" onclick="window.location.hash='#1782'"></td><td class="FileContents-lineContents" id="1782"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1783" onclick="window.location.hash='#1783'"></td><td class="FileContents-lineContents" id="1783"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1784" onclick="window.location.hash='#1784'"></td><td class="FileContents-lineContents" id="1784"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1785" onclick="window.location.hash='#1785'"></td><td class="FileContents-lineContents" id="1785"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1786" onclick="window.location.hash='#1786'"></td><td class="FileContents-lineContents" id="1786"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1787" onclick="window.location.hash='#1787'"></td><td class="FileContents-lineContents" id="1787"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1788" onclick="window.location.hash='#1788'"></td><td class="FileContents-lineContents" id="1788"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1789" onclick="window.location.hash='#1789'"></td><td class="FileContents-lineContents" id="1789"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1790" onclick="window.location.hash='#1790'"></td><td class="FileContents-lineContents" id="1790"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1791" onclick="window.location.hash='#1791'"></td><td class="FileContents-lineContents" id="1791"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1792" onclick="window.location.hash='#1792'"></td><td class="FileContents-lineContents" id="1792"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x3B</span><span class="pun">)</span><span class="pln">  </span><span class="com">// CuePoint ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1793" onclick="window.location.hash='#1793'"></td><td class="FileContents-lineContents" id="1793"><span class="pln">      </span><span class="typ">PreloadCuePoint</span><span class="pun">(</span><span class="pln">cue_points_size</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1794" onclick="window.location.hash='#1794'"></td><td class="FileContents-lineContents" id="1794"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1795" onclick="window.location.hash='#1795'"></td><td class="FileContents-lineContents" id="1795"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// skip payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1796" onclick="window.location.hash='#1796'"></td><td class="FileContents-lineContents" id="1796"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1797" onclick="window.location.hash='#1797'"></td><td class="FileContents-lineContents" id="1797"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1798" onclick="window.location.hash='#1798'"></td><td class="FileContents-lineContents" id="1798"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1799" onclick="window.location.hash='#1799'"></td><td class="FileContents-lineContents" id="1799"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1800" onclick="window.location.hash='#1800'"></td><td class="FileContents-lineContents" id="1800"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">PreloadCuePoint</span><span class="pun">(</span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> cue_points_size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1801" onclick="window.location.hash='#1801'"></td><td class="FileContents-lineContents" id="1801"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1802" onclick="window.location.hash='#1802'"></td><td class="FileContents-lineContents" id="1802"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1803" onclick="window.location.hash='#1803'"></td><td class="FileContents-lineContents" id="1803"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_preload_count </span><span class="pun">&gt;=</span><span class="pln"> cue_points_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1804" onclick="window.location.hash='#1804'"></td><td class="FileContents-lineContents" id="1804"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cue_points_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">2048</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cue_points_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1805" onclick="window.location.hash='#1805'"></td><td class="FileContents-lineContents" id="1805"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1806" onclick="window.location.hash='#1806'"></td><td class="FileContents-lineContents" id="1806"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> qq </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*[</span><span class="pln">n</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1807" onclick="window.location.hash='#1807'"></td><td class="FileContents-lineContents" id="1807"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span><span class="pln">  </span><span class="com">// beginning of target</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1808" onclick="window.location.hash='#1808'"></td><td class="FileContents-lineContents" id="1808"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1809" onclick="window.location.hash='#1809'"></td><td class="FileContents-lineContents" id="1809"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">;</span><span class="pln">  </span><span class="com">// beginning of source</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1810" onclick="window.location.hash='#1810'"></td><td class="FileContents-lineContents" id="1810"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pp </span><span class="pun">=</span><span class="pln"> p </span><span class="pun">+</span><span class="pln"> m_preload_count</span><span class="pun">;</span><span class="pln">  </span><span class="com">// end of source</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1811" onclick="window.location.hash='#1811'"></td><td class="FileContents-lineContents" id="1811"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1812" onclick="window.location.hash='#1812'"></td><td class="FileContents-lineContents" id="1812"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p </span><span class="pun">!=</span><span class="pln"> pp</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1813" onclick="window.location.hash='#1813'"></td><td class="FileContents-lineContents" id="1813"><span class="pln">      </span><span class="pun">*</span><span class="pln">q</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">p</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1814" onclick="window.location.hash='#1814'"></td><td class="FileContents-lineContents" id="1814"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1815" onclick="window.location.hash='#1815'"></td><td class="FileContents-lineContents" id="1815"><span class="pln">    </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1816" onclick="window.location.hash='#1816'"></td><td class="FileContents-lineContents" id="1816"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1817" onclick="window.location.hash='#1817'"></td><td class="FileContents-lineContents" id="1817"><span class="pln">    m_cue_points </span><span class="pun">=</span><span class="pln"> qq</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1818" onclick="window.location.hash='#1818'"></td><td class="FileContents-lineContents" id="1818"><span class="pln">    cue_points_size </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1819" onclick="window.location.hash='#1819'"></td><td class="FileContents-lineContents" id="1819"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1820" onclick="window.location.hash='#1820'"></td><td class="FileContents-lineContents" id="1820"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1821" onclick="window.location.hash='#1821'"></td><td class="FileContents-lineContents" id="1821"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCP </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">(</span><span class="pln">m_preload_count</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1822" onclick="window.location.hash='#1822'"></td><td class="FileContents-lineContents" id="1822"><span class="pln">  m_cue_points</span><span class="pun">[</span><span class="pln">m_preload_count</span><span class="pun">++]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> pCP</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1823" onclick="window.location.hash='#1823'"></td><td class="FileContents-lineContents" id="1823"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1824" onclick="window.location.hash='#1824'"></td><td class="FileContents-lineContents" id="1824"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1825" onclick="window.location.hash='#1825'"></td><td class="FileContents-lineContents" id="1825"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">LoadCuePoint</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1826" onclick="window.location.hash='#1826'"></td><td class="FileContents-lineContents" id="1826"><span class="pln">  </span><span class="com">// odbgstream os;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1827" onclick="window.location.hash='#1827'"></td><td class="FileContents-lineContents" id="1827"><span class="pln">  </span><span class="com">// os &lt;&lt; &quot;Cues::LoadCuePoint&quot; &lt;&lt; endl;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1828" onclick="window.location.hash='#1828'"></td><td class="FileContents-lineContents" id="1828"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1829" onclick="window.location.hash='#1829'"></td><td class="FileContents-lineContents" id="1829"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1830" onclick="window.location.hash='#1830'"></td><td class="FileContents-lineContents" id="1830"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1831" onclick="window.location.hash='#1831'"></td><td class="FileContents-lineContents" id="1831"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1832" onclick="window.location.hash='#1832'"></td><td class="FileContents-lineContents" id="1832"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1833" onclick="window.location.hash='#1833'"></td><td class="FileContents-lineContents" id="1833"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1834" onclick="window.location.hash='#1834'"></td><td class="FileContents-lineContents" id="1834"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">Init</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1835" onclick="window.location.hash='#1835'"></td><td class="FileContents-lineContents" id="1835"><span class="pln">    m_pos </span><span class="pun">=</span><span class="pln"> stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1836" onclick="window.location.hash='#1836'"></td><td class="FileContents-lineContents" id="1836"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1837" onclick="window.location.hash='#1837'"></td><td class="FileContents-lineContents" id="1837"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1838" onclick="window.location.hash='#1838'"></td><td class="FileContents-lineContents" id="1838"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1839" onclick="window.location.hash='#1839'"></td><td class="FileContents-lineContents" id="1839"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1840" onclick="window.location.hash='#1840'"></td><td class="FileContents-lineContents" id="1840"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1841" onclick="window.location.hash='#1841'"></td><td class="FileContents-lineContents" id="1841"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1842" onclick="window.location.hash='#1842'"></td><td class="FileContents-lineContents" id="1842"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> m_pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1843" onclick="window.location.hash='#1843'"></td><td class="FileContents-lineContents" id="1843"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1844" onclick="window.location.hash='#1844'"></td><td class="FileContents-lineContents" id="1844"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1845" onclick="window.location.hash='#1845'"></td><td class="FileContents-lineContents" id="1845"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1846" onclick="window.location.hash='#1846'"></td><td class="FileContents-lineContents" id="1846"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> m_pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1847" onclick="window.location.hash='#1847'"></td><td class="FileContents-lineContents" id="1847"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1848" onclick="window.location.hash='#1848'"></td><td class="FileContents-lineContents" id="1848"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">m_pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1849" onclick="window.location.hash='#1849'"></td><td class="FileContents-lineContents" id="1849"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1850" onclick="window.location.hash='#1850'"></td><td class="FileContents-lineContents" id="1850"><span class="pln">    m_pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1851" onclick="window.location.hash='#1851'"></td><td class="FileContents-lineContents" id="1851"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1852" onclick="window.location.hash='#1852'"></td><td class="FileContents-lineContents" id="1852"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> m_pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1853" onclick="window.location.hash='#1853'"></td><td class="FileContents-lineContents" id="1853"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1854" onclick="window.location.hash='#1854'"></td><td class="FileContents-lineContents" id="1854"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">m_pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1855" onclick="window.location.hash='#1855'"></td><td class="FileContents-lineContents" id="1855"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1856" onclick="window.location.hash='#1856'"></td><td class="FileContents-lineContents" id="1856"><span class="pln">    m_pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1857" onclick="window.location.hash='#1857'"></td><td class="FileContents-lineContents" id="1857"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">m_pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1858" onclick="window.location.hash='#1858'"></td><td class="FileContents-lineContents" id="1858"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1859" onclick="window.location.hash='#1859'"></td><td class="FileContents-lineContents" id="1859"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x3B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// CuePoint ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1860" onclick="window.location.hash='#1860'"></td><td class="FileContents-lineContents" id="1860"><span class="pln">      m_pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1861" onclick="window.location.hash='#1861'"></td><td class="FileContents-lineContents" id="1861"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1862" onclick="window.location.hash='#1862'"></td><td class="FileContents-lineContents" id="1862"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1863" onclick="window.location.hash='#1863'"></td><td class="FileContents-lineContents" id="1863"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1864" onclick="window.location.hash='#1864'"></td><td class="FileContents-lineContents" id="1864"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1865" onclick="window.location.hash='#1865'"></td><td class="FileContents-lineContents" id="1865"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1866" onclick="window.location.hash='#1866'"></td><td class="FileContents-lineContents" id="1866"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_preload_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1867" onclick="window.location.hash='#1867'"></td><td class="FileContents-lineContents" id="1867"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1868" onclick="window.location.hash='#1868'"></td><td class="FileContents-lineContents" id="1868"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCP </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">[</span><span class="pln">m_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1869" onclick="window.location.hash='#1869'"></td><td class="FileContents-lineContents" id="1869"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1870" onclick="window.location.hash='#1870'"></td><td class="FileContents-lineContents" id="1870"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(-</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> idpos</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1871" onclick="window.location.hash='#1871'"></td><td class="FileContents-lineContents" id="1871"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(-</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> idpos</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1872" onclick="window.location.hash='#1872'"></td><td class="FileContents-lineContents" id="1872"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1873" onclick="window.location.hash='#1873'"></td><td class="FileContents-lineContents" id="1873"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1874" onclick="window.location.hash='#1874'"></td><td class="FileContents-lineContents" id="1874"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">Load</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1875" onclick="window.location.hash='#1875'"></td><td class="FileContents-lineContents" id="1875"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1876" onclick="window.location.hash='#1876'"></td><td class="FileContents-lineContents" id="1876"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1877" onclick="window.location.hash='#1877'"></td><td class="FileContents-lineContents" id="1877"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1878" onclick="window.location.hash='#1878'"></td><td class="FileContents-lineContents" id="1878"><span class="pln">    </span><span class="pun">++</span><span class="pln">m_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1879" onclick="window.location.hash='#1879'"></td><td class="FileContents-lineContents" id="1879"><span class="pln">    </span><span class="pun">--</span><span class="pln">m_preload_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1880" onclick="window.location.hash='#1880'"></td><td class="FileContents-lineContents" id="1880"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1881" onclick="window.location.hash='#1881'"></td><td class="FileContents-lineContents" id="1881"><span class="pln">    m_pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1882" onclick="window.location.hash='#1882'"></td><td class="FileContents-lineContents" id="1882"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1883" onclick="window.location.hash='#1883'"></td><td class="FileContents-lineContents" id="1883"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1884" onclick="window.location.hash='#1884'"></td><td class="FileContents-lineContents" id="1884"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// yes, we loaded a cue point</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1885" onclick="window.location.hash='#1885'"></td><td class="FileContents-lineContents" id="1885"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1886" onclick="window.location.hash='#1886'"></td><td class="FileContents-lineContents" id="1886"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1887" onclick="window.location.hash='#1887'"></td><td class="FileContents-lineContents" id="1887"><span class="pln">  </span><span class="com">// return (m_pos &lt; stop);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1888" onclick="window.location.hash='#1888'"></td><td class="FileContents-lineContents" id="1888"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no, we did not load a cue point</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1889" onclick="window.location.hash='#1889'"></td><td class="FileContents-lineContents" id="1889"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1890" onclick="window.location.hash='#1890'"></td><td class="FileContents-lineContents" id="1890"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1891" onclick="window.location.hash='#1891'"></td><td class="FileContents-lineContents" id="1891"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">Find</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time_ns</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> pTrack</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*&amp;</span><span class="pln"> pCP</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1892" onclick="window.location.hash='#1892'"></td><td class="FileContents-lineContents" id="1892"><span class="pln">                </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">TrackPosition</span><span class="pun">*&amp;</span><span class="pln"> pTP</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1893" onclick="window.location.hash='#1893'"></td><td class="FileContents-lineContents" id="1893"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1894" onclick="window.location.hash='#1894'"></td><td class="FileContents-lineContents" id="1894"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1895" onclick="window.location.hash='#1895'"></td><td class="FileContents-lineContents" id="1895"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1896" onclick="window.location.hash='#1896'"></td><td class="FileContents-lineContents" id="1896"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_cue_points </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1897" onclick="window.location.hash='#1897'"></td><td class="FileContents-lineContents" id="1897"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1898" onclick="window.location.hash='#1898'"></td><td class="FileContents-lineContents" id="1898"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1899" onclick="window.location.hash='#1899'"></td><td class="FileContents-lineContents" id="1899"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1900" onclick="window.location.hash='#1900'"></td><td class="FileContents-lineContents" id="1900"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1901" onclick="window.location.hash='#1901'"></td><td class="FileContents-lineContents" id="1901"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1902" onclick="window.location.hash='#1902'"></td><td class="FileContents-lineContents" id="1902"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1903" onclick="window.location.hash='#1903'"></td><td class="FileContents-lineContents" id="1903"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> ii</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1904" onclick="window.location.hash='#1904'"></td><td class="FileContents-lineContents" id="1904"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1905" onclick="window.location.hash='#1905'"></td><td class="FileContents-lineContents" id="1905"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> jj </span><span class="pun">=</span><span class="pln"> ii </span><span class="pun">+</span><span class="pln"> m_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1906" onclick="window.location.hash='#1906'"></td><td class="FileContents-lineContents" id="1906"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> jj</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1907" onclick="window.location.hash='#1907'"></td><td class="FileContents-lineContents" id="1907"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1908" onclick="window.location.hash='#1908'"></td><td class="FileContents-lineContents" id="1908"><span class="pln">  pCP </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1909" onclick="window.location.hash='#1909'"></td><td class="FileContents-lineContents" id="1909"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1910" onclick="window.location.hash='#1910'"></td><td class="FileContents-lineContents" id="1910"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1911" onclick="window.location.hash='#1911'"></td><td class="FileContents-lineContents" id="1911"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&lt;=</span><span class="pln"> pCP</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1912" onclick="window.location.hash='#1912'"></td><td class="FileContents-lineContents" id="1912"><span class="pln">    pTP </span><span class="pun">=</span><span class="pln"> pCP</span><span class="pun">-&gt;</span><span class="typ">Find</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1913" onclick="window.location.hash='#1913'"></td><td class="FileContents-lineContents" id="1913"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTP </span><span class="pun">!=</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1914" onclick="window.location.hash='#1914'"></td><td class="FileContents-lineContents" id="1914"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1915" onclick="window.location.hash='#1915'"></td><td class="FileContents-lineContents" id="1915"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1916" onclick="window.location.hash='#1916'"></td><td class="FileContents-lineContents" id="1916"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1917" onclick="window.location.hash='#1917'"></td><td class="FileContents-lineContents" id="1917"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1918" onclick="window.location.hash='#1918'"></td><td class="FileContents-lineContents" id="1918"><span class="pln">    </span><span class="com">//[ii, i) &lt;= time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1919" onclick="window.location.hash='#1919'"></td><td class="FileContents-lineContents" id="1919"><span class="pln">    </span><span class="com">//[i, j)  ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1920" onclick="window.location.hash='#1920'"></td><td class="FileContents-lineContents" id="1920"><span class="pln">    </span><span class="com">//[j, jj) &gt; time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1921" onclick="window.location.hash='#1921'"></td><td class="FileContents-lineContents" id="1921"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1922" onclick="window.location.hash='#1922'"></td><td class="FileContents-lineContents" id="1922"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1923" onclick="window.location.hash='#1923'"></td><td class="FileContents-lineContents" id="1923"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">k </span><span class="pun">&lt;</span><span class="pln"> jj</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1924" onclick="window.location.hash='#1924'"></td><td class="FileContents-lineContents" id="1924"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1925" onclick="window.location.hash='#1925'"></td><td class="FileContents-lineContents" id="1925"><span class="pln">    </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCP </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1926" onclick="window.location.hash='#1926'"></td><td class="FileContents-lineContents" id="1926"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1927" onclick="window.location.hash='#1927'"></td><td class="FileContents-lineContents" id="1927"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1928" onclick="window.location.hash='#1928'"></td><td class="FileContents-lineContents" id="1928"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> pCP</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1929" onclick="window.location.hash='#1929'"></td><td class="FileContents-lineContents" id="1929"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1930" onclick="window.location.hash='#1930'"></td><td class="FileContents-lineContents" id="1930"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1931" onclick="window.location.hash='#1931'"></td><td class="FileContents-lineContents" id="1931"><span class="pln">      i </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1932" onclick="window.location.hash='#1932'"></td><td class="FileContents-lineContents" id="1932"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1933" onclick="window.location.hash='#1933'"></td><td class="FileContents-lineContents" id="1933"><span class="pln">      j </span><span class="pun">=</span><span class="pln"> k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1934" onclick="window.location.hash='#1934'"></td><td class="FileContents-lineContents" id="1934"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1935" onclick="window.location.hash='#1935'"></td><td class="FileContents-lineContents" id="1935"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;=</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1936" onclick="window.location.hash='#1936'"></td><td class="FileContents-lineContents" id="1936"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1937" onclick="window.location.hash='#1937'"></td><td class="FileContents-lineContents" id="1937"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1938" onclick="window.location.hash='#1938'"></td><td class="FileContents-lineContents" id="1938"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1939" onclick="window.location.hash='#1939'"></td><td class="FileContents-lineContents" id="1939"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;=</span><span class="pln"> jj</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1940" onclick="window.location.hash='#1940'"></td><td class="FileContents-lineContents" id="1940"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&gt;</span><span class="pln"> ii</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1941" onclick="window.location.hash='#1941'"></td><td class="FileContents-lineContents" id="1941"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1942" onclick="window.location.hash='#1942'"></td><td class="FileContents-lineContents" id="1942"><span class="pln">  pCP </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*--</span><span class="pln">i</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1943" onclick="window.location.hash='#1943'"></td><td class="FileContents-lineContents" id="1943"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1944" onclick="window.location.hash='#1944'"></td><td class="FileContents-lineContents" id="1944"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1945" onclick="window.location.hash='#1945'"></td><td class="FileContents-lineContents" id="1945"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1946" onclick="window.location.hash='#1946'"></td><td class="FileContents-lineContents" id="1946"><span class="pln">  </span><span class="com">// TODO: here and elsewhere, it&#39;s probably not correct to search</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1947" onclick="window.location.hash='#1947'"></td><td class="FileContents-lineContents" id="1947"><span class="pln">  </span><span class="com">// for the cue point with this time, and then search for a matching</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1948" onclick="window.location.hash='#1948'"></td><td class="FileContents-lineContents" id="1948"><span class="pln">  </span><span class="com">// track.  In principle, the matching track could be on some earlier</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1949" onclick="window.location.hash='#1949'"></td><td class="FileContents-lineContents" id="1949"><span class="pln">  </span><span class="com">// cue point, and with our current algorithm, we&#39;d miss it.  To make</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1950" onclick="window.location.hash='#1950'"></td><td class="FileContents-lineContents" id="1950"><span class="pln">  </span><span class="com">// this bullet-proof, we&#39;d need to create a secondary structure,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1951" onclick="window.location.hash='#1951'"></td><td class="FileContents-lineContents" id="1951"><span class="pln">  </span><span class="com">// with a list of cue points that apply to a track, and then search</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1952" onclick="window.location.hash='#1952'"></td><td class="FileContents-lineContents" id="1952"><span class="pln">  </span><span class="com">// that track-based structure for a matching cue point.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1953" onclick="window.location.hash='#1953'"></td><td class="FileContents-lineContents" id="1953"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1954" onclick="window.location.hash='#1954'"></td><td class="FileContents-lineContents" id="1954"><span class="pln">  pTP </span><span class="pun">=</span><span class="pln"> pCP</span><span class="pun">-&gt;</span><span class="typ">Find</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1955" onclick="window.location.hash='#1955'"></td><td class="FileContents-lineContents" id="1955"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTP </span><span class="pun">!=</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1956" onclick="window.location.hash='#1956'"></td><td class="FileContents-lineContents" id="1956"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1957" onclick="window.location.hash='#1957'"></td><td class="FileContents-lineContents" id="1957"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1958" onclick="window.location.hash='#1958'"></td><td class="FileContents-lineContents" id="1958"><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">GetFirst</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1959" onclick="window.location.hash='#1959'"></td><td class="FileContents-lineContents" id="1959"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_cue_points </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1960" onclick="window.location.hash='#1960'"></td><td class="FileContents-lineContents" id="1960"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1961" onclick="window.location.hash='#1961'"></td><td class="FileContents-lineContents" id="1961"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1962" onclick="window.location.hash='#1962'"></td><td class="FileContents-lineContents" id="1962"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1963" onclick="window.location.hash='#1963'"></td><td class="FileContents-lineContents" id="1963"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1964" onclick="window.location.hash='#1964'"></td><td class="FileContents-lineContents" id="1964"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1965" onclick="window.location.hash='#1965'"></td><td class="FileContents-lineContents" id="1965"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pp </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1966" onclick="window.location.hash='#1966'"></td><td class="FileContents-lineContents" id="1966"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pp</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1967" onclick="window.location.hash='#1967'"></td><td class="FileContents-lineContents" id="1967"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1968" onclick="window.location.hash='#1968'"></td><td class="FileContents-lineContents" id="1968"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCP </span><span class="pun">=</span><span class="pln"> pp</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1969" onclick="window.location.hash='#1969'"></td><td class="FileContents-lineContents" id="1969"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1970" onclick="window.location.hash='#1970'"></td><td class="FileContents-lineContents" id="1970"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1971" onclick="window.location.hash='#1971'"></td><td class="FileContents-lineContents" id="1971"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1972" onclick="window.location.hash='#1972'"></td><td class="FileContents-lineContents" id="1972"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCP</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1973" onclick="window.location.hash='#1973'"></td><td class="FileContents-lineContents" id="1973"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1974" onclick="window.location.hash='#1974'"></td><td class="FileContents-lineContents" id="1974"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1975" onclick="window.location.hash='#1975'"></td><td class="FileContents-lineContents" id="1975"><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">GetLast</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1976" onclick="window.location.hash='#1976'"></td><td class="FileContents-lineContents" id="1976"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_cue_points </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1977" onclick="window.location.hash='#1977'"></td><td class="FileContents-lineContents" id="1977"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1978" onclick="window.location.hash='#1978'"></td><td class="FileContents-lineContents" id="1978"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1979" onclick="window.location.hash='#1979'"></td><td class="FileContents-lineContents" id="1979"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1980" onclick="window.location.hash='#1980'"></td><td class="FileContents-lineContents" id="1980"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1981" onclick="window.location.hash='#1981'"></td><td class="FileContents-lineContents" id="1981"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1982" onclick="window.location.hash='#1982'"></td><td class="FileContents-lineContents" id="1982"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> m_count </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1983" onclick="window.location.hash='#1983'"></td><td class="FileContents-lineContents" id="1983"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1984" onclick="window.location.hash='#1984'"></td><td class="FileContents-lineContents" id="1984"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pp </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1985" onclick="window.location.hash='#1985'"></td><td class="FileContents-lineContents" id="1985"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pp</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1986" onclick="window.location.hash='#1986'"></td><td class="FileContents-lineContents" id="1986"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1987" onclick="window.location.hash='#1987'"></td><td class="FileContents-lineContents" id="1987"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCP </span><span class="pun">=</span><span class="pln"> pp</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1988" onclick="window.location.hash='#1988'"></td><td class="FileContents-lineContents" id="1988"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1989" onclick="window.location.hash='#1989'"></td><td class="FileContents-lineContents" id="1989"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCP</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1990" onclick="window.location.hash='#1990'"></td><td class="FileContents-lineContents" id="1990"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1991" onclick="window.location.hash='#1991'"></td><td class="FileContents-lineContents" id="1991"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCP</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1992" onclick="window.location.hash='#1992'"></td><td class="FileContents-lineContents" id="1992"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1993" onclick="window.location.hash='#1993'"></td><td class="FileContents-lineContents" id="1993"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1994" onclick="window.location.hash='#1994'"></td><td class="FileContents-lineContents" id="1994"><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">GetNext</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> pCurr</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1995" onclick="window.location.hash='#1995'"></td><td class="FileContents-lineContents" id="1995"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCurr </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1996" onclick="window.location.hash='#1996'"></td><td class="FileContents-lineContents" id="1996"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1997" onclick="window.location.hash='#1997'"></td><td class="FileContents-lineContents" id="1997"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1998" onclick="window.location.hash='#1998'"></td><td class="FileContents-lineContents" id="1998"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurr</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1999" onclick="window.location.hash='#1999'"></td><td class="FileContents-lineContents" id="1999"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_cue_points</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2000" onclick="window.location.hash='#2000'"></td><td class="FileContents-lineContents" id="2000"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2001" onclick="window.location.hash='#2001'"></td><td class="FileContents-lineContents" id="2001"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2002" onclick="window.location.hash='#2002'"></td><td class="FileContents-lineContents" id="2002"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="pln">m_index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2003" onclick="window.location.hash='#2003'"></td><td class="FileContents-lineContents" id="2003"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> m_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2004" onclick="window.location.hash='#2004'"></td><td class="FileContents-lineContents" id="2004"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2005" onclick="window.location.hash='#2005'"></td><td class="FileContents-lineContents" id="2005"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pp </span><span class="pun">=</span><span class="pln"> m_cue_points</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2006" onclick="window.location.hash='#2006'"></td><td class="FileContents-lineContents" id="2006"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pp</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2007" onclick="window.location.hash='#2007'"></td><td class="FileContents-lineContents" id="2007"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pp</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pCurr</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2008" onclick="window.location.hash='#2008'"></td><td class="FileContents-lineContents" id="2008"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2009" onclick="window.location.hash='#2009'"></td><td class="FileContents-lineContents" id="2009"><span class="pln">  </span><span class="pun">++</span><span class="pln">index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2010" onclick="window.location.hash='#2010'"></td><td class="FileContents-lineContents" id="2010"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2011" onclick="window.location.hash='#2011'"></td><td class="FileContents-lineContents" id="2011"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2012" onclick="window.location.hash='#2012'"></td><td class="FileContents-lineContents" id="2012"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2013" onclick="window.location.hash='#2013'"></td><td class="FileContents-lineContents" id="2013"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2014" onclick="window.location.hash='#2014'"></td><td class="FileContents-lineContents" id="2014"><span class="pln">  </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNext </span><span class="pun">=</span><span class="pln"> pp</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2015" onclick="window.location.hash='#2015'"></td><td class="FileContents-lineContents" id="2015"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2016" onclick="window.location.hash='#2016'"></td><td class="FileContents-lineContents" id="2016"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2017" onclick="window.location.hash='#2017'"></td><td class="FileContents-lineContents" id="2017"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2018" onclick="window.location.hash='#2018'"></td><td class="FileContents-lineContents" id="2018"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pNext</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2019" onclick="window.location.hash='#2019'"></td><td class="FileContents-lineContents" id="2019"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2020" onclick="window.location.hash='#2020'"></td><td class="FileContents-lineContents" id="2020"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2021" onclick="window.location.hash='#2021'"></td><td class="FileContents-lineContents" id="2021"><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">::</span><span class="typ">GetBlock</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">*</span><span class="pln"> pCP</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2022" onclick="window.location.hash='#2022'"></td><td class="FileContents-lineContents" id="2022"><span class="pln">                                 </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">TrackPosition</span><span class="pun">*</span><span class="pln"> pTP</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2023" onclick="window.location.hash='#2023'"></td><td class="FileContents-lineContents" id="2023"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCP </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2024" onclick="window.location.hash='#2024'"></td><td class="FileContents-lineContents" id="2024"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2025" onclick="window.location.hash='#2025'"></td><td class="FileContents-lineContents" id="2025"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2026" onclick="window.location.hash='#2026'"></td><td class="FileContents-lineContents" id="2026"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTP </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2027" onclick="window.location.hash='#2027'"></td><td class="FileContents-lineContents" id="2027"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2028" onclick="window.location.hash='#2028'"></td><td class="FileContents-lineContents" id="2028"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2029" onclick="window.location.hash='#2029'"></td><td class="FileContents-lineContents" id="2029"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">(*</span><span class="pln">pCP</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pTP</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2030" onclick="window.location.hash='#2030'"></td><td class="FileContents-lineContents" id="2030"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2031" onclick="window.location.hash='#2031'"></td><td class="FileContents-lineContents" id="2031"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2032" onclick="window.location.hash='#2032'"></td><td class="FileContents-lineContents" id="2032"><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetBlock</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">&amp;</span><span class="pln"> cp</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2033" onclick="window.location.hash='#2033'"></td><td class="FileContents-lineContents" id="2033"><span class="pln">                                    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">TrackPosition</span><span class="pun">&amp;</span><span class="pln"> tp</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2034" onclick="window.location.hash='#2034'"></td><td class="FileContents-lineContents" id="2034"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2035" onclick="window.location.hash='#2035'"></td><td class="FileContents-lineContents" id="2035"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> ii</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2036" onclick="window.location.hash='#2036'"></td><td class="FileContents-lineContents" id="2036"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2037" onclick="window.location.hash='#2037'"></td><td class="FileContents-lineContents" id="2037"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_clusterCount </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2038" onclick="window.location.hash='#2038'"></td><td class="FileContents-lineContents" id="2038"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2039" onclick="window.location.hash='#2039'"></td><td class="FileContents-lineContents" id="2039"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> jj </span><span class="pun">=</span><span class="pln"> ii </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2040" onclick="window.location.hash='#2040'"></td><td class="FileContents-lineContents" id="2040"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> jj</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2041" onclick="window.location.hash='#2041'"></td><td class="FileContents-lineContents" id="2041"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2042" onclick="window.location.hash='#2042'"></td><td class="FileContents-lineContents" id="2042"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2043" onclick="window.location.hash='#2043'"></td><td class="FileContents-lineContents" id="2043"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2044" onclick="window.location.hash='#2044'"></td><td class="FileContents-lineContents" id="2044"><span class="pln">    </span><span class="com">//[ii, i) &lt; pTP-&gt;m_pos</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2045" onclick="window.location.hash='#2045'"></td><td class="FileContents-lineContents" id="2045"><span class="pln">    </span><span class="com">//[i, j) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2046" onclick="window.location.hash='#2046'"></td><td class="FileContents-lineContents" id="2046"><span class="pln">    </span><span class="com">//[j, jj)  &gt; pTP-&gt;m_pos</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2047" onclick="window.location.hash='#2047'"></td><td class="FileContents-lineContents" id="2047"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2048" onclick="window.location.hash='#2048'"></td><td class="FileContents-lineContents" id="2048"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2049" onclick="window.location.hash='#2049'"></td><td class="FileContents-lineContents" id="2049"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">k </span><span class="pun">&lt;</span><span class="pln"> jj</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2050" onclick="window.location.hash='#2050'"></td><td class="FileContents-lineContents" id="2050"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2051" onclick="window.location.hash='#2051'"></td><td class="FileContents-lineContents" id="2051"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2052" onclick="window.location.hash='#2052'"></td><td class="FileContents-lineContents" id="2052"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2053" onclick="window.location.hash='#2053'"></td><td class="FileContents-lineContents" id="2053"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2054" onclick="window.location.hash='#2054'"></td><td class="FileContents-lineContents" id="2054"><span class="pln">    </span><span class="com">// const long long pos_ = pCluster-&gt;m_pos;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2055" onclick="window.location.hash='#2055'"></td><td class="FileContents-lineContents" id="2055"><span class="pln">    </span><span class="com">// assert(pos_);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2056" onclick="window.location.hash='#2056'"></td><td class="FileContents-lineContents" id="2056"><span class="pln">    </span><span class="com">// const long long pos = pos_ * ((pos_ &lt; 0) ? -1 : 1);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2057" onclick="window.location.hash='#2057'"></td><td class="FileContents-lineContents" id="2057"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2058" onclick="window.location.hash='#2058'"></td><td class="FileContents-lineContents" id="2058"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetPosition</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2059" onclick="window.location.hash='#2059'"></td><td class="FileContents-lineContents" id="2059"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2060" onclick="window.location.hash='#2060'"></td><td class="FileContents-lineContents" id="2060"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2061" onclick="window.location.hash='#2061'"></td><td class="FileContents-lineContents" id="2061"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> tp</span><span class="pun">.</span><span class="pln">m_pos</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2062" onclick="window.location.hash='#2062'"></td><td class="FileContents-lineContents" id="2062"><span class="pln">      i </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2063" onclick="window.location.hash='#2063'"></td><td class="FileContents-lineContents" id="2063"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> tp</span><span class="pun">.</span><span class="pln">m_pos</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2064" onclick="window.location.hash='#2064'"></td><td class="FileContents-lineContents" id="2064"><span class="pln">      j </span><span class="pun">=</span><span class="pln"> k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2065" onclick="window.location.hash='#2065'"></td><td class="FileContents-lineContents" id="2065"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2066" onclick="window.location.hash='#2066'"></td><td class="FileContents-lineContents" id="2066"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="pln">cp</span><span class="pun">,</span><span class="pln"> tp</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2067" onclick="window.location.hash='#2067'"></td><td class="FileContents-lineContents" id="2067"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2068" onclick="window.location.hash='#2068'"></td><td class="FileContents-lineContents" id="2068"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2069" onclick="window.location.hash='#2069'"></td><td class="FileContents-lineContents" id="2069"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2070" onclick="window.location.hash='#2070'"></td><td class="FileContents-lineContents" id="2070"><span class="pln">  </span><span class="com">// assert(Cluster::HasBlockEntries(this, tp.m_pos));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2071" onclick="window.location.hash='#2071'"></td><td class="FileContents-lineContents" id="2071"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2072" onclick="window.location.hash='#2072'"></td><td class="FileContents-lineContents" id="2072"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> tp</span><span class="pun">.</span><span class="pln">m_pos</span><span class="pun">);</span><span class="pln">  </span><span class="com">//, -1);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2073" onclick="window.location.hash='#2073'"></td><td class="FileContents-lineContents" id="2073"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2074" onclick="window.location.hash='#2074'"></td><td class="FileContents-lineContents" id="2074"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2075" onclick="window.location.hash='#2075'"></td><td class="FileContents-lineContents" id="2075"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">-</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2076" onclick="window.location.hash='#2076'"></td><td class="FileContents-lineContents" id="2076"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2077" onclick="window.location.hash='#2077'"></td><td class="FileContents-lineContents" id="2077"><span class="pln">  </span><span class="typ">PreloadCluster</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2078" onclick="window.location.hash='#2078'"></td><td class="FileContents-lineContents" id="2078"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2079" onclick="window.location.hash='#2079'"></td><td class="FileContents-lineContents" id="2079"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusterPreloadCount </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2080" onclick="window.location.hash='#2080'"></td><td class="FileContents-lineContents" id="2080"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2081" onclick="window.location.hash='#2081'"></td><td class="FileContents-lineContents" id="2081"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2082" onclick="window.location.hash='#2082'"></td><td class="FileContents-lineContents" id="2082"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="pln">cp</span><span class="pun">,</span><span class="pln"> tp</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2083" onclick="window.location.hash='#2083'"></td><td class="FileContents-lineContents" id="2083"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2084" onclick="window.location.hash='#2084'"></td><td class="FileContents-lineContents" id="2084"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2085" onclick="window.location.hash='#2085'"></td><td class="FileContents-lineContents" id="2085"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">FindOrPreloadCluster</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> requested_pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2086" onclick="window.location.hash='#2086'"></td><td class="FileContents-lineContents" id="2086"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">requested_pos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2087" onclick="window.location.hash='#2087'"></td><td class="FileContents-lineContents" id="2087"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2088" onclick="window.location.hash='#2088'"></td><td class="FileContents-lineContents" id="2088"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2089" onclick="window.location.hash='#2089'"></td><td class="FileContents-lineContents" id="2089"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2090" onclick="window.location.hash='#2090'"></td><td class="FileContents-lineContents" id="2090"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> ii</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2091" onclick="window.location.hash='#2091'"></td><td class="FileContents-lineContents" id="2091"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2092" onclick="window.location.hash='#2092'"></td><td class="FileContents-lineContents" id="2092"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_clusterCount </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2093" onclick="window.location.hash='#2093'"></td><td class="FileContents-lineContents" id="2093"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2094" onclick="window.location.hash='#2094'"></td><td class="FileContents-lineContents" id="2094"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> jj </span><span class="pun">=</span><span class="pln"> ii </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2095" onclick="window.location.hash='#2095'"></td><td class="FileContents-lineContents" id="2095"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> jj</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2096" onclick="window.location.hash='#2096'"></td><td class="FileContents-lineContents" id="2096"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2097" onclick="window.location.hash='#2097'"></td><td class="FileContents-lineContents" id="2097"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2098" onclick="window.location.hash='#2098'"></td><td class="FileContents-lineContents" id="2098"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2099" onclick="window.location.hash='#2099'"></td><td class="FileContents-lineContents" id="2099"><span class="pln">    </span><span class="com">//[ii, i) &lt; pTP-&gt;m_pos</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2100" onclick="window.location.hash='#2100'"></td><td class="FileContents-lineContents" id="2100"><span class="pln">    </span><span class="com">//[i, j) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2101" onclick="window.location.hash='#2101'"></td><td class="FileContents-lineContents" id="2101"><span class="pln">    </span><span class="com">//[j, jj)  &gt; pTP-&gt;m_pos</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2102" onclick="window.location.hash='#2102'"></td><td class="FileContents-lineContents" id="2102"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2103" onclick="window.location.hash='#2103'"></td><td class="FileContents-lineContents" id="2103"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2104" onclick="window.location.hash='#2104'"></td><td class="FileContents-lineContents" id="2104"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">k </span><span class="pun">&lt;</span><span class="pln"> jj</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2105" onclick="window.location.hash='#2105'"></td><td class="FileContents-lineContents" id="2105"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2106" onclick="window.location.hash='#2106'"></td><td class="FileContents-lineContents" id="2106"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2107" onclick="window.location.hash='#2107'"></td><td class="FileContents-lineContents" id="2107"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2108" onclick="window.location.hash='#2108'"></td><td class="FileContents-lineContents" id="2108"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2109" onclick="window.location.hash='#2109'"></td><td class="FileContents-lineContents" id="2109"><span class="pln">    </span><span class="com">// const long long pos_ = pCluster-&gt;m_pos;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2110" onclick="window.location.hash='#2110'"></td><td class="FileContents-lineContents" id="2110"><span class="pln">    </span><span class="com">// assert(pos_);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2111" onclick="window.location.hash='#2111'"></td><td class="FileContents-lineContents" id="2111"><span class="pln">    </span><span class="com">// const long long pos = pos_ * ((pos_ &lt; 0) ? -1 : 1);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2112" onclick="window.location.hash='#2112'"></td><td class="FileContents-lineContents" id="2112"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2113" onclick="window.location.hash='#2113'"></td><td class="FileContents-lineContents" id="2113"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetPosition</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2114" onclick="window.location.hash='#2114'"></td><td class="FileContents-lineContents" id="2114"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2115" onclick="window.location.hash='#2115'"></td><td class="FileContents-lineContents" id="2115"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2116" onclick="window.location.hash='#2116'"></td><td class="FileContents-lineContents" id="2116"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> requested_pos</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2117" onclick="window.location.hash='#2117'"></td><td class="FileContents-lineContents" id="2117"><span class="pln">      i </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2118" onclick="window.location.hash='#2118'"></td><td class="FileContents-lineContents" id="2118"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> requested_pos</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2119" onclick="window.location.hash='#2119'"></td><td class="FileContents-lineContents" id="2119"><span class="pln">      j </span><span class="pun">=</span><span class="pln"> k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2120" onclick="window.location.hash='#2120'"></td><td class="FileContents-lineContents" id="2120"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2121" onclick="window.location.hash='#2121'"></td><td class="FileContents-lineContents" id="2121"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2122" onclick="window.location.hash='#2122'"></td><td class="FileContents-lineContents" id="2122"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2123" onclick="window.location.hash='#2123'"></td><td class="FileContents-lineContents" id="2123"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2124" onclick="window.location.hash='#2124'"></td><td class="FileContents-lineContents" id="2124"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2125" onclick="window.location.hash='#2125'"></td><td class="FileContents-lineContents" id="2125"><span class="pln">  </span><span class="com">// assert(Cluster::HasBlockEntries(this, tp.m_pos));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2126" onclick="window.location.hash='#2126'"></td><td class="FileContents-lineContents" id="2126"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2127" onclick="window.location.hash='#2127'"></td><td class="FileContents-lineContents" id="2127"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> requested_pos</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2128" onclick="window.location.hash='#2128'"></td><td class="FileContents-lineContents" id="2128"><span class="pln">  </span><span class="com">//-1);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2129" onclick="window.location.hash='#2129'"></td><td class="FileContents-lineContents" id="2129"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2130" onclick="window.location.hash='#2130'"></td><td class="FileContents-lineContents" id="2130"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2131" onclick="window.location.hash='#2131'"></td><td class="FileContents-lineContents" id="2131"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">-</span><span class="pln"> m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2132" onclick="window.location.hash='#2132'"></td><td class="FileContents-lineContents" id="2132"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2133" onclick="window.location.hash='#2133'"></td><td class="FileContents-lineContents" id="2133"><span class="pln">  </span><span class="typ">PreloadCluster</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2134" onclick="window.location.hash='#2134'"></td><td class="FileContents-lineContents" id="2134"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2135" onclick="window.location.hash='#2135'"></td><td class="FileContents-lineContents" id="2135"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusterPreloadCount </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2136" onclick="window.location.hash='#2136'"></td><td class="FileContents-lineContents" id="2136"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2137" onclick="window.location.hash='#2137'"></td><td class="FileContents-lineContents" id="2137"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2138" onclick="window.location.hash='#2138'"></td><td class="FileContents-lineContents" id="2138"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2139" onclick="window.location.hash='#2139'"></td><td class="FileContents-lineContents" id="2139"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2140" onclick="window.location.hash='#2140'"></td><td class="FileContents-lineContents" id="2140"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2141" onclick="window.location.hash='#2141'"></td><td class="FileContents-lineContents" id="2141"><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">CuePoint</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2142" onclick="window.location.hash='#2142'"></td><td class="FileContents-lineContents" id="2142"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_element_start</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2143" onclick="window.location.hash='#2143'"></td><td class="FileContents-lineContents" id="2143"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2144" onclick="window.location.hash='#2144'"></td><td class="FileContents-lineContents" id="2144"><span class="pln">      m_index</span><span class="pun">(</span><span class="pln">idx</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2145" onclick="window.location.hash='#2145'"></td><td class="FileContents-lineContents" id="2145"><span class="pln">      m_timecode</span><span class="pun">(-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> pos</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2146" onclick="window.location.hash='#2146'"></td><td class="FileContents-lineContents" id="2146"><span class="pln">      m_track_positions</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2147" onclick="window.location.hash='#2147'"></td><td class="FileContents-lineContents" id="2147"><span class="pln">      m_track_positions_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2148" onclick="window.location.hash='#2148'"></td><td class="FileContents-lineContents" id="2148"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2149" onclick="window.location.hash='#2149'"></td><td class="FileContents-lineContents" id="2149"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2150" onclick="window.location.hash='#2150'"></td><td class="FileContents-lineContents" id="2150"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2151" onclick="window.location.hash='#2151'"></td><td class="FileContents-lineContents" id="2151"><span class="typ">CuePoint</span><span class="pun">::~</span><span class="typ">CuePoint</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_track_positions</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2152" onclick="window.location.hash='#2152'"></td><td class="FileContents-lineContents" id="2152"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2153" onclick="window.location.hash='#2153'"></td><td class="FileContents-lineContents" id="2153"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">Load</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2154" onclick="window.location.hash='#2154'"></td><td class="FileContents-lineContents" id="2154"><span class="pln">  </span><span class="com">// odbgstream os;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2155" onclick="window.location.hash='#2155'"></td><td class="FileContents-lineContents" id="2155"><span class="pln">  </span><span class="com">// os &lt;&lt; &quot;CuePoint::Load(begin): timecode=&quot; &lt;&lt; m_timecode &lt;&lt; endl;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2156" onclick="window.location.hash='#2156'"></td><td class="FileContents-lineContents" id="2156"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2157" onclick="window.location.hash='#2157'"></td><td class="FileContents-lineContents" id="2157"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_timecode </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// already loaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2158" onclick="window.location.hash='#2158'"></td><td class="FileContents-lineContents" id="2158"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2159" onclick="window.location.hash='#2159'"></td><td class="FileContents-lineContents" id="2159"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2160" onclick="window.location.hash='#2160'"></td><td class="FileContents-lineContents" id="2160"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_track_positions </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2161" onclick="window.location.hash='#2161'"></td><td class="FileContents-lineContents" id="2161"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_track_positions_count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2162" onclick="window.location.hash='#2162'"></td><td class="FileContents-lineContents" id="2162"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2163" onclick="window.location.hash='#2163'"></td><td class="FileContents-lineContents" id="2163"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos_ </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2164" onclick="window.location.hash='#2164'"></td><td class="FileContents-lineContents" id="2164"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start </span><span class="pun">=</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2165" onclick="window.location.hash='#2165'"></td><td class="FileContents-lineContents" id="2165"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2166" onclick="window.location.hash='#2166'"></td><td class="FileContents-lineContents" id="2166"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2167" onclick="window.location.hash='#2167'"></td><td class="FileContents-lineContents" id="2167"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2168" onclick="window.location.hash='#2168'"></td><td class="FileContents-lineContents" id="2168"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2169" onclick="window.location.hash='#2169'"></td><td class="FileContents-lineContents" id="2169"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2170" onclick="window.location.hash='#2170'"></td><td class="FileContents-lineContents" id="2170"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2171" onclick="window.location.hash='#2171'"></td><td class="FileContents-lineContents" id="2171"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos_</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2172" onclick="window.location.hash='#2172'"></td><td class="FileContents-lineContents" id="2172"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x3B</span><span class="pun">);</span><span class="pln">  </span><span class="com">// CuePoint ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2173" onclick="window.location.hash='#2173'"></td><td class="FileContents-lineContents" id="2173"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x3B</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2174" onclick="window.location.hash='#2174'"></td><td class="FileContents-lineContents" id="2174"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2175" onclick="window.location.hash='#2175'"></td><td class="FileContents-lineContents" id="2175"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2176" onclick="window.location.hash='#2176'"></td><td class="FileContents-lineContents" id="2176"><span class="pln">    pos_ </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2177" onclick="window.location.hash='#2177'"></td><td class="FileContents-lineContents" id="2177"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2178" onclick="window.location.hash='#2178'"></td><td class="FileContents-lineContents" id="2178"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos_</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2179" onclick="window.location.hash='#2179'"></td><td class="FileContents-lineContents" id="2179"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2180" onclick="window.location.hash='#2180'"></td><td class="FileContents-lineContents" id="2180"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2181" onclick="window.location.hash='#2181'"></td><td class="FileContents-lineContents" id="2181"><span class="pln">    pos_ </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2182" onclick="window.location.hash='#2182'"></td><td class="FileContents-lineContents" id="2182"><span class="pln">    </span><span class="com">// pos_ now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2183" onclick="window.location.hash='#2183'"></td><td class="FileContents-lineContents" id="2183"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2184" onclick="window.location.hash='#2184'"></td><td class="FileContents-lineContents" id="2184"><span class="pln">    stop </span><span class="pun">=</span><span class="pln"> pos_ </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2185" onclick="window.location.hash='#2185'"></td><td class="FileContents-lineContents" id="2185"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2186" onclick="window.location.hash='#2186'"></td><td class="FileContents-lineContents" id="2186"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2187" onclick="window.location.hash='#2187'"></td><td class="FileContents-lineContents" id="2187"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> stop </span><span class="pun">-</span><span class="pln"> element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2188" onclick="window.location.hash='#2188'"></td><td class="FileContents-lineContents" id="2188"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2189" onclick="window.location.hash='#2189'"></td><td class="FileContents-lineContents" id="2189"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2190" onclick="window.location.hash='#2190'"></td><td class="FileContents-lineContents" id="2190"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2191" onclick="window.location.hash='#2191'"></td><td class="FileContents-lineContents" id="2191"><span class="pln">  </span><span class="com">// First count number of track positions</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2192" onclick="window.location.hash='#2192'"></td><td class="FileContents-lineContents" id="2192"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2193" onclick="window.location.hash='#2193'"></td><td class="FileContents-lineContents" id="2193"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2194" onclick="window.location.hash='#2194'"></td><td class="FileContents-lineContents" id="2194"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2195" onclick="window.location.hash='#2195'"></td><td class="FileContents-lineContents" id="2195"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2196" onclick="window.location.hash='#2196'"></td><td class="FileContents-lineContents" id="2196"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2197" onclick="window.location.hash='#2197'"></td><td class="FileContents-lineContents" id="2197"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2198" onclick="window.location.hash='#2198'"></td><td class="FileContents-lineContents" id="2198"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2199" onclick="window.location.hash='#2199'"></td><td class="FileContents-lineContents" id="2199"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2200" onclick="window.location.hash='#2200'"></td><td class="FileContents-lineContents" id="2200"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2201" onclick="window.location.hash='#2201'"></td><td class="FileContents-lineContents" id="2201"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2202" onclick="window.location.hash='#2202'"></td><td class="FileContents-lineContents" id="2202"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2203" onclick="window.location.hash='#2203'"></td><td class="FileContents-lineContents" id="2203"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2204" onclick="window.location.hash='#2204'"></td><td class="FileContents-lineContents" id="2204"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2205" onclick="window.location.hash='#2205'"></td><td class="FileContents-lineContents" id="2205"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2206" onclick="window.location.hash='#2206'"></td><td class="FileContents-lineContents" id="2206"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2207" onclick="window.location.hash='#2207'"></td><td class="FileContents-lineContents" id="2207"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2208" onclick="window.location.hash='#2208'"></td><td class="FileContents-lineContents" id="2208"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2209" onclick="window.location.hash='#2209'"></td><td class="FileContents-lineContents" id="2209"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2210" onclick="window.location.hash='#2210'"></td><td class="FileContents-lineContents" id="2210"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2211" onclick="window.location.hash='#2211'"></td><td class="FileContents-lineContents" id="2211"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2212" onclick="window.location.hash='#2212'"></td><td class="FileContents-lineContents" id="2212"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2213" onclick="window.location.hash='#2213'"></td><td class="FileContents-lineContents" id="2213"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x33</span><span class="pun">)</span><span class="pln">  </span><span class="com">// CueTime ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2214" onclick="window.location.hash='#2214'"></td><td class="FileContents-lineContents" id="2214"><span class="pln">      m_timecode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2215" onclick="window.location.hash='#2215'"></td><td class="FileContents-lineContents" id="2215"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2216" onclick="window.location.hash='#2216'"></td><td class="FileContents-lineContents" id="2216"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x37</span><span class="pun">)</span><span class="pln">  </span><span class="com">// CueTrackPosition(s) ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2217" onclick="window.location.hash='#2217'"></td><td class="FileContents-lineContents" id="2217"><span class="pln">      </span><span class="pun">++</span><span class="pln">m_track_positions_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2218" onclick="window.location.hash='#2218'"></td><td class="FileContents-lineContents" id="2218"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2219" onclick="window.location.hash='#2219'"></td><td class="FileContents-lineContents" id="2219"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2220" onclick="window.location.hash='#2220'"></td><td class="FileContents-lineContents" id="2220"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2221" onclick="window.location.hash='#2221'"></td><td class="FileContents-lineContents" id="2221"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2222" onclick="window.location.hash='#2222'"></td><td class="FileContents-lineContents" id="2222"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_timecode </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> m_track_positions_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2223" onclick="window.location.hash='#2223'"></td><td class="FileContents-lineContents" id="2223"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2224" onclick="window.location.hash='#2224'"></td><td class="FileContents-lineContents" id="2224"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2225" onclick="window.location.hash='#2225'"></td><td class="FileContents-lineContents" id="2225"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2226" onclick="window.location.hash='#2226'"></td><td class="FileContents-lineContents" id="2226"><span class="pln">  </span><span class="com">// os &lt;&lt; &quot;CuePoint::Load(cont&#39;d): idpos=&quot; &lt;&lt; idpos</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2227" onclick="window.location.hash='#2227'"></td><td class="FileContents-lineContents" id="2227"><span class="pln">  </span><span class="com">//   &lt;&lt; &quot; timecode=&quot; &lt;&lt; m_timecode</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2228" onclick="window.location.hash='#2228'"></td><td class="FileContents-lineContents" id="2228"><span class="pln">  </span><span class="com">//   &lt;&lt; endl;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2229" onclick="window.location.hash='#2229'"></td><td class="FileContents-lineContents" id="2229"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2230" onclick="window.location.hash='#2230'"></td><td class="FileContents-lineContents" id="2230"><span class="pln">  m_track_positions </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TrackPosition</span><span class="pun">[</span><span class="pln">m_track_positions_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2231" onclick="window.location.hash='#2231'"></td><td class="FileContents-lineContents" id="2231"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2232" onclick="window.location.hash='#2232'"></td><td class="FileContents-lineContents" id="2232"><span class="pln">  </span><span class="com">// Now parse track positions</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2233" onclick="window.location.hash='#2233'"></td><td class="FileContents-lineContents" id="2233"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2234" onclick="window.location.hash='#2234'"></td><td class="FileContents-lineContents" id="2234"><span class="pln">  </span><span class="typ">TrackPosition</span><span class="pun">*</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> m_track_positions</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2235" onclick="window.location.hash='#2235'"></td><td class="FileContents-lineContents" id="2235"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2236" onclick="window.location.hash='#2236'"></td><td class="FileContents-lineContents" id="2236"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2237" onclick="window.location.hash='#2237'"></td><td class="FileContents-lineContents" id="2237"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2238" onclick="window.location.hash='#2238'"></td><td class="FileContents-lineContents" id="2238"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2239" onclick="window.location.hash='#2239'"></td><td class="FileContents-lineContents" id="2239"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2240" onclick="window.location.hash='#2240'"></td><td class="FileContents-lineContents" id="2240"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2241" onclick="window.location.hash='#2241'"></td><td class="FileContents-lineContents" id="2241"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2242" onclick="window.location.hash='#2242'"></td><td class="FileContents-lineContents" id="2242"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2243" onclick="window.location.hash='#2243'"></td><td class="FileContents-lineContents" id="2243"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2244" onclick="window.location.hash='#2244'"></td><td class="FileContents-lineContents" id="2244"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2245" onclick="window.location.hash='#2245'"></td><td class="FileContents-lineContents" id="2245"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2246" onclick="window.location.hash='#2246'"></td><td class="FileContents-lineContents" id="2246"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2247" onclick="window.location.hash='#2247'"></td><td class="FileContents-lineContents" id="2247"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2248" onclick="window.location.hash='#2248'"></td><td class="FileContents-lineContents" id="2248"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2249" onclick="window.location.hash='#2249'"></td><td class="FileContents-lineContents" id="2249"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2250" onclick="window.location.hash='#2250'"></td><td class="FileContents-lineContents" id="2250"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2251" onclick="window.location.hash='#2251'"></td><td class="FileContents-lineContents" id="2251"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2252" onclick="window.location.hash='#2252'"></td><td class="FileContents-lineContents" id="2252"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2253" onclick="window.location.hash='#2253'"></td><td class="FileContents-lineContents" id="2253"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x37</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// CueTrackPosition(s) ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2254" onclick="window.location.hash='#2254'"></td><td class="FileContents-lineContents" id="2254"><span class="pln">      </span><span class="typ">TrackPosition</span><span class="pun">&amp;</span><span class="pln"> tp </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">p</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2255" onclick="window.location.hash='#2255'"></td><td class="FileContents-lineContents" id="2255"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">tp</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2256" onclick="window.location.hash='#2256'"></td><td class="FileContents-lineContents" id="2256"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2257" onclick="window.location.hash='#2257'"></td><td class="FileContents-lineContents" id="2257"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2258" onclick="window.location.hash='#2258'"></td><td class="FileContents-lineContents" id="2258"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2259" onclick="window.location.hash='#2259'"></td><td class="FileContents-lineContents" id="2259"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2260" onclick="window.location.hash='#2260'"></td><td class="FileContents-lineContents" id="2260"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2261" onclick="window.location.hash='#2261'"></td><td class="FileContents-lineContents" id="2261"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2262" onclick="window.location.hash='#2262'"></td><td class="FileContents-lineContents" id="2262"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2263" onclick="window.location.hash='#2263'"></td><td class="FileContents-lineContents" id="2263"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2264" onclick="window.location.hash='#2264'"></td><td class="FileContents-lineContents" id="2264"><span class="pln">  assert</span><span class="pun">(</span><span class="typ">size_t</span><span class="pun">(</span><span class="pln">p </span><span class="pun">-</span><span class="pln"> m_track_positions</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> m_track_positions_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2265" onclick="window.location.hash='#2265'"></td><td class="FileContents-lineContents" id="2265"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2266" onclick="window.location.hash='#2266'"></td><td class="FileContents-lineContents" id="2266"><span class="pln">  m_element_start </span><span class="pun">=</span><span class="pln"> element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2267" onclick="window.location.hash='#2267'"></td><td class="FileContents-lineContents" id="2267"><span class="pln">  m_element_size </span><span class="pun">=</span><span class="pln"> element_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2268" onclick="window.location.hash='#2268'"></td><td class="FileContents-lineContents" id="2268"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2269" onclick="window.location.hash='#2269'"></td><td class="FileContents-lineContents" id="2269"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2270" onclick="window.location.hash='#2270'"></td><td class="FileContents-lineContents" id="2270"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2271" onclick="window.location.hash='#2271'"></td><td class="FileContents-lineContents" id="2271"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2272" onclick="window.location.hash='#2272'"></td><td class="FileContents-lineContents" id="2272"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">TrackPosition</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2273" onclick="window.location.hash='#2273'"></td><td class="FileContents-lineContents" id="2273"><span class="pln">                                    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2274" onclick="window.location.hash='#2274'"></td><td class="FileContents-lineContents" id="2274"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start_ </span><span class="pun">+</span><span class="pln"> size_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2275" onclick="window.location.hash='#2275'"></td><td class="FileContents-lineContents" id="2275"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2276" onclick="window.location.hash='#2276'"></td><td class="FileContents-lineContents" id="2276"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2277" onclick="window.location.hash='#2277'"></td><td class="FileContents-lineContents" id="2277"><span class="pln">  m_track </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2278" onclick="window.location.hash='#2278'"></td><td class="FileContents-lineContents" id="2278"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2279" onclick="window.location.hash='#2279'"></td><td class="FileContents-lineContents" id="2279"><span class="pln">  m_block </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// default</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2280" onclick="window.location.hash='#2280'"></td><td class="FileContents-lineContents" id="2280"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2281" onclick="window.location.hash='#2281'"></td><td class="FileContents-lineContents" id="2281"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2282" onclick="window.location.hash='#2282'"></td><td class="FileContents-lineContents" id="2282"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2283" onclick="window.location.hash='#2283'"></td><td class="FileContents-lineContents" id="2283"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2284" onclick="window.location.hash='#2284'"></td><td class="FileContents-lineContents" id="2284"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2285" onclick="window.location.hash='#2285'"></td><td class="FileContents-lineContents" id="2285"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2286" onclick="window.location.hash='#2286'"></td><td class="FileContents-lineContents" id="2286"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2287" onclick="window.location.hash='#2287'"></td><td class="FileContents-lineContents" id="2287"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2288" onclick="window.location.hash='#2288'"></td><td class="FileContents-lineContents" id="2288"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2289" onclick="window.location.hash='#2289'"></td><td class="FileContents-lineContents" id="2289"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2290" onclick="window.location.hash='#2290'"></td><td class="FileContents-lineContents" id="2290"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2291" onclick="window.location.hash='#2291'"></td><td class="FileContents-lineContents" id="2291"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2292" onclick="window.location.hash='#2292'"></td><td class="FileContents-lineContents" id="2292"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2293" onclick="window.location.hash='#2293'"></td><td class="FileContents-lineContents" id="2293"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2294" onclick="window.location.hash='#2294'"></td><td class="FileContents-lineContents" id="2294"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2295" onclick="window.location.hash='#2295'"></td><td class="FileContents-lineContents" id="2295"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2296" onclick="window.location.hash='#2296'"></td><td class="FileContents-lineContents" id="2296"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2297" onclick="window.location.hash='#2297'"></td><td class="FileContents-lineContents" id="2297"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2298" onclick="window.location.hash='#2298'"></td><td class="FileContents-lineContents" id="2298"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2299" onclick="window.location.hash='#2299'"></td><td class="FileContents-lineContents" id="2299"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2300" onclick="window.location.hash='#2300'"></td><td class="FileContents-lineContents" id="2300"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2301" onclick="window.location.hash='#2301'"></td><td class="FileContents-lineContents" id="2301"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x77</span><span class="pun">)</span><span class="pln">  </span><span class="com">// CueTrack ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2302" onclick="window.location.hash='#2302'"></td><td class="FileContents-lineContents" id="2302"><span class="pln">      m_track </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2303" onclick="window.location.hash='#2303'"></td><td class="FileContents-lineContents" id="2303"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2304" onclick="window.location.hash='#2304'"></td><td class="FileContents-lineContents" id="2304"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x71</span><span class="pun">)</span><span class="pln">  </span><span class="com">// CueClusterPos ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2305" onclick="window.location.hash='#2305'"></td><td class="FileContents-lineContents" id="2305"><span class="pln">      m_pos </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2306" onclick="window.location.hash='#2306'"></td><td class="FileContents-lineContents" id="2306"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2307" onclick="window.location.hash='#2307'"></td><td class="FileContents-lineContents" id="2307"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1378</span><span class="pun">)</span><span class="pln">  </span><span class="com">// CueBlockNumber</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2308" onclick="window.location.hash='#2308'"></td><td class="FileContents-lineContents" id="2308"><span class="pln">      m_block </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2309" onclick="window.location.hash='#2309'"></td><td class="FileContents-lineContents" id="2309"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2310" onclick="window.location.hash='#2310'"></td><td class="FileContents-lineContents" id="2310"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2311" onclick="window.location.hash='#2311'"></td><td class="FileContents-lineContents" id="2311"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2312" onclick="window.location.hash='#2312'"></td><td class="FileContents-lineContents" id="2312"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2313" onclick="window.location.hash='#2313'"></td><td class="FileContents-lineContents" id="2313"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">m_pos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_track </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2314" onclick="window.location.hash='#2314'"></td><td class="FileContents-lineContents" id="2314"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2315" onclick="window.location.hash='#2315'"></td><td class="FileContents-lineContents" id="2315"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2316" onclick="window.location.hash='#2316'"></td><td class="FileContents-lineContents" id="2316"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2317" onclick="window.location.hash='#2317'"></td><td class="FileContents-lineContents" id="2317"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2318" onclick="window.location.hash='#2318'"></td><td class="FileContents-lineContents" id="2318"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2319" onclick="window.location.hash='#2319'"></td><td class="FileContents-lineContents" id="2319"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2320" onclick="window.location.hash='#2320'"></td><td class="FileContents-lineContents" id="2320"><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">TrackPosition</span><span class="pun">*</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">Find</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> pTrack</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2321" onclick="window.location.hash='#2321'"></td><td class="FileContents-lineContents" id="2321"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2322" onclick="window.location.hash='#2322'"></td><td class="FileContents-lineContents" id="2322"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2323" onclick="window.location.hash='#2323'"></td><td class="FileContents-lineContents" id="2323"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">-&gt;</span><span class="typ">GetNumber</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2324" onclick="window.location.hash='#2324'"></td><td class="FileContents-lineContents" id="2324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2325" onclick="window.location.hash='#2325'"></td><td class="FileContents-lineContents" id="2325"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">TrackPosition</span><span class="pun">*</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> m_track_positions</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2326" onclick="window.location.hash='#2326'"></td><td class="FileContents-lineContents" id="2326"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">TrackPosition</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> m_track_positions_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2327" onclick="window.location.hash='#2327'"></td><td class="FileContents-lineContents" id="2327"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2328" onclick="window.location.hash='#2328'"></td><td class="FileContents-lineContents" id="2328"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2329" onclick="window.location.hash='#2329'"></td><td class="FileContents-lineContents" id="2329"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">TrackPosition</span><span class="pun">&amp;</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2330" onclick="window.location.hash='#2330'"></td><td class="FileContents-lineContents" id="2330"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2331" onclick="window.location.hash='#2331'"></td><td class="FileContents-lineContents" id="2331"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p</span><span class="pun">.</span><span class="pln">m_track </span><span class="pun">==</span><span class="pln"> n</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2332" onclick="window.location.hash='#2332'"></td><td class="FileContents-lineContents" id="2332"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">p</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2333" onclick="window.location.hash='#2333'"></td><td class="FileContents-lineContents" id="2333"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2334" onclick="window.location.hash='#2334'"></td><td class="FileContents-lineContents" id="2334"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2335" onclick="window.location.hash='#2335'"></td><td class="FileContents-lineContents" id="2335"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no matching track number found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2336" onclick="window.location.hash='#2336'"></td><td class="FileContents-lineContents" id="2336"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2337" onclick="window.location.hash='#2337'"></td><td class="FileContents-lineContents" id="2337"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2338" onclick="window.location.hash='#2338'"></td><td class="FileContents-lineContents" id="2338"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_timecode</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2339" onclick="window.location.hash='#2339'"></td><td class="FileContents-lineContents" id="2339"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2340" onclick="window.location.hash='#2340'"></td><td class="FileContents-lineContents" id="2340"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2341" onclick="window.location.hash='#2341'"></td><td class="FileContents-lineContents" id="2341"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2342" onclick="window.location.hash='#2342'"></td><td class="FileContents-lineContents" id="2342"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_timecode </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2343" onclick="window.location.hash='#2343'"></td><td class="FileContents-lineContents" id="2343"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2344" onclick="window.location.hash='#2344'"></td><td class="FileContents-lineContents" id="2344"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pInfo </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="typ">GetInfo</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2345" onclick="window.location.hash='#2345'"></td><td class="FileContents-lineContents" id="2345"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pInfo</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2346" onclick="window.location.hash='#2346'"></td><td class="FileContents-lineContents" id="2346"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2347" onclick="window.location.hash='#2347'"></td><td class="FileContents-lineContents" id="2347"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> scale </span><span class="pun">=</span><span class="pln"> pInfo</span><span class="pun">-&gt;</span><span class="typ">GetTimeCodeScale</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2348" onclick="window.location.hash='#2348'"></td><td class="FileContents-lineContents" id="2348"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">scale </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2349" onclick="window.location.hash='#2349'"></td><td class="FileContents-lineContents" id="2349"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2350" onclick="window.location.hash='#2350'"></td><td class="FileContents-lineContents" id="2350"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time </span><span class="pun">=</span><span class="pln"> scale </span><span class="pun">*</span><span class="pln"> m_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2351" onclick="window.location.hash='#2351'"></td><td class="FileContents-lineContents" id="2351"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2352" onclick="window.location.hash='#2352'"></td><td class="FileContents-lineContents" id="2352"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> time</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2353" onclick="window.location.hash='#2353'"></td><td class="FileContents-lineContents" id="2353"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2354" onclick="window.location.hash='#2354'"></td><td class="FileContents-lineContents" id="2354"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2355" onclick="window.location.hash='#2355'"></td><td class="FileContents-lineContents" id="2355"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">DoneParsing</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2356" onclick="window.location.hash='#2356'"></td><td class="FileContents-lineContents" id="2356"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2357" onclick="window.location.hash='#2357'"></td><td class="FileContents-lineContents" id="2357"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2358" onclick="window.location.hash='#2358'"></td><td class="FileContents-lineContents" id="2358"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2359" onclick="window.location.hash='#2359'"></td><td class="FileContents-lineContents" id="2359"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2360" onclick="window.location.hash='#2360'"></td><td class="FileContents-lineContents" id="2360"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2361" onclick="window.location.hash='#2361'"></td><td class="FileContents-lineContents" id="2361"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2362" onclick="window.location.hash='#2362'"></td><td class="FileContents-lineContents" id="2362"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// must assume done</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2363" onclick="window.location.hash='#2363'"></td><td class="FileContents-lineContents" id="2363"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2364" onclick="window.location.hash='#2364'"></td><td class="FileContents-lineContents" id="2364"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2365" onclick="window.location.hash='#2365'"></td><td class="FileContents-lineContents" id="2365"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">  </span><span class="com">// assume live stream</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2366" onclick="window.location.hash='#2366'"></td><td class="FileContents-lineContents" id="2366"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2367" onclick="window.location.hash='#2367'"></td><td class="FileContents-lineContents" id="2367"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2368" onclick="window.location.hash='#2368'"></td><td class="FileContents-lineContents" id="2368"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2369" onclick="window.location.hash='#2369'"></td><td class="FileContents-lineContents" id="2369"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2370" onclick="window.location.hash='#2370'"></td><td class="FileContents-lineContents" id="2370"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2371" onclick="window.location.hash='#2371'"></td><td class="FileContents-lineContents" id="2371"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2372" onclick="window.location.hash='#2372'"></td><td class="FileContents-lineContents" id="2372"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2373" onclick="window.location.hash='#2373'"></td><td class="FileContents-lineContents" id="2373"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2374" onclick="window.location.hash='#2374'"></td><td class="FileContents-lineContents" id="2374"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2375" onclick="window.location.hash='#2375'"></td><td class="FileContents-lineContents" id="2375"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetFirst</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2376" onclick="window.location.hash='#2376'"></td><td class="FileContents-lineContents" id="2376"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">m_clusters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusterCount </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2377" onclick="window.location.hash='#2377'"></td><td class="FileContents-lineContents" id="2377"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_eos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2378" onclick="window.location.hash='#2378'"></td><td class="FileContents-lineContents" id="2378"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2379" onclick="window.location.hash='#2379'"></td><td class="FileContents-lineContents" id="2379"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2380" onclick="window.location.hash='#2380'"></td><td class="FileContents-lineContents" id="2380"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2381" onclick="window.location.hash='#2381'"></td><td class="FileContents-lineContents" id="2381"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2382" onclick="window.location.hash='#2382'"></td><td class="FileContents-lineContents" id="2382"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2383" onclick="window.location.hash='#2383'"></td><td class="FileContents-lineContents" id="2383"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2384" onclick="window.location.hash='#2384'"></td><td class="FileContents-lineContents" id="2384"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2385" onclick="window.location.hash='#2385'"></td><td class="FileContents-lineContents" id="2385"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetLast</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2386" onclick="window.location.hash='#2386'"></td><td class="FileContents-lineContents" id="2386"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">m_clusters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusterCount </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2387" onclick="window.location.hash='#2387'"></td><td class="FileContents-lineContents" id="2387"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_eos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2388" onclick="window.location.hash='#2388'"></td><td class="FileContents-lineContents" id="2388"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2389" onclick="window.location.hash='#2389'"></td><td class="FileContents-lineContents" id="2389"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> m_clusterCount </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2390" onclick="window.location.hash='#2390'"></td><td class="FileContents-lineContents" id="2390"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2391" onclick="window.location.hash='#2391'"></td><td class="FileContents-lineContents" id="2391"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2392" onclick="window.location.hash='#2392'"></td><td class="FileContents-lineContents" id="2392"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2393" onclick="window.location.hash='#2393'"></td><td class="FileContents-lineContents" id="2393"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2394" onclick="window.location.hash='#2394'"></td><td class="FileContents-lineContents" id="2394"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2395" onclick="window.location.hash='#2395'"></td><td class="FileContents-lineContents" id="2395"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2396" onclick="window.location.hash='#2396'"></td><td class="FileContents-lineContents" id="2396"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2397" onclick="window.location.hash='#2397'"></td><td class="FileContents-lineContents" id="2397"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_clusterCount</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2398" onclick="window.location.hash='#2398'"></td><td class="FileContents-lineContents" id="2398"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2399" onclick="window.location.hash='#2399'"></td><td class="FileContents-lineContents" id="2399"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetNext</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCurr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2400" onclick="window.location.hash='#2400'"></td><td class="FileContents-lineContents" id="2400"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurr</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2401" onclick="window.location.hash='#2401'"></td><td class="FileContents-lineContents" id="2401"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurr </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_eos</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2402" onclick="window.location.hash='#2402'"></td><td class="FileContents-lineContents" id="2402"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2403" onclick="window.location.hash='#2403'"></td><td class="FileContents-lineContents" id="2403"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2404" onclick="window.location.hash='#2404'"></td><td class="FileContents-lineContents" id="2404"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="pln">m_index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2405" onclick="window.location.hash='#2405'"></td><td class="FileContents-lineContents" id="2405"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2406" onclick="window.location.hash='#2406'"></td><td class="FileContents-lineContents" id="2406"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2407" onclick="window.location.hash='#2407'"></td><td class="FileContents-lineContents" id="2407"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_clusterCount </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2408" onclick="window.location.hash='#2408'"></td><td class="FileContents-lineContents" id="2408"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> m_clusterCount</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2409" onclick="window.location.hash='#2409'"></td><td class="FileContents-lineContents" id="2409"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCurr </span><span class="pun">==</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2410" onclick="window.location.hash='#2410'"></td><td class="FileContents-lineContents" id="2410"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2411" onclick="window.location.hash='#2411'"></td><td class="FileContents-lineContents" id="2411"><span class="pln">    </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2412" onclick="window.location.hash='#2412'"></td><td class="FileContents-lineContents" id="2412"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2413" onclick="window.location.hash='#2413'"></td><td class="FileContents-lineContents" id="2413"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> m_clusterCount</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2414" onclick="window.location.hash='#2414'"></td><td class="FileContents-lineContents" id="2414"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_eos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// caller will LoadCluster as desired</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2415" onclick="window.location.hash='#2415'"></td><td class="FileContents-lineContents" id="2415"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2416" onclick="window.location.hash='#2416'"></td><td class="FileContents-lineContents" id="2416"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNext </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2417" onclick="window.location.hash='#2417'"></td><td class="FileContents-lineContents" id="2417"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2418" onclick="window.location.hash='#2418'"></td><td class="FileContents-lineContents" id="2418"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2419" onclick="window.location.hash='#2419'"></td><td class="FileContents-lineContents" id="2419"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">==</span><span class="pln"> idx</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2420" onclick="window.location.hash='#2420'"></td><td class="FileContents-lineContents" id="2420"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2421" onclick="window.location.hash='#2421'"></td><td class="FileContents-lineContents" id="2421"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> pNext</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2422" onclick="window.location.hash='#2422'"></td><td class="FileContents-lineContents" id="2422"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2423" onclick="window.location.hash='#2423'"></td><td class="FileContents-lineContents" id="2423"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2424" onclick="window.location.hash='#2424'"></td><td class="FileContents-lineContents" id="2424"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusterPreloadCount </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2425" onclick="window.location.hash='#2425'"></td><td class="FileContents-lineContents" id="2425"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2426" onclick="window.location.hash='#2426'"></td><td class="FileContents-lineContents" id="2426"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="pln">m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2427" onclick="window.location.hash='#2427'"></td><td class="FileContents-lineContents" id="2427"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2428" onclick="window.location.hash='#2428'"></td><td class="FileContents-lineContents" id="2428"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2429" onclick="window.location.hash='#2429'"></td><td class="FileContents-lineContents" id="2429"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// end of segment</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2430" onclick="window.location.hash='#2430'"></td><td class="FileContents-lineContents" id="2430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2431" onclick="window.location.hash='#2431'"></td><td class="FileContents-lineContents" id="2431"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2432" onclick="window.location.hash='#2432'"></td><td class="FileContents-lineContents" id="2432"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2433" onclick="window.location.hash='#2433'"></td><td class="FileContents-lineContents" id="2433"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2434" onclick="window.location.hash='#2434'"></td><td class="FileContents-lineContents" id="2434"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2435" onclick="window.location.hash='#2435'"></td><td class="FileContents-lineContents" id="2435"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2436" onclick="window.location.hash='#2436'"></td><td class="FileContents-lineContents" id="2436"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2437" onclick="window.location.hash='#2437'"></td><td class="FileContents-lineContents" id="2437"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2438" onclick="window.location.hash='#2438'"></td><td class="FileContents-lineContents" id="2438"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2439" onclick="window.location.hash='#2439'"></td><td class="FileContents-lineContents" id="2439"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2440" onclick="window.location.hash='#2440'"></td><td class="FileContents-lineContents" id="2440"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2441" onclick="window.location.hash='#2441'"></td><td class="FileContents-lineContents" id="2441"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">);</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2442" onclick="window.location.hash='#2442'"></td><td class="FileContents-lineContents" id="2442"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2443" onclick="window.location.hash='#2443'"></td><td class="FileContents-lineContents" id="2443"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2444" onclick="window.location.hash='#2444'"></td><td class="FileContents-lineContents" id="2444"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2445" onclick="window.location.hash='#2445'"></td><td class="FileContents-lineContents" id="2445"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2446" onclick="window.location.hash='#2446'"></td><td class="FileContents-lineContents" id="2446"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2447" onclick="window.location.hash='#2447'"></td><td class="FileContents-lineContents" id="2447"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2448" onclick="window.location.hash='#2448'"></td><td class="FileContents-lineContents" id="2448"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2449" onclick="window.location.hash='#2449'"></td><td class="FileContents-lineContents" id="2449"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2450" onclick="window.location.hash='#2450'"></td><td class="FileContents-lineContents" id="2450"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2451" onclick="window.location.hash='#2451'"></td><td class="FileContents-lineContents" id="2451"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2452" onclick="window.location.hash='#2452'"></td><td class="FileContents-lineContents" id="2452"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2453" onclick="window.location.hash='#2453'"></td><td class="FileContents-lineContents" id="2453"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2454" onclick="window.location.hash='#2454'"></td><td class="FileContents-lineContents" id="2454"><span class="pln">    </span><span class="com">// assert((pCurr-&gt;m_size &lt;= 0) || (pCurr-&gt;m_size == size));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2455" onclick="window.location.hash='#2455'"></td><td class="FileContents-lineContents" id="2455"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2456" onclick="window.location.hash='#2456'"></td><td class="FileContents-lineContents" id="2456"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2457" onclick="window.location.hash='#2457'"></td><td class="FileContents-lineContents" id="2457"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2458" onclick="window.location.hash='#2458'"></td><td class="FileContents-lineContents" id="2458"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2459" onclick="window.location.hash='#2459'"></td><td class="FileContents-lineContents" id="2459"><span class="pln">    </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2460" onclick="window.location.hash='#2460'"></td><td class="FileContents-lineContents" id="2460"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2461" onclick="window.location.hash='#2461'"></td><td class="FileContents-lineContents" id="2461"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2462" onclick="window.location.hash='#2462'"></td><td class="FileContents-lineContents" id="2462"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2463" onclick="window.location.hash='#2463'"></td><td class="FileContents-lineContents" id="2463"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2464" onclick="window.location.hash='#2464'"></td><td class="FileContents-lineContents" id="2464"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off_next </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2465" onclick="window.location.hash='#2465'"></td><td class="FileContents-lineContents" id="2465"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2466" onclick="window.location.hash='#2466'"></td><td class="FileContents-lineContents" id="2466"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2467" onclick="window.location.hash='#2467'"></td><td class="FileContents-lineContents" id="2467"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2468" onclick="window.location.hash='#2468'"></td><td class="FileContents-lineContents" id="2468"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2469" onclick="window.location.hash='#2469'"></td><td class="FileContents-lineContents" id="2469"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2470" onclick="window.location.hash='#2470'"></td><td class="FileContents-lineContents" id="2470"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2471" onclick="window.location.hash='#2471'"></td><td class="FileContents-lineContents" id="2471"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2472" onclick="window.location.hash='#2472'"></td><td class="FileContents-lineContents" id="2472"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2473" onclick="window.location.hash='#2473'"></td><td class="FileContents-lineContents" id="2473"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2474" onclick="window.location.hash='#2474'"></td><td class="FileContents-lineContents" id="2474"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2475" onclick="window.location.hash='#2475'"></td><td class="FileContents-lineContents" id="2475"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// pos of next (potential) cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2476" onclick="window.location.hash='#2476'"></td><td class="FileContents-lineContents" id="2476"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2477" onclick="window.location.hash='#2477'"></td><td class="FileContents-lineContents" id="2477"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2478" onclick="window.location.hash='#2478'"></td><td class="FileContents-lineContents" id="2478"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2479" onclick="window.location.hash='#2479'"></td><td class="FileContents-lineContents" id="2479"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2480" onclick="window.location.hash='#2480'"></td><td class="FileContents-lineContents" id="2480"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2481" onclick="window.location.hash='#2481'"></td><td class="FileContents-lineContents" id="2481"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2482" onclick="window.location.hash='#2482'"></td><td class="FileContents-lineContents" id="2482"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2483" onclick="window.location.hash='#2483'"></td><td class="FileContents-lineContents" id="2483"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2484" onclick="window.location.hash='#2484'"></td><td class="FileContents-lineContents" id="2484"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2485" onclick="window.location.hash='#2485'"></td><td class="FileContents-lineContents" id="2485"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2486" onclick="window.location.hash='#2486'"></td><td class="FileContents-lineContents" id="2486"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2487" onclick="window.location.hash='#2487'"></td><td class="FileContents-lineContents" id="2487"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2488" onclick="window.location.hash='#2488'"></td><td class="FileContents-lineContents" id="2488"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2489" onclick="window.location.hash='#2489'"></td><td class="FileContents-lineContents" id="2489"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2490" onclick="window.location.hash='#2490'"></td><td class="FileContents-lineContents" id="2490"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2491" onclick="window.location.hash='#2491'"></td><td class="FileContents-lineContents" id="2491"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2492" onclick="window.location.hash='#2492'"></td><td class="FileContents-lineContents" id="2492"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2493" onclick="window.location.hash='#2493'"></td><td class="FileContents-lineContents" id="2493"><span class="pln">    </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2494" onclick="window.location.hash='#2494'"></td><td class="FileContents-lineContents" id="2494"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2495" onclick="window.location.hash='#2495'"></td><td class="FileContents-lineContents" id="2495"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2496" onclick="window.location.hash='#2496'"></td><td class="FileContents-lineContents" id="2496"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2497" onclick="window.location.hash='#2497'"></td><td class="FileContents-lineContents" id="2497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2498" onclick="window.location.hash='#2498'"></td><td class="FileContents-lineContents" id="2498"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2499" onclick="window.location.hash='#2499'"></td><td class="FileContents-lineContents" id="2499"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off_next_ </span><span class="pun">=</span><span class="pln"> idpos </span><span class="pun">-</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2500" onclick="window.location.hash='#2500'"></td><td class="FileContents-lineContents" id="2500"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2501" onclick="window.location.hash='#2501'"></td><td class="FileContents-lineContents" id="2501"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2502" onclick="window.location.hash='#2502'"></td><td class="FileContents-lineContents" id="2502"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> len_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2503" onclick="window.location.hash='#2503'"></td><td class="FileContents-lineContents" id="2503"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2504" onclick="window.location.hash='#2504'"></td><td class="FileContents-lineContents" id="2504"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">HasBlockEntries</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> off_next_</span><span class="pun">,</span><span class="pln"> pos_</span><span class="pun">,</span><span class="pln"> len_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2505" onclick="window.location.hash='#2505'"></td><td class="FileContents-lineContents" id="2505"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2506" onclick="window.location.hash='#2506'"></td><td class="FileContents-lineContents" id="2506"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2507" onclick="window.location.hash='#2507'"></td><td class="FileContents-lineContents" id="2507"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2508" onclick="window.location.hash='#2508'"></td><td class="FileContents-lineContents" id="2508"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2509" onclick="window.location.hash='#2509'"></td><td class="FileContents-lineContents" id="2509"><span class="pln">        off_next </span><span class="pun">=</span><span class="pln"> off_next_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2510" onclick="window.location.hash='#2510'"></td><td class="FileContents-lineContents" id="2510"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2511" onclick="window.location.hash='#2511'"></td><td class="FileContents-lineContents" id="2511"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2512" onclick="window.location.hash='#2512'"></td><td class="FileContents-lineContents" id="2512"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2513" onclick="window.location.hash='#2513'"></td><td class="FileContents-lineContents" id="2513"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2514" onclick="window.location.hash='#2514'"></td><td class="FileContents-lineContents" id="2514"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2515" onclick="window.location.hash='#2515'"></td><td class="FileContents-lineContents" id="2515"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2516" onclick="window.location.hash='#2516'"></td><td class="FileContents-lineContents" id="2516"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2517" onclick="window.location.hash='#2517'"></td><td class="FileContents-lineContents" id="2517"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">off_next </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2518" onclick="window.location.hash='#2518'"></td><td class="FileContents-lineContents" id="2518"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2519" onclick="window.location.hash='#2519'"></td><td class="FileContents-lineContents" id="2519"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2520" onclick="window.location.hash='#2520'"></td><td class="FileContents-lineContents" id="2520"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> m_clusters </span><span class="pun">+</span><span class="pln"> m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2521" onclick="window.location.hash='#2521'"></td><td class="FileContents-lineContents" id="2521"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> ii</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2522" onclick="window.location.hash='#2522'"></td><td class="FileContents-lineContents" id="2522"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2523" onclick="window.location.hash='#2523'"></td><td class="FileContents-lineContents" id="2523"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> jj </span><span class="pun">=</span><span class="pln"> ii </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2524" onclick="window.location.hash='#2524'"></td><td class="FileContents-lineContents" id="2524"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> jj</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2525" onclick="window.location.hash='#2525'"></td><td class="FileContents-lineContents" id="2525"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2526" onclick="window.location.hash='#2526'"></td><td class="FileContents-lineContents" id="2526"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2527" onclick="window.location.hash='#2527'"></td><td class="FileContents-lineContents" id="2527"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2528" onclick="window.location.hash='#2528'"></td><td class="FileContents-lineContents" id="2528"><span class="pln">    </span><span class="com">//[0, i) &lt; pos_next</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2529" onclick="window.location.hash='#2529'"></td><td class="FileContents-lineContents" id="2529"><span class="pln">    </span><span class="com">//[i, j) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2530" onclick="window.location.hash='#2530'"></td><td class="FileContents-lineContents" id="2530"><span class="pln">    </span><span class="com">//[j, jj)  &gt; pos_next</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2531" onclick="window.location.hash='#2531'"></td><td class="FileContents-lineContents" id="2531"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2532" onclick="window.location.hash='#2532'"></td><td class="FileContents-lineContents" id="2532"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2533" onclick="window.location.hash='#2533'"></td><td class="FileContents-lineContents" id="2533"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">k </span><span class="pun">&lt;</span><span class="pln"> jj</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2534" onclick="window.location.hash='#2534'"></td><td class="FileContents-lineContents" id="2534"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2535" onclick="window.location.hash='#2535'"></td><td class="FileContents-lineContents" id="2535"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNext </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2536" onclick="window.location.hash='#2536'"></td><td class="FileContents-lineContents" id="2536"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2537" onclick="window.location.hash='#2537'"></td><td class="FileContents-lineContents" id="2537"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2538" onclick="window.location.hash='#2538'"></td><td class="FileContents-lineContents" id="2538"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2539" onclick="window.location.hash='#2539'"></td><td class="FileContents-lineContents" id="2539"><span class="pln">    </span><span class="com">// const long long pos_ = pNext-&gt;m_pos;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2540" onclick="window.location.hash='#2540'"></td><td class="FileContents-lineContents" id="2540"><span class="pln">    </span><span class="com">// assert(pos_);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2541" onclick="window.location.hash='#2541'"></td><td class="FileContents-lineContents" id="2541"><span class="pln">    </span><span class="com">// pos = pos_ * ((pos_ &lt; 0) ? -1 : 1);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2542" onclick="window.location.hash='#2542'"></td><td class="FileContents-lineContents" id="2542"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2543" onclick="window.location.hash='#2543'"></td><td class="FileContents-lineContents" id="2543"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> pNext</span><span class="pun">-&gt;</span><span class="typ">GetPosition</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2544" onclick="window.location.hash='#2544'"></td><td class="FileContents-lineContents" id="2544"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2545" onclick="window.location.hash='#2545'"></td><td class="FileContents-lineContents" id="2545"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> off_next</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2546" onclick="window.location.hash='#2546'"></td><td class="FileContents-lineContents" id="2546"><span class="pln">      i </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2547" onclick="window.location.hash='#2547'"></td><td class="FileContents-lineContents" id="2547"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> off_next</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2548" onclick="window.location.hash='#2548'"></td><td class="FileContents-lineContents" id="2548"><span class="pln">      j </span><span class="pun">=</span><span class="pln"> k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2549" onclick="window.location.hash='#2549'"></td><td class="FileContents-lineContents" id="2549"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2550" onclick="window.location.hash='#2550'"></td><td class="FileContents-lineContents" id="2550"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pNext</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2551" onclick="window.location.hash='#2551'"></td><td class="FileContents-lineContents" id="2551"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2552" onclick="window.location.hash='#2552'"></td><td class="FileContents-lineContents" id="2552"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2553" onclick="window.location.hash='#2553'"></td><td class="FileContents-lineContents" id="2553"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2554" onclick="window.location.hash='#2554'"></td><td class="FileContents-lineContents" id="2554"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2555" onclick="window.location.hash='#2555'"></td><td class="FileContents-lineContents" id="2555"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNext </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> off_next</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2556" onclick="window.location.hash='#2556'"></td><td class="FileContents-lineContents" id="2556"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2557" onclick="window.location.hash='#2557'"></td><td class="FileContents-lineContents" id="2557"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2558" onclick="window.location.hash='#2558'"></td><td class="FileContents-lineContents" id="2558"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> idx_next </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">-</span><span class="pln"> m_clusters</span><span class="pun">;</span><span class="pln">  </span><span class="com">// insertion position</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2559" onclick="window.location.hash='#2559'"></td><td class="FileContents-lineContents" id="2559"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2560" onclick="window.location.hash='#2560'"></td><td class="FileContents-lineContents" id="2560"><span class="pln">  </span><span class="typ">PreloadCluster</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">,</span><span class="pln"> idx_next</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2561" onclick="window.location.hash='#2561'"></td><td class="FileContents-lineContents" id="2561"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2562" onclick="window.location.hash='#2562'"></td><td class="FileContents-lineContents" id="2562"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx_next </span><span class="pun">&lt;</span><span class="pln"> m_clusterSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2563" onclick="window.location.hash='#2563'"></td><td class="FileContents-lineContents" id="2563"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">[</span><span class="pln">idx_next</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2564" onclick="window.location.hash='#2564'"></td><td class="FileContents-lineContents" id="2564"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2565" onclick="window.location.hash='#2565'"></td><td class="FileContents-lineContents" id="2565"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pNext</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2566" onclick="window.location.hash='#2566'"></td><td class="FileContents-lineContents" id="2566"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2567" onclick="window.location.hash='#2567'"></td><td class="FileContents-lineContents" id="2567"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2568" onclick="window.location.hash='#2568'"></td><td class="FileContents-lineContents" id="2568"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">ParseNext</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCurr</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2569" onclick="window.location.hash='#2569'"></td><td class="FileContents-lineContents" id="2569"><span class="pln">                        </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2570" onclick="window.location.hash='#2570'"></td><td class="FileContents-lineContents" id="2570"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurr</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2571" onclick="window.location.hash='#2571'"></td><td class="FileContents-lineContents" id="2571"><span class="pln">  assert</span><span class="pun">(!</span><span class="pln">pCurr</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">());</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2572" onclick="window.location.hash='#2572'"></td><td class="FileContents-lineContents" id="2572"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2573" onclick="window.location.hash='#2573'"></td><td class="FileContents-lineContents" id="2573"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2574" onclick="window.location.hash='#2574'"></td><td class="FileContents-lineContents" id="2574"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2575" onclick="window.location.hash='#2575'"></td><td class="FileContents-lineContents" id="2575"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2576" onclick="window.location.hash='#2576'"></td><td class="FileContents-lineContents" id="2576"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCurr</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// loaded (not merely preloaded)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2577" onclick="window.location.hash='#2577'"></td><td class="FileContents-lineContents" id="2577"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">[</span><span class="pln">pCurr</span><span class="pun">-&gt;</span><span class="pln">m_index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pCurr</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2578" onclick="window.location.hash='#2578'"></td><td class="FileContents-lineContents" id="2578"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2579" onclick="window.location.hash='#2579'"></td><td class="FileContents-lineContents" id="2579"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> next_idx </span><span class="pun">=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2580" onclick="window.location.hash='#2580'"></td><td class="FileContents-lineContents" id="2580"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2581" onclick="window.location.hash='#2581'"></td><td class="FileContents-lineContents" id="2581"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">next_idx </span><span class="pun">&lt;</span><span class="pln"> m_clusterCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2582" onclick="window.location.hash='#2582'"></td><td class="FileContents-lineContents" id="2582"><span class="pln">      pResult </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">next_idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2583" onclick="window.location.hash='#2583'"></td><td class="FileContents-lineContents" id="2583"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2584" onclick="window.location.hash='#2584'"></td><td class="FileContents-lineContents" id="2584"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2585" onclick="window.location.hash='#2585'"></td><td class="FileContents-lineContents" id="2585"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2586" onclick="window.location.hash='#2586'"></td><td class="FileContents-lineContents" id="2586"><span class="pln">    </span><span class="com">// curr cluster is last among loaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2587" onclick="window.location.hash='#2587'"></td><td class="FileContents-lineContents" id="2587"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2588" onclick="window.location.hash='#2588'"></td><td class="FileContents-lineContents" id="2588"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoadCluster</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2589" onclick="window.location.hash='#2589'"></td><td class="FileContents-lineContents" id="2589"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2590" onclick="window.location.hash='#2590'"></td><td class="FileContents-lineContents" id="2590"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2591" onclick="window.location.hash='#2591'"></td><td class="FileContents-lineContents" id="2591"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2592" onclick="window.location.hash='#2592'"></td><td class="FileContents-lineContents" id="2592"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2593" onclick="window.location.hash='#2593'"></td><td class="FileContents-lineContents" id="2593"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2594" onclick="window.location.hash='#2594'"></td><td class="FileContents-lineContents" id="2594"><span class="pln">    </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2595" onclick="window.location.hash='#2595'"></td><td class="FileContents-lineContents" id="2595"><span class="pln">      </span><span class="com">// pResult = &amp;m_eos;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2596" onclick="window.location.hash='#2596'"></td><td class="FileContents-lineContents" id="2596"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2597" onclick="window.location.hash='#2597'"></td><td class="FileContents-lineContents" id="2597"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2598" onclick="window.location.hash='#2598'"></td><td class="FileContents-lineContents" id="2598"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2599" onclick="window.location.hash='#2599'"></td><td class="FileContents-lineContents" id="2599"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetLast</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2600" onclick="window.location.hash='#2600'"></td><td class="FileContents-lineContents" id="2600"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2601" onclick="window.location.hash='#2601'"></td><td class="FileContents-lineContents" id="2601"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2602" onclick="window.location.hash='#2602'"></td><td class="FileContents-lineContents" id="2602"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2603" onclick="window.location.hash='#2603'"></td><td class="FileContents-lineContents" id="2603"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2604" onclick="window.location.hash='#2604'"></td><td class="FileContents-lineContents" id="2604"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2605" onclick="window.location.hash='#2605'"></td><td class="FileContents-lineContents" id="2605"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2606" onclick="window.location.hash='#2606'"></td><td class="FileContents-lineContents" id="2606"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2607" onclick="window.location.hash='#2607'"></td><td class="FileContents-lineContents" id="2607"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2608" onclick="window.location.hash='#2608'"></td><td class="FileContents-lineContents" id="2608"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2609" onclick="window.location.hash='#2609'"></td><td class="FileContents-lineContents" id="2609"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2610" onclick="window.location.hash='#2610'"></td><td class="FileContents-lineContents" id="2610"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2611" onclick="window.location.hash='#2611'"></td><td class="FileContents-lineContents" id="2611"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2612" onclick="window.location.hash='#2612'"></td><td class="FileContents-lineContents" id="2612"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2613" onclick="window.location.hash='#2613'"></td><td class="FileContents-lineContents" id="2613"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2614" onclick="window.location.hash='#2614'"></td><td class="FileContents-lineContents" id="2614"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> segment_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2615" onclick="window.location.hash='#2615'"></td><td class="FileContents-lineContents" id="2615"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2616" onclick="window.location.hash='#2616'"></td><td class="FileContents-lineContents" id="2616"><span class="pln">  </span><span class="com">// interrogate curr cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2617" onclick="window.location.hash='#2617'"></td><td class="FileContents-lineContents" id="2617"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2618" onclick="window.location.hash='#2618'"></td><td class="FileContents-lineContents" id="2618"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="pln">m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2619" onclick="window.location.hash='#2619'"></td><td class="FileContents-lineContents" id="2619"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2620" onclick="window.location.hash='#2620'"></td><td class="FileContents-lineContents" id="2620"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCurr</span><span class="pun">-&gt;</span><span class="pln">m_element_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2621" onclick="window.location.hash='#2621'"></td><td class="FileContents-lineContents" id="2621"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="pln">m_element_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2622" onclick="window.location.hash='#2622'"></td><td class="FileContents-lineContents" id="2622"><span class="pln">  </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2623" onclick="window.location.hash='#2623'"></td><td class="FileContents-lineContents" id="2623"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2624" onclick="window.location.hash='#2624'"></td><td class="FileContents-lineContents" id="2624"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2625" onclick="window.location.hash='#2625'"></td><td class="FileContents-lineContents" id="2625"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2626" onclick="window.location.hash='#2626'"></td><td class="FileContents-lineContents" id="2626"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2627" onclick="window.location.hash='#2627'"></td><td class="FileContents-lineContents" id="2627"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2628" onclick="window.location.hash='#2628'"></td><td class="FileContents-lineContents" id="2628"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2629" onclick="window.location.hash='#2629'"></td><td class="FileContents-lineContents" id="2629"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2630" onclick="window.location.hash='#2630'"></td><td class="FileContents-lineContents" id="2630"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2631" onclick="window.location.hash='#2631'"></td><td class="FileContents-lineContents" id="2631"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2632" onclick="window.location.hash='#2632'"></td><td class="FileContents-lineContents" id="2632"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2633" onclick="window.location.hash='#2633'"></td><td class="FileContents-lineContents" id="2633"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2634" onclick="window.location.hash='#2634'"></td><td class="FileContents-lineContents" id="2634"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2635" onclick="window.location.hash='#2635'"></td><td class="FileContents-lineContents" id="2635"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2636" onclick="window.location.hash='#2636'"></td><td class="FileContents-lineContents" id="2636"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2637" onclick="window.location.hash='#2637'"></td><td class="FileContents-lineContents" id="2637"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2638" onclick="window.location.hash='#2638'"></td><td class="FileContents-lineContents" id="2638"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2639" onclick="window.location.hash='#2639'"></td><td class="FileContents-lineContents" id="2639"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2640" onclick="window.location.hash='#2640'"></td><td class="FileContents-lineContents" id="2640"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2641" onclick="window.location.hash='#2641'"></td><td class="FileContents-lineContents" id="2641"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2642" onclick="window.location.hash='#2642'"></td><td class="FileContents-lineContents" id="2642"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2643" onclick="window.location.hash='#2643'"></td><td class="FileContents-lineContents" id="2643"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2644" onclick="window.location.hash='#2644'"></td><td class="FileContents-lineContents" id="2644"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird: not Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2645" onclick="window.location.hash='#2645'"></td><td class="FileContents-lineContents" id="2645"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2646" onclick="window.location.hash='#2646'"></td><td class="FileContents-lineContents" id="2646"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2647" onclick="window.location.hash='#2647'"></td><td class="FileContents-lineContents" id="2647"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2648" onclick="window.location.hash='#2648'"></td><td class="FileContents-lineContents" id="2648"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2649" onclick="window.location.hash='#2649'"></td><td class="FileContents-lineContents" id="2649"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2650" onclick="window.location.hash='#2650'"></td><td class="FileContents-lineContents" id="2650"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2651" onclick="window.location.hash='#2651'"></td><td class="FileContents-lineContents" id="2651"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2652" onclick="window.location.hash='#2652'"></td><td class="FileContents-lineContents" id="2652"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2653" onclick="window.location.hash='#2653'"></td><td class="FileContents-lineContents" id="2653"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2654" onclick="window.location.hash='#2654'"></td><td class="FileContents-lineContents" id="2654"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2655" onclick="window.location.hash='#2655'"></td><td class="FileContents-lineContents" id="2655"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2656" onclick="window.location.hash='#2656'"></td><td class="FileContents-lineContents" id="2656"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2657" onclick="window.location.hash='#2657'"></td><td class="FileContents-lineContents" id="2657"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2658" onclick="window.location.hash='#2658'"></td><td class="FileContents-lineContents" id="2658"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2659" onclick="window.location.hash='#2659'"></td><td class="FileContents-lineContents" id="2659"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2660" onclick="window.location.hash='#2660'"></td><td class="FileContents-lineContents" id="2660"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2661" onclick="window.location.hash='#2661'"></td><td class="FileContents-lineContents" id="2661"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2662" onclick="window.location.hash='#2662'"></td><td class="FileContents-lineContents" id="2662"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2663" onclick="window.location.hash='#2663'"></td><td class="FileContents-lineContents" id="2663"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2664" onclick="window.location.hash='#2664'"></td><td class="FileContents-lineContents" id="2664"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2665" onclick="window.location.hash='#2665'"></td><td class="FileContents-lineContents" id="2665"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2666" onclick="window.location.hash='#2666'"></td><td class="FileContents-lineContents" id="2666"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2667" onclick="window.location.hash='#2667'"></td><td class="FileContents-lineContents" id="2667"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2668" onclick="window.location.hash='#2668'"></td><td class="FileContents-lineContents" id="2668"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2669" onclick="window.location.hash='#2669'"></td><td class="FileContents-lineContents" id="2669"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2670" onclick="window.location.hash='#2670'"></td><td class="FileContents-lineContents" id="2670"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2671" onclick="window.location.hash='#2671'"></td><td class="FileContents-lineContents" id="2671"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2672" onclick="window.location.hash='#2672'"></td><td class="FileContents-lineContents" id="2672"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2673" onclick="window.location.hash='#2673'"></td><td class="FileContents-lineContents" id="2673"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2674" onclick="window.location.hash='#2674'"></td><td class="FileContents-lineContents" id="2674"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2675" onclick="window.location.hash='#2675'"></td><td class="FileContents-lineContents" id="2675"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2676" onclick="window.location.hash='#2676'"></td><td class="FileContents-lineContents" id="2676"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2677" onclick="window.location.hash='#2677'"></td><td class="FileContents-lineContents" id="2677"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2678" onclick="window.location.hash='#2678'"></td><td class="FileContents-lineContents" id="2678"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2679" onclick="window.location.hash='#2679'"></td><td class="FileContents-lineContents" id="2679"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span><span class="pln">  </span><span class="com">// TODO: should never happen</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2680" onclick="window.location.hash='#2680'"></td><td class="FileContents-lineContents" id="2680"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// TODO: resolve this</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2681" onclick="window.location.hash='#2681'"></td><td class="FileContents-lineContents" id="2681"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2682" onclick="window.location.hash='#2682'"></td><td class="FileContents-lineContents" id="2682"><span class="pln">    </span><span class="com">// assert((pCurr-&gt;m_size &lt;= 0) || (pCurr-&gt;m_size == size));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2683" onclick="window.location.hash='#2683'"></td><td class="FileContents-lineContents" id="2683"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2684" onclick="window.location.hash='#2684'"></td><td class="FileContents-lineContents" id="2684"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2685" onclick="window.location.hash='#2685'"></td><td class="FileContents-lineContents" id="2685"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2686" onclick="window.location.hash='#2686'"></td><td class="FileContents-lineContents" id="2686"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2687" onclick="window.location.hash='#2687'"></td><td class="FileContents-lineContents" id="2687"><span class="pln">    </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2688" onclick="window.location.hash='#2688'"></td><td class="FileContents-lineContents" id="2688"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2689" onclick="window.location.hash='#2689'"></td><td class="FileContents-lineContents" id="2689"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload (that is, the current cluster)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2690" onclick="window.location.hash='#2690'"></td><td class="FileContents-lineContents" id="2690"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2691" onclick="window.location.hash='#2691'"></td><td class="FileContents-lineContents" id="2691"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2692" onclick="window.location.hash='#2692'"></td><td class="FileContents-lineContents" id="2692"><span class="pln">    </span><span class="com">// By consuming the payload, we are assuming that the curr</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2693" onclick="window.location.hash='#2693'"></td><td class="FileContents-lineContents" id="2693"><span class="pln">    </span><span class="com">// cluster isn&#39;t interesting.  That is, we don&#39;t bother checking</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2694" onclick="window.location.hash='#2694'"></td><td class="FileContents-lineContents" id="2694"><span class="pln">    </span><span class="com">// whether the payload of the curr cluster is less than what</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2695" onclick="window.location.hash='#2695'"></td><td class="FileContents-lineContents" id="2695"><span class="pln">    </span><span class="com">// happens to be available (obtained via IMkvReader::Length).</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2696" onclick="window.location.hash='#2696'"></td><td class="FileContents-lineContents" id="2696"><span class="pln">    </span><span class="com">// Presumably the caller has already dispensed with the current</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2697" onclick="window.location.hash='#2697'"></td><td class="FileContents-lineContents" id="2697"><span class="pln">    </span><span class="com">// cluster, and really does want the next cluster.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2698" onclick="window.location.hash='#2698'"></td><td class="FileContents-lineContents" id="2698"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2699" onclick="window.location.hash='#2699'"></td><td class="FileContents-lineContents" id="2699"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2700" onclick="window.location.hash='#2700'"></td><td class="FileContents-lineContents" id="2700"><span class="pln">  </span><span class="com">// pos now points to just beyond the last fully-loaded cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2701" onclick="window.location.hash='#2701'"></td><td class="FileContents-lineContents" id="2701"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2702" onclick="window.location.hash='#2702'"></td><td class="FileContents-lineContents" id="2702"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2703" onclick="window.location.hash='#2703'"></td><td class="FileContents-lineContents" id="2703"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DoParseNext</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2704" onclick="window.location.hash='#2704'"></td><td class="FileContents-lineContents" id="2704"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2705" onclick="window.location.hash='#2705'"></td><td class="FileContents-lineContents" id="2705"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2706" onclick="window.location.hash='#2706'"></td><td class="FileContents-lineContents" id="2706"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2707" onclick="window.location.hash='#2707'"></td><td class="FileContents-lineContents" id="2707"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2708" onclick="window.location.hash='#2708'"></td><td class="FileContents-lineContents" id="2708"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2709" onclick="window.location.hash='#2709'"></td><td class="FileContents-lineContents" id="2709"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2710" onclick="window.location.hash='#2710'"></td><td class="FileContents-lineContents" id="2710"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">DoParseNext</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2711" onclick="window.location.hash='#2711'"></td><td class="FileContents-lineContents" id="2711"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2712" onclick="window.location.hash='#2712'"></td><td class="FileContents-lineContents" id="2712"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2713" onclick="window.location.hash='#2713'"></td><td class="FileContents-lineContents" id="2713"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2714" onclick="window.location.hash='#2714'"></td><td class="FileContents-lineContents" id="2714"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2715" onclick="window.location.hash='#2715'"></td><td class="FileContents-lineContents" id="2715"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2716" onclick="window.location.hash='#2716'"></td><td class="FileContents-lineContents" id="2716"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2717" onclick="window.location.hash='#2717'"></td><td class="FileContents-lineContents" id="2717"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2718" onclick="window.location.hash='#2718'"></td><td class="FileContents-lineContents" id="2718"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2719" onclick="window.location.hash='#2719'"></td><td class="FileContents-lineContents" id="2719"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2720" onclick="window.location.hash='#2720'"></td><td class="FileContents-lineContents" id="2720"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> segment_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2721" onclick="window.location.hash='#2721'"></td><td class="FileContents-lineContents" id="2721"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2722" onclick="window.location.hash='#2722'"></td><td class="FileContents-lineContents" id="2722"><span class="pln">  </span><span class="com">// Parse next cluster.  This is strictly a parsing activity.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2723" onclick="window.location.hash='#2723'"></td><td class="FileContents-lineContents" id="2723"><span class="pln">  </span><span class="com">// Creation of a new cluster object happens later, after the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2724" onclick="window.location.hash='#2724'"></td><td class="FileContents-lineContents" id="2724"><span class="pln">  </span><span class="com">// parsing is done.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2725" onclick="window.location.hash='#2725'"></td><td class="FileContents-lineContents" id="2725"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2726" onclick="window.location.hash='#2726'"></td><td class="FileContents-lineContents" id="2726"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off_next </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2727" onclick="window.location.hash='#2727'"></td><td class="FileContents-lineContents" id="2727"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2728" onclick="window.location.hash='#2728'"></td><td class="FileContents-lineContents" id="2728"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2729" onclick="window.location.hash='#2729'"></td><td class="FileContents-lineContents" id="2729"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2730" onclick="window.location.hash='#2730'"></td><td class="FileContents-lineContents" id="2730"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2731" onclick="window.location.hash='#2731'"></td><td class="FileContents-lineContents" id="2731"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// EOF</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2732" onclick="window.location.hash='#2732'"></td><td class="FileContents-lineContents" id="2732"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2733" onclick="window.location.hash='#2733'"></td><td class="FileContents-lineContents" id="2733"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2734" onclick="window.location.hash='#2734'"></td><td class="FileContents-lineContents" id="2734"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// EOF</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2735" onclick="window.location.hash='#2735'"></td><td class="FileContents-lineContents" id="2735"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2736" onclick="window.location.hash='#2736'"></td><td class="FileContents-lineContents" id="2736"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2737" onclick="window.location.hash='#2737'"></td><td class="FileContents-lineContents" id="2737"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2738" onclick="window.location.hash='#2738'"></td><td class="FileContents-lineContents" id="2738"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2739" onclick="window.location.hash='#2739'"></td><td class="FileContents-lineContents" id="2739"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2740" onclick="window.location.hash='#2740'"></td><td class="FileContents-lineContents" id="2740"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2741" onclick="window.location.hash='#2741'"></td><td class="FileContents-lineContents" id="2741"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2742" onclick="window.location.hash='#2742'"></td><td class="FileContents-lineContents" id="2742"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2743" onclick="window.location.hash='#2743'"></td><td class="FileContents-lineContents" id="2743"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2744" onclick="window.location.hash='#2744'"></td><td class="FileContents-lineContents" id="2744"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2745" onclick="window.location.hash='#2745'"></td><td class="FileContents-lineContents" id="2745"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2746" onclick="window.location.hash='#2746'"></td><td class="FileContents-lineContents" id="2746"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2747" onclick="window.location.hash='#2747'"></td><td class="FileContents-lineContents" id="2747"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2748" onclick="window.location.hash='#2748'"></td><td class="FileContents-lineContents" id="2748"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2749" onclick="window.location.hash='#2749'"></td><td class="FileContents-lineContents" id="2749"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2750" onclick="window.location.hash='#2750'"></td><td class="FileContents-lineContents" id="2750"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2751" onclick="window.location.hash='#2751'"></td><td class="FileContents-lineContents" id="2751"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2752" onclick="window.location.hash='#2752'"></td><td class="FileContents-lineContents" id="2752"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2753" onclick="window.location.hash='#2753'"></td><td class="FileContents-lineContents" id="2753"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2754" onclick="window.location.hash='#2754'"></td><td class="FileContents-lineContents" id="2754"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2755" onclick="window.location.hash='#2755'"></td><td class="FileContents-lineContents" id="2755"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// absolute</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2756" onclick="window.location.hash='#2756'"></td><td class="FileContents-lineContents" id="2756"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idoff </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">-</span><span class="pln"> m_start</span><span class="pun">;</span><span class="pln">  </span><span class="com">// relative</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2757" onclick="window.location.hash='#2757'"></td><td class="FileContents-lineContents" id="2757"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2758" onclick="window.location.hash='#2758'"></td><td class="FileContents-lineContents" id="2758"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span><span class="pln">  </span><span class="com">// absolute</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2759" onclick="window.location.hash='#2759'"></td><td class="FileContents-lineContents" id="2759"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2760" onclick="window.location.hash='#2760'"></td><td class="FileContents-lineContents" id="2760"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2761" onclick="window.location.hash='#2761'"></td><td class="FileContents-lineContents" id="2761"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2762" onclick="window.location.hash='#2762'"></td><td class="FileContents-lineContents" id="2762"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2763" onclick="window.location.hash='#2763'"></td><td class="FileContents-lineContents" id="2763"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2764" onclick="window.location.hash='#2764'"></td><td class="FileContents-lineContents" id="2764"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2765" onclick="window.location.hash='#2765'"></td><td class="FileContents-lineContents" id="2765"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2766" onclick="window.location.hash='#2766'"></td><td class="FileContents-lineContents" id="2766"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2767" onclick="window.location.hash='#2767'"></td><td class="FileContents-lineContents" id="2767"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2768" onclick="window.location.hash='#2768'"></td><td class="FileContents-lineContents" id="2768"><span class="pln">    </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2769" onclick="window.location.hash='#2769'"></td><td class="FileContents-lineContents" id="2769"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2770" onclick="window.location.hash='#2770'"></td><td class="FileContents-lineContents" id="2770"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2771" onclick="window.location.hash='#2771'"></td><td class="FileContents-lineContents" id="2771"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2772" onclick="window.location.hash='#2772'"></td><td class="FileContents-lineContents" id="2772"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2773" onclick="window.location.hash='#2773'"></td><td class="FileContents-lineContents" id="2773"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2774" onclick="window.location.hash='#2774'"></td><td class="FileContents-lineContents" id="2774"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2775" onclick="window.location.hash='#2775'"></td><td class="FileContents-lineContents" id="2775"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2776" onclick="window.location.hash='#2776'"></td><td class="FileContents-lineContents" id="2776"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2777" onclick="window.location.hash='#2777'"></td><td class="FileContents-lineContents" id="2777"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2778" onclick="window.location.hash='#2778'"></td><td class="FileContents-lineContents" id="2778"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2779" onclick="window.location.hash='#2779'"></td><td class="FileContents-lineContents" id="2779"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2780" onclick="window.location.hash='#2780'"></td><td class="FileContents-lineContents" id="2780"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2781" onclick="window.location.hash='#2781'"></td><td class="FileContents-lineContents" id="2781"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2782" onclick="window.location.hash='#2782'"></td><td class="FileContents-lineContents" id="2782"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2783" onclick="window.location.hash='#2783'"></td><td class="FileContents-lineContents" id="2783"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2784" onclick="window.location.hash='#2784'"></td><td class="FileContents-lineContents" id="2784"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2785" onclick="window.location.hash='#2785'"></td><td class="FileContents-lineContents" id="2785"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2786" onclick="window.location.hash='#2786'"></td><td class="FileContents-lineContents" id="2786"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2787" onclick="window.location.hash='#2787'"></td><td class="FileContents-lineContents" id="2787"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2788" onclick="window.location.hash='#2788'"></td><td class="FileContents-lineContents" id="2788"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2789" onclick="window.location.hash='#2789'"></td><td class="FileContents-lineContents" id="2789"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2790" onclick="window.location.hash='#2790'"></td><td class="FileContents-lineContents" id="2790"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2791" onclick="window.location.hash='#2791'"></td><td class="FileContents-lineContents" id="2791"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2792" onclick="window.location.hash='#2792'"></td><td class="FileContents-lineContents" id="2792"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2793" onclick="window.location.hash='#2793'"></td><td class="FileContents-lineContents" id="2793"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2794" onclick="window.location.hash='#2794'"></td><td class="FileContents-lineContents" id="2794"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2795" onclick="window.location.hash='#2795'"></td><td class="FileContents-lineContents" id="2795"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2796" onclick="window.location.hash='#2796'"></td><td class="FileContents-lineContents" id="2796"><span class="pln">    </span><span class="com">// Pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2797" onclick="window.location.hash='#2797'"></td><td class="FileContents-lineContents" id="2797"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2798" onclick="window.location.hash='#2798'"></td><td class="FileContents-lineContents" id="2798"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2799" onclick="window.location.hash='#2799'"></td><td class="FileContents-lineContents" id="2799"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2800" onclick="window.location.hash='#2800'"></td><td class="FileContents-lineContents" id="2800"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2801" onclick="window.location.hash='#2801'"></td><td class="FileContents-lineContents" id="2801"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2802" onclick="window.location.hash='#2802'"></td><td class="FileContents-lineContents" id="2802"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2803" onclick="window.location.hash='#2803'"></td><td class="FileContents-lineContents" id="2803"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">!=</span><span class="pln"> unknown_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2804" onclick="window.location.hash='#2804'"></td><td class="FileContents-lineContents" id="2804"><span class="pln">        </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2805" onclick="window.location.hash='#2805'"></td><td class="FileContents-lineContents" id="2805"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2806" onclick="window.location.hash='#2806'"></td><td class="FileContents-lineContents" id="2806"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2807" onclick="window.location.hash='#2807'"></td><td class="FileContents-lineContents" id="2807"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2808" onclick="window.location.hash='#2808'"></td><td class="FileContents-lineContents" id="2808"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2809" onclick="window.location.hash='#2809'"></td><td class="FileContents-lineContents" id="2809"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2810" onclick="window.location.hash='#2810'"></td><td class="FileContents-lineContents" id="2810"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2811" onclick="window.location.hash='#2811'"></td><td class="FileContents-lineContents" id="2811"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2812" onclick="window.location.hash='#2812'"></td><td class="FileContents-lineContents" id="2812"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2813" onclick="window.location.hash='#2813'"></td><td class="FileContents-lineContents" id="2813"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2814" onclick="window.location.hash='#2814'"></td><td class="FileContents-lineContents" id="2814"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">element_stop </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2815" onclick="window.location.hash='#2815'"></td><td class="FileContents-lineContents" id="2815"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2816" onclick="window.location.hash='#2816'"></td><td class="FileContents-lineContents" id="2816"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2817" onclick="window.location.hash='#2817'"></td><td class="FileContents-lineContents" id="2817"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start </span><span class="pun">=</span><span class="pln"> idpos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2818" onclick="window.location.hash='#2818'"></td><td class="FileContents-lineContents" id="2818"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> element_stop </span><span class="pun">-</span><span class="pln"> element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2819" onclick="window.location.hash='#2819'"></td><td class="FileContents-lineContents" id="2819"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2820" onclick="window.location.hash='#2820'"></td><td class="FileContents-lineContents" id="2820"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pCues </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2821" onclick="window.location.hash='#2821'"></td><td class="FileContents-lineContents" id="2821"><span class="pln">        m_pCues </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2822" onclick="window.location.hash='#2822'"></td><td class="FileContents-lineContents" id="2822"><span class="pln">        assert</span><span class="pun">(</span><span class="pln">m_pCues</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2823" onclick="window.location.hash='#2823'"></td><td class="FileContents-lineContents" id="2823"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2824" onclick="window.location.hash='#2824'"></td><td class="FileContents-lineContents" id="2824"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2825" onclick="window.location.hash='#2825'"></td><td class="FileContents-lineContents" id="2825"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2826" onclick="window.location.hash='#2826'"></td><td class="FileContents-lineContents" id="2826"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2827" onclick="window.location.hash='#2827'"></td><td class="FileContents-lineContents" id="2827"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2828" onclick="window.location.hash='#2828'"></td><td class="FileContents-lineContents" id="2828"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2829" onclick="window.location.hash='#2829'"></td><td class="FileContents-lineContents" id="2829"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2830" onclick="window.location.hash='#2830'"></td><td class="FileContents-lineContents" id="2830"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2831" onclick="window.location.hash='#2831'"></td><td class="FileContents-lineContents" id="2831"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// not a Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2832" onclick="window.location.hash='#2832'"></td><td class="FileContents-lineContents" id="2832"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2833" onclick="window.location.hash='#2833'"></td><td class="FileContents-lineContents" id="2833"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2834" onclick="window.location.hash='#2834'"></td><td class="FileContents-lineContents" id="2834"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2835" onclick="window.location.hash='#2835'"></td><td class="FileContents-lineContents" id="2835"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2836" onclick="window.location.hash='#2836'"></td><td class="FileContents-lineContents" id="2836"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2837" onclick="window.location.hash='#2837'"></td><td class="FileContents-lineContents" id="2837"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2838" onclick="window.location.hash='#2838'"></td><td class="FileContents-lineContents" id="2838"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2839" onclick="window.location.hash='#2839'"></td><td class="FileContents-lineContents" id="2839"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2840" onclick="window.location.hash='#2840'"></td><td class="FileContents-lineContents" id="2840"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2841" onclick="window.location.hash='#2841'"></td><td class="FileContents-lineContents" id="2841"><span class="pln">    </span><span class="com">// We have a cluster.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2842" onclick="window.location.hash='#2842'"></td><td class="FileContents-lineContents" id="2842"><span class="pln">    off_next </span><span class="pun">=</span><span class="pln"> idoff</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2843" onclick="window.location.hash='#2843'"></td><td class="FileContents-lineContents" id="2843"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2844" onclick="window.location.hash='#2844'"></td><td class="FileContents-lineContents" id="2844"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">!=</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2845" onclick="window.location.hash='#2845'"></td><td class="FileContents-lineContents" id="2845"><span class="pln">      cluster_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2846" onclick="window.location.hash='#2846'"></td><td class="FileContents-lineContents" id="2846"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2847" onclick="window.location.hash='#2847'"></td><td class="FileContents-lineContents" id="2847"><span class="pln">    </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2848" onclick="window.location.hash='#2848'"></td><td class="FileContents-lineContents" id="2848"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2849" onclick="window.location.hash='#2849'"></td><td class="FileContents-lineContents" id="2849"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2850" onclick="window.location.hash='#2850'"></td><td class="FileContents-lineContents" id="2850"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">off_next </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// have cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2851" onclick="window.location.hash='#2851'"></td><td class="FileContents-lineContents" id="2851"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2852" onclick="window.location.hash='#2852'"></td><td class="FileContents-lineContents" id="2852"><span class="pln">  </span><span class="com">// We have parsed the next cluster.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2853" onclick="window.location.hash='#2853'"></td><td class="FileContents-lineContents" id="2853"><span class="pln">  </span><span class="com">// We have not created a cluster object yet.  What we need</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2854" onclick="window.location.hash='#2854'"></td><td class="FileContents-lineContents" id="2854"><span class="pln">  </span><span class="com">// to do now is determine whether it has already be preloaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2855" onclick="window.location.hash='#2855'"></td><td class="FileContents-lineContents" id="2855"><span class="pln">  </span><span class="com">//(in which case, an object for this cluster has already been</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2856" onclick="window.location.hash='#2856'"></td><td class="FileContents-lineContents" id="2856"><span class="pln">  </span><span class="com">// created), and if not, create a new cluster object.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2857" onclick="window.location.hash='#2857'"></td><td class="FileContents-lineContents" id="2857"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2858" onclick="window.location.hash='#2858'"></td><td class="FileContents-lineContents" id="2858"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> m_clusters </span><span class="pun">+</span><span class="pln"> m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2859" onclick="window.location.hash='#2859'"></td><td class="FileContents-lineContents" id="2859"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> ii</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2860" onclick="window.location.hash='#2860'"></td><td class="FileContents-lineContents" id="2860"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2861" onclick="window.location.hash='#2861'"></td><td class="FileContents-lineContents" id="2861"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> jj </span><span class="pun">=</span><span class="pln"> ii </span><span class="pun">+</span><span class="pln"> m_clusterPreloadCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2862" onclick="window.location.hash='#2862'"></td><td class="FileContents-lineContents" id="2862"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> jj</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2863" onclick="window.location.hash='#2863'"></td><td class="FileContents-lineContents" id="2863"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2864" onclick="window.location.hash='#2864'"></td><td class="FileContents-lineContents" id="2864"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2865" onclick="window.location.hash='#2865'"></td><td class="FileContents-lineContents" id="2865"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2866" onclick="window.location.hash='#2866'"></td><td class="FileContents-lineContents" id="2866"><span class="pln">    </span><span class="com">//[0, i) &lt; pos_next</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2867" onclick="window.location.hash='#2867'"></td><td class="FileContents-lineContents" id="2867"><span class="pln">    </span><span class="com">//[i, j) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2868" onclick="window.location.hash='#2868'"></td><td class="FileContents-lineContents" id="2868"><span class="pln">    </span><span class="com">//[j, jj)  &gt; pos_next</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2869" onclick="window.location.hash='#2869'"></td><td class="FileContents-lineContents" id="2869"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2870" onclick="window.location.hash='#2870'"></td><td class="FileContents-lineContents" id="2870"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2871" onclick="window.location.hash='#2871'"></td><td class="FileContents-lineContents" id="2871"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">k </span><span class="pun">&lt;</span><span class="pln"> jj</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2872" onclick="window.location.hash='#2872'"></td><td class="FileContents-lineContents" id="2872"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2873" onclick="window.location.hash='#2873'"></td><td class="FileContents-lineContents" id="2873"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNext </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2874" onclick="window.location.hash='#2874'"></td><td class="FileContents-lineContents" id="2874"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2875" onclick="window.location.hash='#2875'"></td><td class="FileContents-lineContents" id="2875"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2876" onclick="window.location.hash='#2876'"></td><td class="FileContents-lineContents" id="2876"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2877" onclick="window.location.hash='#2877'"></td><td class="FileContents-lineContents" id="2877"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> pNext</span><span class="pun">-&gt;</span><span class="typ">GetPosition</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2878" onclick="window.location.hash='#2878'"></td><td class="FileContents-lineContents" id="2878"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2879" onclick="window.location.hash='#2879'"></td><td class="FileContents-lineContents" id="2879"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2880" onclick="window.location.hash='#2880'"></td><td class="FileContents-lineContents" id="2880"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> off_next</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2881" onclick="window.location.hash='#2881'"></td><td class="FileContents-lineContents" id="2881"><span class="pln">      i </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2882" onclick="window.location.hash='#2882'"></td><td class="FileContents-lineContents" id="2882"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> off_next</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2883" onclick="window.location.hash='#2883'"></td><td class="FileContents-lineContents" id="2883"><span class="pln">      j </span><span class="pun">=</span><span class="pln"> k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2884" onclick="window.location.hash='#2884'"></td><td class="FileContents-lineContents" id="2884"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2885" onclick="window.location.hash='#2885'"></td><td class="FileContents-lineContents" id="2885"><span class="pln">      pResult </span><span class="pun">=</span><span class="pln"> pNext</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2886" onclick="window.location.hash='#2886'"></td><td class="FileContents-lineContents" id="2886"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2887" onclick="window.location.hash='#2887'"></td><td class="FileContents-lineContents" id="2887"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2888" onclick="window.location.hash='#2888'"></td><td class="FileContents-lineContents" id="2888"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2889" onclick="window.location.hash='#2889'"></td><td class="FileContents-lineContents" id="2889"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2890" onclick="window.location.hash='#2890'"></td><td class="FileContents-lineContents" id="2890"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2891" onclick="window.location.hash='#2891'"></td><td class="FileContents-lineContents" id="2891"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2892" onclick="window.location.hash='#2892'"></td><td class="FileContents-lineContents" id="2892"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2893" onclick="window.location.hash='#2893'"></td><td class="FileContents-lineContents" id="2893"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2894" onclick="window.location.hash='#2894'"></td><td class="FileContents-lineContents" id="2894"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2895" onclick="window.location.hash='#2895'"></td><td class="FileContents-lineContents" id="2895"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">HasBlockEntries</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> off_next</span><span class="pun">,</span><span class="pln"> pos_</span><span class="pun">,</span><span class="pln"> len_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2896" onclick="window.location.hash='#2896'"></td><td class="FileContents-lineContents" id="2896"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2897" onclick="window.location.hash='#2897'"></td><td class="FileContents-lineContents" id="2897"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2898" onclick="window.location.hash='#2898'"></td><td class="FileContents-lineContents" id="2898"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2899" onclick="window.location.hash='#2899'"></td><td class="FileContents-lineContents" id="2899"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> len_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2900" onclick="window.location.hash='#2900'"></td><td class="FileContents-lineContents" id="2900"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2901" onclick="window.location.hash='#2901'"></td><td class="FileContents-lineContents" id="2901"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2902" onclick="window.location.hash='#2902'"></td><td class="FileContents-lineContents" id="2902"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2903" onclick="window.location.hash='#2903'"></td><td class="FileContents-lineContents" id="2903"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2904" onclick="window.location.hash='#2904'"></td><td class="FileContents-lineContents" id="2904"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// means &quot;found at least one block entry&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2905" onclick="window.location.hash='#2905'"></td><td class="FileContents-lineContents" id="2905"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNext </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2906" onclick="window.location.hash='#2906'"></td><td class="FileContents-lineContents" id="2906"><span class="pln">                                           </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="com">// preloaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2907" onclick="window.location.hash='#2907'"></td><td class="FileContents-lineContents" id="2907"><span class="pln">                                           off_next</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2908" onclick="window.location.hash='#2908'"></td><td class="FileContents-lineContents" id="2908"><span class="pln">    </span><span class="com">// element_size);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2909" onclick="window.location.hash='#2909'"></td><td class="FileContents-lineContents" id="2909"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2910" onclick="window.location.hash='#2910'"></td><td class="FileContents-lineContents" id="2910"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2911" onclick="window.location.hash='#2911'"></td><td class="FileContents-lineContents" id="2911"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> idx_next </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">-</span><span class="pln"> m_clusters</span><span class="pun">;</span><span class="pln">  </span><span class="com">// insertion position</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2912" onclick="window.location.hash='#2912'"></td><td class="FileContents-lineContents" id="2912"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2913" onclick="window.location.hash='#2913'"></td><td class="FileContents-lineContents" id="2913"><span class="pln">    </span><span class="typ">PreloadCluster</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">,</span><span class="pln"> idx_next</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2914" onclick="window.location.hash='#2914'"></td><td class="FileContents-lineContents" id="2914"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2915" onclick="window.location.hash='#2915'"></td><td class="FileContents-lineContents" id="2915"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">idx_next </span><span class="pun">&lt;</span><span class="pln"> m_clusterSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2916" onclick="window.location.hash='#2916'"></td><td class="FileContents-lineContents" id="2916"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_clusters</span><span class="pun">[</span><span class="pln">idx_next</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2917" onclick="window.location.hash='#2917'"></td><td class="FileContents-lineContents" id="2917"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2918" onclick="window.location.hash='#2918'"></td><td class="FileContents-lineContents" id="2918"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> pNext</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2919" onclick="window.location.hash='#2919'"></td><td class="FileContents-lineContents" id="2919"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2920" onclick="window.location.hash='#2920'"></td><td class="FileContents-lineContents" id="2920"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2921" onclick="window.location.hash='#2921'"></td><td class="FileContents-lineContents" id="2921"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2922" onclick="window.location.hash='#2922'"></td><td class="FileContents-lineContents" id="2922"><span class="pln">  </span><span class="com">// status == 0 means &quot;no block entries found&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2923" onclick="window.location.hash='#2923'"></td><td class="FileContents-lineContents" id="2923"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2924" onclick="window.location.hash='#2924'"></td><td class="FileContents-lineContents" id="2924"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// unknown size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2925" onclick="window.location.hash='#2925'"></td><td class="FileContents-lineContents" id="2925"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// absolute pos of cluster payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2926" onclick="window.location.hash='#2926'"></td><td class="FileContents-lineContents" id="2926"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2927" onclick="window.location.hash='#2927'"></td><td class="FileContents-lineContents" id="2927"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// determine cluster size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2928" onclick="window.location.hash='#2928'"></td><td class="FileContents-lineContents" id="2928"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2929" onclick="window.location.hash='#2929'"></td><td class="FileContents-lineContents" id="2929"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2930" onclick="window.location.hash='#2930'"></td><td class="FileContents-lineContents" id="2930"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2931" onclick="window.location.hash='#2931'"></td><td class="FileContents-lineContents" id="2931"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2932" onclick="window.location.hash='#2932'"></td><td class="FileContents-lineContents" id="2932"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no more clusters</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2933" onclick="window.location.hash='#2933'"></td><td class="FileContents-lineContents" id="2933"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2934" onclick="window.location.hash='#2934'"></td><td class="FileContents-lineContents" id="2934"><span class="pln">      </span><span class="com">// Read ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2935" onclick="window.location.hash='#2935'"></td><td class="FileContents-lineContents" id="2935"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2936" onclick="window.location.hash='#2936'"></td><td class="FileContents-lineContents" id="2936"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2937" onclick="window.location.hash='#2937'"></td><td class="FileContents-lineContents" id="2937"><span class="pln">        len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2938" onclick="window.location.hash='#2938'"></td><td class="FileContents-lineContents" id="2938"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2939" onclick="window.location.hash='#2939'"></td><td class="FileContents-lineContents" id="2939"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2940" onclick="window.location.hash='#2940'"></td><td class="FileContents-lineContents" id="2940"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2941" onclick="window.location.hash='#2941'"></td><td class="FileContents-lineContents" id="2941"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2942" onclick="window.location.hash='#2942'"></td><td class="FileContents-lineContents" id="2942"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2943" onclick="window.location.hash='#2943'"></td><td class="FileContents-lineContents" id="2943"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2944" onclick="window.location.hash='#2944'"></td><td class="FileContents-lineContents" id="2944"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2945" onclick="window.location.hash='#2945'"></td><td class="FileContents-lineContents" id="2945"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2946" onclick="window.location.hash='#2946'"></td><td class="FileContents-lineContents" id="2946"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2947" onclick="window.location.hash='#2947'"></td><td class="FileContents-lineContents" id="2947"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2948" onclick="window.location.hash='#2948'"></td><td class="FileContents-lineContents" id="2948"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2949" onclick="window.location.hash='#2949'"></td><td class="FileContents-lineContents" id="2949"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2950" onclick="window.location.hash='#2950'"></td><td class="FileContents-lineContents" id="2950"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2951" onclick="window.location.hash='#2951'"></td><td class="FileContents-lineContents" id="2951"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2952" onclick="window.location.hash='#2952'"></td><td class="FileContents-lineContents" id="2952"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2953" onclick="window.location.hash='#2953'"></td><td class="FileContents-lineContents" id="2953"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2954" onclick="window.location.hash='#2954'"></td><td class="FileContents-lineContents" id="2954"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2955" onclick="window.location.hash='#2955'"></td><td class="FileContents-lineContents" id="2955"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2956" onclick="window.location.hash='#2956'"></td><td class="FileContents-lineContents" id="2956"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> idpos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2957" onclick="window.location.hash='#2957'"></td><td class="FileContents-lineContents" id="2957"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2958" onclick="window.location.hash='#2958'"></td><td class="FileContents-lineContents" id="2958"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error (or underflow)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2959" onclick="window.location.hash='#2959'"></td><td class="FileContents-lineContents" id="2959"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2960" onclick="window.location.hash='#2960'"></td><td class="FileContents-lineContents" id="2960"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2961" onclick="window.location.hash='#2961'"></td><td class="FileContents-lineContents" id="2961"><span class="pln">      </span><span class="com">// This is the distinguished set of ID&#39;s we use to determine</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2962" onclick="window.location.hash='#2962'"></td><td class="FileContents-lineContents" id="2962"><span class="pln">      </span><span class="com">// that we have exhausted the sub-element&#39;s inside the cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2963" onclick="window.location.hash='#2963'"></td><td class="FileContents-lineContents" id="2963"><span class="pln">      </span><span class="com">// whose ID we parsed earlier.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2964" onclick="window.location.hash='#2964'"></td><td class="FileContents-lineContents" id="2964"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2965" onclick="window.location.hash='#2965'"></td><td class="FileContents-lineContents" id="2965"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2966" onclick="window.location.hash='#2966'"></td><td class="FileContents-lineContents" id="2966"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2967" onclick="window.location.hash='#2967'"></td><td class="FileContents-lineContents" id="2967"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2968" onclick="window.location.hash='#2968'"></td><td class="FileContents-lineContents" id="2968"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2969" onclick="window.location.hash='#2969'"></td><td class="FileContents-lineContents" id="2969"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2970" onclick="window.location.hash='#2970'"></td><td class="FileContents-lineContents" id="2970"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2971" onclick="window.location.hash='#2971'"></td><td class="FileContents-lineContents" id="2971"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID (of sub-element)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2972" onclick="window.location.hash='#2972'"></td><td class="FileContents-lineContents" id="2972"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2973" onclick="window.location.hash='#2973'"></td><td class="FileContents-lineContents" id="2973"><span class="pln">      </span><span class="com">// Read Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2974" onclick="window.location.hash='#2974'"></td><td class="FileContents-lineContents" id="2974"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2975" onclick="window.location.hash='#2975'"></td><td class="FileContents-lineContents" id="2975"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2976" onclick="window.location.hash='#2976'"></td><td class="FileContents-lineContents" id="2976"><span class="pln">        len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2977" onclick="window.location.hash='#2977'"></td><td class="FileContents-lineContents" id="2977"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2978" onclick="window.location.hash='#2978'"></td><td class="FileContents-lineContents" id="2978"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2979" onclick="window.location.hash='#2979'"></td><td class="FileContents-lineContents" id="2979"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2980" onclick="window.location.hash='#2980'"></td><td class="FileContents-lineContents" id="2980"><span class="pln">      result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2981" onclick="window.location.hash='#2981'"></td><td class="FileContents-lineContents" id="2981"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2982" onclick="window.location.hash='#2982'"></td><td class="FileContents-lineContents" id="2982"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2983" onclick="window.location.hash='#2983'"></td><td class="FileContents-lineContents" id="2983"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2984" onclick="window.location.hash='#2984'"></td><td class="FileContents-lineContents" id="2984"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2985" onclick="window.location.hash='#2985'"></td><td class="FileContents-lineContents" id="2985"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2986" onclick="window.location.hash='#2986'"></td><td class="FileContents-lineContents" id="2986"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2987" onclick="window.location.hash='#2987'"></td><td class="FileContents-lineContents" id="2987"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2988" onclick="window.location.hash='#2988'"></td><td class="FileContents-lineContents" id="2988"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2989" onclick="window.location.hash='#2989'"></td><td class="FileContents-lineContents" id="2989"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2990" onclick="window.location.hash='#2990'"></td><td class="FileContents-lineContents" id="2990"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2991" onclick="window.location.hash='#2991'"></td><td class="FileContents-lineContents" id="2991"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2992" onclick="window.location.hash='#2992'"></td><td class="FileContents-lineContents" id="2992"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2993" onclick="window.location.hash='#2993'"></td><td class="FileContents-lineContents" id="2993"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2994" onclick="window.location.hash='#2994'"></td><td class="FileContents-lineContents" id="2994"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2995" onclick="window.location.hash='#2995'"></td><td class="FileContents-lineContents" id="2995"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2996" onclick="window.location.hash='#2996'"></td><td class="FileContents-lineContents" id="2996"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2997" onclick="window.location.hash='#2997'"></td><td class="FileContents-lineContents" id="2997"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2998" onclick="window.location.hash='#2998'"></td><td class="FileContents-lineContents" id="2998"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2999" onclick="window.location.hash='#2999'"></td><td class="FileContents-lineContents" id="2999"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3000" onclick="window.location.hash='#3000'"></td><td class="FileContents-lineContents" id="3000"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3001" onclick="window.location.hash='#3001'"></td><td class="FileContents-lineContents" id="3001"><span class="pln">      </span><span class="com">// pos now points to start of sub-element&#39;s payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3002" onclick="window.location.hash='#3002'"></td><td class="FileContents-lineContents" id="3002"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3003" onclick="window.location.hash='#3003'"></td><td class="FileContents-lineContents" id="3003"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3004" onclick="window.location.hash='#3004'"></td><td class="FileContents-lineContents" id="3004"><span class="pln">        </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3005" onclick="window.location.hash='#3005'"></td><td class="FileContents-lineContents" id="3005"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3006" onclick="window.location.hash='#3006'"></td><td class="FileContents-lineContents" id="3006"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3007" onclick="window.location.hash='#3007'"></td><td class="FileContents-lineContents" id="3007"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3008" onclick="window.location.hash='#3008'"></td><td class="FileContents-lineContents" id="3008"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3009" onclick="window.location.hash='#3009'"></td><td class="FileContents-lineContents" id="3009"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// not allowed for sub-elements</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3010" onclick="window.location.hash='#3010'"></td><td class="FileContents-lineContents" id="3010"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3011" onclick="window.location.hash='#3011'"></td><td class="FileContents-lineContents" id="3011"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3012" onclick="window.location.hash='#3012'"></td><td class="FileContents-lineContents" id="3012"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3013" onclick="window.location.hash='#3013'"></td><td class="FileContents-lineContents" id="3013"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3014" onclick="window.location.hash='#3014'"></td><td class="FileContents-lineContents" id="3014"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload of sub-element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3015" onclick="window.location.hash='#3015'"></td><td class="FileContents-lineContents" id="3015"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3016" onclick="window.location.hash='#3016'"></td><td class="FileContents-lineContents" id="3016"><span class="pln">    </span><span class="pun">}</span><span class="pln">  </span><span class="com">// determine cluster size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3017" onclick="window.location.hash='#3017'"></td><td class="FileContents-lineContents" id="3017"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3018" onclick="window.location.hash='#3018'"></td><td class="FileContents-lineContents" id="3018"><span class="pln">    cluster_size </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">-</span><span class="pln"> payload_pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3019" onclick="window.location.hash='#3019'"></td><td class="FileContents-lineContents" id="3019"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO: handle cluster_size = 0</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3020" onclick="window.location.hash='#3020'"></td><td class="FileContents-lineContents" id="3020"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3021" onclick="window.location.hash='#3021'"></td><td class="FileContents-lineContents" id="3021"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> payload_pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// reset and re-parse original cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3022" onclick="window.location.hash='#3022'"></td><td class="FileContents-lineContents" id="3022"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3023" onclick="window.location.hash='#3023'"></td><td class="FileContents-lineContents" id="3023"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3024" onclick="window.location.hash='#3024'"></td><td class="FileContents-lineContents" id="3024"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> cluster_size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3025" onclick="window.location.hash='#3025'"></td><td class="FileContents-lineContents" id="3025"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> segment_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3026" onclick="window.location.hash='#3026'"></td><td class="FileContents-lineContents" id="3026"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3027" onclick="window.location.hash='#3027'"></td><td class="FileContents-lineContents" id="3027"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">  </span><span class="com">// try to find a cluster that follows next</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3028" onclick="window.location.hash='#3028'"></td><td class="FileContents-lineContents" id="3028"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3029" onclick="window.location.hash='#3029'"></td><td class="FileContents-lineContents" id="3029"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3030" onclick="window.location.hash='#3030'"></td><td class="FileContents-lineContents" id="3030"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">FindCluster</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time_ns</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3031" onclick="window.location.hash='#3031'"></td><td class="FileContents-lineContents" id="3031"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">m_clusters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_clusterCount </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3032" onclick="window.location.hash='#3032'"></td><td class="FileContents-lineContents" id="3032"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_eos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3033" onclick="window.location.hash='#3033'"></td><td class="FileContents-lineContents" id="3033"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3034" onclick="window.location.hash='#3034'"></td><td class="FileContents-lineContents" id="3034"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3035" onclick="window.location.hash='#3035'"></td><td class="FileContents-lineContents" id="3035"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3036" onclick="window.location.hash='#3036'"></td><td class="FileContents-lineContents" id="3036"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3037" onclick="window.location.hash='#3037'"></td><td class="FileContents-lineContents" id="3037"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3038" onclick="window.location.hash='#3038'"></td><td class="FileContents-lineContents" id="3038"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3039" onclick="window.location.hash='#3039'"></td><td class="FileContents-lineContents" id="3039"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&lt;=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3040" onclick="window.location.hash='#3040'"></td><td class="FileContents-lineContents" id="3040"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3041" onclick="window.location.hash='#3041'"></td><td class="FileContents-lineContents" id="3041"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3042" onclick="window.location.hash='#3042'"></td><td class="FileContents-lineContents" id="3042"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3043" onclick="window.location.hash='#3043'"></td><td class="FileContents-lineContents" id="3043"><span class="pln">  </span><span class="com">// Binary search of cluster array</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3044" onclick="window.location.hash='#3044'"></td><td class="FileContents-lineContents" id="3044"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3045" onclick="window.location.hash='#3045'"></td><td class="FileContents-lineContents" id="3045"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3046" onclick="window.location.hash='#3046'"></td><td class="FileContents-lineContents" id="3046"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> m_clusterCount</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3047" onclick="window.location.hash='#3047'"></td><td class="FileContents-lineContents" id="3047"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3048" onclick="window.location.hash='#3048'"></td><td class="FileContents-lineContents" id="3048"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3049" onclick="window.location.hash='#3049'"></td><td class="FileContents-lineContents" id="3049"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3050" onclick="window.location.hash='#3050'"></td><td class="FileContents-lineContents" id="3050"><span class="pln">    </span><span class="com">//[0, i) &lt;= time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3051" onclick="window.location.hash='#3051'"></td><td class="FileContents-lineContents" id="3051"><span class="pln">    </span><span class="com">//[i, j) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3052" onclick="window.location.hash='#3052'"></td><td class="FileContents-lineContents" id="3052"><span class="pln">    </span><span class="com">//[j, m_clusterCount)  &gt; time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3053" onclick="window.location.hash='#3053'"></td><td class="FileContents-lineContents" id="3053"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3054" onclick="window.location.hash='#3054'"></td><td class="FileContents-lineContents" id="3054"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3055" onclick="window.location.hash='#3055'"></td><td class="FileContents-lineContents" id="3055"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">k </span><span class="pun">&lt;</span><span class="pln"> m_clusterCount</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3056" onclick="window.location.hash='#3056'"></td><td class="FileContents-lineContents" id="3056"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3057" onclick="window.location.hash='#3057'"></td><td class="FileContents-lineContents" id="3057"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">k</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3058" onclick="window.location.hash='#3058'"></td><td class="FileContents-lineContents" id="3058"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3059" onclick="window.location.hash='#3059'"></td><td class="FileContents-lineContents" id="3059"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">==</span><span class="pln"> k</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3060" onclick="window.location.hash='#3060'"></td><td class="FileContents-lineContents" id="3060"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3061" onclick="window.location.hash='#3061'"></td><td class="FileContents-lineContents" id="3061"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3062" onclick="window.location.hash='#3062'"></td><td class="FileContents-lineContents" id="3062"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3063" onclick="window.location.hash='#3063'"></td><td class="FileContents-lineContents" id="3063"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3064" onclick="window.location.hash='#3064'"></td><td class="FileContents-lineContents" id="3064"><span class="pln">      i </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3065" onclick="window.location.hash='#3065'"></td><td class="FileContents-lineContents" id="3065"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3066" onclick="window.location.hash='#3066'"></td><td class="FileContents-lineContents" id="3066"><span class="pln">      j </span><span class="pun">=</span><span class="pln"> k</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3067" onclick="window.location.hash='#3067'"></td><td class="FileContents-lineContents" id="3067"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3068" onclick="window.location.hash='#3068'"></td><td class="FileContents-lineContents" id="3068"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;=</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3069" onclick="window.location.hash='#3069'"></td><td class="FileContents-lineContents" id="3069"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3070" onclick="window.location.hash='#3070'"></td><td class="FileContents-lineContents" id="3070"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3071" onclick="window.location.hash='#3071'"></td><td class="FileContents-lineContents" id="3071"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3072" onclick="window.location.hash='#3072'"></td><td class="FileContents-lineContents" id="3072"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3073" onclick="window.location.hash='#3073'"></td><td class="FileContents-lineContents" id="3073"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;=</span><span class="pln"> m_clusterCount</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3074" onclick="window.location.hash='#3074'"></td><td class="FileContents-lineContents" id="3074"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3075" onclick="window.location.hash='#3075'"></td><td class="FileContents-lineContents" id="3075"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3076" onclick="window.location.hash='#3076'"></td><td class="FileContents-lineContents" id="3076"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3077" onclick="window.location.hash='#3077'"></td><td class="FileContents-lineContents" id="3077"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_clusters</span><span class="pun">[</span><span class="pln">k</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3078" onclick="window.location.hash='#3078'"></td><td class="FileContents-lineContents" id="3078"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3079" onclick="window.location.hash='#3079'"></td><td class="FileContents-lineContents" id="3079"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_index </span><span class="pun">==</span><span class="pln"> k</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3080" onclick="window.location.hash='#3080'"></td><td class="FileContents-lineContents" id="3080"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3081" onclick="window.location.hash='#3081'"></td><td class="FileContents-lineContents" id="3081"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3082" onclick="window.location.hash='#3082'"></td><td class="FileContents-lineContents" id="3082"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3083" onclick="window.location.hash='#3083'"></td><td class="FileContents-lineContents" id="3083"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3084" onclick="window.location.hash='#3084'"></td><td class="FileContents-lineContents" id="3084"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3085" onclick="window.location.hash='#3085'"></td><td class="FileContents-lineContents" id="3085"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetTracks</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pTracks</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3086" onclick="window.location.hash='#3086'"></td><td class="FileContents-lineContents" id="3086"><span class="kwd">const</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetInfo</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pInfo</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3087" onclick="window.location.hash='#3087'"></td><td class="FileContents-lineContents" id="3087"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cues</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetCues</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pCues</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3088" onclick="window.location.hash='#3088'"></td><td class="FileContents-lineContents" id="3088"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetChapters</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pChapters</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3089" onclick="window.location.hash='#3089'"></td><td class="FileContents-lineContents" id="3089"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetTags</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pTags</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3090" onclick="window.location.hash='#3090'"></td><td class="FileContents-lineContents" id="3090"><span class="kwd">const</span><span class="pln"> </span><span class="typ">SeekHead</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetSeekHead</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pSeekHead</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3091" onclick="window.location.hash='#3091'"></td><td class="FileContents-lineContents" id="3091"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3092" onclick="window.location.hash='#3092'"></td><td class="FileContents-lineContents" id="3092"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">::</span><span class="typ">GetDuration</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3093" onclick="window.location.hash='#3093'"></td><td class="FileContents-lineContents" id="3093"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pInfo</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3094" onclick="window.location.hash='#3094'"></td><td class="FileContents-lineContents" id="3094"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_pInfo</span><span class="pun">-&gt;</span><span class="typ">GetDuration</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3095" onclick="window.location.hash='#3095'"></td><td class="FileContents-lineContents" id="3095"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3096" onclick="window.location.hash='#3096'"></td><td class="FileContents-lineContents" id="3096"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3097" onclick="window.location.hash='#3097'"></td><td class="FileContents-lineContents" id="3097"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Chapters</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3098" onclick="window.location.hash='#3098'"></td><td class="FileContents-lineContents" id="3098"><span class="pln">                   </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3099" onclick="window.location.hash='#3099'"></td><td class="FileContents-lineContents" id="3099"><span class="pln">                   </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3100" onclick="window.location.hash='#3100'"></td><td class="FileContents-lineContents" id="3100"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3101" onclick="window.location.hash='#3101'"></td><td class="FileContents-lineContents" id="3101"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">payload_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3102" onclick="window.location.hash='#3102'"></td><td class="FileContents-lineContents" id="3102"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">payload_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3103" onclick="window.location.hash='#3103'"></td><td class="FileContents-lineContents" id="3103"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3104" onclick="window.location.hash='#3104'"></td><td class="FileContents-lineContents" id="3104"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3105" onclick="window.location.hash='#3105'"></td><td class="FileContents-lineContents" id="3105"><span class="pln">      m_editions</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3106" onclick="window.location.hash='#3106'"></td><td class="FileContents-lineContents" id="3106"><span class="pln">      m_editions_size</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3107" onclick="window.location.hash='#3107'"></td><td class="FileContents-lineContents" id="3107"><span class="pln">      m_editions_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3108" onclick="window.location.hash='#3108'"></td><td class="FileContents-lineContents" id="3108"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3109" onclick="window.location.hash='#3109'"></td><td class="FileContents-lineContents" id="3109"><span class="typ">Chapters</span><span class="pun">::~</span><span class="typ">Chapters</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3110" onclick="window.location.hash='#3110'"></td><td class="FileContents-lineContents" id="3110"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_editions_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3111" onclick="window.location.hash='#3111'"></td><td class="FileContents-lineContents" id="3111"><span class="pln">    </span><span class="typ">Edition</span><span class="pun">&amp;</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> m_editions</span><span class="pun">[--</span><span class="pln">m_editions_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3112" onclick="window.location.hash='#3112'"></td><td class="FileContents-lineContents" id="3112"><span class="pln">    e</span><span class="pun">.</span><span class="typ">Clear</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3113" onclick="window.location.hash='#3113'"></td><td class="FileContents-lineContents" id="3113"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3114" onclick="window.location.hash='#3114'"></td><td class="FileContents-lineContents" id="3114"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_editions</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3115" onclick="window.location.hash='#3115'"></td><td class="FileContents-lineContents" id="3115"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3116" onclick="window.location.hash='#3116'"></td><td class="FileContents-lineContents" id="3116"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3117" onclick="window.location.hash='#3117'"></td><td class="FileContents-lineContents" id="3117"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3118" onclick="window.location.hash='#3118'"></td><td class="FileContents-lineContents" id="3118"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3119" onclick="window.location.hash='#3119'"></td><td class="FileContents-lineContents" id="3119"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3120" onclick="window.location.hash='#3120'"></td><td class="FileContents-lineContents" id="3120"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span><span class="pln">  </span><span class="com">// payload start</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3121" onclick="window.location.hash='#3121'"></td><td class="FileContents-lineContents" id="3121"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// payload stop</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3122" onclick="window.location.hash='#3122'"></td><td class="FileContents-lineContents" id="3122"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3123" onclick="window.location.hash='#3123'"></td><td class="FileContents-lineContents" id="3123"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3124" onclick="window.location.hash='#3124'"></td><td class="FileContents-lineContents" id="3124"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3125" onclick="window.location.hash='#3125'"></td><td class="FileContents-lineContents" id="3125"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3126" onclick="window.location.hash='#3126'"></td><td class="FileContents-lineContents" id="3126"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3127" onclick="window.location.hash='#3127'"></td><td class="FileContents-lineContents" id="3127"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3128" onclick="window.location.hash='#3128'"></td><td class="FileContents-lineContents" id="3128"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3129" onclick="window.location.hash='#3129'"></td><td class="FileContents-lineContents" id="3129"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3130" onclick="window.location.hash='#3130'"></td><td class="FileContents-lineContents" id="3130"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3131" onclick="window.location.hash='#3131'"></td><td class="FileContents-lineContents" id="3131"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3132" onclick="window.location.hash='#3132'"></td><td class="FileContents-lineContents" id="3132"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3133" onclick="window.location.hash='#3133'"></td><td class="FileContents-lineContents" id="3133"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3134" onclick="window.location.hash='#3134'"></td><td class="FileContents-lineContents" id="3134"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x05B9</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// EditionEntry ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3135" onclick="window.location.hash='#3135'"></td><td class="FileContents-lineContents" id="3135"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseEdition</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3136" onclick="window.location.hash='#3136'"></td><td class="FileContents-lineContents" id="3136"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3137" onclick="window.location.hash='#3137'"></td><td class="FileContents-lineContents" id="3137"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3138" onclick="window.location.hash='#3138'"></td><td class="FileContents-lineContents" id="3138"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3139" onclick="window.location.hash='#3139'"></td><td class="FileContents-lineContents" id="3139"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3140" onclick="window.location.hash='#3140'"></td><td class="FileContents-lineContents" id="3140"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3141" onclick="window.location.hash='#3141'"></td><td class="FileContents-lineContents" id="3141"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3142" onclick="window.location.hash='#3142'"></td><td class="FileContents-lineContents" id="3142"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3143" onclick="window.location.hash='#3143'"></td><td class="FileContents-lineContents" id="3143"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3144" onclick="window.location.hash='#3144'"></td><td class="FileContents-lineContents" id="3144"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3145" onclick="window.location.hash='#3145'"></td><td class="FileContents-lineContents" id="3145"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3146" onclick="window.location.hash='#3146'"></td><td class="FileContents-lineContents" id="3146"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3147" onclick="window.location.hash='#3147'"></td><td class="FileContents-lineContents" id="3147"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3148" onclick="window.location.hash='#3148'"></td><td class="FileContents-lineContents" id="3148"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3149" onclick="window.location.hash='#3149'"></td><td class="FileContents-lineContents" id="3149"><span class="typ">int</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">GetEditionCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_editions_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3150" onclick="window.location.hash='#3150'"></td><td class="FileContents-lineContents" id="3150"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3151" onclick="window.location.hash='#3151'"></td><td class="FileContents-lineContents" id="3151"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">GetEdition</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3152" onclick="window.location.hash='#3152'"></td><td class="FileContents-lineContents" id="3152"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3153" onclick="window.location.hash='#3153'"></td><td class="FileContents-lineContents" id="3153"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3154" onclick="window.location.hash='#3154'"></td><td class="FileContents-lineContents" id="3154"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3155" onclick="window.location.hash='#3155'"></td><td class="FileContents-lineContents" id="3155"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> m_editions_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3156" onclick="window.location.hash='#3156'"></td><td class="FileContents-lineContents" id="3156"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3157" onclick="window.location.hash='#3157'"></td><td class="FileContents-lineContents" id="3157"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3158" onclick="window.location.hash='#3158'"></td><td class="FileContents-lineContents" id="3158"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_editions </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3159" onclick="window.location.hash='#3159'"></td><td class="FileContents-lineContents" id="3159"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3160" onclick="window.location.hash='#3160'"></td><td class="FileContents-lineContents" id="3160"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3161" onclick="window.location.hash='#3161'"></td><td class="FileContents-lineContents" id="3161"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">ExpandEditionsArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3162" onclick="window.location.hash='#3162'"></td><td class="FileContents-lineContents" id="3162"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_editions_size </span><span class="pun">&gt;</span><span class="pln"> m_editions_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3163" onclick="window.location.hash='#3163'"></td><td class="FileContents-lineContents" id="3163"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3164" onclick="window.location.hash='#3164'"></td><td class="FileContents-lineContents" id="3164"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3165" onclick="window.location.hash='#3165'"></td><td class="FileContents-lineContents" id="3165"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_editions_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> m_editions_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3166" onclick="window.location.hash='#3166'"></td><td class="FileContents-lineContents" id="3166"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3167" onclick="window.location.hash='#3167'"></td><td class="FileContents-lineContents" id="3167"><span class="pln">  </span><span class="typ">Edition</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> editions </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Edition</span><span class="pun">[</span><span class="pln">size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3168" onclick="window.location.hash='#3168'"></td><td class="FileContents-lineContents" id="3168"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3169" onclick="window.location.hash='#3169'"></td><td class="FileContents-lineContents" id="3169"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">editions </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3170" onclick="window.location.hash='#3170'"></td><td class="FileContents-lineContents" id="3170"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3171" onclick="window.location.hash='#3171'"></td><td class="FileContents-lineContents" id="3171"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3172" onclick="window.location.hash='#3172'"></td><td class="FileContents-lineContents" id="3172"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> idx </span><span class="pun">&lt;</span><span class="pln"> m_editions_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3173" onclick="window.location.hash='#3173'"></td><td class="FileContents-lineContents" id="3173"><span class="pln">    m_editions</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="pln">editions</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3174" onclick="window.location.hash='#3174'"></td><td class="FileContents-lineContents" id="3174"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3175" onclick="window.location.hash='#3175'"></td><td class="FileContents-lineContents" id="3175"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3176" onclick="window.location.hash='#3176'"></td><td class="FileContents-lineContents" id="3176"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_editions</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3177" onclick="window.location.hash='#3177'"></td><td class="FileContents-lineContents" id="3177"><span class="pln">  m_editions </span><span class="pun">=</span><span class="pln"> editions</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3178" onclick="window.location.hash='#3178'"></td><td class="FileContents-lineContents" id="3178"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3179" onclick="window.location.hash='#3179'"></td><td class="FileContents-lineContents" id="3179"><span class="pln">  m_editions_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3180" onclick="window.location.hash='#3180'"></td><td class="FileContents-lineContents" id="3180"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3181" onclick="window.location.hash='#3181'"></td><td class="FileContents-lineContents" id="3181"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3182" onclick="window.location.hash='#3182'"></td><td class="FileContents-lineContents" id="3182"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3183" onclick="window.location.hash='#3183'"></td><td class="FileContents-lineContents" id="3183"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">ParseEdition</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3184" onclick="window.location.hash='#3184'"></td><td class="FileContents-lineContents" id="3184"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">ExpandEditionsArray</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3185" onclick="window.location.hash='#3185'"></td><td class="FileContents-lineContents" id="3185"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3186" onclick="window.location.hash='#3186'"></td><td class="FileContents-lineContents" id="3186"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3187" onclick="window.location.hash='#3187'"></td><td class="FileContents-lineContents" id="3187"><span class="pln">  </span><span class="typ">Edition</span><span class="pun">&amp;</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> m_editions</span><span class="pun">[</span><span class="pln">m_editions_count</span><span class="pun">++];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3188" onclick="window.location.hash='#3188'"></td><td class="FileContents-lineContents" id="3188"><span class="pln">  e</span><span class="pun">.</span><span class="typ">Init</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3189" onclick="window.location.hash='#3189'"></td><td class="FileContents-lineContents" id="3189"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3190" onclick="window.location.hash='#3190'"></td><td class="FileContents-lineContents" id="3190"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> e</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3191" onclick="window.location.hash='#3191'"></td><td class="FileContents-lineContents" id="3191"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3192" onclick="window.location.hash='#3192'"></td><td class="FileContents-lineContents" id="3192"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3193" onclick="window.location.hash='#3193'"></td><td class="FileContents-lineContents" id="3193"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3194" onclick="window.location.hash='#3194'"></td><td class="FileContents-lineContents" id="3194"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3195" onclick="window.location.hash='#3195'"></td><td class="FileContents-lineContents" id="3195"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::~</span><span class="typ">Edition</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3196" onclick="window.location.hash='#3196'"></td><td class="FileContents-lineContents" id="3196"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3197" onclick="window.location.hash='#3197'"></td><td class="FileContents-lineContents" id="3197"><span class="typ">int</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">GetAtomCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_atoms_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3198" onclick="window.location.hash='#3198'"></td><td class="FileContents-lineContents" id="3198"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3199" onclick="window.location.hash='#3199'"></td><td class="FileContents-lineContents" id="3199"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">GetAtom</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3200" onclick="window.location.hash='#3200'"></td><td class="FileContents-lineContents" id="3200"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3201" onclick="window.location.hash='#3201'"></td><td class="FileContents-lineContents" id="3201"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3202" onclick="window.location.hash='#3202'"></td><td class="FileContents-lineContents" id="3202"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3203" onclick="window.location.hash='#3203'"></td><td class="FileContents-lineContents" id="3203"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_atoms_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3204" onclick="window.location.hash='#3204'"></td><td class="FileContents-lineContents" id="3204"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3205" onclick="window.location.hash='#3205'"></td><td class="FileContents-lineContents" id="3205"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3206" onclick="window.location.hash='#3206'"></td><td class="FileContents-lineContents" id="3206"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_atoms </span><span class="pun">+</span><span class="pln"> index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3207" onclick="window.location.hash='#3207'"></td><td class="FileContents-lineContents" id="3207"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3208" onclick="window.location.hash='#3208'"></td><td class="FileContents-lineContents" id="3208"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3209" onclick="window.location.hash='#3209'"></td><td class="FileContents-lineContents" id="3209"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3210" onclick="window.location.hash='#3210'"></td><td class="FileContents-lineContents" id="3210"><span class="pln">  m_atoms </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3211" onclick="window.location.hash='#3211'"></td><td class="FileContents-lineContents" id="3211"><span class="pln">  m_atoms_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3212" onclick="window.location.hash='#3212'"></td><td class="FileContents-lineContents" id="3212"><span class="pln">  m_atoms_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3213" onclick="window.location.hash='#3213'"></td><td class="FileContents-lineContents" id="3213"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3214" onclick="window.location.hash='#3214'"></td><td class="FileContents-lineContents" id="3214"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3215" onclick="window.location.hash='#3215'"></td><td class="FileContents-lineContents" id="3215"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="typ">Edition</span><span class="pun">&amp;</span><span class="pln"> rhs</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3216" onclick="window.location.hash='#3216'"></td><td class="FileContents-lineContents" id="3216"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_atoms </span><span class="pun">=</span><span class="pln"> m_atoms</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3217" onclick="window.location.hash='#3217'"></td><td class="FileContents-lineContents" id="3217"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_atoms_size </span><span class="pun">=</span><span class="pln"> m_atoms_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3218" onclick="window.location.hash='#3218'"></td><td class="FileContents-lineContents" id="3218"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_atoms_count </span><span class="pun">=</span><span class="pln"> m_atoms_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3219" onclick="window.location.hash='#3219'"></td><td class="FileContents-lineContents" id="3219"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3220" onclick="window.location.hash='#3220'"></td><td class="FileContents-lineContents" id="3220"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3221" onclick="window.location.hash='#3221'"></td><td class="FileContents-lineContents" id="3221"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">Clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3222" onclick="window.location.hash='#3222'"></td><td class="FileContents-lineContents" id="3222"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_atoms_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3223" onclick="window.location.hash='#3223'"></td><td class="FileContents-lineContents" id="3223"><span class="pln">    </span><span class="typ">Atom</span><span class="pun">&amp;</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> m_atoms</span><span class="pun">[--</span><span class="pln">m_atoms_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3224" onclick="window.location.hash='#3224'"></td><td class="FileContents-lineContents" id="3224"><span class="pln">    a</span><span class="pun">.</span><span class="typ">Clear</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3225" onclick="window.location.hash='#3225'"></td><td class="FileContents-lineContents" id="3225"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3226" onclick="window.location.hash='#3226'"></td><td class="FileContents-lineContents" id="3226"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3227" onclick="window.location.hash='#3227'"></td><td class="FileContents-lineContents" id="3227"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_atoms</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3228" onclick="window.location.hash='#3228'"></td><td class="FileContents-lineContents" id="3228"><span class="pln">  m_atoms </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3229" onclick="window.location.hash='#3229'"></td><td class="FileContents-lineContents" id="3229"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3230" onclick="window.location.hash='#3230'"></td><td class="FileContents-lineContents" id="3230"><span class="pln">  m_atoms_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3231" onclick="window.location.hash='#3231'"></td><td class="FileContents-lineContents" id="3231"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3232" onclick="window.location.hash='#3232'"></td><td class="FileContents-lineContents" id="3232"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3233" onclick="window.location.hash='#3233'"></td><td class="FileContents-lineContents" id="3233"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3234" onclick="window.location.hash='#3234'"></td><td class="FileContents-lineContents" id="3234"><span class="pln">                              </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3235" onclick="window.location.hash='#3235'"></td><td class="FileContents-lineContents" id="3235"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3236" onclick="window.location.hash='#3236'"></td><td class="FileContents-lineContents" id="3236"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3237" onclick="window.location.hash='#3237'"></td><td class="FileContents-lineContents" id="3237"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3238" onclick="window.location.hash='#3238'"></td><td class="FileContents-lineContents" id="3238"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3239" onclick="window.location.hash='#3239'"></td><td class="FileContents-lineContents" id="3239"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3240" onclick="window.location.hash='#3240'"></td><td class="FileContents-lineContents" id="3240"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3241" onclick="window.location.hash='#3241'"></td><td class="FileContents-lineContents" id="3241"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3242" onclick="window.location.hash='#3242'"></td><td class="FileContents-lineContents" id="3242"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3243" onclick="window.location.hash='#3243'"></td><td class="FileContents-lineContents" id="3243"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3244" onclick="window.location.hash='#3244'"></td><td class="FileContents-lineContents" id="3244"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3245" onclick="window.location.hash='#3245'"></td><td class="FileContents-lineContents" id="3245"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3246" onclick="window.location.hash='#3246'"></td><td class="FileContents-lineContents" id="3246"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3247" onclick="window.location.hash='#3247'"></td><td class="FileContents-lineContents" id="3247"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3248" onclick="window.location.hash='#3248'"></td><td class="FileContents-lineContents" id="3248"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x36</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Atom ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3249" onclick="window.location.hash='#3249'"></td><td class="FileContents-lineContents" id="3249"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseAtom</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3250" onclick="window.location.hash='#3250'"></td><td class="FileContents-lineContents" id="3250"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3251" onclick="window.location.hash='#3251'"></td><td class="FileContents-lineContents" id="3251"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3252" onclick="window.location.hash='#3252'"></td><td class="FileContents-lineContents" id="3252"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3253" onclick="window.location.hash='#3253'"></td><td class="FileContents-lineContents" id="3253"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3254" onclick="window.location.hash='#3254'"></td><td class="FileContents-lineContents" id="3254"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3255" onclick="window.location.hash='#3255'"></td><td class="FileContents-lineContents" id="3255"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3256" onclick="window.location.hash='#3256'"></td><td class="FileContents-lineContents" id="3256"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3257" onclick="window.location.hash='#3257'"></td><td class="FileContents-lineContents" id="3257"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3258" onclick="window.location.hash='#3258'"></td><td class="FileContents-lineContents" id="3258"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3259" onclick="window.location.hash='#3259'"></td><td class="FileContents-lineContents" id="3259"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3260" onclick="window.location.hash='#3260'"></td><td class="FileContents-lineContents" id="3260"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3261" onclick="window.location.hash='#3261'"></td><td class="FileContents-lineContents" id="3261"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3262" onclick="window.location.hash='#3262'"></td><td class="FileContents-lineContents" id="3262"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3263" onclick="window.location.hash='#3263'"></td><td class="FileContents-lineContents" id="3263"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">ParseAtom</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3264" onclick="window.location.hash='#3264'"></td><td class="FileContents-lineContents" id="3264"><span class="pln">                                  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3265" onclick="window.location.hash='#3265'"></td><td class="FileContents-lineContents" id="3265"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">ExpandAtomsArray</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3266" onclick="window.location.hash='#3266'"></td><td class="FileContents-lineContents" id="3266"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3267" onclick="window.location.hash='#3267'"></td><td class="FileContents-lineContents" id="3267"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3268" onclick="window.location.hash='#3268'"></td><td class="FileContents-lineContents" id="3268"><span class="pln">  </span><span class="typ">Atom</span><span class="pun">&amp;</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> m_atoms</span><span class="pun">[</span><span class="pln">m_atoms_count</span><span class="pun">++];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3269" onclick="window.location.hash='#3269'"></td><td class="FileContents-lineContents" id="3269"><span class="pln">  a</span><span class="pun">.</span><span class="typ">Init</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3270" onclick="window.location.hash='#3270'"></td><td class="FileContents-lineContents" id="3270"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3271" onclick="window.location.hash='#3271'"></td><td class="FileContents-lineContents" id="3271"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3272" onclick="window.location.hash='#3272'"></td><td class="FileContents-lineContents" id="3272"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3273" onclick="window.location.hash='#3273'"></td><td class="FileContents-lineContents" id="3273"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3274" onclick="window.location.hash='#3274'"></td><td class="FileContents-lineContents" id="3274"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Edition</span><span class="pun">::</span><span class="typ">ExpandAtomsArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3275" onclick="window.location.hash='#3275'"></td><td class="FileContents-lineContents" id="3275"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_atoms_size </span><span class="pun">&gt;</span><span class="pln"> m_atoms_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3276" onclick="window.location.hash='#3276'"></td><td class="FileContents-lineContents" id="3276"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3277" onclick="window.location.hash='#3277'"></td><td class="FileContents-lineContents" id="3277"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3278" onclick="window.location.hash='#3278'"></td><td class="FileContents-lineContents" id="3278"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_atoms_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> m_atoms_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3279" onclick="window.location.hash='#3279'"></td><td class="FileContents-lineContents" id="3279"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3280" onclick="window.location.hash='#3280'"></td><td class="FileContents-lineContents" id="3280"><span class="pln">  </span><span class="typ">Atom</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> atoms </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Atom</span><span class="pun">[</span><span class="pln">size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3281" onclick="window.location.hash='#3281'"></td><td class="FileContents-lineContents" id="3281"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3282" onclick="window.location.hash='#3282'"></td><td class="FileContents-lineContents" id="3282"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">atoms </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3283" onclick="window.location.hash='#3283'"></td><td class="FileContents-lineContents" id="3283"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3284" onclick="window.location.hash='#3284'"></td><td class="FileContents-lineContents" id="3284"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3285" onclick="window.location.hash='#3285'"></td><td class="FileContents-lineContents" id="3285"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> idx </span><span class="pun">&lt;</span><span class="pln"> m_atoms_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3286" onclick="window.location.hash='#3286'"></td><td class="FileContents-lineContents" id="3286"><span class="pln">    m_atoms</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="pln">atoms</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3287" onclick="window.location.hash='#3287'"></td><td class="FileContents-lineContents" id="3287"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3288" onclick="window.location.hash='#3288'"></td><td class="FileContents-lineContents" id="3288"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3289" onclick="window.location.hash='#3289'"></td><td class="FileContents-lineContents" id="3289"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_atoms</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3290" onclick="window.location.hash='#3290'"></td><td class="FileContents-lineContents" id="3290"><span class="pln">  m_atoms </span><span class="pun">=</span><span class="pln"> atoms</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3291" onclick="window.location.hash='#3291'"></td><td class="FileContents-lineContents" id="3291"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3292" onclick="window.location.hash='#3292'"></td><td class="FileContents-lineContents" id="3292"><span class="pln">  m_atoms_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3293" onclick="window.location.hash='#3293'"></td><td class="FileContents-lineContents" id="3293"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3294" onclick="window.location.hash='#3294'"></td><td class="FileContents-lineContents" id="3294"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3295" onclick="window.location.hash='#3295'"></td><td class="FileContents-lineContents" id="3295"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3296" onclick="window.location.hash='#3296'"></td><td class="FileContents-lineContents" id="3296"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3297" onclick="window.location.hash='#3297'"></td><td class="FileContents-lineContents" id="3297"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3298" onclick="window.location.hash='#3298'"></td><td class="FileContents-lineContents" id="3298"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::~</span><span class="typ">Atom</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3299" onclick="window.location.hash='#3299'"></td><td class="FileContents-lineContents" id="3299"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3300" onclick="window.location.hash='#3300'"></td><td class="FileContents-lineContents" id="3300"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetUID</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_uid</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3301" onclick="window.location.hash='#3301'"></td><td class="FileContents-lineContents" id="3301"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3302" onclick="window.location.hash='#3302'"></td><td class="FileContents-lineContents" id="3302"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetStringUID</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_string_uid</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3303" onclick="window.location.hash='#3303'"></td><td class="FileContents-lineContents" id="3303"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3304" onclick="window.location.hash='#3304'"></td><td class="FileContents-lineContents" id="3304"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetStartTimecode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_start_timecode</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3305" onclick="window.location.hash='#3305'"></td><td class="FileContents-lineContents" id="3305"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3306" onclick="window.location.hash='#3306'"></td><td class="FileContents-lineContents" id="3306"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetStopTimecode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_stop_timecode</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3307" onclick="window.location.hash='#3307'"></td><td class="FileContents-lineContents" id="3307"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3308" onclick="window.location.hash='#3308'"></td><td class="FileContents-lineContents" id="3308"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetStartTime</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">*</span><span class="pln"> pChapters</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3309" onclick="window.location.hash='#3309'"></td><td class="FileContents-lineContents" id="3309"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">pChapters</span><span class="pun">,</span><span class="pln"> m_start_timecode</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3310" onclick="window.location.hash='#3310'"></td><td class="FileContents-lineContents" id="3310"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3311" onclick="window.location.hash='#3311'"></td><td class="FileContents-lineContents" id="3311"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3312" onclick="window.location.hash='#3312'"></td><td class="FileContents-lineContents" id="3312"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetStopTime</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">*</span><span class="pln"> pChapters</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3313" onclick="window.location.hash='#3313'"></td><td class="FileContents-lineContents" id="3313"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">pChapters</span><span class="pun">,</span><span class="pln"> m_stop_timecode</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3314" onclick="window.location.hash='#3314'"></td><td class="FileContents-lineContents" id="3314"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3315" onclick="window.location.hash='#3315'"></td><td class="FileContents-lineContents" id="3315"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3316" onclick="window.location.hash='#3316'"></td><td class="FileContents-lineContents" id="3316"><span class="typ">int</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetDisplayCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_displays_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3317" onclick="window.location.hash='#3317'"></td><td class="FileContents-lineContents" id="3317"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3318" onclick="window.location.hash='#3318'"></td><td class="FileContents-lineContents" id="3318"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetDisplay</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3319" onclick="window.location.hash='#3319'"></td><td class="FileContents-lineContents" id="3319"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3320" onclick="window.location.hash='#3320'"></td><td class="FileContents-lineContents" id="3320"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3321" onclick="window.location.hash='#3321'"></td><td class="FileContents-lineContents" id="3321"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3322" onclick="window.location.hash='#3322'"></td><td class="FileContents-lineContents" id="3322"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_displays_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3323" onclick="window.location.hash='#3323'"></td><td class="FileContents-lineContents" id="3323"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3324" onclick="window.location.hash='#3324'"></td><td class="FileContents-lineContents" id="3324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3325" onclick="window.location.hash='#3325'"></td><td class="FileContents-lineContents" id="3325"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_displays </span><span class="pun">+</span><span class="pln"> index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3326" onclick="window.location.hash='#3326'"></td><td class="FileContents-lineContents" id="3326"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3327" onclick="window.location.hash='#3327'"></td><td class="FileContents-lineContents" id="3327"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3328" onclick="window.location.hash='#3328'"></td><td class="FileContents-lineContents" id="3328"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3329" onclick="window.location.hash='#3329'"></td><td class="FileContents-lineContents" id="3329"><span class="pln">  m_string_uid </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3330" onclick="window.location.hash='#3330'"></td><td class="FileContents-lineContents" id="3330"><span class="pln">  m_uid </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3331" onclick="window.location.hash='#3331'"></td><td class="FileContents-lineContents" id="3331"><span class="pln">  m_start_timecode </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3332" onclick="window.location.hash='#3332'"></td><td class="FileContents-lineContents" id="3332"><span class="pln">  m_stop_timecode </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3333" onclick="window.location.hash='#3333'"></td><td class="FileContents-lineContents" id="3333"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3334" onclick="window.location.hash='#3334'"></td><td class="FileContents-lineContents" id="3334"><span class="pln">  m_displays </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3335" onclick="window.location.hash='#3335'"></td><td class="FileContents-lineContents" id="3335"><span class="pln">  m_displays_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3336" onclick="window.location.hash='#3336'"></td><td class="FileContents-lineContents" id="3336"><span class="pln">  m_displays_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3337" onclick="window.location.hash='#3337'"></td><td class="FileContents-lineContents" id="3337"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3338" onclick="window.location.hash='#3338'"></td><td class="FileContents-lineContents" id="3338"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3339" onclick="window.location.hash='#3339'"></td><td class="FileContents-lineContents" id="3339"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="typ">Atom</span><span class="pun">&amp;</span><span class="pln"> rhs</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3340" onclick="window.location.hash='#3340'"></td><td class="FileContents-lineContents" id="3340"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_string_uid </span><span class="pun">=</span><span class="pln"> m_string_uid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3341" onclick="window.location.hash='#3341'"></td><td class="FileContents-lineContents" id="3341"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_uid </span><span class="pun">=</span><span class="pln"> m_uid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3342" onclick="window.location.hash='#3342'"></td><td class="FileContents-lineContents" id="3342"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_start_timecode </span><span class="pun">=</span><span class="pln"> m_start_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3343" onclick="window.location.hash='#3343'"></td><td class="FileContents-lineContents" id="3343"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_stop_timecode </span><span class="pun">=</span><span class="pln"> m_stop_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3344" onclick="window.location.hash='#3344'"></td><td class="FileContents-lineContents" id="3344"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3345" onclick="window.location.hash='#3345'"></td><td class="FileContents-lineContents" id="3345"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_displays </span><span class="pun">=</span><span class="pln"> m_displays</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3346" onclick="window.location.hash='#3346'"></td><td class="FileContents-lineContents" id="3346"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_displays_size </span><span class="pun">=</span><span class="pln"> m_displays_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3347" onclick="window.location.hash='#3347'"></td><td class="FileContents-lineContents" id="3347"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_displays_count </span><span class="pun">=</span><span class="pln"> m_displays_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3348" onclick="window.location.hash='#3348'"></td><td class="FileContents-lineContents" id="3348"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3349" onclick="window.location.hash='#3349'"></td><td class="FileContents-lineContents" id="3349"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3350" onclick="window.location.hash='#3350'"></td><td class="FileContents-lineContents" id="3350"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">Clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3351" onclick="window.location.hash='#3351'"></td><td class="FileContents-lineContents" id="3351"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_string_uid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3352" onclick="window.location.hash='#3352'"></td><td class="FileContents-lineContents" id="3352"><span class="pln">  m_string_uid </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3353" onclick="window.location.hash='#3353'"></td><td class="FileContents-lineContents" id="3353"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3354" onclick="window.location.hash='#3354'"></td><td class="FileContents-lineContents" id="3354"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_displays_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3355" onclick="window.location.hash='#3355'"></td><td class="FileContents-lineContents" id="3355"><span class="pln">    </span><span class="typ">Display</span><span class="pun">&amp;</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> m_displays</span><span class="pun">[--</span><span class="pln">m_displays_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3356" onclick="window.location.hash='#3356'"></td><td class="FileContents-lineContents" id="3356"><span class="pln">    d</span><span class="pun">.</span><span class="typ">Clear</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3357" onclick="window.location.hash='#3357'"></td><td class="FileContents-lineContents" id="3357"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3358" onclick="window.location.hash='#3358'"></td><td class="FileContents-lineContents" id="3358"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3359" onclick="window.location.hash='#3359'"></td><td class="FileContents-lineContents" id="3359"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_displays</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3360" onclick="window.location.hash='#3360'"></td><td class="FileContents-lineContents" id="3360"><span class="pln">  m_displays </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3361" onclick="window.location.hash='#3361'"></td><td class="FileContents-lineContents" id="3361"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3362" onclick="window.location.hash='#3362'"></td><td class="FileContents-lineContents" id="3362"><span class="pln">  m_displays_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3363" onclick="window.location.hash='#3363'"></td><td class="FileContents-lineContents" id="3363"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3364" onclick="window.location.hash='#3364'"></td><td class="FileContents-lineContents" id="3364"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3365" onclick="window.location.hash='#3365'"></td><td class="FileContents-lineContents" id="3365"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3366" onclick="window.location.hash='#3366'"></td><td class="FileContents-lineContents" id="3366"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3367" onclick="window.location.hash='#3367'"></td><td class="FileContents-lineContents" id="3367"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3368" onclick="window.location.hash='#3368'"></td><td class="FileContents-lineContents" id="3368"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3369" onclick="window.location.hash='#3369'"></td><td class="FileContents-lineContents" id="3369"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3370" onclick="window.location.hash='#3370'"></td><td class="FileContents-lineContents" id="3370"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3371" onclick="window.location.hash='#3371'"></td><td class="FileContents-lineContents" id="3371"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3372" onclick="window.location.hash='#3372'"></td><td class="FileContents-lineContents" id="3372"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3373" onclick="window.location.hash='#3373'"></td><td class="FileContents-lineContents" id="3373"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3374" onclick="window.location.hash='#3374'"></td><td class="FileContents-lineContents" id="3374"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3375" onclick="window.location.hash='#3375'"></td><td class="FileContents-lineContents" id="3375"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3376" onclick="window.location.hash='#3376'"></td><td class="FileContents-lineContents" id="3376"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3377" onclick="window.location.hash='#3377'"></td><td class="FileContents-lineContents" id="3377"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3378" onclick="window.location.hash='#3378'"></td><td class="FileContents-lineContents" id="3378"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3379" onclick="window.location.hash='#3379'"></td><td class="FileContents-lineContents" id="3379"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x00</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Display ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3380" onclick="window.location.hash='#3380'"></td><td class="FileContents-lineContents" id="3380"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseDisplay</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3381" onclick="window.location.hash='#3381'"></td><td class="FileContents-lineContents" id="3381"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3382" onclick="window.location.hash='#3382'"></td><td class="FileContents-lineContents" id="3382"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3383" onclick="window.location.hash='#3383'"></td><td class="FileContents-lineContents" id="3383"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3384" onclick="window.location.hash='#3384'"></td><td class="FileContents-lineContents" id="3384"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1654</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// StringUID ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3385" onclick="window.location.hash='#3385'"></td><td class="FileContents-lineContents" id="3385"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_string_uid</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3386" onclick="window.location.hash='#3386'"></td><td class="FileContents-lineContents" id="3386"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3387" onclick="window.location.hash='#3387'"></td><td class="FileContents-lineContents" id="3387"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3388" onclick="window.location.hash='#3388'"></td><td class="FileContents-lineContents" id="3388"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3389" onclick="window.location.hash='#3389'"></td><td class="FileContents-lineContents" id="3389"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x33C4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// UID ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3390" onclick="window.location.hash='#3390'"></td><td class="FileContents-lineContents" id="3390"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> val</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3391" onclick="window.location.hash='#3391'"></td><td class="FileContents-lineContents" id="3391"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> val</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3392" onclick="window.location.hash='#3392'"></td><td class="FileContents-lineContents" id="3392"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3393" onclick="window.location.hash='#3393'"></td><td class="FileContents-lineContents" id="3393"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3394" onclick="window.location.hash='#3394'"></td><td class="FileContents-lineContents" id="3394"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3395" onclick="window.location.hash='#3395'"></td><td class="FileContents-lineContents" id="3395"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3396" onclick="window.location.hash='#3396'"></td><td class="FileContents-lineContents" id="3396"><span class="pln">      m_uid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">val</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3397" onclick="window.location.hash='#3397'"></td><td class="FileContents-lineContents" id="3397"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x11</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// TimeStart ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3398" onclick="window.location.hash='#3398'"></td><td class="FileContents-lineContents" id="3398"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> val </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3399" onclick="window.location.hash='#3399'"></td><td class="FileContents-lineContents" id="3399"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3400" onclick="window.location.hash='#3400'"></td><td class="FileContents-lineContents" id="3400"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">val </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3401" onclick="window.location.hash='#3401'"></td><td class="FileContents-lineContents" id="3401"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">val</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3402" onclick="window.location.hash='#3402'"></td><td class="FileContents-lineContents" id="3402"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3403" onclick="window.location.hash='#3403'"></td><td class="FileContents-lineContents" id="3403"><span class="pln">      m_start_timecode </span><span class="pun">=</span><span class="pln"> val</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3404" onclick="window.location.hash='#3404'"></td><td class="FileContents-lineContents" id="3404"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x12</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// TimeEnd ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3405" onclick="window.location.hash='#3405'"></td><td class="FileContents-lineContents" id="3405"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> val </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3406" onclick="window.location.hash='#3406'"></td><td class="FileContents-lineContents" id="3406"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3407" onclick="window.location.hash='#3407'"></td><td class="FileContents-lineContents" id="3407"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">val </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3408" onclick="window.location.hash='#3408'"></td><td class="FileContents-lineContents" id="3408"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">val</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3409" onclick="window.location.hash='#3409'"></td><td class="FileContents-lineContents" id="3409"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3410" onclick="window.location.hash='#3410'"></td><td class="FileContents-lineContents" id="3410"><span class="pln">      m_stop_timecode </span><span class="pun">=</span><span class="pln"> val</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3411" onclick="window.location.hash='#3411'"></td><td class="FileContents-lineContents" id="3411"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3412" onclick="window.location.hash='#3412'"></td><td class="FileContents-lineContents" id="3412"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3413" onclick="window.location.hash='#3413'"></td><td class="FileContents-lineContents" id="3413"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3414" onclick="window.location.hash='#3414'"></td><td class="FileContents-lineContents" id="3414"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3415" onclick="window.location.hash='#3415'"></td><td class="FileContents-lineContents" id="3415"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3416" onclick="window.location.hash='#3416'"></td><td class="FileContents-lineContents" id="3416"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3417" onclick="window.location.hash='#3417'"></td><td class="FileContents-lineContents" id="3417"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3418" onclick="window.location.hash='#3418'"></td><td class="FileContents-lineContents" id="3418"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3419" onclick="window.location.hash='#3419'"></td><td class="FileContents-lineContents" id="3419"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3420" onclick="window.location.hash='#3420'"></td><td class="FileContents-lineContents" id="3420"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3421" onclick="window.location.hash='#3421'"></td><td class="FileContents-lineContents" id="3421"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">*</span><span class="pln"> pChapters</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3422" onclick="window.location.hash='#3422'"></td><td class="FileContents-lineContents" id="3422"><span class="pln">                                  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> timecode</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3423" onclick="window.location.hash='#3423'"></td><td class="FileContents-lineContents" id="3423"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pChapters </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3424" onclick="window.location.hash='#3424'"></td><td class="FileContents-lineContents" id="3424"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3425" onclick="window.location.hash='#3425'"></td><td class="FileContents-lineContents" id="3425"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3426" onclick="window.location.hash='#3426'"></td><td class="FileContents-lineContents" id="3426"><span class="pln">  </span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pSegment </span><span class="pun">=</span><span class="pln"> pChapters</span><span class="pun">-&gt;</span><span class="pln">m_pSegment</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3427" onclick="window.location.hash='#3427'"></td><td class="FileContents-lineContents" id="3427"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3428" onclick="window.location.hash='#3428'"></td><td class="FileContents-lineContents" id="3428"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pSegment </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3429" onclick="window.location.hash='#3429'"></td><td class="FileContents-lineContents" id="3429"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3430" onclick="window.location.hash='#3430'"></td><td class="FileContents-lineContents" id="3430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3431" onclick="window.location.hash='#3431'"></td><td class="FileContents-lineContents" id="3431"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pInfo </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="typ">GetInfo</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3432" onclick="window.location.hash='#3432'"></td><td class="FileContents-lineContents" id="3432"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3433" onclick="window.location.hash='#3433'"></td><td class="FileContents-lineContents" id="3433"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pInfo </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3434" onclick="window.location.hash='#3434'"></td><td class="FileContents-lineContents" id="3434"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3435" onclick="window.location.hash='#3435'"></td><td class="FileContents-lineContents" id="3435"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3436" onclick="window.location.hash='#3436'"></td><td class="FileContents-lineContents" id="3436"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> timecode_scale </span><span class="pun">=</span><span class="pln"> pInfo</span><span class="pun">-&gt;</span><span class="typ">GetTimeCodeScale</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3437" onclick="window.location.hash='#3437'"></td><td class="FileContents-lineContents" id="3437"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3438" onclick="window.location.hash='#3438'"></td><td class="FileContents-lineContents" id="3438"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">timecode_scale </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3439" onclick="window.location.hash='#3439'"></td><td class="FileContents-lineContents" id="3439"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3440" onclick="window.location.hash='#3440'"></td><td class="FileContents-lineContents" id="3440"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3441" onclick="window.location.hash='#3441'"></td><td class="FileContents-lineContents" id="3441"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">timecode </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3442" onclick="window.location.hash='#3442'"></td><td class="FileContents-lineContents" id="3442"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3443" onclick="window.location.hash='#3443'"></td><td class="FileContents-lineContents" id="3443"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3444" onclick="window.location.hash='#3444'"></td><td class="FileContents-lineContents" id="3444"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> timecode_scale </span><span class="pun">*</span><span class="pln"> timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3445" onclick="window.location.hash='#3445'"></td><td class="FileContents-lineContents" id="3445"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3446" onclick="window.location.hash='#3446'"></td><td class="FileContents-lineContents" id="3446"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3447" onclick="window.location.hash='#3447'"></td><td class="FileContents-lineContents" id="3447"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3448" onclick="window.location.hash='#3448'"></td><td class="FileContents-lineContents" id="3448"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3449" onclick="window.location.hash='#3449'"></td><td class="FileContents-lineContents" id="3449"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">ParseDisplay</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3450" onclick="window.location.hash='#3450'"></td><td class="FileContents-lineContents" id="3450"><span class="pln">                                  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3451" onclick="window.location.hash='#3451'"></td><td class="FileContents-lineContents" id="3451"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">ExpandDisplaysArray</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3452" onclick="window.location.hash='#3452'"></td><td class="FileContents-lineContents" id="3452"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3453" onclick="window.location.hash='#3453'"></td><td class="FileContents-lineContents" id="3453"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3454" onclick="window.location.hash='#3454'"></td><td class="FileContents-lineContents" id="3454"><span class="pln">  </span><span class="typ">Display</span><span class="pun">&amp;</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> m_displays</span><span class="pun">[</span><span class="pln">m_displays_count</span><span class="pun">++];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3455" onclick="window.location.hash='#3455'"></td><td class="FileContents-lineContents" id="3455"><span class="pln">  d</span><span class="pun">.</span><span class="typ">Init</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3456" onclick="window.location.hash='#3456'"></td><td class="FileContents-lineContents" id="3456"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3457" onclick="window.location.hash='#3457'"></td><td class="FileContents-lineContents" id="3457"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> d</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3458" onclick="window.location.hash='#3458'"></td><td class="FileContents-lineContents" id="3458"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3459" onclick="window.location.hash='#3459'"></td><td class="FileContents-lineContents" id="3459"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3460" onclick="window.location.hash='#3460'"></td><td class="FileContents-lineContents" id="3460"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Atom</span><span class="pun">::</span><span class="typ">ExpandDisplaysArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3461" onclick="window.location.hash='#3461'"></td><td class="FileContents-lineContents" id="3461"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_displays_size </span><span class="pun">&gt;</span><span class="pln"> m_displays_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3462" onclick="window.location.hash='#3462'"></td><td class="FileContents-lineContents" id="3462"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3463" onclick="window.location.hash='#3463'"></td><td class="FileContents-lineContents" id="3463"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3464" onclick="window.location.hash='#3464'"></td><td class="FileContents-lineContents" id="3464"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_displays_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> m_displays_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3465" onclick="window.location.hash='#3465'"></td><td class="FileContents-lineContents" id="3465"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3466" onclick="window.location.hash='#3466'"></td><td class="FileContents-lineContents" id="3466"><span class="pln">  </span><span class="typ">Display</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> displays </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Display</span><span class="pun">[</span><span class="pln">size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3467" onclick="window.location.hash='#3467'"></td><td class="FileContents-lineContents" id="3467"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3468" onclick="window.location.hash='#3468'"></td><td class="FileContents-lineContents" id="3468"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">displays </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3469" onclick="window.location.hash='#3469'"></td><td class="FileContents-lineContents" id="3469"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3470" onclick="window.location.hash='#3470'"></td><td class="FileContents-lineContents" id="3470"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3471" onclick="window.location.hash='#3471'"></td><td class="FileContents-lineContents" id="3471"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> idx </span><span class="pun">&lt;</span><span class="pln"> m_displays_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3472" onclick="window.location.hash='#3472'"></td><td class="FileContents-lineContents" id="3472"><span class="pln">    m_displays</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="pln">displays</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3473" onclick="window.location.hash='#3473'"></td><td class="FileContents-lineContents" id="3473"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3474" onclick="window.location.hash='#3474'"></td><td class="FileContents-lineContents" id="3474"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3475" onclick="window.location.hash='#3475'"></td><td class="FileContents-lineContents" id="3475"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_displays</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3476" onclick="window.location.hash='#3476'"></td><td class="FileContents-lineContents" id="3476"><span class="pln">  m_displays </span><span class="pun">=</span><span class="pln"> displays</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3477" onclick="window.location.hash='#3477'"></td><td class="FileContents-lineContents" id="3477"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3478" onclick="window.location.hash='#3478'"></td><td class="FileContents-lineContents" id="3478"><span class="pln">  m_displays_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3479" onclick="window.location.hash='#3479'"></td><td class="FileContents-lineContents" id="3479"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3480" onclick="window.location.hash='#3480'"></td><td class="FileContents-lineContents" id="3480"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3481" onclick="window.location.hash='#3481'"></td><td class="FileContents-lineContents" id="3481"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3482" onclick="window.location.hash='#3482'"></td><td class="FileContents-lineContents" id="3482"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3483" onclick="window.location.hash='#3483'"></td><td class="FileContents-lineContents" id="3483"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3484" onclick="window.location.hash='#3484'"></td><td class="FileContents-lineContents" id="3484"><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::~</span><span class="typ">Display</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3485" onclick="window.location.hash='#3485'"></td><td class="FileContents-lineContents" id="3485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3486" onclick="window.location.hash='#3486'"></td><td class="FileContents-lineContents" id="3486"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">GetString</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_string</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3487" onclick="window.location.hash='#3487'"></td><td class="FileContents-lineContents" id="3487"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3488" onclick="window.location.hash='#3488'"></td><td class="FileContents-lineContents" id="3488"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">GetLanguage</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_language</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3489" onclick="window.location.hash='#3489'"></td><td class="FileContents-lineContents" id="3489"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3490" onclick="window.location.hash='#3490'"></td><td class="FileContents-lineContents" id="3490"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">GetCountry</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_country</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3491" onclick="window.location.hash='#3491'"></td><td class="FileContents-lineContents" id="3491"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3492" onclick="window.location.hash='#3492'"></td><td class="FileContents-lineContents" id="3492"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3493" onclick="window.location.hash='#3493'"></td><td class="FileContents-lineContents" id="3493"><span class="pln">  m_string </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3494" onclick="window.location.hash='#3494'"></td><td class="FileContents-lineContents" id="3494"><span class="pln">  m_language </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3495" onclick="window.location.hash='#3495'"></td><td class="FileContents-lineContents" id="3495"><span class="pln">  m_country </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3496" onclick="window.location.hash='#3496'"></td><td class="FileContents-lineContents" id="3496"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3497" onclick="window.location.hash='#3497'"></td><td class="FileContents-lineContents" id="3497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3498" onclick="window.location.hash='#3498'"></td><td class="FileContents-lineContents" id="3498"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="typ">Display</span><span class="pun">&amp;</span><span class="pln"> rhs</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3499" onclick="window.location.hash='#3499'"></td><td class="FileContents-lineContents" id="3499"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_string </span><span class="pun">=</span><span class="pln"> m_string</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3500" onclick="window.location.hash='#3500'"></td><td class="FileContents-lineContents" id="3500"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_language </span><span class="pun">=</span><span class="pln"> m_language</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3501" onclick="window.location.hash='#3501'"></td><td class="FileContents-lineContents" id="3501"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_country </span><span class="pun">=</span><span class="pln"> m_country</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3502" onclick="window.location.hash='#3502'"></td><td class="FileContents-lineContents" id="3502"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3503" onclick="window.location.hash='#3503'"></td><td class="FileContents-lineContents" id="3503"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3504" onclick="window.location.hash='#3504'"></td><td class="FileContents-lineContents" id="3504"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">Clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3505" onclick="window.location.hash='#3505'"></td><td class="FileContents-lineContents" id="3505"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_string</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3506" onclick="window.location.hash='#3506'"></td><td class="FileContents-lineContents" id="3506"><span class="pln">  m_string </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3507" onclick="window.location.hash='#3507'"></td><td class="FileContents-lineContents" id="3507"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3508" onclick="window.location.hash='#3508'"></td><td class="FileContents-lineContents" id="3508"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_language</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3509" onclick="window.location.hash='#3509'"></td><td class="FileContents-lineContents" id="3509"><span class="pln">  m_language </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3510" onclick="window.location.hash='#3510'"></td><td class="FileContents-lineContents" id="3510"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3511" onclick="window.location.hash='#3511'"></td><td class="FileContents-lineContents" id="3511"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_country</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3512" onclick="window.location.hash='#3512'"></td><td class="FileContents-lineContents" id="3512"><span class="pln">  m_country </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3513" onclick="window.location.hash='#3513'"></td><td class="FileContents-lineContents" id="3513"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3514" onclick="window.location.hash='#3514'"></td><td class="FileContents-lineContents" id="3514"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3515" onclick="window.location.hash='#3515'"></td><td class="FileContents-lineContents" id="3515"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Chapters</span><span class="pun">::</span><span class="typ">Display</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3516" onclick="window.location.hash='#3516'"></td><td class="FileContents-lineContents" id="3516"><span class="pln">                              </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3517" onclick="window.location.hash='#3517'"></td><td class="FileContents-lineContents" id="3517"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3518" onclick="window.location.hash='#3518'"></td><td class="FileContents-lineContents" id="3518"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3519" onclick="window.location.hash='#3519'"></td><td class="FileContents-lineContents" id="3519"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3520" onclick="window.location.hash='#3520'"></td><td class="FileContents-lineContents" id="3520"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3521" onclick="window.location.hash='#3521'"></td><td class="FileContents-lineContents" id="3521"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3522" onclick="window.location.hash='#3522'"></td><td class="FileContents-lineContents" id="3522"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3523" onclick="window.location.hash='#3523'"></td><td class="FileContents-lineContents" id="3523"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3524" onclick="window.location.hash='#3524'"></td><td class="FileContents-lineContents" id="3524"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3525" onclick="window.location.hash='#3525'"></td><td class="FileContents-lineContents" id="3525"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3526" onclick="window.location.hash='#3526'"></td><td class="FileContents-lineContents" id="3526"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3527" onclick="window.location.hash='#3527'"></td><td class="FileContents-lineContents" id="3527"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3528" onclick="window.location.hash='#3528'"></td><td class="FileContents-lineContents" id="3528"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3529" onclick="window.location.hash='#3529'"></td><td class="FileContents-lineContents" id="3529"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3530" onclick="window.location.hash='#3530'"></td><td class="FileContents-lineContents" id="3530"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x05</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// ChapterString ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3531" onclick="window.location.hash='#3531'"></td><td class="FileContents-lineContents" id="3531"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_string</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3532" onclick="window.location.hash='#3532'"></td><td class="FileContents-lineContents" id="3532"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3533" onclick="window.location.hash='#3533'"></td><td class="FileContents-lineContents" id="3533"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3534" onclick="window.location.hash='#3534'"></td><td class="FileContents-lineContents" id="3534"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3535" onclick="window.location.hash='#3535'"></td><td class="FileContents-lineContents" id="3535"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x037C</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// ChapterLanguage ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3536" onclick="window.location.hash='#3536'"></td><td class="FileContents-lineContents" id="3536"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_language</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3537" onclick="window.location.hash='#3537'"></td><td class="FileContents-lineContents" id="3537"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3538" onclick="window.location.hash='#3538'"></td><td class="FileContents-lineContents" id="3538"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3539" onclick="window.location.hash='#3539'"></td><td class="FileContents-lineContents" id="3539"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3540" onclick="window.location.hash='#3540'"></td><td class="FileContents-lineContents" id="3540"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x037E</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// ChapterCountry ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3541" onclick="window.location.hash='#3541'"></td><td class="FileContents-lineContents" id="3541"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_country</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3542" onclick="window.location.hash='#3542'"></td><td class="FileContents-lineContents" id="3542"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3543" onclick="window.location.hash='#3543'"></td><td class="FileContents-lineContents" id="3543"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3544" onclick="window.location.hash='#3544'"></td><td class="FileContents-lineContents" id="3544"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3545" onclick="window.location.hash='#3545'"></td><td class="FileContents-lineContents" id="3545"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3546" onclick="window.location.hash='#3546'"></td><td class="FileContents-lineContents" id="3546"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3547" onclick="window.location.hash='#3547'"></td><td class="FileContents-lineContents" id="3547"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3548" onclick="window.location.hash='#3548'"></td><td class="FileContents-lineContents" id="3548"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3549" onclick="window.location.hash='#3549'"></td><td class="FileContents-lineContents" id="3549"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3550" onclick="window.location.hash='#3550'"></td><td class="FileContents-lineContents" id="3550"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3551" onclick="window.location.hash='#3551'"></td><td class="FileContents-lineContents" id="3551"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3552" onclick="window.location.hash='#3552'"></td><td class="FileContents-lineContents" id="3552"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3553" onclick="window.location.hash='#3553'"></td><td class="FileContents-lineContents" id="3553"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3554" onclick="window.location.hash='#3554'"></td><td class="FileContents-lineContents" id="3554"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3555" onclick="window.location.hash='#3555'"></td><td class="FileContents-lineContents" id="3555"><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tags</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3556" onclick="window.location.hash='#3556'"></td><td class="FileContents-lineContents" id="3556"><span class="pln">           </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3557" onclick="window.location.hash='#3557'"></td><td class="FileContents-lineContents" id="3557"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3558" onclick="window.location.hash='#3558'"></td><td class="FileContents-lineContents" id="3558"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">payload_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3559" onclick="window.location.hash='#3559'"></td><td class="FileContents-lineContents" id="3559"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">payload_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3560" onclick="window.location.hash='#3560'"></td><td class="FileContents-lineContents" id="3560"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3561" onclick="window.location.hash='#3561'"></td><td class="FileContents-lineContents" id="3561"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3562" onclick="window.location.hash='#3562'"></td><td class="FileContents-lineContents" id="3562"><span class="pln">      m_tags</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3563" onclick="window.location.hash='#3563'"></td><td class="FileContents-lineContents" id="3563"><span class="pln">      m_tags_size</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3564" onclick="window.location.hash='#3564'"></td><td class="FileContents-lineContents" id="3564"><span class="pln">      m_tags_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3565" onclick="window.location.hash='#3565'"></td><td class="FileContents-lineContents" id="3565"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3566" onclick="window.location.hash='#3566'"></td><td class="FileContents-lineContents" id="3566"><span class="typ">Tags</span><span class="pun">::~</span><span class="typ">Tags</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3567" onclick="window.location.hash='#3567'"></td><td class="FileContents-lineContents" id="3567"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_tags_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3568" onclick="window.location.hash='#3568'"></td><td class="FileContents-lineContents" id="3568"><span class="pln">    </span><span class="typ">Tag</span><span class="pun">&amp;</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> m_tags</span><span class="pun">[--</span><span class="pln">m_tags_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3569" onclick="window.location.hash='#3569'"></td><td class="FileContents-lineContents" id="3569"><span class="pln">    t</span><span class="pun">.</span><span class="typ">Clear</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3570" onclick="window.location.hash='#3570'"></td><td class="FileContents-lineContents" id="3570"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3571" onclick="window.location.hash='#3571'"></td><td class="FileContents-lineContents" id="3571"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_tags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3572" onclick="window.location.hash='#3572'"></td><td class="FileContents-lineContents" id="3572"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3573" onclick="window.location.hash='#3573'"></td><td class="FileContents-lineContents" id="3573"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3574" onclick="window.location.hash='#3574'"></td><td class="FileContents-lineContents" id="3574"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3575" onclick="window.location.hash='#3575'"></td><td class="FileContents-lineContents" id="3575"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3576" onclick="window.location.hash='#3576'"></td><td class="FileContents-lineContents" id="3576"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3577" onclick="window.location.hash='#3577'"></td><td class="FileContents-lineContents" id="3577"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span><span class="pln">  </span><span class="com">// payload start</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3578" onclick="window.location.hash='#3578'"></td><td class="FileContents-lineContents" id="3578"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// payload stop</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3579" onclick="window.location.hash='#3579'"></td><td class="FileContents-lineContents" id="3579"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3580" onclick="window.location.hash='#3580'"></td><td class="FileContents-lineContents" id="3580"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3581" onclick="window.location.hash='#3581'"></td><td class="FileContents-lineContents" id="3581"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3582" onclick="window.location.hash='#3582'"></td><td class="FileContents-lineContents" id="3582"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3583" onclick="window.location.hash='#3583'"></td><td class="FileContents-lineContents" id="3583"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3584" onclick="window.location.hash='#3584'"></td><td class="FileContents-lineContents" id="3584"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3585" onclick="window.location.hash='#3585'"></td><td class="FileContents-lineContents" id="3585"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3586" onclick="window.location.hash='#3586'"></td><td class="FileContents-lineContents" id="3586"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3587" onclick="window.location.hash='#3587'"></td><td class="FileContents-lineContents" id="3587"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3588" onclick="window.location.hash='#3588'"></td><td class="FileContents-lineContents" id="3588"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// 0 length tag, read another</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3589" onclick="window.location.hash='#3589'"></td><td class="FileContents-lineContents" id="3589"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3590" onclick="window.location.hash='#3590'"></td><td class="FileContents-lineContents" id="3590"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3591" onclick="window.location.hash='#3591'"></td><td class="FileContents-lineContents" id="3591"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x3373</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Tag ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3592" onclick="window.location.hash='#3592'"></td><td class="FileContents-lineContents" id="3592"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseTag</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3593" onclick="window.location.hash='#3593'"></td><td class="FileContents-lineContents" id="3593"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3594" onclick="window.location.hash='#3594'"></td><td class="FileContents-lineContents" id="3594"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3595" onclick="window.location.hash='#3595'"></td><td class="FileContents-lineContents" id="3595"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3596" onclick="window.location.hash='#3596'"></td><td class="FileContents-lineContents" id="3596"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3597" onclick="window.location.hash='#3597'"></td><td class="FileContents-lineContents" id="3597"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3598" onclick="window.location.hash='#3598'"></td><td class="FileContents-lineContents" id="3598"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3599" onclick="window.location.hash='#3599'"></td><td class="FileContents-lineContents" id="3599"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3600" onclick="window.location.hash='#3600'"></td><td class="FileContents-lineContents" id="3600"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3601" onclick="window.location.hash='#3601'"></td><td class="FileContents-lineContents" id="3601"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3602" onclick="window.location.hash='#3602'"></td><td class="FileContents-lineContents" id="3602"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3603" onclick="window.location.hash='#3603'"></td><td class="FileContents-lineContents" id="3603"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3604" onclick="window.location.hash='#3604'"></td><td class="FileContents-lineContents" id="3604"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3605" onclick="window.location.hash='#3605'"></td><td class="FileContents-lineContents" id="3605"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">!=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3606" onclick="window.location.hash='#3606'"></td><td class="FileContents-lineContents" id="3606"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3607" onclick="window.location.hash='#3607'"></td><td class="FileContents-lineContents" id="3607"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3608" onclick="window.location.hash='#3608'"></td><td class="FileContents-lineContents" id="3608"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3609" onclick="window.location.hash='#3609'"></td><td class="FileContents-lineContents" id="3609"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3610" onclick="window.location.hash='#3610'"></td><td class="FileContents-lineContents" id="3610"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3611" onclick="window.location.hash='#3611'"></td><td class="FileContents-lineContents" id="3611"><span class="typ">int</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">GetTagCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_tags_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3612" onclick="window.location.hash='#3612'"></td><td class="FileContents-lineContents" id="3612"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3613" onclick="window.location.hash='#3613'"></td><td class="FileContents-lineContents" id="3613"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">GetTag</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3614" onclick="window.location.hash='#3614'"></td><td class="FileContents-lineContents" id="3614"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3615" onclick="window.location.hash='#3615'"></td><td class="FileContents-lineContents" id="3615"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3616" onclick="window.location.hash='#3616'"></td><td class="FileContents-lineContents" id="3616"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3617" onclick="window.location.hash='#3617'"></td><td class="FileContents-lineContents" id="3617"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> m_tags_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3618" onclick="window.location.hash='#3618'"></td><td class="FileContents-lineContents" id="3618"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3619" onclick="window.location.hash='#3619'"></td><td class="FileContents-lineContents" id="3619"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3620" onclick="window.location.hash='#3620'"></td><td class="FileContents-lineContents" id="3620"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_tags </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3621" onclick="window.location.hash='#3621'"></td><td class="FileContents-lineContents" id="3621"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3622" onclick="window.location.hash='#3622'"></td><td class="FileContents-lineContents" id="3622"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3623" onclick="window.location.hash='#3623'"></td><td class="FileContents-lineContents" id="3623"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">ExpandTagsArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3624" onclick="window.location.hash='#3624'"></td><td class="FileContents-lineContents" id="3624"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_tags_size </span><span class="pun">&gt;</span><span class="pln"> m_tags_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3625" onclick="window.location.hash='#3625'"></td><td class="FileContents-lineContents" id="3625"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3626" onclick="window.location.hash='#3626'"></td><td class="FileContents-lineContents" id="3626"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3627" onclick="window.location.hash='#3627'"></td><td class="FileContents-lineContents" id="3627"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_tags_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> m_tags_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3628" onclick="window.location.hash='#3628'"></td><td class="FileContents-lineContents" id="3628"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3629" onclick="window.location.hash='#3629'"></td><td class="FileContents-lineContents" id="3629"><span class="pln">  </span><span class="typ">Tag</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> tags </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Tag</span><span class="pun">[</span><span class="pln">size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3630" onclick="window.location.hash='#3630'"></td><td class="FileContents-lineContents" id="3630"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3631" onclick="window.location.hash='#3631'"></td><td class="FileContents-lineContents" id="3631"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tags </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3632" onclick="window.location.hash='#3632'"></td><td class="FileContents-lineContents" id="3632"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3633" onclick="window.location.hash='#3633'"></td><td class="FileContents-lineContents" id="3633"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3634" onclick="window.location.hash='#3634'"></td><td class="FileContents-lineContents" id="3634"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> idx </span><span class="pun">&lt;</span><span class="pln"> m_tags_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3635" onclick="window.location.hash='#3635'"></td><td class="FileContents-lineContents" id="3635"><span class="pln">    m_tags</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="pln">tags</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3636" onclick="window.location.hash='#3636'"></td><td class="FileContents-lineContents" id="3636"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3637" onclick="window.location.hash='#3637'"></td><td class="FileContents-lineContents" id="3637"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3638" onclick="window.location.hash='#3638'"></td><td class="FileContents-lineContents" id="3638"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_tags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3639" onclick="window.location.hash='#3639'"></td><td class="FileContents-lineContents" id="3639"><span class="pln">  m_tags </span><span class="pun">=</span><span class="pln"> tags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3640" onclick="window.location.hash='#3640'"></td><td class="FileContents-lineContents" id="3640"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3641" onclick="window.location.hash='#3641'"></td><td class="FileContents-lineContents" id="3641"><span class="pln">  m_tags_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3642" onclick="window.location.hash='#3642'"></td><td class="FileContents-lineContents" id="3642"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3643" onclick="window.location.hash='#3643'"></td><td class="FileContents-lineContents" id="3643"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3644" onclick="window.location.hash='#3644'"></td><td class="FileContents-lineContents" id="3644"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3645" onclick="window.location.hash='#3645'"></td><td class="FileContents-lineContents" id="3645"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">ParseTag</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3646" onclick="window.location.hash='#3646'"></td><td class="FileContents-lineContents" id="3646"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">ExpandTagsArray</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3647" onclick="window.location.hash='#3647'"></td><td class="FileContents-lineContents" id="3647"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3648" onclick="window.location.hash='#3648'"></td><td class="FileContents-lineContents" id="3648"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3649" onclick="window.location.hash='#3649'"></td><td class="FileContents-lineContents" id="3649"><span class="pln">  </span><span class="typ">Tag</span><span class="pun">&amp;</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> m_tags</span><span class="pun">[</span><span class="pln">m_tags_count</span><span class="pun">++];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3650" onclick="window.location.hash='#3650'"></td><td class="FileContents-lineContents" id="3650"><span class="pln">  t</span><span class="pun">.</span><span class="typ">Init</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3651" onclick="window.location.hash='#3651'"></td><td class="FileContents-lineContents" id="3651"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3652" onclick="window.location.hash='#3652'"></td><td class="FileContents-lineContents" id="3652"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> t</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3653" onclick="window.location.hash='#3653'"></td><td class="FileContents-lineContents" id="3653"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3654" onclick="window.location.hash='#3654'"></td><td class="FileContents-lineContents" id="3654"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3655" onclick="window.location.hash='#3655'"></td><td class="FileContents-lineContents" id="3655"><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3656" onclick="window.location.hash='#3656'"></td><td class="FileContents-lineContents" id="3656"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3657" onclick="window.location.hash='#3657'"></td><td class="FileContents-lineContents" id="3657"><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::~</span><span class="typ">Tag</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3658" onclick="window.location.hash='#3658'"></td><td class="FileContents-lineContents" id="3658"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3659" onclick="window.location.hash='#3659'"></td><td class="FileContents-lineContents" id="3659"><span class="typ">int</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">GetSimpleTagCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_simple_tags_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3660" onclick="window.location.hash='#3660'"></td><td class="FileContents-lineContents" id="3660"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3661" onclick="window.location.hash='#3661'"></td><td class="FileContents-lineContents" id="3661"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">GetSimpleTag</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3662" onclick="window.location.hash='#3662'"></td><td class="FileContents-lineContents" id="3662"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3663" onclick="window.location.hash='#3663'"></td><td class="FileContents-lineContents" id="3663"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3664" onclick="window.location.hash='#3664'"></td><td class="FileContents-lineContents" id="3664"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3665" onclick="window.location.hash='#3665'"></td><td class="FileContents-lineContents" id="3665"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_simple_tags_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3666" onclick="window.location.hash='#3666'"></td><td class="FileContents-lineContents" id="3666"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3667" onclick="window.location.hash='#3667'"></td><td class="FileContents-lineContents" id="3667"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3668" onclick="window.location.hash='#3668'"></td><td class="FileContents-lineContents" id="3668"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_simple_tags </span><span class="pun">+</span><span class="pln"> index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3669" onclick="window.location.hash='#3669'"></td><td class="FileContents-lineContents" id="3669"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3670" onclick="window.location.hash='#3670'"></td><td class="FileContents-lineContents" id="3670"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3671" onclick="window.location.hash='#3671'"></td><td class="FileContents-lineContents" id="3671"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3672" onclick="window.location.hash='#3672'"></td><td class="FileContents-lineContents" id="3672"><span class="pln">  m_simple_tags </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3673" onclick="window.location.hash='#3673'"></td><td class="FileContents-lineContents" id="3673"><span class="pln">  m_simple_tags_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3674" onclick="window.location.hash='#3674'"></td><td class="FileContents-lineContents" id="3674"><span class="pln">  m_simple_tags_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3675" onclick="window.location.hash='#3675'"></td><td class="FileContents-lineContents" id="3675"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3676" onclick="window.location.hash='#3676'"></td><td class="FileContents-lineContents" id="3676"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3677" onclick="window.location.hash='#3677'"></td><td class="FileContents-lineContents" id="3677"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="typ">Tag</span><span class="pun">&amp;</span><span class="pln"> rhs</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3678" onclick="window.location.hash='#3678'"></td><td class="FileContents-lineContents" id="3678"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_simple_tags </span><span class="pun">=</span><span class="pln"> m_simple_tags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3679" onclick="window.location.hash='#3679'"></td><td class="FileContents-lineContents" id="3679"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_simple_tags_size </span><span class="pun">=</span><span class="pln"> m_simple_tags_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3680" onclick="window.location.hash='#3680'"></td><td class="FileContents-lineContents" id="3680"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_simple_tags_count </span><span class="pun">=</span><span class="pln"> m_simple_tags_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3681" onclick="window.location.hash='#3681'"></td><td class="FileContents-lineContents" id="3681"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3682" onclick="window.location.hash='#3682'"></td><td class="FileContents-lineContents" id="3682"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3683" onclick="window.location.hash='#3683'"></td><td class="FileContents-lineContents" id="3683"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">Clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3684" onclick="window.location.hash='#3684'"></td><td class="FileContents-lineContents" id="3684"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_simple_tags_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3685" onclick="window.location.hash='#3685'"></td><td class="FileContents-lineContents" id="3685"><span class="pln">    </span><span class="typ">SimpleTag</span><span class="pun">&amp;</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> m_simple_tags</span><span class="pun">[--</span><span class="pln">m_simple_tags_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3686" onclick="window.location.hash='#3686'"></td><td class="FileContents-lineContents" id="3686"><span class="pln">    d</span><span class="pun">.</span><span class="typ">Clear</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3687" onclick="window.location.hash='#3687'"></td><td class="FileContents-lineContents" id="3687"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3688" onclick="window.location.hash='#3688'"></td><td class="FileContents-lineContents" id="3688"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3689" onclick="window.location.hash='#3689'"></td><td class="FileContents-lineContents" id="3689"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_simple_tags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3690" onclick="window.location.hash='#3690'"></td><td class="FileContents-lineContents" id="3690"><span class="pln">  m_simple_tags </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3691" onclick="window.location.hash='#3691'"></td><td class="FileContents-lineContents" id="3691"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3692" onclick="window.location.hash='#3692'"></td><td class="FileContents-lineContents" id="3692"><span class="pln">  m_simple_tags_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3693" onclick="window.location.hash='#3693'"></td><td class="FileContents-lineContents" id="3693"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3694" onclick="window.location.hash='#3694'"></td><td class="FileContents-lineContents" id="3694"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3695" onclick="window.location.hash='#3695'"></td><td class="FileContents-lineContents" id="3695"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3696" onclick="window.location.hash='#3696'"></td><td class="FileContents-lineContents" id="3696"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3697" onclick="window.location.hash='#3697'"></td><td class="FileContents-lineContents" id="3697"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3698" onclick="window.location.hash='#3698'"></td><td class="FileContents-lineContents" id="3698"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3699" onclick="window.location.hash='#3699'"></td><td class="FileContents-lineContents" id="3699"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3700" onclick="window.location.hash='#3700'"></td><td class="FileContents-lineContents" id="3700"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3701" onclick="window.location.hash='#3701'"></td><td class="FileContents-lineContents" id="3701"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3702" onclick="window.location.hash='#3702'"></td><td class="FileContents-lineContents" id="3702"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3703" onclick="window.location.hash='#3703'"></td><td class="FileContents-lineContents" id="3703"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3704" onclick="window.location.hash='#3704'"></td><td class="FileContents-lineContents" id="3704"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3705" onclick="window.location.hash='#3705'"></td><td class="FileContents-lineContents" id="3705"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3706" onclick="window.location.hash='#3706'"></td><td class="FileContents-lineContents" id="3706"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// 0 length tag, read another</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3707" onclick="window.location.hash='#3707'"></td><td class="FileContents-lineContents" id="3707"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3708" onclick="window.location.hash='#3708'"></td><td class="FileContents-lineContents" id="3708"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3709" onclick="window.location.hash='#3709'"></td><td class="FileContents-lineContents" id="3709"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x27C8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// SimpleTag ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3710" onclick="window.location.hash='#3710'"></td><td class="FileContents-lineContents" id="3710"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseSimpleTag</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3711" onclick="window.location.hash='#3711'"></td><td class="FileContents-lineContents" id="3711"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3712" onclick="window.location.hash='#3712'"></td><td class="FileContents-lineContents" id="3712"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3713" onclick="window.location.hash='#3713'"></td><td class="FileContents-lineContents" id="3713"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3714" onclick="window.location.hash='#3714'"></td><td class="FileContents-lineContents" id="3714"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3715" onclick="window.location.hash='#3715'"></td><td class="FileContents-lineContents" id="3715"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3716" onclick="window.location.hash='#3716'"></td><td class="FileContents-lineContents" id="3716"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3717" onclick="window.location.hash='#3717'"></td><td class="FileContents-lineContents" id="3717"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3718" onclick="window.location.hash='#3718'"></td><td class="FileContents-lineContents" id="3718"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3719" onclick="window.location.hash='#3719'"></td><td class="FileContents-lineContents" id="3719"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3720" onclick="window.location.hash='#3720'"></td><td class="FileContents-lineContents" id="3720"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3721" onclick="window.location.hash='#3721'"></td><td class="FileContents-lineContents" id="3721"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3722" onclick="window.location.hash='#3722'"></td><td class="FileContents-lineContents" id="3722"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3723" onclick="window.location.hash='#3723'"></td><td class="FileContents-lineContents" id="3723"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">!=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3724" onclick="window.location.hash='#3724'"></td><td class="FileContents-lineContents" id="3724"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3725" onclick="window.location.hash='#3725'"></td><td class="FileContents-lineContents" id="3725"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3726" onclick="window.location.hash='#3726'"></td><td class="FileContents-lineContents" id="3726"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3727" onclick="window.location.hash='#3727'"></td><td class="FileContents-lineContents" id="3727"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3728" onclick="window.location.hash='#3728'"></td><td class="FileContents-lineContents" id="3728"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">ParseSimpleTag</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3729" onclick="window.location.hash='#3729'"></td><td class="FileContents-lineContents" id="3729"><span class="pln">                               </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3730" onclick="window.location.hash='#3730'"></td><td class="FileContents-lineContents" id="3730"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">ExpandSimpleTagsArray</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3731" onclick="window.location.hash='#3731'"></td><td class="FileContents-lineContents" id="3731"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3732" onclick="window.location.hash='#3732'"></td><td class="FileContents-lineContents" id="3732"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3733" onclick="window.location.hash='#3733'"></td><td class="FileContents-lineContents" id="3733"><span class="pln">  </span><span class="typ">SimpleTag</span><span class="pun">&amp;</span><span class="pln"> st </span><span class="pun">=</span><span class="pln"> m_simple_tags</span><span class="pun">[</span><span class="pln">m_simple_tags_count</span><span class="pun">++];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3734" onclick="window.location.hash='#3734'"></td><td class="FileContents-lineContents" id="3734"><span class="pln">  st</span><span class="pun">.</span><span class="typ">Init</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3735" onclick="window.location.hash='#3735'"></td><td class="FileContents-lineContents" id="3735"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3736" onclick="window.location.hash='#3736'"></td><td class="FileContents-lineContents" id="3736"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> st</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3737" onclick="window.location.hash='#3737'"></td><td class="FileContents-lineContents" id="3737"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3738" onclick="window.location.hash='#3738'"></td><td class="FileContents-lineContents" id="3738"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3739" onclick="window.location.hash='#3739'"></td><td class="FileContents-lineContents" id="3739"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">Tag</span><span class="pun">::</span><span class="typ">ExpandSimpleTagsArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3740" onclick="window.location.hash='#3740'"></td><td class="FileContents-lineContents" id="3740"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_simple_tags_size </span><span class="pun">&gt;</span><span class="pln"> m_simple_tags_count</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3741" onclick="window.location.hash='#3741'"></td><td class="FileContents-lineContents" id="3741"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3742" onclick="window.location.hash='#3742'"></td><td class="FileContents-lineContents" id="3742"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3743" onclick="window.location.hash='#3743'"></td><td class="FileContents-lineContents" id="3743"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_simple_tags_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> m_simple_tags_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3744" onclick="window.location.hash='#3744'"></td><td class="FileContents-lineContents" id="3744"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3745" onclick="window.location.hash='#3745'"></td><td class="FileContents-lineContents" id="3745"><span class="pln">  </span><span class="typ">SimpleTag</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> displays </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">SimpleTag</span><span class="pun">[</span><span class="pln">size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3746" onclick="window.location.hash='#3746'"></td><td class="FileContents-lineContents" id="3746"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3747" onclick="window.location.hash='#3747'"></td><td class="FileContents-lineContents" id="3747"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">displays </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3748" onclick="window.location.hash='#3748'"></td><td class="FileContents-lineContents" id="3748"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3749" onclick="window.location.hash='#3749'"></td><td class="FileContents-lineContents" id="3749"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3750" onclick="window.location.hash='#3750'"></td><td class="FileContents-lineContents" id="3750"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> idx </span><span class="pun">&lt;</span><span class="pln"> m_simple_tags_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3751" onclick="window.location.hash='#3751'"></td><td class="FileContents-lineContents" id="3751"><span class="pln">    m_simple_tags</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="pln">displays</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3752" onclick="window.location.hash='#3752'"></td><td class="FileContents-lineContents" id="3752"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3753" onclick="window.location.hash='#3753'"></td><td class="FileContents-lineContents" id="3753"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3754" onclick="window.location.hash='#3754'"></td><td class="FileContents-lineContents" id="3754"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_simple_tags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3755" onclick="window.location.hash='#3755'"></td><td class="FileContents-lineContents" id="3755"><span class="pln">  m_simple_tags </span><span class="pun">=</span><span class="pln"> displays</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3756" onclick="window.location.hash='#3756'"></td><td class="FileContents-lineContents" id="3756"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3757" onclick="window.location.hash='#3757'"></td><td class="FileContents-lineContents" id="3757"><span class="pln">  m_simple_tags_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3758" onclick="window.location.hash='#3758'"></td><td class="FileContents-lineContents" id="3758"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3759" onclick="window.location.hash='#3759'"></td><td class="FileContents-lineContents" id="3759"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3760" onclick="window.location.hash='#3760'"></td><td class="FileContents-lineContents" id="3760"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3761" onclick="window.location.hash='#3761'"></td><td class="FileContents-lineContents" id="3761"><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3762" onclick="window.location.hash='#3762'"></td><td class="FileContents-lineContents" id="3762"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3763" onclick="window.location.hash='#3763'"></td><td class="FileContents-lineContents" id="3763"><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::~</span><span class="typ">SimpleTag</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3764" onclick="window.location.hash='#3764'"></td><td class="FileContents-lineContents" id="3764"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3765" onclick="window.location.hash='#3765'"></td><td class="FileContents-lineContents" id="3765"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">GetTagName</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_tag_name</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3766" onclick="window.location.hash='#3766'"></td><td class="FileContents-lineContents" id="3766"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3767" onclick="window.location.hash='#3767'"></td><td class="FileContents-lineContents" id="3767"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">GetTagString</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_tag_string</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3768" onclick="window.location.hash='#3768'"></td><td class="FileContents-lineContents" id="3768"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3769" onclick="window.location.hash='#3769'"></td><td class="FileContents-lineContents" id="3769"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3770" onclick="window.location.hash='#3770'"></td><td class="FileContents-lineContents" id="3770"><span class="pln">  m_tag_name </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3771" onclick="window.location.hash='#3771'"></td><td class="FileContents-lineContents" id="3771"><span class="pln">  m_tag_string </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3772" onclick="window.location.hash='#3772'"></td><td class="FileContents-lineContents" id="3772"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3773" onclick="window.location.hash='#3773'"></td><td class="FileContents-lineContents" id="3773"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3774" onclick="window.location.hash='#3774'"></td><td class="FileContents-lineContents" id="3774"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">ShallowCopy</span><span class="pun">(</span><span class="typ">SimpleTag</span><span class="pun">&amp;</span><span class="pln"> rhs</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3775" onclick="window.location.hash='#3775'"></td><td class="FileContents-lineContents" id="3775"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_tag_name </span><span class="pun">=</span><span class="pln"> m_tag_name</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3776" onclick="window.location.hash='#3776'"></td><td class="FileContents-lineContents" id="3776"><span class="pln">  rhs</span><span class="pun">.</span><span class="pln">m_tag_string </span><span class="pun">=</span><span class="pln"> m_tag_string</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3777" onclick="window.location.hash='#3777'"></td><td class="FileContents-lineContents" id="3777"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3778" onclick="window.location.hash='#3778'"></td><td class="FileContents-lineContents" id="3778"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3779" onclick="window.location.hash='#3779'"></td><td class="FileContents-lineContents" id="3779"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">Clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3780" onclick="window.location.hash='#3780'"></td><td class="FileContents-lineContents" id="3780"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_tag_name</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3781" onclick="window.location.hash='#3781'"></td><td class="FileContents-lineContents" id="3781"><span class="pln">  m_tag_name </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3782" onclick="window.location.hash='#3782'"></td><td class="FileContents-lineContents" id="3782"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3783" onclick="window.location.hash='#3783'"></td><td class="FileContents-lineContents" id="3783"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_tag_string</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3784" onclick="window.location.hash='#3784'"></td><td class="FileContents-lineContents" id="3784"><span class="pln">  m_tag_string </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3785" onclick="window.location.hash='#3785'"></td><td class="FileContents-lineContents" id="3785"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3786" onclick="window.location.hash='#3786'"></td><td class="FileContents-lineContents" id="3786"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3787" onclick="window.location.hash='#3787'"></td><td class="FileContents-lineContents" id="3787"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tags</span><span class="pun">::</span><span class="typ">SimpleTag</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3788" onclick="window.location.hash='#3788'"></td><td class="FileContents-lineContents" id="3788"><span class="pln">                            </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3789" onclick="window.location.hash='#3789'"></td><td class="FileContents-lineContents" id="3789"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3790" onclick="window.location.hash='#3790'"></td><td class="FileContents-lineContents" id="3790"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3791" onclick="window.location.hash='#3791'"></td><td class="FileContents-lineContents" id="3791"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3792" onclick="window.location.hash='#3792'"></td><td class="FileContents-lineContents" id="3792"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3793" onclick="window.location.hash='#3793'"></td><td class="FileContents-lineContents" id="3793"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3794" onclick="window.location.hash='#3794'"></td><td class="FileContents-lineContents" id="3794"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3795" onclick="window.location.hash='#3795'"></td><td class="FileContents-lineContents" id="3795"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3796" onclick="window.location.hash='#3796'"></td><td class="FileContents-lineContents" id="3796"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3797" onclick="window.location.hash='#3797'"></td><td class="FileContents-lineContents" id="3797"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3798" onclick="window.location.hash='#3798'"></td><td class="FileContents-lineContents" id="3798"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3799" onclick="window.location.hash='#3799'"></td><td class="FileContents-lineContents" id="3799"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3800" onclick="window.location.hash='#3800'"></td><td class="FileContents-lineContents" id="3800"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3801" onclick="window.location.hash='#3801'"></td><td class="FileContents-lineContents" id="3801"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3802" onclick="window.location.hash='#3802'"></td><td class="FileContents-lineContents" id="3802"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x5A3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// TagName ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3803" onclick="window.location.hash='#3803'"></td><td class="FileContents-lineContents" id="3803"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_tag_name</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3804" onclick="window.location.hash='#3804'"></td><td class="FileContents-lineContents" id="3804"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3805" onclick="window.location.hash='#3805'"></td><td class="FileContents-lineContents" id="3805"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3806" onclick="window.location.hash='#3806'"></td><td class="FileContents-lineContents" id="3806"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3807" onclick="window.location.hash='#3807'"></td><td class="FileContents-lineContents" id="3807"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x487</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// TagString ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3808" onclick="window.location.hash='#3808'"></td><td class="FileContents-lineContents" id="3808"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_tag_string</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3809" onclick="window.location.hash='#3809'"></td><td class="FileContents-lineContents" id="3809"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3810" onclick="window.location.hash='#3810'"></td><td class="FileContents-lineContents" id="3810"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3811" onclick="window.location.hash='#3811'"></td><td class="FileContents-lineContents" id="3811"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3812" onclick="window.location.hash='#3812'"></td><td class="FileContents-lineContents" id="3812"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3813" onclick="window.location.hash='#3813'"></td><td class="FileContents-lineContents" id="3813"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3814" onclick="window.location.hash='#3814'"></td><td class="FileContents-lineContents" id="3814"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3815" onclick="window.location.hash='#3815'"></td><td class="FileContents-lineContents" id="3815"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3816" onclick="window.location.hash='#3816'"></td><td class="FileContents-lineContents" id="3816"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3817" onclick="window.location.hash='#3817'"></td><td class="FileContents-lineContents" id="3817"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3818" onclick="window.location.hash='#3818'"></td><td class="FileContents-lineContents" id="3818"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3819" onclick="window.location.hash='#3819'"></td><td class="FileContents-lineContents" id="3819"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3820" onclick="window.location.hash='#3820'"></td><td class="FileContents-lineContents" id="3820"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3821" onclick="window.location.hash='#3821'"></td><td class="FileContents-lineContents" id="3821"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">!=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3822" onclick="window.location.hash='#3822'"></td><td class="FileContents-lineContents" id="3822"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3823" onclick="window.location.hash='#3823'"></td><td class="FileContents-lineContents" id="3823"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3824" onclick="window.location.hash='#3824'"></td><td class="FileContents-lineContents" id="3824"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3825" onclick="window.location.hash='#3825'"></td><td class="FileContents-lineContents" id="3825"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3826" onclick="window.location.hash='#3826'"></td><td class="FileContents-lineContents" id="3826"><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">SegmentInfo</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3827" onclick="window.location.hash='#3827'"></td><td class="FileContents-lineContents" id="3827"><span class="pln">                         </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3828" onclick="window.location.hash='#3828'"></td><td class="FileContents-lineContents" id="3828"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3829" onclick="window.location.hash='#3829'"></td><td class="FileContents-lineContents" id="3829"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3830" onclick="window.location.hash='#3830'"></td><td class="FileContents-lineContents" id="3830"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3831" onclick="window.location.hash='#3831'"></td><td class="FileContents-lineContents" id="3831"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3832" onclick="window.location.hash='#3832'"></td><td class="FileContents-lineContents" id="3832"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3833" onclick="window.location.hash='#3833'"></td><td class="FileContents-lineContents" id="3833"><span class="pln">      m_pMuxingAppAsUTF8</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3834" onclick="window.location.hash='#3834'"></td><td class="FileContents-lineContents" id="3834"><span class="pln">      m_pWritingAppAsUTF8</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3835" onclick="window.location.hash='#3835'"></td><td class="FileContents-lineContents" id="3835"><span class="pln">      m_pTitleAsUTF8</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3836" onclick="window.location.hash='#3836'"></td><td class="FileContents-lineContents" id="3836"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3837" onclick="window.location.hash='#3837'"></td><td class="FileContents-lineContents" id="3837"><span class="typ">SegmentInfo</span><span class="pun">::~</span><span class="typ">SegmentInfo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3838" onclick="window.location.hash='#3838'"></td><td class="FileContents-lineContents" id="3838"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_pMuxingAppAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3839" onclick="window.location.hash='#3839'"></td><td class="FileContents-lineContents" id="3839"><span class="pln">  m_pMuxingAppAsUTF8 </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3840" onclick="window.location.hash='#3840'"></td><td class="FileContents-lineContents" id="3840"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3841" onclick="window.location.hash='#3841'"></td><td class="FileContents-lineContents" id="3841"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_pWritingAppAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3842" onclick="window.location.hash='#3842'"></td><td class="FileContents-lineContents" id="3842"><span class="pln">  m_pWritingAppAsUTF8 </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3843" onclick="window.location.hash='#3843'"></td><td class="FileContents-lineContents" id="3843"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3844" onclick="window.location.hash='#3844'"></td><td class="FileContents-lineContents" id="3844"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_pTitleAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3845" onclick="window.location.hash='#3845'"></td><td class="FileContents-lineContents" id="3845"><span class="pln">  m_pTitleAsUTF8 </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3846" onclick="window.location.hash='#3846'"></td><td class="FileContents-lineContents" id="3846"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3847" onclick="window.location.hash='#3847'"></td><td class="FileContents-lineContents" id="3847"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3848" onclick="window.location.hash='#3848'"></td><td class="FileContents-lineContents" id="3848"><span class="kwd">long</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3849" onclick="window.location.hash='#3849'"></td><td class="FileContents-lineContents" id="3849"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pMuxingAppAsUTF8 </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3850" onclick="window.location.hash='#3850'"></td><td class="FileContents-lineContents" id="3850"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pWritingAppAsUTF8 </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3851" onclick="window.location.hash='#3851'"></td><td class="FileContents-lineContents" id="3851"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pTitleAsUTF8 </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3852" onclick="window.location.hash='#3852'"></td><td class="FileContents-lineContents" id="3852"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3853" onclick="window.location.hash='#3853'"></td><td class="FileContents-lineContents" id="3853"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3854" onclick="window.location.hash='#3854'"></td><td class="FileContents-lineContents" id="3854"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3855" onclick="window.location.hash='#3855'"></td><td class="FileContents-lineContents" id="3855"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3856" onclick="window.location.hash='#3856'"></td><td class="FileContents-lineContents" id="3856"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3857" onclick="window.location.hash='#3857'"></td><td class="FileContents-lineContents" id="3857"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3858" onclick="window.location.hash='#3858'"></td><td class="FileContents-lineContents" id="3858"><span class="pln">  m_timecodeScale </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1000000</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3859" onclick="window.location.hash='#3859'"></td><td class="FileContents-lineContents" id="3859"><span class="pln">  m_duration </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3860" onclick="window.location.hash='#3860'"></td><td class="FileContents-lineContents" id="3860"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3861" onclick="window.location.hash='#3861'"></td><td class="FileContents-lineContents" id="3861"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3862" onclick="window.location.hash='#3862'"></td><td class="FileContents-lineContents" id="3862"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3863" onclick="window.location.hash='#3863'"></td><td class="FileContents-lineContents" id="3863"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3864" onclick="window.location.hash='#3864'"></td><td class="FileContents-lineContents" id="3864"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3865" onclick="window.location.hash='#3865'"></td><td class="FileContents-lineContents" id="3865"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3866" onclick="window.location.hash='#3866'"></td><td class="FileContents-lineContents" id="3866"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3867" onclick="window.location.hash='#3867'"></td><td class="FileContents-lineContents" id="3867"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3868" onclick="window.location.hash='#3868'"></td><td class="FileContents-lineContents" id="3868"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3869" onclick="window.location.hash='#3869'"></td><td class="FileContents-lineContents" id="3869"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0AD7B1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Timecode Scale</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3870" onclick="window.location.hash='#3870'"></td><td class="FileContents-lineContents" id="3870"><span class="pln">      m_timecodeScale </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3871" onclick="window.location.hash='#3871'"></td><td class="FileContents-lineContents" id="3871"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3872" onclick="window.location.hash='#3872'"></td><td class="FileContents-lineContents" id="3872"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_timecodeScale </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3873" onclick="window.location.hash='#3873'"></td><td class="FileContents-lineContents" id="3873"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3874" onclick="window.location.hash='#3874'"></td><td class="FileContents-lineContents" id="3874"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0489</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Segment duration</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3875" onclick="window.location.hash='#3875'"></td><td class="FileContents-lineContents" id="3875"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeFloat</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_duration</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3876" onclick="window.location.hash='#3876'"></td><td class="FileContents-lineContents" id="3876"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3877" onclick="window.location.hash='#3877'"></td><td class="FileContents-lineContents" id="3877"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3878" onclick="window.location.hash='#3878'"></td><td class="FileContents-lineContents" id="3878"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3879" onclick="window.location.hash='#3879'"></td><td class="FileContents-lineContents" id="3879"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3880" onclick="window.location.hash='#3880'"></td><td class="FileContents-lineContents" id="3880"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3881" onclick="window.location.hash='#3881'"></td><td class="FileContents-lineContents" id="3881"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3882" onclick="window.location.hash='#3882'"></td><td class="FileContents-lineContents" id="3882"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0D80</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// MuxingApp</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3883" onclick="window.location.hash='#3883'"></td><td class="FileContents-lineContents" id="3883"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3884" onclick="window.location.hash='#3884'"></td><td class="FileContents-lineContents" id="3884"><span class="pln">          </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_pMuxingAppAsUTF8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3885" onclick="window.location.hash='#3885'"></td><td class="FileContents-lineContents" id="3885"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3886" onclick="window.location.hash='#3886'"></td><td class="FileContents-lineContents" id="3886"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3887" onclick="window.location.hash='#3887'"></td><td class="FileContents-lineContents" id="3887"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3888" onclick="window.location.hash='#3888'"></td><td class="FileContents-lineContents" id="3888"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1741</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// WritingApp</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3889" onclick="window.location.hash='#3889'"></td><td class="FileContents-lineContents" id="3889"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3890" onclick="window.location.hash='#3890'"></td><td class="FileContents-lineContents" id="3890"><span class="pln">          </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_pWritingAppAsUTF8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3891" onclick="window.location.hash='#3891'"></td><td class="FileContents-lineContents" id="3891"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3892" onclick="window.location.hash='#3892'"></td><td class="FileContents-lineContents" id="3892"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3893" onclick="window.location.hash='#3893'"></td><td class="FileContents-lineContents" id="3893"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3894" onclick="window.location.hash='#3894'"></td><td class="FileContents-lineContents" id="3894"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x3BA9</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Title</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3895" onclick="window.location.hash='#3895'"></td><td class="FileContents-lineContents" id="3895"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> m_pTitleAsUTF8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3896" onclick="window.location.hash='#3896'"></td><td class="FileContents-lineContents" id="3896"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3897" onclick="window.location.hash='#3897'"></td><td class="FileContents-lineContents" id="3897"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3898" onclick="window.location.hash='#3898'"></td><td class="FileContents-lineContents" id="3898"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3899" onclick="window.location.hash='#3899'"></td><td class="FileContents-lineContents" id="3899"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3900" onclick="window.location.hash='#3900'"></td><td class="FileContents-lineContents" id="3900"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3901" onclick="window.location.hash='#3901'"></td><td class="FileContents-lineContents" id="3901"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3902" onclick="window.location.hash='#3902'"></td><td class="FileContents-lineContents" id="3902"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3903" onclick="window.location.hash='#3903'"></td><td class="FileContents-lineContents" id="3903"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3904" onclick="window.location.hash='#3904'"></td><td class="FileContents-lineContents" id="3904"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3905" onclick="window.location.hash='#3905'"></td><td class="FileContents-lineContents" id="3905"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3906" onclick="window.location.hash='#3906'"></td><td class="FileContents-lineContents" id="3906"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3907" onclick="window.location.hash='#3907'"></td><td class="FileContents-lineContents" id="3907"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3908" onclick="window.location.hash='#3908'"></td><td class="FileContents-lineContents" id="3908"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3909" onclick="window.location.hash='#3909'"></td><td class="FileContents-lineContents" id="3909"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3910" onclick="window.location.hash='#3910'"></td><td class="FileContents-lineContents" id="3910"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">GetTimeCodeScale</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_timecodeScale</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3911" onclick="window.location.hash='#3911'"></td><td class="FileContents-lineContents" id="3911"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3912" onclick="window.location.hash='#3912'"></td><td class="FileContents-lineContents" id="3912"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">GetDuration</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3913" onclick="window.location.hash='#3913'"></td><td class="FileContents-lineContents" id="3913"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3914" onclick="window.location.hash='#3914'"></td><td class="FileContents-lineContents" id="3914"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3915" onclick="window.location.hash='#3915'"></td><td class="FileContents-lineContents" id="3915"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3916" onclick="window.location.hash='#3916'"></td><td class="FileContents-lineContents" id="3916"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_timecodeScale </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3917" onclick="window.location.hash='#3917'"></td><td class="FileContents-lineContents" id="3917"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3918" onclick="window.location.hash='#3918'"></td><td class="FileContents-lineContents" id="3918"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> dd </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="pln">m_duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="pln">m_timecodeScale</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3919" onclick="window.location.hash='#3919'"></td><td class="FileContents-lineContents" id="3919"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">dd</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3920" onclick="window.location.hash='#3920'"></td><td class="FileContents-lineContents" id="3920"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3921" onclick="window.location.hash='#3921'"></td><td class="FileContents-lineContents" id="3921"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> d</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3922" onclick="window.location.hash='#3922'"></td><td class="FileContents-lineContents" id="3922"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3923" onclick="window.location.hash='#3923'"></td><td class="FileContents-lineContents" id="3923"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3924" onclick="window.location.hash='#3924'"></td><td class="FileContents-lineContents" id="3924"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">GetMuxingAppAsUTF8</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3925" onclick="window.location.hash='#3925'"></td><td class="FileContents-lineContents" id="3925"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_pMuxingAppAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3926" onclick="window.location.hash='#3926'"></td><td class="FileContents-lineContents" id="3926"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3927" onclick="window.location.hash='#3927'"></td><td class="FileContents-lineContents" id="3927"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3928" onclick="window.location.hash='#3928'"></td><td class="FileContents-lineContents" id="3928"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">GetWritingAppAsUTF8</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3929" onclick="window.location.hash='#3929'"></td><td class="FileContents-lineContents" id="3929"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_pWritingAppAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3930" onclick="window.location.hash='#3930'"></td><td class="FileContents-lineContents" id="3930"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3931" onclick="window.location.hash='#3931'"></td><td class="FileContents-lineContents" id="3931"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3932" onclick="window.location.hash='#3932'"></td><td class="FileContents-lineContents" id="3932"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">::</span><span class="typ">GetTitleAsUTF8</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pTitleAsUTF8</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3933" onclick="window.location.hash='#3933'"></td><td class="FileContents-lineContents" id="3933"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3934" onclick="window.location.hash='#3934'"></td><td class="FileContents-lineContents" id="3934"><span class="com">///////////////////////////////////////////////////////////////</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3935" onclick="window.location.hash='#3935'"></td><td class="FileContents-lineContents" id="3935"><span class="com">// ContentEncoding element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3936" onclick="window.location.hash='#3936'"></td><td class="FileContents-lineContents" id="3936"><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentCompression</span><span class="pun">::</span><span class="typ">ContentCompression</span><span class="pun">()</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3937" onclick="window.location.hash='#3937'"></td><td class="FileContents-lineContents" id="3937"><span class="pln">    </span><span class="pun">:</span><span class="pln"> algo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> settings</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span><span class="pln"> settings_len</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3938" onclick="window.location.hash='#3938'"></td><td class="FileContents-lineContents" id="3938"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3939" onclick="window.location.hash='#3939'"></td><td class="FileContents-lineContents" id="3939"><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentCompression</span><span class="pun">::~</span><span class="typ">ContentCompression</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3940" onclick="window.location.hash='#3940'"></td><td class="FileContents-lineContents" id="3940"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> settings</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3941" onclick="window.location.hash='#3941'"></td><td class="FileContents-lineContents" id="3941"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3942" onclick="window.location.hash='#3942'"></td><td class="FileContents-lineContents" id="3942"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3943" onclick="window.location.hash='#3943'"></td><td class="FileContents-lineContents" id="3943"><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentEncryption</span><span class="pun">::</span><span class="typ">ContentEncryption</span><span class="pun">()</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3944" onclick="window.location.hash='#3944'"></td><td class="FileContents-lineContents" id="3944"><span class="pln">    </span><span class="pun">:</span><span class="pln"> algo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3945" onclick="window.location.hash='#3945'"></td><td class="FileContents-lineContents" id="3945"><span class="pln">      key_id</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3946" onclick="window.location.hash='#3946'"></td><td class="FileContents-lineContents" id="3946"><span class="pln">      key_id_len</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3947" onclick="window.location.hash='#3947'"></td><td class="FileContents-lineContents" id="3947"><span class="pln">      signature</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3948" onclick="window.location.hash='#3948'"></td><td class="FileContents-lineContents" id="3948"><span class="pln">      signature_len</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3949" onclick="window.location.hash='#3949'"></td><td class="FileContents-lineContents" id="3949"><span class="pln">      sig_key_id</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3950" onclick="window.location.hash='#3950'"></td><td class="FileContents-lineContents" id="3950"><span class="pln">      sig_key_id_len</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3951" onclick="window.location.hash='#3951'"></td><td class="FileContents-lineContents" id="3951"><span class="pln">      sig_algo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3952" onclick="window.location.hash='#3952'"></td><td class="FileContents-lineContents" id="3952"><span class="pln">      sig_hash_algo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3953" onclick="window.location.hash='#3953'"></td><td class="FileContents-lineContents" id="3953"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3954" onclick="window.location.hash='#3954'"></td><td class="FileContents-lineContents" id="3954"><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentEncryption</span><span class="pun">::~</span><span class="typ">ContentEncryption</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3955" onclick="window.location.hash='#3955'"></td><td class="FileContents-lineContents" id="3955"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> key_id</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3956" onclick="window.location.hash='#3956'"></td><td class="FileContents-lineContents" id="3956"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> signature</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3957" onclick="window.location.hash='#3957'"></td><td class="FileContents-lineContents" id="3957"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> sig_key_id</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3958" onclick="window.location.hash='#3958'"></td><td class="FileContents-lineContents" id="3958"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3959" onclick="window.location.hash='#3959'"></td><td class="FileContents-lineContents" id="3959"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3960" onclick="window.location.hash='#3960'"></td><td class="FileContents-lineContents" id="3960"><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentEncoding</span><span class="pun">()</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3961" onclick="window.location.hash='#3961'"></td><td class="FileContents-lineContents" id="3961"><span class="pln">    </span><span class="pun">:</span><span class="pln"> compression_entries_</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3962" onclick="window.location.hash='#3962'"></td><td class="FileContents-lineContents" id="3962"><span class="pln">      compression_entries_end_</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3963" onclick="window.location.hash='#3963'"></td><td class="FileContents-lineContents" id="3963"><span class="pln">      encryption_entries_</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3964" onclick="window.location.hash='#3964'"></td><td class="FileContents-lineContents" id="3964"><span class="pln">      encryption_entries_end_</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3965" onclick="window.location.hash='#3965'"></td><td class="FileContents-lineContents" id="3965"><span class="pln">      encoding_order_</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3966" onclick="window.location.hash='#3966'"></td><td class="FileContents-lineContents" id="3966"><span class="pln">      encoding_scope_</span><span class="pun">(</span><span class="lit">1</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3967" onclick="window.location.hash='#3967'"></td><td class="FileContents-lineContents" id="3967"><span class="pln">      encoding_type_</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3968" onclick="window.location.hash='#3968'"></td><td class="FileContents-lineContents" id="3968"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3969" onclick="window.location.hash='#3969'"></td><td class="FileContents-lineContents" id="3969"><span class="typ">ContentEncoding</span><span class="pun">::~</span><span class="typ">ContentEncoding</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3970" onclick="window.location.hash='#3970'"></td><td class="FileContents-lineContents" id="3970"><span class="pln">  </span><span class="typ">ContentCompression</span><span class="pun">**</span><span class="pln"> comp_i </span><span class="pun">=</span><span class="pln"> compression_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3971" onclick="window.location.hash='#3971'"></td><td class="FileContents-lineContents" id="3971"><span class="pln">  </span><span class="typ">ContentCompression</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> comp_j </span><span class="pun">=</span><span class="pln"> compression_entries_end_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3972" onclick="window.location.hash='#3972'"></td><td class="FileContents-lineContents" id="3972"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3973" onclick="window.location.hash='#3973'"></td><td class="FileContents-lineContents" id="3973"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">comp_i </span><span class="pun">!=</span><span class="pln"> comp_j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3974" onclick="window.location.hash='#3974'"></td><td class="FileContents-lineContents" id="3974"><span class="pln">    </span><span class="typ">ContentCompression</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> comp </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">comp_i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3975" onclick="window.location.hash='#3975'"></td><td class="FileContents-lineContents" id="3975"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> comp</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3976" onclick="window.location.hash='#3976'"></td><td class="FileContents-lineContents" id="3976"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3977" onclick="window.location.hash='#3977'"></td><td class="FileContents-lineContents" id="3977"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3978" onclick="window.location.hash='#3978'"></td><td class="FileContents-lineContents" id="3978"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> compression_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3979" onclick="window.location.hash='#3979'"></td><td class="FileContents-lineContents" id="3979"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3980" onclick="window.location.hash='#3980'"></td><td class="FileContents-lineContents" id="3980"><span class="pln">  </span><span class="typ">ContentEncryption</span><span class="pun">**</span><span class="pln"> enc_i </span><span class="pun">=</span><span class="pln"> encryption_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3981" onclick="window.location.hash='#3981'"></td><td class="FileContents-lineContents" id="3981"><span class="pln">  </span><span class="typ">ContentEncryption</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> enc_j </span><span class="pun">=</span><span class="pln"> encryption_entries_end_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3982" onclick="window.location.hash='#3982'"></td><td class="FileContents-lineContents" id="3982"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3983" onclick="window.location.hash='#3983'"></td><td class="FileContents-lineContents" id="3983"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enc_i </span><span class="pun">!=</span><span class="pln"> enc_j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3984" onclick="window.location.hash='#3984'"></td><td class="FileContents-lineContents" id="3984"><span class="pln">    </span><span class="typ">ContentEncryption</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> enc </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">enc_i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3985" onclick="window.location.hash='#3985'"></td><td class="FileContents-lineContents" id="3985"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> enc</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3986" onclick="window.location.hash='#3986'"></td><td class="FileContents-lineContents" id="3986"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3987" onclick="window.location.hash='#3987'"></td><td class="FileContents-lineContents" id="3987"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3988" onclick="window.location.hash='#3988'"></td><td class="FileContents-lineContents" id="3988"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> encryption_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3989" onclick="window.location.hash='#3989'"></td><td class="FileContents-lineContents" id="3989"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3990" onclick="window.location.hash='#3990'"></td><td class="FileContents-lineContents" id="3990"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3991" onclick="window.location.hash='#3991'"></td><td class="FileContents-lineContents" id="3991"><span class="kwd">const</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentCompression</span><span class="pun">*</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3992" onclick="window.location.hash='#3992'"></td><td class="FileContents-lineContents" id="3992"><span class="pln">    </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">GetCompressionByIndex</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3993" onclick="window.location.hash='#3993'"></td><td class="FileContents-lineContents" id="3993"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> compression_entries_end_ </span><span class="pun">-</span><span class="pln"> compression_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3994" onclick="window.location.hash='#3994'"></td><td class="FileContents-lineContents" id="3994"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3995" onclick="window.location.hash='#3995'"></td><td class="FileContents-lineContents" id="3995"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3996" onclick="window.location.hash='#3996'"></td><td class="FileContents-lineContents" id="3996"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3997" onclick="window.location.hash='#3997'"></td><td class="FileContents-lineContents" id="3997"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3998" onclick="window.location.hash='#3998'"></td><td class="FileContents-lineContents" id="3998"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3999" onclick="window.location.hash='#3999'"></td><td class="FileContents-lineContents" id="3999"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> compression_entries_</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4000" onclick="window.location.hash='#4000'"></td><td class="FileContents-lineContents" id="4000"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4001" onclick="window.location.hash='#4001'"></td><td class="FileContents-lineContents" id="4001"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4002" onclick="window.location.hash='#4002'"></td><td class="FileContents-lineContents" id="4002"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">GetCompressionCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4003" onclick="window.location.hash='#4003'"></td><td class="FileContents-lineContents" id="4003"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> compression_entries_end_ </span><span class="pun">-</span><span class="pln"> compression_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4004" onclick="window.location.hash='#4004'"></td><td class="FileContents-lineContents" id="4004"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4005" onclick="window.location.hash='#4005'"></td><td class="FileContents-lineContents" id="4005"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4006" onclick="window.location.hash='#4006'"></td><td class="FileContents-lineContents" id="4006"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4007" onclick="window.location.hash='#4007'"></td><td class="FileContents-lineContents" id="4007"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4008" onclick="window.location.hash='#4008'"></td><td class="FileContents-lineContents" id="4008"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4009" onclick="window.location.hash='#4009'"></td><td class="FileContents-lineContents" id="4009"><span class="kwd">const</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ContentEncryption</span><span class="pun">*</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">GetEncryptionByIndex</span><span class="pun">(</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4010" onclick="window.location.hash='#4010'"></td><td class="FileContents-lineContents" id="4010"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4011" onclick="window.location.hash='#4011'"></td><td class="FileContents-lineContents" id="4011"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> encryption_entries_end_ </span><span class="pun">-</span><span class="pln"> encryption_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4012" onclick="window.location.hash='#4012'"></td><td class="FileContents-lineContents" id="4012"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4013" onclick="window.location.hash='#4013'"></td><td class="FileContents-lineContents" id="4013"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4014" onclick="window.location.hash='#4014'"></td><td class="FileContents-lineContents" id="4014"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4015" onclick="window.location.hash='#4015'"></td><td class="FileContents-lineContents" id="4015"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4016" onclick="window.location.hash='#4016'"></td><td class="FileContents-lineContents" id="4016"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4017" onclick="window.location.hash='#4017'"></td><td class="FileContents-lineContents" id="4017"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> encryption_entries_</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4018" onclick="window.location.hash='#4018'"></td><td class="FileContents-lineContents" id="4018"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4019" onclick="window.location.hash='#4019'"></td><td class="FileContents-lineContents" id="4019"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4020" onclick="window.location.hash='#4020'"></td><td class="FileContents-lineContents" id="4020"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">GetEncryptionCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4021" onclick="window.location.hash='#4021'"></td><td class="FileContents-lineContents" id="4021"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> encryption_entries_end_ </span><span class="pun">-</span><span class="pln"> encryption_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4022" onclick="window.location.hash='#4022'"></td><td class="FileContents-lineContents" id="4022"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4023" onclick="window.location.hash='#4023'"></td><td class="FileContents-lineContents" id="4023"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4024" onclick="window.location.hash='#4024'"></td><td class="FileContents-lineContents" id="4024"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4025" onclick="window.location.hash='#4025'"></td><td class="FileContents-lineContents" id="4025"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4026" onclick="window.location.hash='#4026'"></td><td class="FileContents-lineContents" id="4026"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4027" onclick="window.location.hash='#4027'"></td><td class="FileContents-lineContents" id="4027"><span class="kwd">long</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ParseContentEncAESSettingsEntry</span><span class="pun">(</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4028" onclick="window.location.hash='#4028'"></td><td class="FileContents-lineContents" id="4028"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4029" onclick="window.location.hash='#4029'"></td><td class="FileContents-lineContents" id="4029"><span class="pln">    </span><span class="typ">ContentEncAESSettings</span><span class="pun">*</span><span class="pln"> aes</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4030" onclick="window.location.hash='#4030'"></td><td class="FileContents-lineContents" id="4030"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4031" onclick="window.location.hash='#4031'"></td><td class="FileContents-lineContents" id="4031"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">aes</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4032" onclick="window.location.hash='#4032'"></td><td class="FileContents-lineContents" id="4032"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4033" onclick="window.location.hash='#4033'"></td><td class="FileContents-lineContents" id="4033"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4034" onclick="window.location.hash='#4034'"></td><td class="FileContents-lineContents" id="4034"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4035" onclick="window.location.hash='#4035'"></td><td class="FileContents-lineContents" id="4035"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4036" onclick="window.location.hash='#4036'"></td><td class="FileContents-lineContents" id="4036"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4037" onclick="window.location.hash='#4037'"></td><td class="FileContents-lineContents" id="4037"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4038" onclick="window.location.hash='#4038'"></td><td class="FileContents-lineContents" id="4038"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4039" onclick="window.location.hash='#4039'"></td><td class="FileContents-lineContents" id="4039"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4040" onclick="window.location.hash='#4040'"></td><td class="FileContents-lineContents" id="4040"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4041" onclick="window.location.hash='#4041'"></td><td class="FileContents-lineContents" id="4041"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4042" onclick="window.location.hash='#4042'"></td><td class="FileContents-lineContents" id="4042"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4043" onclick="window.location.hash='#4043'"></td><td class="FileContents-lineContents" id="4043"><span class="pln">      </span><span class="com">// AESSettingsCipherMode</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4044" onclick="window.location.hash='#4044'"></td><td class="FileContents-lineContents" id="4044"><span class="pln">      aes</span><span class="pun">-&gt;</span><span class="pln">cipher_mode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4045" onclick="window.location.hash='#4045'"></td><td class="FileContents-lineContents" id="4045"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">aes</span><span class="pun">-&gt;</span><span class="pln">cipher_mode </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4046" onclick="window.location.hash='#4046'"></td><td class="FileContents-lineContents" id="4046"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4047" onclick="window.location.hash='#4047'"></td><td class="FileContents-lineContents" id="4047"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4048" onclick="window.location.hash='#4048'"></td><td class="FileContents-lineContents" id="4048"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4049" onclick="window.location.hash='#4049'"></td><td class="FileContents-lineContents" id="4049"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4050" onclick="window.location.hash='#4050'"></td><td class="FileContents-lineContents" id="4050"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4051" onclick="window.location.hash='#4051'"></td><td class="FileContents-lineContents" id="4051"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4052" onclick="window.location.hash='#4052'"></td><td class="FileContents-lineContents" id="4052"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4053" onclick="window.location.hash='#4053'"></td><td class="FileContents-lineContents" id="4053"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4054" onclick="window.location.hash='#4054'"></td><td class="FileContents-lineContents" id="4054"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4055" onclick="window.location.hash='#4055'"></td><td class="FileContents-lineContents" id="4055"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4056" onclick="window.location.hash='#4056'"></td><td class="FileContents-lineContents" id="4056"><span class="kwd">long</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ParseContentEncodingEntry</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4057" onclick="window.location.hash='#4057'"></td><td class="FileContents-lineContents" id="4057"><span class="pln">                                                </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4058" onclick="window.location.hash='#4058'"></td><td class="FileContents-lineContents" id="4058"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4059" onclick="window.location.hash='#4059'"></td><td class="FileContents-lineContents" id="4059"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4060" onclick="window.location.hash='#4060'"></td><td class="FileContents-lineContents" id="4060"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4061" onclick="window.location.hash='#4061'"></td><td class="FileContents-lineContents" id="4061"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4062" onclick="window.location.hash='#4062'"></td><td class="FileContents-lineContents" id="4062"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4063" onclick="window.location.hash='#4063'"></td><td class="FileContents-lineContents" id="4063"><span class="pln">  </span><span class="com">// Count ContentCompression and ContentEncryption elements.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4064" onclick="window.location.hash='#4064'"></td><td class="FileContents-lineContents" id="4064"><span class="pln">  </span><span class="typ">int</span><span class="pln"> compression_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4065" onclick="window.location.hash='#4065'"></td><td class="FileContents-lineContents" id="4065"><span class="pln">  </span><span class="typ">int</span><span class="pln"> encryption_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4066" onclick="window.location.hash='#4066'"></td><td class="FileContents-lineContents" id="4066"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4067" onclick="window.location.hash='#4067'"></td><td class="FileContents-lineContents" id="4067"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4068" onclick="window.location.hash='#4068'"></td><td class="FileContents-lineContents" id="4068"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4069" onclick="window.location.hash='#4069'"></td><td class="FileContents-lineContents" id="4069"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4070" onclick="window.location.hash='#4070'"></td><td class="FileContents-lineContents" id="4070"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4071" onclick="window.location.hash='#4071'"></td><td class="FileContents-lineContents" id="4071"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4072" onclick="window.location.hash='#4072'"></td><td class="FileContents-lineContents" id="4072"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4073" onclick="window.location.hash='#4073'"></td><td class="FileContents-lineContents" id="4073"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1034</span><span class="pun">)</span><span class="pln">  </span><span class="com">// ContentCompression ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4074" onclick="window.location.hash='#4074'"></td><td class="FileContents-lineContents" id="4074"><span class="pln">      </span><span class="pun">++</span><span class="pln">compression_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4075" onclick="window.location.hash='#4075'"></td><td class="FileContents-lineContents" id="4075"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4076" onclick="window.location.hash='#4076'"></td><td class="FileContents-lineContents" id="4076"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1035</span><span class="pun">)</span><span class="pln">  </span><span class="com">// ContentEncryption ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4077" onclick="window.location.hash='#4077'"></td><td class="FileContents-lineContents" id="4077"><span class="pln">      </span><span class="pun">++</span><span class="pln">encryption_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4078" onclick="window.location.hash='#4078'"></td><td class="FileContents-lineContents" id="4078"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4079" onclick="window.location.hash='#4079'"></td><td class="FileContents-lineContents" id="4079"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4080" onclick="window.location.hash='#4080'"></td><td class="FileContents-lineContents" id="4080"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4081" onclick="window.location.hash='#4081'"></td><td class="FileContents-lineContents" id="4081"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4082" onclick="window.location.hash='#4082'"></td><td class="FileContents-lineContents" id="4082"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4083" onclick="window.location.hash='#4083'"></td><td class="FileContents-lineContents" id="4083"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">compression_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> encryption_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4084" onclick="window.location.hash='#4084'"></td><td class="FileContents-lineContents" id="4084"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4085" onclick="window.location.hash='#4085'"></td><td class="FileContents-lineContents" id="4085"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4086" onclick="window.location.hash='#4086'"></td><td class="FileContents-lineContents" id="4086"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">compression_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4087" onclick="window.location.hash='#4087'"></td><td class="FileContents-lineContents" id="4087"><span class="pln">    compression_entries_ </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4088" onclick="window.location.hash='#4088'"></td><td class="FileContents-lineContents" id="4088"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ContentCompression</span><span class="pun">*[</span><span class="pln">compression_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4089" onclick="window.location.hash='#4089'"></td><td class="FileContents-lineContents" id="4089"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">compression_entries_</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4090" onclick="window.location.hash='#4090'"></td><td class="FileContents-lineContents" id="4090"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4091" onclick="window.location.hash='#4091'"></td><td class="FileContents-lineContents" id="4091"><span class="pln">    compression_entries_end_ </span><span class="pun">=</span><span class="pln"> compression_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4092" onclick="window.location.hash='#4092'"></td><td class="FileContents-lineContents" id="4092"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4093" onclick="window.location.hash='#4093'"></td><td class="FileContents-lineContents" id="4093"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4094" onclick="window.location.hash='#4094'"></td><td class="FileContents-lineContents" id="4094"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">encryption_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4095" onclick="window.location.hash='#4095'"></td><td class="FileContents-lineContents" id="4095"><span class="pln">    encryption_entries_ </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4096" onclick="window.location.hash='#4096'"></td><td class="FileContents-lineContents" id="4096"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ContentEncryption</span><span class="pun">*[</span><span class="pln">encryption_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4097" onclick="window.location.hash='#4097'"></td><td class="FileContents-lineContents" id="4097"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">encryption_entries_</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4098" onclick="window.location.hash='#4098'"></td><td class="FileContents-lineContents" id="4098"><span class="pln">      </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> compression_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4099" onclick="window.location.hash='#4099'"></td><td class="FileContents-lineContents" id="4099"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4100" onclick="window.location.hash='#4100'"></td><td class="FileContents-lineContents" id="4100"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4101" onclick="window.location.hash='#4101'"></td><td class="FileContents-lineContents" id="4101"><span class="pln">    encryption_entries_end_ </span><span class="pun">=</span><span class="pln"> encryption_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4102" onclick="window.location.hash='#4102'"></td><td class="FileContents-lineContents" id="4102"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4103" onclick="window.location.hash='#4103'"></td><td class="FileContents-lineContents" id="4103"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4104" onclick="window.location.hash='#4104'"></td><td class="FileContents-lineContents" id="4104"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4105" onclick="window.location.hash='#4105'"></td><td class="FileContents-lineContents" id="4105"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4106" onclick="window.location.hash='#4106'"></td><td class="FileContents-lineContents" id="4106"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4107" onclick="window.location.hash='#4107'"></td><td class="FileContents-lineContents" id="4107"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4108" onclick="window.location.hash='#4108'"></td><td class="FileContents-lineContents" id="4108"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4109" onclick="window.location.hash='#4109'"></td><td class="FileContents-lineContents" id="4109"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4110" onclick="window.location.hash='#4110'"></td><td class="FileContents-lineContents" id="4110"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4111" onclick="window.location.hash='#4111'"></td><td class="FileContents-lineContents" id="4111"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1031</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4112" onclick="window.location.hash='#4112'"></td><td class="FileContents-lineContents" id="4112"><span class="pln">      </span><span class="com">// ContentEncodingOrder</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4113" onclick="window.location.hash='#4113'"></td><td class="FileContents-lineContents" id="4113"><span class="pln">      encoding_order_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4114" onclick="window.location.hash='#4114'"></td><td class="FileContents-lineContents" id="4114"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1032</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4115" onclick="window.location.hash='#4115'"></td><td class="FileContents-lineContents" id="4115"><span class="pln">      </span><span class="com">// ContentEncodingScope</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4116" onclick="window.location.hash='#4116'"></td><td class="FileContents-lineContents" id="4116"><span class="pln">      encoding_scope_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4117" onclick="window.location.hash='#4117'"></td><td class="FileContents-lineContents" id="4117"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">encoding_scope_ </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4118" onclick="window.location.hash='#4118'"></td><td class="FileContents-lineContents" id="4118"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4119" onclick="window.location.hash='#4119'"></td><td class="FileContents-lineContents" id="4119"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1033</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4120" onclick="window.location.hash='#4120'"></td><td class="FileContents-lineContents" id="4120"><span class="pln">      </span><span class="com">// ContentEncodingType</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4121" onclick="window.location.hash='#4121'"></td><td class="FileContents-lineContents" id="4121"><span class="pln">      encoding_type_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4122" onclick="window.location.hash='#4122'"></td><td class="FileContents-lineContents" id="4122"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1034</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4123" onclick="window.location.hash='#4123'"></td><td class="FileContents-lineContents" id="4123"><span class="pln">      </span><span class="com">// ContentCompression ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4124" onclick="window.location.hash='#4124'"></td><td class="FileContents-lineContents" id="4124"><span class="pln">      </span><span class="typ">ContentCompression</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> compression </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4125" onclick="window.location.hash='#4125'"></td><td class="FileContents-lineContents" id="4125"><span class="pln">          </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ContentCompression</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4126" onclick="window.location.hash='#4126'"></td><td class="FileContents-lineContents" id="4126"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">compression</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4127" onclick="window.location.hash='#4127'"></td><td class="FileContents-lineContents" id="4127"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4128" onclick="window.location.hash='#4128'"></td><td class="FileContents-lineContents" id="4128"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4129" onclick="window.location.hash='#4129'"></td><td class="FileContents-lineContents" id="4129"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseCompressionEntry</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> compression</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4130" onclick="window.location.hash='#4130'"></td><td class="FileContents-lineContents" id="4130"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4131" onclick="window.location.hash='#4131'"></td><td class="FileContents-lineContents" id="4131"><span class="pln">        </span><span class="kwd">delete</span><span class="pln"> compression</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4132" onclick="window.location.hash='#4132'"></td><td class="FileContents-lineContents" id="4132"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4133" onclick="window.location.hash='#4133'"></td><td class="FileContents-lineContents" id="4133"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4134" onclick="window.location.hash='#4134'"></td><td class="FileContents-lineContents" id="4134"><span class="pln">      </span><span class="pun">*</span><span class="pln">compression_entries_end_</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> compression</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4135" onclick="window.location.hash='#4135'"></td><td class="FileContents-lineContents" id="4135"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1035</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4136" onclick="window.location.hash='#4136'"></td><td class="FileContents-lineContents" id="4136"><span class="pln">      </span><span class="com">// ContentEncryption ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4137" onclick="window.location.hash='#4137'"></td><td class="FileContents-lineContents" id="4137"><span class="pln">      </span><span class="typ">ContentEncryption</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> encryption </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4138" onclick="window.location.hash='#4138'"></td><td class="FileContents-lineContents" id="4138"><span class="pln">          </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ContentEncryption</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4139" onclick="window.location.hash='#4139'"></td><td class="FileContents-lineContents" id="4139"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">encryption</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4140" onclick="window.location.hash='#4140'"></td><td class="FileContents-lineContents" id="4140"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4141" onclick="window.location.hash='#4141'"></td><td class="FileContents-lineContents" id="4141"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4142" onclick="window.location.hash='#4142'"></td><td class="FileContents-lineContents" id="4142"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseEncryptionEntry</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> encryption</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4143" onclick="window.location.hash='#4143'"></td><td class="FileContents-lineContents" id="4143"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4144" onclick="window.location.hash='#4144'"></td><td class="FileContents-lineContents" id="4144"><span class="pln">        </span><span class="kwd">delete</span><span class="pln"> encryption</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4145" onclick="window.location.hash='#4145'"></td><td class="FileContents-lineContents" id="4145"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4146" onclick="window.location.hash='#4146'"></td><td class="FileContents-lineContents" id="4146"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4147" onclick="window.location.hash='#4147'"></td><td class="FileContents-lineContents" id="4147"><span class="pln">      </span><span class="pun">*</span><span class="pln">encryption_entries_end_</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> encryption</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4148" onclick="window.location.hash='#4148'"></td><td class="FileContents-lineContents" id="4148"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4149" onclick="window.location.hash='#4149'"></td><td class="FileContents-lineContents" id="4149"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4150" onclick="window.location.hash='#4150'"></td><td class="FileContents-lineContents" id="4150"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4151" onclick="window.location.hash='#4151'"></td><td class="FileContents-lineContents" id="4151"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4152" onclick="window.location.hash='#4152'"></td><td class="FileContents-lineContents" id="4152"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4153" onclick="window.location.hash='#4153'"></td><td class="FileContents-lineContents" id="4153"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4154" onclick="window.location.hash='#4154'"></td><td class="FileContents-lineContents" id="4154"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4155" onclick="window.location.hash='#4155'"></td><td class="FileContents-lineContents" id="4155"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4156" onclick="window.location.hash='#4156'"></td><td class="FileContents-lineContents" id="4156"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4157" onclick="window.location.hash='#4157'"></td><td class="FileContents-lineContents" id="4157"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4158" onclick="window.location.hash='#4158'"></td><td class="FileContents-lineContents" id="4158"><span class="kwd">long</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ParseCompressionEntry</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4159" onclick="window.location.hash='#4159'"></td><td class="FileContents-lineContents" id="4159"><span class="pln">                                            </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4160" onclick="window.location.hash='#4160'"></td><td class="FileContents-lineContents" id="4160"><span class="pln">                                            </span><span class="typ">ContentCompression</span><span class="pun">*</span><span class="pln"> compression</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4161" onclick="window.location.hash='#4161'"></td><td class="FileContents-lineContents" id="4161"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4162" onclick="window.location.hash='#4162'"></td><td class="FileContents-lineContents" id="4162"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">compression</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4163" onclick="window.location.hash='#4163'"></td><td class="FileContents-lineContents" id="4163"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4164" onclick="window.location.hash='#4164'"></td><td class="FileContents-lineContents" id="4164"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4165" onclick="window.location.hash='#4165'"></td><td class="FileContents-lineContents" id="4165"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4166" onclick="window.location.hash='#4166'"></td><td class="FileContents-lineContents" id="4166"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4167" onclick="window.location.hash='#4167'"></td><td class="FileContents-lineContents" id="4167"><span class="pln">  </span><span class="kwd">bool</span><span class="pln"> valid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4168" onclick="window.location.hash='#4168'"></td><td class="FileContents-lineContents" id="4168"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4169" onclick="window.location.hash='#4169'"></td><td class="FileContents-lineContents" id="4169"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4170" onclick="window.location.hash='#4170'"></td><td class="FileContents-lineContents" id="4170"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4171" onclick="window.location.hash='#4171'"></td><td class="FileContents-lineContents" id="4171"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4172" onclick="window.location.hash='#4172'"></td><td class="FileContents-lineContents" id="4172"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4173" onclick="window.location.hash='#4173'"></td><td class="FileContents-lineContents" id="4173"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4174" onclick="window.location.hash='#4174'"></td><td class="FileContents-lineContents" id="4174"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4175" onclick="window.location.hash='#4175'"></td><td class="FileContents-lineContents" id="4175"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x254</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4176" onclick="window.location.hash='#4176'"></td><td class="FileContents-lineContents" id="4176"><span class="pln">      </span><span class="com">// ContentCompAlgo</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4177" onclick="window.location.hash='#4177'"></td><td class="FileContents-lineContents" id="4177"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> algo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4178" onclick="window.location.hash='#4178'"></td><td class="FileContents-lineContents" id="4178"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">algo </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4179" onclick="window.location.hash='#4179'"></td><td class="FileContents-lineContents" id="4179"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4180" onclick="window.location.hash='#4180'"></td><td class="FileContents-lineContents" id="4180"><span class="pln">      compression</span><span class="pun">-&gt;</span><span class="pln">algo </span><span class="pun">=</span><span class="pln"> algo</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4181" onclick="window.location.hash='#4181'"></td><td class="FileContents-lineContents" id="4181"><span class="pln">      valid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4182" onclick="window.location.hash='#4182'"></td><td class="FileContents-lineContents" id="4182"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x255</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4183" onclick="window.location.hash='#4183'"></td><td class="FileContents-lineContents" id="4183"><span class="pln">      </span><span class="com">// ContentCompSettings</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4184" onclick="window.location.hash='#4184'"></td><td class="FileContents-lineContents" id="4184"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4185" onclick="window.location.hash='#4185'"></td><td class="FileContents-lineContents" id="4185"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4186" onclick="window.location.hash='#4186'"></td><td class="FileContents-lineContents" id="4186"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4187" onclick="window.location.hash='#4187'"></td><td class="FileContents-lineContents" id="4187"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">size_t</span><span class="pln"> buflen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;size_t&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4188" onclick="window.location.hash='#4188'"></td><td class="FileContents-lineContents" id="4188"><span class="pln">      </span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4189" onclick="window.location.hash='#4189'"></td><td class="FileContents-lineContents" id="4189"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">buflen</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4190" onclick="window.location.hash='#4190'"></td><td class="FileContents-lineContents" id="4190"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buf </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4191" onclick="window.location.hash='#4191'"></td><td class="FileContents-lineContents" id="4191"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4192" onclick="window.location.hash='#4192'"></td><td class="FileContents-lineContents" id="4192"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4193" onclick="window.location.hash='#4193'"></td><td class="FileContents-lineContents" id="4193"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> read_status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4194" onclick="window.location.hash='#4194'"></td><td class="FileContents-lineContents" id="4194"><span class="pln">          pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">buflen</span><span class="pun">),</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4195" onclick="window.location.hash='#4195'"></td><td class="FileContents-lineContents" id="4195"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">read_status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4196" onclick="window.location.hash='#4196'"></td><td class="FileContents-lineContents" id="4196"><span class="pln">        </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4197" onclick="window.location.hash='#4197'"></td><td class="FileContents-lineContents" id="4197"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4198" onclick="window.location.hash='#4198'"></td><td class="FileContents-lineContents" id="4198"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4199" onclick="window.location.hash='#4199'"></td><td class="FileContents-lineContents" id="4199"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4200" onclick="window.location.hash='#4200'"></td><td class="FileContents-lineContents" id="4200"><span class="pln">      compression</span><span class="pun">-&gt;</span><span class="pln">settings </span><span class="pun">=</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4201" onclick="window.location.hash='#4201'"></td><td class="FileContents-lineContents" id="4201"><span class="pln">      compression</span><span class="pun">-&gt;</span><span class="pln">settings_len </span><span class="pun">=</span><span class="pln"> buflen</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4202" onclick="window.location.hash='#4202'"></td><td class="FileContents-lineContents" id="4202"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4203" onclick="window.location.hash='#4203'"></td><td class="FileContents-lineContents" id="4203"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4204" onclick="window.location.hash='#4204'"></td><td class="FileContents-lineContents" id="4204"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4205" onclick="window.location.hash='#4205'"></td><td class="FileContents-lineContents" id="4205"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4206" onclick="window.location.hash='#4206'"></td><td class="FileContents-lineContents" id="4206"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4207" onclick="window.location.hash='#4207'"></td><td class="FileContents-lineContents" id="4207"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4208" onclick="window.location.hash='#4208'"></td><td class="FileContents-lineContents" id="4208"><span class="pln">  </span><span class="com">// ContentCompAlgo is mandatory</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4209" onclick="window.location.hash='#4209'"></td><td class="FileContents-lineContents" id="4209"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">valid</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4210" onclick="window.location.hash='#4210'"></td><td class="FileContents-lineContents" id="4210"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4211" onclick="window.location.hash='#4211'"></td><td class="FileContents-lineContents" id="4211"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4212" onclick="window.location.hash='#4212'"></td><td class="FileContents-lineContents" id="4212"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4213" onclick="window.location.hash='#4213'"></td><td class="FileContents-lineContents" id="4213"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4214" onclick="window.location.hash='#4214'"></td><td class="FileContents-lineContents" id="4214"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4215" onclick="window.location.hash='#4215'"></td><td class="FileContents-lineContents" id="4215"><span class="kwd">long</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">::</span><span class="typ">ParseEncryptionEntry</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4216" onclick="window.location.hash='#4216'"></td><td class="FileContents-lineContents" id="4216"><span class="pln">                                           </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4217" onclick="window.location.hash='#4217'"></td><td class="FileContents-lineContents" id="4217"><span class="pln">                                           </span><span class="typ">ContentEncryption</span><span class="pun">*</span><span class="pln"> encryption</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4218" onclick="window.location.hash='#4218'"></td><td class="FileContents-lineContents" id="4218"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4219" onclick="window.location.hash='#4219'"></td><td class="FileContents-lineContents" id="4219"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">encryption</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4220" onclick="window.location.hash='#4220'"></td><td class="FileContents-lineContents" id="4220"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4221" onclick="window.location.hash='#4221'"></td><td class="FileContents-lineContents" id="4221"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4222" onclick="window.location.hash='#4222'"></td><td class="FileContents-lineContents" id="4222"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4223" onclick="window.location.hash='#4223'"></td><td class="FileContents-lineContents" id="4223"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4224" onclick="window.location.hash='#4224'"></td><td class="FileContents-lineContents" id="4224"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4225" onclick="window.location.hash='#4225'"></td><td class="FileContents-lineContents" id="4225"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4226" onclick="window.location.hash='#4226'"></td><td class="FileContents-lineContents" id="4226"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4227" onclick="window.location.hash='#4227'"></td><td class="FileContents-lineContents" id="4227"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4228" onclick="window.location.hash='#4228'"></td><td class="FileContents-lineContents" id="4228"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4229" onclick="window.location.hash='#4229'"></td><td class="FileContents-lineContents" id="4229"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4230" onclick="window.location.hash='#4230'"></td><td class="FileContents-lineContents" id="4230"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4231" onclick="window.location.hash='#4231'"></td><td class="FileContents-lineContents" id="4231"><span class="pln">      </span><span class="com">// ContentEncAlgo</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4232" onclick="window.location.hash='#4232'"></td><td class="FileContents-lineContents" id="4232"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">algo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4233" onclick="window.location.hash='#4233'"></td><td class="FileContents-lineContents" id="4233"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">encryption</span><span class="pun">-&gt;</span><span class="pln">algo </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4234" onclick="window.location.hash='#4234'"></td><td class="FileContents-lineContents" id="4234"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4235" onclick="window.location.hash='#4235'"></td><td class="FileContents-lineContents" id="4235"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4236" onclick="window.location.hash='#4236'"></td><td class="FileContents-lineContents" id="4236"><span class="pln">      </span><span class="com">// ContentEncKeyID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4237" onclick="window.location.hash='#4237'"></td><td class="FileContents-lineContents" id="4237"><span class="pln">      </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> encryption</span><span class="pun">-&gt;</span><span class="pln">key_id</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4238" onclick="window.location.hash='#4238'"></td><td class="FileContents-lineContents" id="4238"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">key_id </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4239" onclick="window.location.hash='#4239'"></td><td class="FileContents-lineContents" id="4239"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">key_id_len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4240" onclick="window.location.hash='#4240'"></td><td class="FileContents-lineContents" id="4240"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4241" onclick="window.location.hash='#4241'"></td><td class="FileContents-lineContents" id="4241"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4242" onclick="window.location.hash='#4242'"></td><td class="FileContents-lineContents" id="4242"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4243" onclick="window.location.hash='#4243'"></td><td class="FileContents-lineContents" id="4243"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4244" onclick="window.location.hash='#4244'"></td><td class="FileContents-lineContents" id="4244"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">size_t</span><span class="pln"> buflen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;size_t&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4245" onclick="window.location.hash='#4245'"></td><td class="FileContents-lineContents" id="4245"><span class="pln">      </span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4246" onclick="window.location.hash='#4246'"></td><td class="FileContents-lineContents" id="4246"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">buflen</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4247" onclick="window.location.hash='#4247'"></td><td class="FileContents-lineContents" id="4247"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buf </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4248" onclick="window.location.hash='#4248'"></td><td class="FileContents-lineContents" id="4248"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4249" onclick="window.location.hash='#4249'"></td><td class="FileContents-lineContents" id="4249"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4250" onclick="window.location.hash='#4250'"></td><td class="FileContents-lineContents" id="4250"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> read_status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4251" onclick="window.location.hash='#4251'"></td><td class="FileContents-lineContents" id="4251"><span class="pln">          pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">buflen</span><span class="pun">),</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4252" onclick="window.location.hash='#4252'"></td><td class="FileContents-lineContents" id="4252"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">read_status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4253" onclick="window.location.hash='#4253'"></td><td class="FileContents-lineContents" id="4253"><span class="pln">        </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4254" onclick="window.location.hash='#4254'"></td><td class="FileContents-lineContents" id="4254"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4255" onclick="window.location.hash='#4255'"></td><td class="FileContents-lineContents" id="4255"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4256" onclick="window.location.hash='#4256'"></td><td class="FileContents-lineContents" id="4256"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4257" onclick="window.location.hash='#4257'"></td><td class="FileContents-lineContents" id="4257"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">key_id </span><span class="pun">=</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4258" onclick="window.location.hash='#4258'"></td><td class="FileContents-lineContents" id="4258"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">key_id_len </span><span class="pun">=</span><span class="pln"> buflen</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4259" onclick="window.location.hash='#4259'"></td><td class="FileContents-lineContents" id="4259"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4260" onclick="window.location.hash='#4260'"></td><td class="FileContents-lineContents" id="4260"><span class="pln">      </span><span class="com">// ContentSignature</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4261" onclick="window.location.hash='#4261'"></td><td class="FileContents-lineContents" id="4261"><span class="pln">      </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> encryption</span><span class="pun">-&gt;</span><span class="pln">signature</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4262" onclick="window.location.hash='#4262'"></td><td class="FileContents-lineContents" id="4262"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">signature </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4263" onclick="window.location.hash='#4263'"></td><td class="FileContents-lineContents" id="4263"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">signature_len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4264" onclick="window.location.hash='#4264'"></td><td class="FileContents-lineContents" id="4264"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4265" onclick="window.location.hash='#4265'"></td><td class="FileContents-lineContents" id="4265"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4266" onclick="window.location.hash='#4266'"></td><td class="FileContents-lineContents" id="4266"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4267" onclick="window.location.hash='#4267'"></td><td class="FileContents-lineContents" id="4267"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4268" onclick="window.location.hash='#4268'"></td><td class="FileContents-lineContents" id="4268"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">size_t</span><span class="pln"> buflen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;size_t&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4269" onclick="window.location.hash='#4269'"></td><td class="FileContents-lineContents" id="4269"><span class="pln">      </span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4270" onclick="window.location.hash='#4270'"></td><td class="FileContents-lineContents" id="4270"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">buflen</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4271" onclick="window.location.hash='#4271'"></td><td class="FileContents-lineContents" id="4271"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buf </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4272" onclick="window.location.hash='#4272'"></td><td class="FileContents-lineContents" id="4272"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4273" onclick="window.location.hash='#4273'"></td><td class="FileContents-lineContents" id="4273"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4274" onclick="window.location.hash='#4274'"></td><td class="FileContents-lineContents" id="4274"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> read_status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4275" onclick="window.location.hash='#4275'"></td><td class="FileContents-lineContents" id="4275"><span class="pln">          pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">buflen</span><span class="pun">),</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4276" onclick="window.location.hash='#4276'"></td><td class="FileContents-lineContents" id="4276"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">read_status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4277" onclick="window.location.hash='#4277'"></td><td class="FileContents-lineContents" id="4277"><span class="pln">        </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4278" onclick="window.location.hash='#4278'"></td><td class="FileContents-lineContents" id="4278"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4279" onclick="window.location.hash='#4279'"></td><td class="FileContents-lineContents" id="4279"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4280" onclick="window.location.hash='#4280'"></td><td class="FileContents-lineContents" id="4280"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4281" onclick="window.location.hash='#4281'"></td><td class="FileContents-lineContents" id="4281"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">signature </span><span class="pun">=</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4282" onclick="window.location.hash='#4282'"></td><td class="FileContents-lineContents" id="4282"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">signature_len </span><span class="pun">=</span><span class="pln"> buflen</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4283" onclick="window.location.hash='#4283'"></td><td class="FileContents-lineContents" id="4283"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4284" onclick="window.location.hash='#4284'"></td><td class="FileContents-lineContents" id="4284"><span class="pln">      </span><span class="com">// ContentSigKeyID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4285" onclick="window.location.hash='#4285'"></td><td class="FileContents-lineContents" id="4285"><span class="pln">      </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> encryption</span><span class="pun">-&gt;</span><span class="pln">sig_key_id</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4286" onclick="window.location.hash='#4286'"></td><td class="FileContents-lineContents" id="4286"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">sig_key_id </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4287" onclick="window.location.hash='#4287'"></td><td class="FileContents-lineContents" id="4287"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">sig_key_id_len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4288" onclick="window.location.hash='#4288'"></td><td class="FileContents-lineContents" id="4288"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4289" onclick="window.location.hash='#4289'"></td><td class="FileContents-lineContents" id="4289"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4290" onclick="window.location.hash='#4290'"></td><td class="FileContents-lineContents" id="4290"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4291" onclick="window.location.hash='#4291'"></td><td class="FileContents-lineContents" id="4291"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4292" onclick="window.location.hash='#4292'"></td><td class="FileContents-lineContents" id="4292"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">size_t</span><span class="pln"> buflen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;size_t&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4293" onclick="window.location.hash='#4293'"></td><td class="FileContents-lineContents" id="4293"><span class="pln">      </span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4294" onclick="window.location.hash='#4294'"></td><td class="FileContents-lineContents" id="4294"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">buflen</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4295" onclick="window.location.hash='#4295'"></td><td class="FileContents-lineContents" id="4295"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buf </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4296" onclick="window.location.hash='#4296'"></td><td class="FileContents-lineContents" id="4296"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4297" onclick="window.location.hash='#4297'"></td><td class="FileContents-lineContents" id="4297"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4298" onclick="window.location.hash='#4298'"></td><td class="FileContents-lineContents" id="4298"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> read_status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4299" onclick="window.location.hash='#4299'"></td><td class="FileContents-lineContents" id="4299"><span class="pln">          pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">buflen</span><span class="pun">),</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4300" onclick="window.location.hash='#4300'"></td><td class="FileContents-lineContents" id="4300"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">read_status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4301" onclick="window.location.hash='#4301'"></td><td class="FileContents-lineContents" id="4301"><span class="pln">        </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4302" onclick="window.location.hash='#4302'"></td><td class="FileContents-lineContents" id="4302"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4303" onclick="window.location.hash='#4303'"></td><td class="FileContents-lineContents" id="4303"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4304" onclick="window.location.hash='#4304'"></td><td class="FileContents-lineContents" id="4304"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4305" onclick="window.location.hash='#4305'"></td><td class="FileContents-lineContents" id="4305"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">sig_key_id </span><span class="pun">=</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4306" onclick="window.location.hash='#4306'"></td><td class="FileContents-lineContents" id="4306"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">sig_key_id_len </span><span class="pun">=</span><span class="pln"> buflen</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4307" onclick="window.location.hash='#4307'"></td><td class="FileContents-lineContents" id="4307"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E5</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4308" onclick="window.location.hash='#4308'"></td><td class="FileContents-lineContents" id="4308"><span class="pln">      </span><span class="com">// ContentSigAlgo</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4309" onclick="window.location.hash='#4309'"></td><td class="FileContents-lineContents" id="4309"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">sig_algo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4310" onclick="window.location.hash='#4310'"></td><td class="FileContents-lineContents" id="4310"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E6</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4311" onclick="window.location.hash='#4311'"></td><td class="FileContents-lineContents" id="4311"><span class="pln">      </span><span class="com">// ContentSigHashAlgo</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4312" onclick="window.location.hash='#4312'"></td><td class="FileContents-lineContents" id="4312"><span class="pln">      encryption</span><span class="pun">-&gt;</span><span class="pln">sig_hash_algo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4313" onclick="window.location.hash='#4313'"></td><td class="FileContents-lineContents" id="4313"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7E7</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4314" onclick="window.location.hash='#4314'"></td><td class="FileContents-lineContents" id="4314"><span class="pln">      </span><span class="com">// ContentEncAESSettings</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4315" onclick="window.location.hash='#4315'"></td><td class="FileContents-lineContents" id="4315"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseContentEncAESSettingsEntry</span><span class="pun">(</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4316" onclick="window.location.hash='#4316'"></td><td class="FileContents-lineContents" id="4316"><span class="pln">          pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">encryption</span><span class="pun">-&gt;</span><span class="pln">aes_settings</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4317" onclick="window.location.hash='#4317'"></td><td class="FileContents-lineContents" id="4317"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4318" onclick="window.location.hash='#4318'"></td><td class="FileContents-lineContents" id="4318"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4319" onclick="window.location.hash='#4319'"></td><td class="FileContents-lineContents" id="4319"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4320" onclick="window.location.hash='#4320'"></td><td class="FileContents-lineContents" id="4320"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4321" onclick="window.location.hash='#4321'"></td><td class="FileContents-lineContents" id="4321"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4322" onclick="window.location.hash='#4322'"></td><td class="FileContents-lineContents" id="4322"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4323" onclick="window.location.hash='#4323'"></td><td class="FileContents-lineContents" id="4323"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4324" onclick="window.location.hash='#4324'"></td><td class="FileContents-lineContents" id="4324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4325" onclick="window.location.hash='#4325'"></td><td class="FileContents-lineContents" id="4325"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4326" onclick="window.location.hash='#4326'"></td><td class="FileContents-lineContents" id="4326"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4327" onclick="window.location.hash='#4327'"></td><td class="FileContents-lineContents" id="4327"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4328" onclick="window.location.hash='#4328'"></td><td class="FileContents-lineContents" id="4328"><span class="typ">Track</span><span class="pun">::</span><span class="typ">Track</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4329" onclick="window.location.hash='#4329'"></td><td class="FileContents-lineContents" id="4329"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4330" onclick="window.location.hash='#4330'"></td><td class="FileContents-lineContents" id="4330"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4331" onclick="window.location.hash='#4331'"></td><td class="FileContents-lineContents" id="4331"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4332" onclick="window.location.hash='#4332'"></td><td class="FileContents-lineContents" id="4332"><span class="pln">      content_encoding_entries_</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4333" onclick="window.location.hash='#4333'"></td><td class="FileContents-lineContents" id="4333"><span class="pln">      content_encoding_entries_end_</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4334" onclick="window.location.hash='#4334'"></td><td class="FileContents-lineContents" id="4334"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4335" onclick="window.location.hash='#4335'"></td><td class="FileContents-lineContents" id="4335"><span class="typ">Track</span><span class="pun">::~</span><span class="typ">Track</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4336" onclick="window.location.hash='#4336'"></td><td class="FileContents-lineContents" id="4336"><span class="pln">  </span><span class="typ">Info</span><span class="pun">&amp;</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">const_cast</span><span class="pun">&lt;</span><span class="typ">Info</span><span class="pun">&amp;&gt;(</span><span class="pln">m_info</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4337" onclick="window.location.hash='#4337'"></td><td class="FileContents-lineContents" id="4337"><span class="pln">  info</span><span class="pun">.</span><span class="typ">Clear</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4338" onclick="window.location.hash='#4338'"></td><td class="FileContents-lineContents" id="4338"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4339" onclick="window.location.hash='#4339'"></td><td class="FileContents-lineContents" id="4339"><span class="pln">  </span><span class="typ">ContentEncoding</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> content_encoding_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4340" onclick="window.location.hash='#4340'"></td><td class="FileContents-lineContents" id="4340"><span class="pln">  </span><span class="typ">ContentEncoding</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> content_encoding_entries_end_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4341" onclick="window.location.hash='#4341'"></td><td class="FileContents-lineContents" id="4341"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4342" onclick="window.location.hash='#4342'"></td><td class="FileContents-lineContents" id="4342"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4343" onclick="window.location.hash='#4343'"></td><td class="FileContents-lineContents" id="4343"><span class="pln">    </span><span class="typ">ContentEncoding</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> encoding </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4344" onclick="window.location.hash='#4344'"></td><td class="FileContents-lineContents" id="4344"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> encoding</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4345" onclick="window.location.hash='#4345'"></td><td class="FileContents-lineContents" id="4345"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4346" onclick="window.location.hash='#4346'"></td><td class="FileContents-lineContents" id="4346"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4347" onclick="window.location.hash='#4347'"></td><td class="FileContents-lineContents" id="4347"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> content_encoding_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4348" onclick="window.location.hash='#4348'"></td><td class="FileContents-lineContents" id="4348"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4349" onclick="window.location.hash='#4349'"></td><td class="FileContents-lineContents" id="4349"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4350" onclick="window.location.hash='#4350'"></td><td class="FileContents-lineContents" id="4350"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Info</span><span class="pun">&amp;</span><span class="pln"> info</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4351" onclick="window.location.hash='#4351'"></td><td class="FileContents-lineContents" id="4351"><span class="pln">                   </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4352" onclick="window.location.hash='#4352'"></td><td class="FileContents-lineContents" id="4352"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4353" onclick="window.location.hash='#4353'"></td><td class="FileContents-lineContents" id="4353"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4354" onclick="window.location.hash='#4354'"></td><td class="FileContents-lineContents" id="4354"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4355" onclick="window.location.hash='#4355'"></td><td class="FileContents-lineContents" id="4355"><span class="pln">  </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTrack </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4356" onclick="window.location.hash='#4356'"></td><td class="FileContents-lineContents" id="4356"><span class="pln">      </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4357" onclick="window.location.hash='#4357'"></td><td class="FileContents-lineContents" id="4357"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4358" onclick="window.location.hash='#4358'"></td><td class="FileContents-lineContents" id="4358"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4359" onclick="window.location.hash='#4359'"></td><td class="FileContents-lineContents" id="4359"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4360" onclick="window.location.hash='#4360'"></td><td class="FileContents-lineContents" id="4360"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4361" onclick="window.location.hash='#4361'"></td><td class="FileContents-lineContents" id="4361"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> info</span><span class="pun">.</span><span class="typ">Copy</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">-&gt;</span><span class="pln">m_info</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4362" onclick="window.location.hash='#4362'"></td><td class="FileContents-lineContents" id="4362"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4363" onclick="window.location.hash='#4363'"></td><td class="FileContents-lineContents" id="4363"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4364" onclick="window.location.hash='#4364'"></td><td class="FileContents-lineContents" id="4364"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4365" onclick="window.location.hash='#4365'"></td><td class="FileContents-lineContents" id="4365"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4366" onclick="window.location.hash='#4366'"></td><td class="FileContents-lineContents" id="4366"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4367" onclick="window.location.hash='#4367'"></td><td class="FileContents-lineContents" id="4367"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4368" onclick="window.location.hash='#4368'"></td><td class="FileContents-lineContents" id="4368"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4369" onclick="window.location.hash='#4369'"></td><td class="FileContents-lineContents" id="4369"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4370" onclick="window.location.hash='#4370'"></td><td class="FileContents-lineContents" id="4370"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4371" onclick="window.location.hash='#4371'"></td><td class="FileContents-lineContents" id="4371"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4372" onclick="window.location.hash='#4372'"></td><td class="FileContents-lineContents" id="4372"><span class="typ">Track</span><span class="pun">::</span><span class="typ">Info</span><span class="pun">::</span><span class="typ">Info</span><span class="pun">()</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4373" onclick="window.location.hash='#4373'"></td><td class="FileContents-lineContents" id="4373"><span class="pln">    </span><span class="pun">:</span><span class="pln"> uid</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4374" onclick="window.location.hash='#4374'"></td><td class="FileContents-lineContents" id="4374"><span class="pln">      defaultDuration</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4375" onclick="window.location.hash='#4375'"></td><td class="FileContents-lineContents" id="4375"><span class="pln">      codecDelay</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4376" onclick="window.location.hash='#4376'"></td><td class="FileContents-lineContents" id="4376"><span class="pln">      seekPreRoll</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4377" onclick="window.location.hash='#4377'"></td><td class="FileContents-lineContents" id="4377"><span class="pln">      nameAsUTF8</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4378" onclick="window.location.hash='#4378'"></td><td class="FileContents-lineContents" id="4378"><span class="pln">      language</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4379" onclick="window.location.hash='#4379'"></td><td class="FileContents-lineContents" id="4379"><span class="pln">      codecId</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4380" onclick="window.location.hash='#4380'"></td><td class="FileContents-lineContents" id="4380"><span class="pln">      codecNameAsUTF8</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4381" onclick="window.location.hash='#4381'"></td><td class="FileContents-lineContents" id="4381"><span class="pln">      codecPrivate</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4382" onclick="window.location.hash='#4382'"></td><td class="FileContents-lineContents" id="4382"><span class="pln">      codecPrivateSize</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4383" onclick="window.location.hash='#4383'"></td><td class="FileContents-lineContents" id="4383"><span class="pln">      lacing</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4384" onclick="window.location.hash='#4384'"></td><td class="FileContents-lineContents" id="4384"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4385" onclick="window.location.hash='#4385'"></td><td class="FileContents-lineContents" id="4385"><span class="typ">Track</span><span class="pun">::</span><span class="typ">Info</span><span class="pun">::~</span><span class="typ">Info</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Clear</span><span class="pun">();</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4386" onclick="window.location.hash='#4386'"></td><td class="FileContents-lineContents" id="4386"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4387" onclick="window.location.hash='#4387'"></td><td class="FileContents-lineContents" id="4387"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Info</span><span class="pun">::</span><span class="typ">Clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4388" onclick="window.location.hash='#4388'"></td><td class="FileContents-lineContents" id="4388"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> nameAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4389" onclick="window.location.hash='#4389'"></td><td class="FileContents-lineContents" id="4389"><span class="pln">  nameAsUTF8 </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4390" onclick="window.location.hash='#4390'"></td><td class="FileContents-lineContents" id="4390"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4391" onclick="window.location.hash='#4391'"></td><td class="FileContents-lineContents" id="4391"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> language</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4392" onclick="window.location.hash='#4392'"></td><td class="FileContents-lineContents" id="4392"><span class="pln">  language </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4393" onclick="window.location.hash='#4393'"></td><td class="FileContents-lineContents" id="4393"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4394" onclick="window.location.hash='#4394'"></td><td class="FileContents-lineContents" id="4394"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> codecId</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4395" onclick="window.location.hash='#4395'"></td><td class="FileContents-lineContents" id="4395"><span class="pln">  codecId </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4396" onclick="window.location.hash='#4396'"></td><td class="FileContents-lineContents" id="4396"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4397" onclick="window.location.hash='#4397'"></td><td class="FileContents-lineContents" id="4397"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> codecPrivate</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4398" onclick="window.location.hash='#4398'"></td><td class="FileContents-lineContents" id="4398"><span class="pln">  codecPrivate </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4399" onclick="window.location.hash='#4399'"></td><td class="FileContents-lineContents" id="4399"><span class="pln">  codecPrivateSize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4400" onclick="window.location.hash='#4400'"></td><td class="FileContents-lineContents" id="4400"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4401" onclick="window.location.hash='#4401'"></td><td class="FileContents-lineContents" id="4401"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> codecNameAsUTF8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4402" onclick="window.location.hash='#4402'"></td><td class="FileContents-lineContents" id="4402"><span class="pln">  codecNameAsUTF8 </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4403" onclick="window.location.hash='#4403'"></td><td class="FileContents-lineContents" id="4403"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4404" onclick="window.location.hash='#4404'"></td><td class="FileContents-lineContents" id="4404"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4405" onclick="window.location.hash='#4405'"></td><td class="FileContents-lineContents" id="4405"><span class="typ">int</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Info</span><span class="pun">::</span><span class="typ">CopyStr</span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Info</span><span class="pun">::*</span><span class="pln">str</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Info</span><span class="pun">&amp;</span><span class="pln"> dst_</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4406" onclick="window.location.hash='#4406'"></td><td class="FileContents-lineContents" id="4406"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">str </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="typ">Info</span><span class="pun">::*&gt;(</span><span class="pln">NULL</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4407" onclick="window.location.hash='#4407'"></td><td class="FileContents-lineContents" id="4407"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4408" onclick="window.location.hash='#4408'"></td><td class="FileContents-lineContents" id="4408"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4409" onclick="window.location.hash='#4409'"></td><td class="FileContents-lineContents" id="4409"><span class="pln">  </span><span class="kwd">char</span><span class="pun">*&amp;</span><span class="pln"> dst </span><span class="pun">=</span><span class="pln"> dst_</span><span class="pun">.*</span><span class="pln">str</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4410" onclick="window.location.hash='#4410'"></td><td class="FileContents-lineContents" id="4410"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4411" onclick="window.location.hash='#4411'"></td><td class="FileContents-lineContents" id="4411"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dst</span><span class="pun">)</span><span class="pln">  </span><span class="com">// should be NULL already</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4412" onclick="window.location.hash='#4412'"></td><td class="FileContents-lineContents" id="4412"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4413" onclick="window.location.hash='#4413'"></td><td class="FileContents-lineContents" id="4413"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4414" onclick="window.location.hash='#4414'"></td><td class="FileContents-lineContents" id="4414"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> src </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;*</span><span class="pln">str</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4415" onclick="window.location.hash='#4415'"></td><td class="FileContents-lineContents" id="4415"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4416" onclick="window.location.hash='#4416'"></td><td class="FileContents-lineContents" id="4416"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">src </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4417" onclick="window.location.hash='#4417'"></td><td class="FileContents-lineContents" id="4417"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4418" onclick="window.location.hash='#4418'"></td><td class="FileContents-lineContents" id="4418"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4419" onclick="window.location.hash='#4419'"></td><td class="FileContents-lineContents" id="4419"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">size_t</span><span class="pln"> len </span><span class="pun">=</span><span class="pln"> strlen</span><span class="pun">(</span><span class="pln">src</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4420" onclick="window.location.hash='#4420'"></td><td class="FileContents-lineContents" id="4420"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4421" onclick="window.location.hash='#4421'"></td><td class="FileContents-lineContents" id="4421"><span class="pln">  dst </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">len </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4422" onclick="window.location.hash='#4422'"></td><td class="FileContents-lineContents" id="4422"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4423" onclick="window.location.hash='#4423'"></td><td class="FileContents-lineContents" id="4423"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dst </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4424" onclick="window.location.hash='#4424'"></td><td class="FileContents-lineContents" id="4424"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4425" onclick="window.location.hash='#4425'"></td><td class="FileContents-lineContents" id="4425"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4426" onclick="window.location.hash='#4426'"></td><td class="FileContents-lineContents" id="4426"><span class="pln">  strcpy</span><span class="pun">(</span><span class="pln">dst</span><span class="pun">,</span><span class="pln"> src</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4427" onclick="window.location.hash='#4427'"></td><td class="FileContents-lineContents" id="4427"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4428" onclick="window.location.hash='#4428'"></td><td class="FileContents-lineContents" id="4428"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4429" onclick="window.location.hash='#4429'"></td><td class="FileContents-lineContents" id="4429"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4430" onclick="window.location.hash='#4430'"></td><td class="FileContents-lineContents" id="4430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4431" onclick="window.location.hash='#4431'"></td><td class="FileContents-lineContents" id="4431"><span class="typ">int</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Info</span><span class="pun">::</span><span class="typ">Copy</span><span class="pun">(</span><span class="typ">Info</span><span class="pun">&amp;</span><span class="pln"> dst</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4432" onclick="window.location.hash='#4432'"></td><td class="FileContents-lineContents" id="4432"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(&amp;</span><span class="pln">dst </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4433" onclick="window.location.hash='#4433'"></td><td class="FileContents-lineContents" id="4433"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4434" onclick="window.location.hash='#4434'"></td><td class="FileContents-lineContents" id="4434"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4435" onclick="window.location.hash='#4435'"></td><td class="FileContents-lineContents" id="4435"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> type</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4436" onclick="window.location.hash='#4436'"></td><td class="FileContents-lineContents" id="4436"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">number </span><span class="pun">=</span><span class="pln"> number</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4437" onclick="window.location.hash='#4437'"></td><td class="FileContents-lineContents" id="4437"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">defaultDuration </span><span class="pun">=</span><span class="pln"> defaultDuration</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4438" onclick="window.location.hash='#4438'"></td><td class="FileContents-lineContents" id="4438"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">codecDelay </span><span class="pun">=</span><span class="pln"> codecDelay</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4439" onclick="window.location.hash='#4439'"></td><td class="FileContents-lineContents" id="4439"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">seekPreRoll </span><span class="pun">=</span><span class="pln"> seekPreRoll</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4440" onclick="window.location.hash='#4440'"></td><td class="FileContents-lineContents" id="4440"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">uid </span><span class="pun">=</span><span class="pln"> uid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4441" onclick="window.location.hash='#4441'"></td><td class="FileContents-lineContents" id="4441"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">lacing </span><span class="pun">=</span><span class="pln"> lacing</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4442" onclick="window.location.hash='#4442'"></td><td class="FileContents-lineContents" id="4442"><span class="pln">  dst</span><span class="pun">.</span><span class="pln">settings </span><span class="pun">=</span><span class="pln"> settings</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4443" onclick="window.location.hash='#4443'"></td><td class="FileContents-lineContents" id="4443"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4444" onclick="window.location.hash='#4444'"></td><td class="FileContents-lineContents" id="4444"><span class="pln">  </span><span class="com">// We now copy the string member variables from src to dst.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4445" onclick="window.location.hash='#4445'"></td><td class="FileContents-lineContents" id="4445"><span class="pln">  </span><span class="com">// This involves memory allocation so in principle the operation</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4446" onclick="window.location.hash='#4446'"></td><td class="FileContents-lineContents" id="4446"><span class="pln">  </span><span class="com">// can fail (indeed, that&#39;s why we have Info::Copy), so we must</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4447" onclick="window.location.hash='#4447'"></td><td class="FileContents-lineContents" id="4447"><span class="pln">  </span><span class="com">// report this to the caller.  An error return from this function</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4448" onclick="window.location.hash='#4448'"></td><td class="FileContents-lineContents" id="4448"><span class="pln">  </span><span class="com">// therefore implies that the copy was only partially successful.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4449" onclick="window.location.hash='#4449'"></td><td class="FileContents-lineContents" id="4449"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4450" onclick="window.location.hash='#4450'"></td><td class="FileContents-lineContents" id="4450"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CopyStr</span><span class="pun">(&amp;</span><span class="typ">Info</span><span class="pun">::</span><span class="pln">nameAsUTF8</span><span class="pun">,</span><span class="pln"> dst</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4451" onclick="window.location.hash='#4451'"></td><td class="FileContents-lineContents" id="4451"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4452" onclick="window.location.hash='#4452'"></td><td class="FileContents-lineContents" id="4452"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4453" onclick="window.location.hash='#4453'"></td><td class="FileContents-lineContents" id="4453"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CopyStr</span><span class="pun">(&amp;</span><span class="typ">Info</span><span class="pun">::</span><span class="pln">language</span><span class="pun">,</span><span class="pln"> dst</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4454" onclick="window.location.hash='#4454'"></td><td class="FileContents-lineContents" id="4454"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4455" onclick="window.location.hash='#4455'"></td><td class="FileContents-lineContents" id="4455"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4456" onclick="window.location.hash='#4456'"></td><td class="FileContents-lineContents" id="4456"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CopyStr</span><span class="pun">(&amp;</span><span class="typ">Info</span><span class="pun">::</span><span class="pln">codecId</span><span class="pun">,</span><span class="pln"> dst</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4457" onclick="window.location.hash='#4457'"></td><td class="FileContents-lineContents" id="4457"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4458" onclick="window.location.hash='#4458'"></td><td class="FileContents-lineContents" id="4458"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4459" onclick="window.location.hash='#4459'"></td><td class="FileContents-lineContents" id="4459"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CopyStr</span><span class="pun">(&amp;</span><span class="typ">Info</span><span class="pun">::</span><span class="pln">codecNameAsUTF8</span><span class="pun">,</span><span class="pln"> dst</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4460" onclick="window.location.hash='#4460'"></td><td class="FileContents-lineContents" id="4460"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4461" onclick="window.location.hash='#4461'"></td><td class="FileContents-lineContents" id="4461"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4462" onclick="window.location.hash='#4462'"></td><td class="FileContents-lineContents" id="4462"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">codecPrivateSize </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4463" onclick="window.location.hash='#4463'"></td><td class="FileContents-lineContents" id="4463"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">codecPrivate </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4464" onclick="window.location.hash='#4464'"></td><td class="FileContents-lineContents" id="4464"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4465" onclick="window.location.hash='#4465'"></td><td class="FileContents-lineContents" id="4465"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4466" onclick="window.location.hash='#4466'"></td><td class="FileContents-lineContents" id="4466"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dst</span><span class="pun">.</span><span class="pln">codecPrivate</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4467" onclick="window.location.hash='#4467'"></td><td class="FileContents-lineContents" id="4467"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4468" onclick="window.location.hash='#4468'"></td><td class="FileContents-lineContents" id="4468"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4469" onclick="window.location.hash='#4469'"></td><td class="FileContents-lineContents" id="4469"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dst</span><span class="pun">.</span><span class="pln">codecPrivateSize </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4470" onclick="window.location.hash='#4470'"></td><td class="FileContents-lineContents" id="4470"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4471" onclick="window.location.hash='#4471'"></td><td class="FileContents-lineContents" id="4471"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4472" onclick="window.location.hash='#4472'"></td><td class="FileContents-lineContents" id="4472"><span class="pln">    dst</span><span class="pun">.</span><span class="pln">codecPrivate </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">codecPrivateSize</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4473" onclick="window.location.hash='#4473'"></td><td class="FileContents-lineContents" id="4473"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4474" onclick="window.location.hash='#4474'"></td><td class="FileContents-lineContents" id="4474"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dst</span><span class="pun">.</span><span class="pln">codecPrivate </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4475" onclick="window.location.hash='#4475'"></td><td class="FileContents-lineContents" id="4475"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4476" onclick="window.location.hash='#4476'"></td><td class="FileContents-lineContents" id="4476"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4477" onclick="window.location.hash='#4477'"></td><td class="FileContents-lineContents" id="4477"><span class="pln">    memcpy</span><span class="pun">(</span><span class="pln">dst</span><span class="pun">.</span><span class="pln">codecPrivate</span><span class="pun">,</span><span class="pln"> codecPrivate</span><span class="pun">,</span><span class="pln"> codecPrivateSize</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4478" onclick="window.location.hash='#4478'"></td><td class="FileContents-lineContents" id="4478"><span class="pln">    dst</span><span class="pun">.</span><span class="pln">codecPrivateSize </span><span class="pun">=</span><span class="pln"> codecPrivateSize</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4479" onclick="window.location.hash='#4479'"></td><td class="FileContents-lineContents" id="4479"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4480" onclick="window.location.hash='#4480'"></td><td class="FileContents-lineContents" id="4480"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4481" onclick="window.location.hash='#4481'"></td><td class="FileContents-lineContents" id="4481"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4482" onclick="window.location.hash='#4482'"></td><td class="FileContents-lineContents" id="4482"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4483" onclick="window.location.hash='#4483'"></td><td class="FileContents-lineContents" id="4483"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4484" onclick="window.location.hash='#4484'"></td><td class="FileContents-lineContents" id="4484"><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetEOS</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_eos</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4485" onclick="window.location.hash='#4485'"></td><td class="FileContents-lineContents" id="4485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4486" onclick="window.location.hash='#4486'"></td><td class="FileContents-lineContents" id="4486"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetType</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">type</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4487" onclick="window.location.hash='#4487'"></td><td class="FileContents-lineContents" id="4487"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4488" onclick="window.location.hash='#4488'"></td><td class="FileContents-lineContents" id="4488"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetNumber</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4489" onclick="window.location.hash='#4489'"></td><td class="FileContents-lineContents" id="4489"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4490" onclick="window.location.hash='#4490'"></td><td class="FileContents-lineContents" id="4490"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetUid</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4491" onclick="window.location.hash='#4491'"></td><td class="FileContents-lineContents" id="4491"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4492" onclick="window.location.hash='#4492'"></td><td class="FileContents-lineContents" id="4492"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetNameAsUTF8</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">nameAsUTF8</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4493" onclick="window.location.hash='#4493'"></td><td class="FileContents-lineContents" id="4493"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4494" onclick="window.location.hash='#4494'"></td><td class="FileContents-lineContents" id="4494"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetLanguage</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">language</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4495" onclick="window.location.hash='#4495'"></td><td class="FileContents-lineContents" id="4495"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4496" onclick="window.location.hash='#4496'"></td><td class="FileContents-lineContents" id="4496"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetCodecNameAsUTF8</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">codecNameAsUTF8</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4497" onclick="window.location.hash='#4497'"></td><td class="FileContents-lineContents" id="4497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4498" onclick="window.location.hash='#4498'"></td><td class="FileContents-lineContents" id="4498"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetCodecId</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">codecId</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4499" onclick="window.location.hash='#4499'"></td><td class="FileContents-lineContents" id="4499"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4500" onclick="window.location.hash='#4500'"></td><td class="FileContents-lineContents" id="4500"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetCodecPrivate</span><span class="pun">(</span><span class="typ">size_t</span><span class="pun">&amp;</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4501" onclick="window.location.hash='#4501'"></td><td class="FileContents-lineContents" id="4501"><span class="pln">  size </span><span class="pun">=</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">codecPrivateSize</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4502" onclick="window.location.hash='#4502'"></td><td class="FileContents-lineContents" id="4502"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">codecPrivate</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4503" onclick="window.location.hash='#4503'"></td><td class="FileContents-lineContents" id="4503"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4504" onclick="window.location.hash='#4504'"></td><td class="FileContents-lineContents" id="4504"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4505" onclick="window.location.hash='#4505'"></td><td class="FileContents-lineContents" id="4505"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetLacing</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">lacing</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4506" onclick="window.location.hash='#4506'"></td><td class="FileContents-lineContents" id="4506"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4507" onclick="window.location.hash='#4507'"></td><td class="FileContents-lineContents" id="4507"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetDefaultDuration</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4508" onclick="window.location.hash='#4508'"></td><td class="FileContents-lineContents" id="4508"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">defaultDuration</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4509" onclick="window.location.hash='#4509'"></td><td class="FileContents-lineContents" id="4509"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4510" onclick="window.location.hash='#4510'"></td><td class="FileContents-lineContents" id="4510"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4511" onclick="window.location.hash='#4511'"></td><td class="FileContents-lineContents" id="4511"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetCodecDelay</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">codecDelay</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4512" onclick="window.location.hash='#4512'"></td><td class="FileContents-lineContents" id="4512"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4513" onclick="window.location.hash='#4513'"></td><td class="FileContents-lineContents" id="4513"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetSeekPreRoll</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">seekPreRoll</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4514" onclick="window.location.hash='#4514'"></td><td class="FileContents-lineContents" id="4514"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4515" onclick="window.location.hash='#4515'"></td><td class="FileContents-lineContents" id="4515"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetFirst</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pBlockEntry</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4516" onclick="window.location.hash='#4516'"></td><td class="FileContents-lineContents" id="4516"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetFirst</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4517" onclick="window.location.hash='#4517'"></td><td class="FileContents-lineContents" id="4517"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4518" onclick="window.location.hash='#4518'"></td><td class="FileContents-lineContents" id="4518"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4519" onclick="window.location.hash='#4519'"></td><td class="FileContents-lineContents" id="4519"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4520" onclick="window.location.hash='#4520'"></td><td class="FileContents-lineContents" id="4520"><span class="pln">      pBlockEntry </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4521" onclick="window.location.hash='#4521'"></td><td class="FileContents-lineContents" id="4521"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4522" onclick="window.location.hash='#4522'"></td><td class="FileContents-lineContents" id="4522"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4523" onclick="window.location.hash='#4523'"></td><td class="FileContents-lineContents" id="4523"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4524" onclick="window.location.hash='#4524'"></td><td class="FileContents-lineContents" id="4524"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4525" onclick="window.location.hash='#4525'"></td><td class="FileContents-lineContents" id="4525"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">-&gt;</span><span class="typ">DoneParsing</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4526" onclick="window.location.hash='#4526'"></td><td class="FileContents-lineContents" id="4526"><span class="pln">        pBlockEntry </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4527" onclick="window.location.hash='#4527'"></td><td class="FileContents-lineContents" id="4527"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4528" onclick="window.location.hash='#4528'"></td><td class="FileContents-lineContents" id="4528"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4529" onclick="window.location.hash='#4529'"></td><td class="FileContents-lineContents" id="4529"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4530" onclick="window.location.hash='#4530'"></td><td class="FileContents-lineContents" id="4530"><span class="pln">      pBlockEntry </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4531" onclick="window.location.hash='#4531'"></td><td class="FileContents-lineContents" id="4531"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4532" onclick="window.location.hash='#4532'"></td><td class="FileContents-lineContents" id="4532"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4533" onclick="window.location.hash='#4533'"></td><td class="FileContents-lineContents" id="4533"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4534" onclick="window.location.hash='#4534'"></td><td class="FileContents-lineContents" id="4534"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetFirst</span><span class="pun">(</span><span class="pln">pBlockEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4535" onclick="window.location.hash='#4535'"></td><td class="FileContents-lineContents" id="4535"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4536" onclick="window.location.hash='#4536'"></td><td class="FileContents-lineContents" id="4536"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4537" onclick="window.location.hash='#4537'"></td><td class="FileContents-lineContents" id="4537"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4538" onclick="window.location.hash='#4538'"></td><td class="FileContents-lineContents" id="4538"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4539" onclick="window.location.hash='#4539'"></td><td class="FileContents-lineContents" id="4539"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pBlockEntry </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// empty cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4540" onclick="window.location.hash='#4540'"></td><td class="FileContents-lineContents" id="4540"><span class="pln">      pCluster </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetNext</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4541" onclick="window.location.hash='#4541'"></td><td class="FileContents-lineContents" id="4541"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4542" onclick="window.location.hash='#4542'"></td><td class="FileContents-lineContents" id="4542"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4543" onclick="window.location.hash='#4543'"></td><td class="FileContents-lineContents" id="4543"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4544" onclick="window.location.hash='#4544'"></td><td class="FileContents-lineContents" id="4544"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4545" onclick="window.location.hash='#4545'"></td><td class="FileContents-lineContents" id="4545"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pBlockEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4546" onclick="window.location.hash='#4546'"></td><td class="FileContents-lineContents" id="4546"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4547" onclick="window.location.hash='#4547'"></td><td class="FileContents-lineContents" id="4547"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4548" onclick="window.location.hash='#4548'"></td><td class="FileContents-lineContents" id="4548"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tn </span><span class="pun">=</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4549" onclick="window.location.hash='#4549'"></td><td class="FileContents-lineContents" id="4549"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4550" onclick="window.location.hash='#4550'"></td><td class="FileContents-lineContents" id="4550"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">tn </span><span class="pun">==</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="typ">VetEntry</span><span class="pun">(</span><span class="pln">pBlockEntry</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4551" onclick="window.location.hash='#4551'"></td><td class="FileContents-lineContents" id="4551"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4552" onclick="window.location.hash='#4552'"></td><td class="FileContents-lineContents" id="4552"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4553" onclick="window.location.hash='#4553'"></td><td class="FileContents-lineContents" id="4553"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pNextEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4554" onclick="window.location.hash='#4554'"></td><td class="FileContents-lineContents" id="4554"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4555" onclick="window.location.hash='#4555'"></td><td class="FileContents-lineContents" id="4555"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetNext</span><span class="pun">(</span><span class="pln">pBlockEntry</span><span class="pun">,</span><span class="pln"> pNextEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4556" onclick="window.location.hash='#4556'"></td><td class="FileContents-lineContents" id="4556"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4557" onclick="window.location.hash='#4557'"></td><td class="FileContents-lineContents" id="4557"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4558" onclick="window.location.hash='#4558'"></td><td class="FileContents-lineContents" id="4558"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4559" onclick="window.location.hash='#4559'"></td><td class="FileContents-lineContents" id="4559"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4560" onclick="window.location.hash='#4560'"></td><td class="FileContents-lineContents" id="4560"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pNextEntry </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4561" onclick="window.location.hash='#4561'"></td><td class="FileContents-lineContents" id="4561"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4562" onclick="window.location.hash='#4562'"></td><td class="FileContents-lineContents" id="4562"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4563" onclick="window.location.hash='#4563'"></td><td class="FileContents-lineContents" id="4563"><span class="pln">      pBlockEntry </span><span class="pun">=</span><span class="pln"> pNextEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4564" onclick="window.location.hash='#4564'"></td><td class="FileContents-lineContents" id="4564"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4565" onclick="window.location.hash='#4565'"></td><td class="FileContents-lineContents" id="4565"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4566" onclick="window.location.hash='#4566'"></td><td class="FileContents-lineContents" id="4566"><span class="pln">    </span><span class="pun">++</span><span class="pln">i</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4567" onclick="window.location.hash='#4567'"></td><td class="FileContents-lineContents" id="4567"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4568" onclick="window.location.hash='#4568'"></td><td class="FileContents-lineContents" id="4568"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4569" onclick="window.location.hash='#4569'"></td><td class="FileContents-lineContents" id="4569"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4570" onclick="window.location.hash='#4570'"></td><td class="FileContents-lineContents" id="4570"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4571" onclick="window.location.hash='#4571'"></td><td class="FileContents-lineContents" id="4571"><span class="pln">    pCluster </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetNext</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4572" onclick="window.location.hash='#4572'"></td><td class="FileContents-lineContents" id="4572"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4573" onclick="window.location.hash='#4573'"></td><td class="FileContents-lineContents" id="4573"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4574" onclick="window.location.hash='#4574'"></td><td class="FileContents-lineContents" id="4574"><span class="pln">  </span><span class="com">// NOTE: if we get here, it means that we didn&#39;t find a block with</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4575" onclick="window.location.hash='#4575'"></td><td class="FileContents-lineContents" id="4575"><span class="pln">  </span><span class="com">// a matching track number.  We interpret that as an error (which</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4576" onclick="window.location.hash='#4576'"></td><td class="FileContents-lineContents" id="4576"><span class="pln">  </span><span class="com">// might be too conservative).</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4577" onclick="window.location.hash='#4577'"></td><td class="FileContents-lineContents" id="4577"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4578" onclick="window.location.hash='#4578'"></td><td class="FileContents-lineContents" id="4578"><span class="pln">  pBlockEntry </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span><span class="pln">  </span><span class="com">// so we can return a non-NULL value</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4579" onclick="window.location.hash='#4579'"></td><td class="FileContents-lineContents" id="4579"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4580" onclick="window.location.hash='#4580'"></td><td class="FileContents-lineContents" id="4580"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4581" onclick="window.location.hash='#4581'"></td><td class="FileContents-lineContents" id="4581"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4582" onclick="window.location.hash='#4582'"></td><td class="FileContents-lineContents" id="4582"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetNext</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pCurrEntry</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4583" onclick="window.location.hash='#4583'"></td><td class="FileContents-lineContents" id="4583"><span class="pln">                    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pNextEntry</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4584" onclick="window.location.hash='#4584'"></td><td class="FileContents-lineContents" id="4584"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurrEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4585" onclick="window.location.hash='#4585'"></td><td class="FileContents-lineContents" id="4585"><span class="pln">  assert</span><span class="pun">(!</span><span class="pln">pCurrEntry</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">());</span><span class="pln">  </span><span class="com">//?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4586" onclick="window.location.hash='#4586'"></td><td class="FileContents-lineContents" id="4586"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4587" onclick="window.location.hash='#4587'"></td><td class="FileContents-lineContents" id="4587"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCurrBlock </span><span class="pun">=</span><span class="pln"> pCurrEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4588" onclick="window.location.hash='#4588'"></td><td class="FileContents-lineContents" id="4588"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurrBlock </span><span class="pun">&amp;&amp;</span><span class="pln"> pCurrBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4589" onclick="window.location.hash='#4589'"></td><td class="FileContents-lineContents" id="4589"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">pCurrBlock </span><span class="pun">||</span><span class="pln"> pCurrBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4590" onclick="window.location.hash='#4590'"></td><td class="FileContents-lineContents" id="4590"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4591" onclick="window.location.hash='#4591'"></td><td class="FileContents-lineContents" id="4591"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4592" onclick="window.location.hash='#4592'"></td><td class="FileContents-lineContents" id="4592"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> pCurrEntry</span><span class="pun">-&gt;</span><span class="typ">GetCluster</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4593" onclick="window.location.hash='#4593'"></td><td class="FileContents-lineContents" id="4593"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4594" onclick="window.location.hash='#4594'"></td><td class="FileContents-lineContents" id="4594"><span class="pln">  assert</span><span class="pun">(!</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">());</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4595" onclick="window.location.hash='#4595'"></td><td class="FileContents-lineContents" id="4595"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4596" onclick="window.location.hash='#4596'"></td><td class="FileContents-lineContents" id="4596"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetNext</span><span class="pun">(</span><span class="pln">pCurrEntry</span><span class="pun">,</span><span class="pln"> pNextEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4597" onclick="window.location.hash='#4597'"></td><td class="FileContents-lineContents" id="4597"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4598" onclick="window.location.hash='#4598'"></td><td class="FileContents-lineContents" id="4598"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4599" onclick="window.location.hash='#4599'"></td><td class="FileContents-lineContents" id="4599"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4600" onclick="window.location.hash='#4600'"></td><td class="FileContents-lineContents" id="4600"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4601" onclick="window.location.hash='#4601'"></td><td class="FileContents-lineContents" id="4601"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4602" onclick="window.location.hash='#4602'"></td><td class="FileContents-lineContents" id="4602"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pNextEntry</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4603" onclick="window.location.hash='#4603'"></td><td class="FileContents-lineContents" id="4603"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pNextBlock </span><span class="pun">=</span><span class="pln"> pNextEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4604" onclick="window.location.hash='#4604'"></td><td class="FileContents-lineContents" id="4604"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pNextBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4605" onclick="window.location.hash='#4605'"></td><td class="FileContents-lineContents" id="4605"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4606" onclick="window.location.hash='#4606'"></td><td class="FileContents-lineContents" id="4606"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pNextBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4607" onclick="window.location.hash='#4607'"></td><td class="FileContents-lineContents" id="4607"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4608" onclick="window.location.hash='#4608'"></td><td class="FileContents-lineContents" id="4608"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4609" onclick="window.location.hash='#4609'"></td><td class="FileContents-lineContents" id="4609"><span class="pln">      pCurrEntry </span><span class="pun">=</span><span class="pln"> pNextEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4610" onclick="window.location.hash='#4610'"></td><td class="FileContents-lineContents" id="4610"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4611" onclick="window.location.hash='#4611'"></td><td class="FileContents-lineContents" id="4611"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetNext</span><span class="pun">(</span><span class="pln">pCurrEntry</span><span class="pun">,</span><span class="pln"> pNextEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4612" onclick="window.location.hash='#4612'"></td><td class="FileContents-lineContents" id="4612"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4613" onclick="window.location.hash='#4613'"></td><td class="FileContents-lineContents" id="4613"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4614" onclick="window.location.hash='#4614'"></td><td class="FileContents-lineContents" id="4614"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4615" onclick="window.location.hash='#4615'"></td><td class="FileContents-lineContents" id="4615"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4616" onclick="window.location.hash='#4616'"></td><td class="FileContents-lineContents" id="4616"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4617" onclick="window.location.hash='#4617'"></td><td class="FileContents-lineContents" id="4617"><span class="pln">    pCluster </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetNext</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4618" onclick="window.location.hash='#4618'"></td><td class="FileContents-lineContents" id="4618"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4619" onclick="window.location.hash='#4619'"></td><td class="FileContents-lineContents" id="4619"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4620" onclick="window.location.hash='#4620'"></td><td class="FileContents-lineContents" id="4620"><span class="pln">      pNextEntry </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4621" onclick="window.location.hash='#4621'"></td><td class="FileContents-lineContents" id="4621"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4622" onclick="window.location.hash='#4622'"></td><td class="FileContents-lineContents" id="4622"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4623" onclick="window.location.hash='#4623'"></td><td class="FileContents-lineContents" id="4623"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4624" onclick="window.location.hash='#4624'"></td><td class="FileContents-lineContents" id="4624"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4625" onclick="window.location.hash='#4625'"></td><td class="FileContents-lineContents" id="4625"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">-&gt;</span><span class="typ">DoneParsing</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4626" onclick="window.location.hash='#4626'"></td><td class="FileContents-lineContents" id="4626"><span class="pln">        pNextEntry </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4627" onclick="window.location.hash='#4627'"></td><td class="FileContents-lineContents" id="4627"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4628" onclick="window.location.hash='#4628'"></td><td class="FileContents-lineContents" id="4628"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4629" onclick="window.location.hash='#4629'"></td><td class="FileContents-lineContents" id="4629"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4630" onclick="window.location.hash='#4630'"></td><td class="FileContents-lineContents" id="4630"><span class="pln">      </span><span class="com">// TODO: there is a potential O(n^2) problem here: we tell the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4631" onclick="window.location.hash='#4631'"></td><td class="FileContents-lineContents" id="4631"><span class="pln">      </span><span class="com">// caller to (pre)load another cluster, which he does, but then he</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4632" onclick="window.location.hash='#4632'"></td><td class="FileContents-lineContents" id="4632"><span class="pln">      </span><span class="com">// calls GetNext again, which repeats the same search.  This is</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4633" onclick="window.location.hash='#4633'"></td><td class="FileContents-lineContents" id="4633"><span class="pln">      </span><span class="com">// a pathological case, since the only way it can happen is if</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4634" onclick="window.location.hash='#4634'"></td><td class="FileContents-lineContents" id="4634"><span class="pln">      </span><span class="com">// there exists a long sequence of clusters none of which contain a</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4635" onclick="window.location.hash='#4635'"></td><td class="FileContents-lineContents" id="4635"><span class="pln">      </span><span class="com">// block from this track.  One way around this problem is for the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4636" onclick="window.location.hash='#4636'"></td><td class="FileContents-lineContents" id="4636"><span class="pln">      </span><span class="com">// caller to be smarter when he loads another cluster: don&#39;t call</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4637" onclick="window.location.hash='#4637'"></td><td class="FileContents-lineContents" id="4637"><span class="pln">      </span><span class="com">// us back until you have a cluster that contains a block from this</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4638" onclick="window.location.hash='#4638'"></td><td class="FileContents-lineContents" id="4638"><span class="pln">      </span><span class="com">// track. (Of course, that&#39;s not cheap either, since our caller</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4639" onclick="window.location.hash='#4639'"></td><td class="FileContents-lineContents" id="4639"><span class="pln">      </span><span class="com">// would have to scan the each cluster as it&#39;s loaded, so that</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4640" onclick="window.location.hash='#4640'"></td><td class="FileContents-lineContents" id="4640"><span class="pln">      </span><span class="com">// would just push back the problem.)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4641" onclick="window.location.hash='#4641'"></td><td class="FileContents-lineContents" id="4641"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4642" onclick="window.location.hash='#4642'"></td><td class="FileContents-lineContents" id="4642"><span class="pln">      pNextEntry </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4643" onclick="window.location.hash='#4643'"></td><td class="FileContents-lineContents" id="4643"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4644" onclick="window.location.hash='#4644'"></td><td class="FileContents-lineContents" id="4644"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4645" onclick="window.location.hash='#4645'"></td><td class="FileContents-lineContents" id="4645"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4646" onclick="window.location.hash='#4646'"></td><td class="FileContents-lineContents" id="4646"><span class="pln">    status </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetFirst</span><span class="pun">(</span><span class="pln">pNextEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4647" onclick="window.location.hash='#4647'"></td><td class="FileContents-lineContents" id="4647"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4648" onclick="window.location.hash='#4648'"></td><td class="FileContents-lineContents" id="4648"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4649" onclick="window.location.hash='#4649'"></td><td class="FileContents-lineContents" id="4649"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4650" onclick="window.location.hash='#4650'"></td><td class="FileContents-lineContents" id="4650"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4651" onclick="window.location.hash='#4651'"></td><td class="FileContents-lineContents" id="4651"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pNextEntry </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">  </span><span class="com">// empty cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4652" onclick="window.location.hash='#4652'"></td><td class="FileContents-lineContents" id="4652"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4653" onclick="window.location.hash='#4653'"></td><td class="FileContents-lineContents" id="4653"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4654" onclick="window.location.hash='#4654'"></td><td class="FileContents-lineContents" id="4654"><span class="pln">    </span><span class="pun">++</span><span class="pln">i</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4655" onclick="window.location.hash='#4655'"></td><td class="FileContents-lineContents" id="4655"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4656" onclick="window.location.hash='#4656'"></td><td class="FileContents-lineContents" id="4656"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4657" onclick="window.location.hash='#4657'"></td><td class="FileContents-lineContents" id="4657"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4658" onclick="window.location.hash='#4658'"></td><td class="FileContents-lineContents" id="4658"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4659" onclick="window.location.hash='#4659'"></td><td class="FileContents-lineContents" id="4659"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4660" onclick="window.location.hash='#4660'"></td><td class="FileContents-lineContents" id="4660"><span class="pln">  </span><span class="com">// NOTE: if we get here, it means that we didn&#39;t find a block with</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4661" onclick="window.location.hash='#4661'"></td><td class="FileContents-lineContents" id="4661"><span class="pln">  </span><span class="com">// a matching track number after lots of searching, so we give</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4662" onclick="window.location.hash='#4662'"></td><td class="FileContents-lineContents" id="4662"><span class="pln">  </span><span class="com">// up trying.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4663" onclick="window.location.hash='#4663'"></td><td class="FileContents-lineContents" id="4663"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4664" onclick="window.location.hash='#4664'"></td><td class="FileContents-lineContents" id="4664"><span class="pln">  pNextEntry </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span><span class="pln">  </span><span class="com">// so we can return a non-NULL value</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4665" onclick="window.location.hash='#4665'"></td><td class="FileContents-lineContents" id="4665"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4666" onclick="window.location.hash='#4666'"></td><td class="FileContents-lineContents" id="4666"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4667" onclick="window.location.hash='#4667'"></td><td class="FileContents-lineContents" id="4667"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4668" onclick="window.location.hash='#4668'"></td><td class="FileContents-lineContents" id="4668"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">VetEntry</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pBlockEntry</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4669" onclick="window.location.hash='#4669'"></td><td class="FileContents-lineContents" id="4669"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pBlockEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4670" onclick="window.location.hash='#4670'"></td><td class="FileContents-lineContents" id="4670"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pBlockEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4671" onclick="window.location.hash='#4671'"></td><td class="FileContents-lineContents" id="4671"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4672" onclick="window.location.hash='#4672'"></td><td class="FileContents-lineContents" id="4672"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4673" onclick="window.location.hash='#4673'"></td><td class="FileContents-lineContents" id="4673"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">pBlock </span><span class="pun">||</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> m_info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4674" onclick="window.location.hash='#4674'"></td><td class="FileContents-lineContents" id="4674"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4675" onclick="window.location.hash='#4675'"></td><td class="FileContents-lineContents" id="4675"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4676" onclick="window.location.hash='#4676'"></td><td class="FileContents-lineContents" id="4676"><span class="pln">  </span><span class="com">// This function is used during a seek to determine whether the</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4677" onclick="window.location.hash='#4677'"></td><td class="FileContents-lineContents" id="4677"><span class="pln">  </span><span class="com">// frame is a valid seek target.  This default function simply</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4678" onclick="window.location.hash='#4678'"></td><td class="FileContents-lineContents" id="4678"><span class="pln">  </span><span class="com">// returns true, which means all frames are valid seek targets.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4679" onclick="window.location.hash='#4679'"></td><td class="FileContents-lineContents" id="4679"><span class="pln">  </span><span class="com">// It gets overridden by the VideoTrack class, because only video</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4680" onclick="window.location.hash='#4680'"></td><td class="FileContents-lineContents" id="4680"><span class="pln">  </span><span class="com">// keyframes can be used as seek target.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4681" onclick="window.location.hash='#4681'"></td><td class="FileContents-lineContents" id="4681"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4682" onclick="window.location.hash='#4682'"></td><td class="FileContents-lineContents" id="4682"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4683" onclick="window.location.hash='#4683'"></td><td class="FileContents-lineContents" id="4683"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4684" onclick="window.location.hash='#4684'"></td><td class="FileContents-lineContents" id="4684"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4685" onclick="window.location.hash='#4685'"></td><td class="FileContents-lineContents" id="4685"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Seek</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time_ns</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4686" onclick="window.location.hash='#4686'"></td><td class="FileContents-lineContents" id="4686"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetFirst</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4687" onclick="window.location.hash='#4687'"></td><td class="FileContents-lineContents" id="4687"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4688" onclick="window.location.hash='#4688'"></td><td class="FileContents-lineContents" id="4688"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// buffer underflow, etc</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4689" onclick="window.location.hash='#4689'"></td><td class="FileContents-lineContents" id="4689"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4690" onclick="window.location.hash='#4690'"></td><td class="FileContents-lineContents" id="4690"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4691" onclick="window.location.hash='#4691'"></td><td class="FileContents-lineContents" id="4691"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4692" onclick="window.location.hash='#4692'"></td><td class="FileContents-lineContents" id="4692"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4693" onclick="window.location.hash='#4693'"></td><td class="FileContents-lineContents" id="4693"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4694" onclick="window.location.hash='#4694'"></td><td class="FileContents-lineContents" id="4694"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4695" onclick="window.location.hash='#4695'"></td><td class="FileContents-lineContents" id="4695"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4696" onclick="window.location.hash='#4696'"></td><td class="FileContents-lineContents" id="4696"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> pResult</span><span class="pun">-&gt;</span><span class="typ">GetCluster</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4697" onclick="window.location.hash='#4697'"></td><td class="FileContents-lineContents" id="4697"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4698" onclick="window.location.hash='#4698'"></td><td class="FileContents-lineContents" id="4698"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4699" onclick="window.location.hash='#4699'"></td><td class="FileContents-lineContents" id="4699"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4700" onclick="window.location.hash='#4700'"></td><td class="FileContents-lineContents" id="4700"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&lt;=</span><span class="pln"> pResult</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">()-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4701" onclick="window.location.hash='#4701'"></td><td class="FileContents-lineContents" id="4701"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4702" onclick="window.location.hash='#4702'"></td><td class="FileContents-lineContents" id="4702"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4703" onclick="window.location.hash='#4703'"></td><td class="FileContents-lineContents" id="4703"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> clusters </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4704" onclick="window.location.hash='#4704'"></td><td class="FileContents-lineContents" id="4704"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4705" onclick="window.location.hash='#4705'"></td><td class="FileContents-lineContents" id="4705"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4706" onclick="window.location.hash='#4706'"></td><td class="FileContents-lineContents" id="4706"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetCount</span><span class="pun">();</span><span class="pln">  </span><span class="com">// loaded only, not preloaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4707" onclick="window.location.hash='#4707'"></td><td class="FileContents-lineContents" id="4707"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4708" onclick="window.location.hash='#4708'"></td><td class="FileContents-lineContents" id="4708"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4709" onclick="window.location.hash='#4709'"></td><td class="FileContents-lineContents" id="4709"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> clusters </span><span class="pun">+</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4710" onclick="window.location.hash='#4710'"></td><td class="FileContents-lineContents" id="4710"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4711" onclick="window.location.hash='#4711'"></td><td class="FileContents-lineContents" id="4711"><span class="pln">  assert</span><span class="pun">(*</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4712" onclick="window.location.hash='#4712'"></td><td class="FileContents-lineContents" id="4712"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4713" onclick="window.location.hash='#4713'"></td><td class="FileContents-lineContents" id="4713"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4714" onclick="window.location.hash='#4714'"></td><td class="FileContents-lineContents" id="4714"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> clusters </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4715" onclick="window.location.hash='#4715'"></td><td class="FileContents-lineContents" id="4715"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4716" onclick="window.location.hash='#4716'"></td><td class="FileContents-lineContents" id="4716"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> lo </span><span class="pun">=</span><span class="pln"> i</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4717" onclick="window.location.hash='#4717'"></td><td class="FileContents-lineContents" id="4717"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> hi </span><span class="pun">=</span><span class="pln"> j</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4718" onclick="window.location.hash='#4718'"></td><td class="FileContents-lineContents" id="4718"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4719" onclick="window.location.hash='#4719'"></td><td class="FileContents-lineContents" id="4719"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&lt;</span><span class="pln"> hi</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4720" onclick="window.location.hash='#4720'"></td><td class="FileContents-lineContents" id="4720"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4721" onclick="window.location.hash='#4721'"></td><td class="FileContents-lineContents" id="4721"><span class="pln">    </span><span class="com">//[i, lo) &lt;= time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4722" onclick="window.location.hash='#4722'"></td><td class="FileContents-lineContents" id="4722"><span class="pln">    </span><span class="com">//[lo, hi) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4723" onclick="window.location.hash='#4723'"></td><td class="FileContents-lineContents" id="4723"><span class="pln">    </span><span class="com">//[hi, j)  &gt; time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4724" onclick="window.location.hash='#4724'"></td><td class="FileContents-lineContents" id="4724"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4725" onclick="window.location.hash='#4725'"></td><td class="FileContents-lineContents" id="4725"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> lo </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">hi </span><span class="pun">-</span><span class="pln"> lo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4726" onclick="window.location.hash='#4726'"></td><td class="FileContents-lineContents" id="4726"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">mid </span><span class="pun">&lt;</span><span class="pln"> hi</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4727" onclick="window.location.hash='#4727'"></td><td class="FileContents-lineContents" id="4727"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4728" onclick="window.location.hash='#4728'"></td><td class="FileContents-lineContents" id="4728"><span class="pln">    pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">mid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4729" onclick="window.location.hash='#4729'"></td><td class="FileContents-lineContents" id="4729"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4730" onclick="window.location.hash='#4730'"></td><td class="FileContents-lineContents" id="4730"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4731" onclick="window.location.hash='#4731'"></td><td class="FileContents-lineContents" id="4731"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">(</span><span class="pln">mid </span><span class="pun">-</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_clusters</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4732" onclick="window.location.hash='#4732'"></td><td class="FileContents-lineContents" id="4732"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4733" onclick="window.location.hash='#4733'"></td><td class="FileContents-lineContents" id="4733"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4734" onclick="window.location.hash='#4734'"></td><td class="FileContents-lineContents" id="4734"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4735" onclick="window.location.hash='#4735'"></td><td class="FileContents-lineContents" id="4735"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4736" onclick="window.location.hash='#4736'"></td><td class="FileContents-lineContents" id="4736"><span class="pln">      lo </span><span class="pun">=</span><span class="pln"> mid </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4737" onclick="window.location.hash='#4737'"></td><td class="FileContents-lineContents" id="4737"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4738" onclick="window.location.hash='#4738'"></td><td class="FileContents-lineContents" id="4738"><span class="pln">      hi </span><span class="pun">=</span><span class="pln"> mid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4739" onclick="window.location.hash='#4739'"></td><td class="FileContents-lineContents" id="4739"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4740" onclick="window.location.hash='#4740'"></td><td class="FileContents-lineContents" id="4740"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&lt;=</span><span class="pln"> hi</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4741" onclick="window.location.hash='#4741'"></td><td class="FileContents-lineContents" id="4741"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4742" onclick="window.location.hash='#4742'"></td><td class="FileContents-lineContents" id="4742"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4743" onclick="window.location.hash='#4743'"></td><td class="FileContents-lineContents" id="4743"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">==</span><span class="pln"> hi</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4744" onclick="window.location.hash='#4744'"></td><td class="FileContents-lineContents" id="4744"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&gt;</span><span class="pln"> i</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4745" onclick="window.location.hash='#4745'"></td><td class="FileContents-lineContents" id="4745"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&lt;=</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4746" onclick="window.location.hash='#4746'"></td><td class="FileContents-lineContents" id="4746"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4747" onclick="window.location.hash='#4747'"></td><td class="FileContents-lineContents" id="4747"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&gt;</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4748" onclick="window.location.hash='#4748'"></td><td class="FileContents-lineContents" id="4748"><span class="pln">    pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*--</span><span class="pln">lo</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4749" onclick="window.location.hash='#4749'"></td><td class="FileContents-lineContents" id="4749"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4750" onclick="window.location.hash='#4750'"></td><td class="FileContents-lineContents" id="4750"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4751" onclick="window.location.hash='#4751'"></td><td class="FileContents-lineContents" id="4751"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4752" onclick="window.location.hash='#4752'"></td><td class="FileContents-lineContents" id="4752"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4753" onclick="window.location.hash='#4753'"></td><td class="FileContents-lineContents" id="4753"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4754" onclick="window.location.hash='#4754'"></td><td class="FileContents-lineContents" id="4754"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pResult </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">pResult</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4755" onclick="window.location.hash='#4755'"></td><td class="FileContents-lineContents" id="4755"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4756" onclick="window.location.hash='#4756'"></td><td class="FileContents-lineContents" id="4756"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4757" onclick="window.location.hash='#4757'"></td><td class="FileContents-lineContents" id="4757"><span class="pln">    </span><span class="com">// landed on empty cluster (no entries)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4758" onclick="window.location.hash='#4758'"></td><td class="FileContents-lineContents" id="4758"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4759" onclick="window.location.hash='#4759'"></td><td class="FileContents-lineContents" id="4759"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4760" onclick="window.location.hash='#4760'"></td><td class="FileContents-lineContents" id="4760"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4761" onclick="window.location.hash='#4761'"></td><td class="FileContents-lineContents" id="4761"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4762" onclick="window.location.hash='#4762'"></td><td class="FileContents-lineContents" id="4762"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4763" onclick="window.location.hash='#4763'"></td><td class="FileContents-lineContents" id="4763"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4764" onclick="window.location.hash='#4764'"></td><td class="FileContents-lineContents" id="4764"><span class="kwd">const</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetContentEncodingByIndex</span><span class="pun">(</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4765" onclick="window.location.hash='#4765'"></td><td class="FileContents-lineContents" id="4765"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4766" onclick="window.location.hash='#4766'"></td><td class="FileContents-lineContents" id="4766"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4767" onclick="window.location.hash='#4767'"></td><td class="FileContents-lineContents" id="4767"><span class="pln">      content_encoding_entries_end_ </span><span class="pun">-</span><span class="pln"> content_encoding_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4768" onclick="window.location.hash='#4768'"></td><td class="FileContents-lineContents" id="4768"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4769" onclick="window.location.hash='#4769'"></td><td class="FileContents-lineContents" id="4769"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4770" onclick="window.location.hash='#4770'"></td><td class="FileContents-lineContents" id="4770"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4771" onclick="window.location.hash='#4771'"></td><td class="FileContents-lineContents" id="4771"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4772" onclick="window.location.hash='#4772'"></td><td class="FileContents-lineContents" id="4772"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4773" onclick="window.location.hash='#4773'"></td><td class="FileContents-lineContents" id="4773"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> content_encoding_entries_</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4774" onclick="window.location.hash='#4774'"></td><td class="FileContents-lineContents" id="4774"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4775" onclick="window.location.hash='#4775'"></td><td class="FileContents-lineContents" id="4775"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4776" onclick="window.location.hash='#4776'"></td><td class="FileContents-lineContents" id="4776"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">GetContentEncodingCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4777" onclick="window.location.hash='#4777'"></td><td class="FileContents-lineContents" id="4777"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4778" onclick="window.location.hash='#4778'"></td><td class="FileContents-lineContents" id="4778"><span class="pln">      content_encoding_entries_end_ </span><span class="pun">-</span><span class="pln"> content_encoding_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4779" onclick="window.location.hash='#4779'"></td><td class="FileContents-lineContents" id="4779"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4780" onclick="window.location.hash='#4780'"></td><td class="FileContents-lineContents" id="4780"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4781" onclick="window.location.hash='#4781'"></td><td class="FileContents-lineContents" id="4781"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4782" onclick="window.location.hash='#4782'"></td><td class="FileContents-lineContents" id="4782"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4783" onclick="window.location.hash='#4783'"></td><td class="FileContents-lineContents" id="4783"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4784" onclick="window.location.hash='#4784'"></td><td class="FileContents-lineContents" id="4784"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">ParseContentEncodingsEntry</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4785" onclick="window.location.hash='#4785'"></td><td class="FileContents-lineContents" id="4785"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4786" onclick="window.location.hash='#4786'"></td><td class="FileContents-lineContents" id="4786"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4787" onclick="window.location.hash='#4787'"></td><td class="FileContents-lineContents" id="4787"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4788" onclick="window.location.hash='#4788'"></td><td class="FileContents-lineContents" id="4788"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4789" onclick="window.location.hash='#4789'"></td><td class="FileContents-lineContents" id="4789"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4790" onclick="window.location.hash='#4790'"></td><td class="FileContents-lineContents" id="4790"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4791" onclick="window.location.hash='#4791'"></td><td class="FileContents-lineContents" id="4791"><span class="pln">  </span><span class="com">// Count ContentEncoding elements.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4792" onclick="window.location.hash='#4792'"></td><td class="FileContents-lineContents" id="4792"><span class="pln">  </span><span class="typ">int</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4793" onclick="window.location.hash='#4793'"></td><td class="FileContents-lineContents" id="4793"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4794" onclick="window.location.hash='#4794'"></td><td class="FileContents-lineContents" id="4794"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4795" onclick="window.location.hash='#4795'"></td><td class="FileContents-lineContents" id="4795"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4796" onclick="window.location.hash='#4796'"></td><td class="FileContents-lineContents" id="4796"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4797" onclick="window.location.hash='#4797'"></td><td class="FileContents-lineContents" id="4797"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4798" onclick="window.location.hash='#4798'"></td><td class="FileContents-lineContents" id="4798"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4799" onclick="window.location.hash='#4799'"></td><td class="FileContents-lineContents" id="4799"><span class="pln">    </span><span class="com">// pos now designates start of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4800" onclick="window.location.hash='#4800'"></td><td class="FileContents-lineContents" id="4800"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x2240</span><span class="pun">)</span><span class="pln">  </span><span class="com">// ContentEncoding ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4801" onclick="window.location.hash='#4801'"></td><td class="FileContents-lineContents" id="4801"><span class="pln">      </span><span class="pun">++</span><span class="pln">count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4802" onclick="window.location.hash='#4802'"></td><td class="FileContents-lineContents" id="4802"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4803" onclick="window.location.hash='#4803'"></td><td class="FileContents-lineContents" id="4803"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4804" onclick="window.location.hash='#4804'"></td><td class="FileContents-lineContents" id="4804"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4805" onclick="window.location.hash='#4805'"></td><td class="FileContents-lineContents" id="4805"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4806" onclick="window.location.hash='#4806'"></td><td class="FileContents-lineContents" id="4806"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4807" onclick="window.location.hash='#4807'"></td><td class="FileContents-lineContents" id="4807"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4808" onclick="window.location.hash='#4808'"></td><td class="FileContents-lineContents" id="4808"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4809" onclick="window.location.hash='#4809'"></td><td class="FileContents-lineContents" id="4809"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4810" onclick="window.location.hash='#4810'"></td><td class="FileContents-lineContents" id="4810"><span class="pln">  content_encoding_entries_ </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">*[</span><span class="pln">count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4811" onclick="window.location.hash='#4811'"></td><td class="FileContents-lineContents" id="4811"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">content_encoding_entries_</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4812" onclick="window.location.hash='#4812'"></td><td class="FileContents-lineContents" id="4812"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4813" onclick="window.location.hash='#4813'"></td><td class="FileContents-lineContents" id="4813"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4814" onclick="window.location.hash='#4814'"></td><td class="FileContents-lineContents" id="4814"><span class="pln">  content_encoding_entries_end_ </span><span class="pun">=</span><span class="pln"> content_encoding_entries_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4815" onclick="window.location.hash='#4815'"></td><td class="FileContents-lineContents" id="4815"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4816" onclick="window.location.hash='#4816'"></td><td class="FileContents-lineContents" id="4816"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4817" onclick="window.location.hash='#4817'"></td><td class="FileContents-lineContents" id="4817"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4818" onclick="window.location.hash='#4818'"></td><td class="FileContents-lineContents" id="4818"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4819" onclick="window.location.hash='#4819'"></td><td class="FileContents-lineContents" id="4819"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4820" onclick="window.location.hash='#4820'"></td><td class="FileContents-lineContents" id="4820"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4821" onclick="window.location.hash='#4821'"></td><td class="FileContents-lineContents" id="4821"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4822" onclick="window.location.hash='#4822'"></td><td class="FileContents-lineContents" id="4822"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4823" onclick="window.location.hash='#4823'"></td><td class="FileContents-lineContents" id="4823"><span class="pln">    </span><span class="com">// pos now designates start of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4824" onclick="window.location.hash='#4824'"></td><td class="FileContents-lineContents" id="4824"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x2240</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// ContentEncoding ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4825" onclick="window.location.hash='#4825'"></td><td class="FileContents-lineContents" id="4825"><span class="pln">      </span><span class="typ">ContentEncoding</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> content_encoding </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4826" onclick="window.location.hash='#4826'"></td><td class="FileContents-lineContents" id="4826"><span class="pln">          </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ContentEncoding</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4827" onclick="window.location.hash='#4827'"></td><td class="FileContents-lineContents" id="4827"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">content_encoding</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4828" onclick="window.location.hash='#4828'"></td><td class="FileContents-lineContents" id="4828"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4829" onclick="window.location.hash='#4829'"></td><td class="FileContents-lineContents" id="4829"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4830" onclick="window.location.hash='#4830'"></td><td class="FileContents-lineContents" id="4830"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> content_encoding</span><span class="pun">-&gt;</span><span class="typ">ParseContentEncodingEntry</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4831" onclick="window.location.hash='#4831'"></td><td class="FileContents-lineContents" id="4831"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4832" onclick="window.location.hash='#4832'"></td><td class="FileContents-lineContents" id="4832"><span class="pln">        </span><span class="kwd">delete</span><span class="pln"> content_encoding</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4833" onclick="window.location.hash='#4833'"></td><td class="FileContents-lineContents" id="4833"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4834" onclick="window.location.hash='#4834'"></td><td class="FileContents-lineContents" id="4834"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4835" onclick="window.location.hash='#4835'"></td><td class="FileContents-lineContents" id="4835"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4836" onclick="window.location.hash='#4836'"></td><td class="FileContents-lineContents" id="4836"><span class="pln">      </span><span class="pun">*</span><span class="pln">content_encoding_entries_end_</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> content_encoding</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4837" onclick="window.location.hash='#4837'"></td><td class="FileContents-lineContents" id="4837"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4838" onclick="window.location.hash='#4838'"></td><td class="FileContents-lineContents" id="4838"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4839" onclick="window.location.hash='#4839'"></td><td class="FileContents-lineContents" id="4839"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4840" onclick="window.location.hash='#4840'"></td><td class="FileContents-lineContents" id="4840"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4841" onclick="window.location.hash='#4841'"></td><td class="FileContents-lineContents" id="4841"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4842" onclick="window.location.hash='#4842'"></td><td class="FileContents-lineContents" id="4842"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4843" onclick="window.location.hash='#4843'"></td><td class="FileContents-lineContents" id="4843"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4844" onclick="window.location.hash='#4844'"></td><td class="FileContents-lineContents" id="4844"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4845" onclick="window.location.hash='#4845'"></td><td class="FileContents-lineContents" id="4845"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4846" onclick="window.location.hash='#4846'"></td><td class="FileContents-lineContents" id="4846"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4847" onclick="window.location.hash='#4847'"></td><td class="FileContents-lineContents" id="4847"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4848" onclick="window.location.hash='#4848'"></td><td class="FileContents-lineContents" id="4848"><span class="typ">Track</span><span class="pun">::</span><span class="typ">EOSBlock</span><span class="pun">::</span><span class="typ">EOSBlock</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">,</span><span class="pln"> LONG_MIN</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4849" onclick="window.location.hash='#4849'"></td><td class="FileContents-lineContents" id="4849"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4850" onclick="window.location.hash='#4850'"></td><td class="FileContents-lineContents" id="4850"><span class="typ">BlockEntry</span><span class="pun">::</span><span class="typ">Kind</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">EOSBlock</span><span class="pun">::</span><span class="typ">GetKind</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> kBlockEOS</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4851" onclick="window.location.hash='#4851'"></td><td class="FileContents-lineContents" id="4851"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4852" onclick="window.location.hash='#4852'"></td><td class="FileContents-lineContents" id="4852"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">EOSBlock</span><span class="pun">::</span><span class="typ">GetBlock</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4853" onclick="window.location.hash='#4853'"></td><td class="FileContents-lineContents" id="4853"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4854" onclick="window.location.hash='#4854'"></td><td class="FileContents-lineContents" id="4854"><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">VideoTrack</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4855" onclick="window.location.hash='#4855'"></td><td class="FileContents-lineContents" id="4855"><span class="pln">                       </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4856" onclick="window.location.hash='#4856'"></td><td class="FileContents-lineContents" id="4856"><span class="pln">    </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4857" onclick="window.location.hash='#4857'"></td><td class="FileContents-lineContents" id="4857"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4858" onclick="window.location.hash='#4858'"></td><td class="FileContents-lineContents" id="4858"><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Info</span><span class="pun">&amp;</span><span class="pln"> info</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4859" onclick="window.location.hash='#4859'"></td><td class="FileContents-lineContents" id="4859"><span class="pln">                       </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4860" onclick="window.location.hash='#4860'"></td><td class="FileContents-lineContents" id="4860"><span class="pln">                       </span><span class="typ">VideoTrack</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4861" onclick="window.location.hash='#4861'"></td><td class="FileContents-lineContents" id="4861"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4862" onclick="window.location.hash='#4862'"></td><td class="FileContents-lineContents" id="4862"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4863" onclick="window.location.hash='#4863'"></td><td class="FileContents-lineContents" id="4863"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4864" onclick="window.location.hash='#4864'"></td><td class="FileContents-lineContents" id="4864"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">!=</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="pln">kVideo</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4865" onclick="window.location.hash='#4865'"></td><td class="FileContents-lineContents" id="4865"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4866" onclick="window.location.hash='#4866'"></td><td class="FileContents-lineContents" id="4866"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4867" onclick="window.location.hash='#4867'"></td><td class="FileContents-lineContents" id="4867"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> width </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4868" onclick="window.location.hash='#4868'"></td><td class="FileContents-lineContents" id="4868"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4869" onclick="window.location.hash='#4869'"></td><td class="FileContents-lineContents" id="4869"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> display_width </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4870" onclick="window.location.hash='#4870'"></td><td class="FileContents-lineContents" id="4870"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> display_height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4871" onclick="window.location.hash='#4871'"></td><td class="FileContents-lineContents" id="4871"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> display_unit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4872" onclick="window.location.hash='#4872'"></td><td class="FileContents-lineContents" id="4872"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stereo_mode </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4873" onclick="window.location.hash='#4873'"></td><td class="FileContents-lineContents" id="4873"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4874" onclick="window.location.hash='#4874'"></td><td class="FileContents-lineContents" id="4874"><span class="pln">  </span><span class="kwd">double</span><span class="pln"> rate </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4875" onclick="window.location.hash='#4875'"></td><td class="FileContents-lineContents" id="4875"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4876" onclick="window.location.hash='#4876'"></td><td class="FileContents-lineContents" id="4876"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4877" onclick="window.location.hash='#4877'"></td><td class="FileContents-lineContents" id="4877"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4878" onclick="window.location.hash='#4878'"></td><td class="FileContents-lineContents" id="4878"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Settings</span><span class="pun">&amp;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">settings</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4879" onclick="window.location.hash='#4879'"></td><td class="FileContents-lineContents" id="4879"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4880" onclick="window.location.hash='#4880'"></td><td class="FileContents-lineContents" id="4880"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4881" onclick="window.location.hash='#4881'"></td><td class="FileContents-lineContents" id="4881"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4882" onclick="window.location.hash='#4882'"></td><td class="FileContents-lineContents" id="4882"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4883" onclick="window.location.hash='#4883'"></td><td class="FileContents-lineContents" id="4883"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4884" onclick="window.location.hash='#4884'"></td><td class="FileContents-lineContents" id="4884"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4885" onclick="window.location.hash='#4885'"></td><td class="FileContents-lineContents" id="4885"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4886" onclick="window.location.hash='#4886'"></td><td class="FileContents-lineContents" id="4886"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4887" onclick="window.location.hash='#4887'"></td><td class="FileContents-lineContents" id="4887"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4888" onclick="window.location.hash='#4888'"></td><td class="FileContents-lineContents" id="4888"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4889" onclick="window.location.hash='#4889'"></td><td class="FileContents-lineContents" id="4889"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4890" onclick="window.location.hash='#4890'"></td><td class="FileContents-lineContents" id="4890"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4891" onclick="window.location.hash='#4891'"></td><td class="FileContents-lineContents" id="4891"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4892" onclick="window.location.hash='#4892'"></td><td class="FileContents-lineContents" id="4892"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4893" onclick="window.location.hash='#4893'"></td><td class="FileContents-lineContents" id="4893"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4894" onclick="window.location.hash='#4894'"></td><td class="FileContents-lineContents" id="4894"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4895" onclick="window.location.hash='#4895'"></td><td class="FileContents-lineContents" id="4895"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x30</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// pixel width</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4896" onclick="window.location.hash='#4896'"></td><td class="FileContents-lineContents" id="4896"><span class="pln">      width </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4897" onclick="window.location.hash='#4897'"></td><td class="FileContents-lineContents" id="4897"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4898" onclick="window.location.hash='#4898'"></td><td class="FileContents-lineContents" id="4898"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">width </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4899" onclick="window.location.hash='#4899'"></td><td class="FileContents-lineContents" id="4899"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4900" onclick="window.location.hash='#4900'"></td><td class="FileContents-lineContents" id="4900"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x3A</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// pixel height</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4901" onclick="window.location.hash='#4901'"></td><td class="FileContents-lineContents" id="4901"><span class="pln">      height </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4902" onclick="window.location.hash='#4902'"></td><td class="FileContents-lineContents" id="4902"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4903" onclick="window.location.hash='#4903'"></td><td class="FileContents-lineContents" id="4903"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">height </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4904" onclick="window.location.hash='#4904'"></td><td class="FileContents-lineContents" id="4904"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4905" onclick="window.location.hash='#4905'"></td><td class="FileContents-lineContents" id="4905"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x14B0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// display width</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4906" onclick="window.location.hash='#4906'"></td><td class="FileContents-lineContents" id="4906"><span class="pln">      display_width </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4907" onclick="window.location.hash='#4907'"></td><td class="FileContents-lineContents" id="4907"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4908" onclick="window.location.hash='#4908'"></td><td class="FileContents-lineContents" id="4908"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">display_width </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4909" onclick="window.location.hash='#4909'"></td><td class="FileContents-lineContents" id="4909"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4910" onclick="window.location.hash='#4910'"></td><td class="FileContents-lineContents" id="4910"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x14BA</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// display height</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4911" onclick="window.location.hash='#4911'"></td><td class="FileContents-lineContents" id="4911"><span class="pln">      display_height </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4912" onclick="window.location.hash='#4912'"></td><td class="FileContents-lineContents" id="4912"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4913" onclick="window.location.hash='#4913'"></td><td class="FileContents-lineContents" id="4913"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">display_height </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4914" onclick="window.location.hash='#4914'"></td><td class="FileContents-lineContents" id="4914"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4915" onclick="window.location.hash='#4915'"></td><td class="FileContents-lineContents" id="4915"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x14B2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// display unit</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4916" onclick="window.location.hash='#4916'"></td><td class="FileContents-lineContents" id="4916"><span class="pln">      display_unit </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4917" onclick="window.location.hash='#4917'"></td><td class="FileContents-lineContents" id="4917"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4918" onclick="window.location.hash='#4918'"></td><td class="FileContents-lineContents" id="4918"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">display_unit </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4919" onclick="window.location.hash='#4919'"></td><td class="FileContents-lineContents" id="4919"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4920" onclick="window.location.hash='#4920'"></td><td class="FileContents-lineContents" id="4920"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x13B8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// stereo mode</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4921" onclick="window.location.hash='#4921'"></td><td class="FileContents-lineContents" id="4921"><span class="pln">      stereo_mode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4922" onclick="window.location.hash='#4922'"></td><td class="FileContents-lineContents" id="4922"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4923" onclick="window.location.hash='#4923'"></td><td class="FileContents-lineContents" id="4923"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">stereo_mode </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4924" onclick="window.location.hash='#4924'"></td><td class="FileContents-lineContents" id="4924"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4925" onclick="window.location.hash='#4925'"></td><td class="FileContents-lineContents" id="4925"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0383E3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// frame rate</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4926" onclick="window.location.hash='#4926'"></td><td class="FileContents-lineContents" id="4926"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeFloat</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> rate</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4927" onclick="window.location.hash='#4927'"></td><td class="FileContents-lineContents" id="4927"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4928" onclick="window.location.hash='#4928'"></td><td class="FileContents-lineContents" id="4928"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4929" onclick="window.location.hash='#4929'"></td><td class="FileContents-lineContents" id="4929"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4930" onclick="window.location.hash='#4930'"></td><td class="FileContents-lineContents" id="4930"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4931" onclick="window.location.hash='#4931'"></td><td class="FileContents-lineContents" id="4931"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rate </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4932" onclick="window.location.hash='#4932'"></td><td class="FileContents-lineContents" id="4932"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4933" onclick="window.location.hash='#4933'"></td><td class="FileContents-lineContents" id="4933"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4934" onclick="window.location.hash='#4934'"></td><td class="FileContents-lineContents" id="4934"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4935" onclick="window.location.hash='#4935'"></td><td class="FileContents-lineContents" id="4935"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4936" onclick="window.location.hash='#4936'"></td><td class="FileContents-lineContents" id="4936"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4937" onclick="window.location.hash='#4937'"></td><td class="FileContents-lineContents" id="4937"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4938" onclick="window.location.hash='#4938'"></td><td class="FileContents-lineContents" id="4938"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4939" onclick="window.location.hash='#4939'"></td><td class="FileContents-lineContents" id="4939"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4940" onclick="window.location.hash='#4940'"></td><td class="FileContents-lineContents" id="4940"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4941" onclick="window.location.hash='#4941'"></td><td class="FileContents-lineContents" id="4941"><span class="pln">  </span><span class="typ">VideoTrack</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTrack </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4942" onclick="window.location.hash='#4942'"></td><td class="FileContents-lineContents" id="4942"><span class="pln">      </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4943" onclick="window.location.hash='#4943'"></td><td class="FileContents-lineContents" id="4943"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4944" onclick="window.location.hash='#4944'"></td><td class="FileContents-lineContents" id="4944"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4945" onclick="window.location.hash='#4945'"></td><td class="FileContents-lineContents" id="4945"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4946" onclick="window.location.hash='#4946'"></td><td class="FileContents-lineContents" id="4946"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4947" onclick="window.location.hash='#4947'"></td><td class="FileContents-lineContents" id="4947"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> info</span><span class="pun">.</span><span class="typ">Copy</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">-&gt;</span><span class="pln">m_info</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4948" onclick="window.location.hash='#4948'"></td><td class="FileContents-lineContents" id="4948"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4949" onclick="window.location.hash='#4949'"></td><td class="FileContents-lineContents" id="4949"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4950" onclick="window.location.hash='#4950'"></td><td class="FileContents-lineContents" id="4950"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4951" onclick="window.location.hash='#4951'"></td><td class="FileContents-lineContents" id="4951"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4952" onclick="window.location.hash='#4952'"></td><td class="FileContents-lineContents" id="4952"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4953" onclick="window.location.hash='#4953'"></td><td class="FileContents-lineContents" id="4953"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4954" onclick="window.location.hash='#4954'"></td><td class="FileContents-lineContents" id="4954"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_width </span><span class="pun">=</span><span class="pln"> width</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4955" onclick="window.location.hash='#4955'"></td><td class="FileContents-lineContents" id="4955"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_height </span><span class="pun">=</span><span class="pln"> height</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4956" onclick="window.location.hash='#4956'"></td><td class="FileContents-lineContents" id="4956"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_display_width </span><span class="pun">=</span><span class="pln"> display_width</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4957" onclick="window.location.hash='#4957'"></td><td class="FileContents-lineContents" id="4957"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_display_height </span><span class="pun">=</span><span class="pln"> display_height</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4958" onclick="window.location.hash='#4958'"></td><td class="FileContents-lineContents" id="4958"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_display_unit </span><span class="pun">=</span><span class="pln"> display_unit</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4959" onclick="window.location.hash='#4959'"></td><td class="FileContents-lineContents" id="4959"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_stereo_mode </span><span class="pun">=</span><span class="pln"> stereo_mode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4960" onclick="window.location.hash='#4960'"></td><td class="FileContents-lineContents" id="4960"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_rate </span><span class="pun">=</span><span class="pln"> rate</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4961" onclick="window.location.hash='#4961'"></td><td class="FileContents-lineContents" id="4961"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4962" onclick="window.location.hash='#4962'"></td><td class="FileContents-lineContents" id="4962"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4963" onclick="window.location.hash='#4963'"></td><td class="FileContents-lineContents" id="4963"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4964" onclick="window.location.hash='#4964'"></td><td class="FileContents-lineContents" id="4964"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4965" onclick="window.location.hash='#4965'"></td><td class="FileContents-lineContents" id="4965"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4966" onclick="window.location.hash='#4966'"></td><td class="FileContents-lineContents" id="4966"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">VetEntry</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pBlockEntry</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4967" onclick="window.location.hash='#4967'"></td><td class="FileContents-lineContents" id="4967"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">VetEntry</span><span class="pun">(</span><span class="pln">pBlockEntry</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> pBlockEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">()-&gt;</span><span class="typ">IsKey</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4968" onclick="window.location.hash='#4968'"></td><td class="FileContents-lineContents" id="4968"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4969" onclick="window.location.hash='#4969'"></td><td class="FileContents-lineContents" id="4969"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4970" onclick="window.location.hash='#4970'"></td><td class="FileContents-lineContents" id="4970"><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">Seek</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time_ns</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4971" onclick="window.location.hash='#4971'"></td><td class="FileContents-lineContents" id="4971"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetFirst</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4972" onclick="window.location.hash='#4972'"></td><td class="FileContents-lineContents" id="4972"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4973" onclick="window.location.hash='#4973'"></td><td class="FileContents-lineContents" id="4973"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// buffer underflow, etc</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4974" onclick="window.location.hash='#4974'"></td><td class="FileContents-lineContents" id="4974"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4975" onclick="window.location.hash='#4975'"></td><td class="FileContents-lineContents" id="4975"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4976" onclick="window.location.hash='#4976'"></td><td class="FileContents-lineContents" id="4976"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4977" onclick="window.location.hash='#4977'"></td><td class="FileContents-lineContents" id="4977"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4978" onclick="window.location.hash='#4978'"></td><td class="FileContents-lineContents" id="4978"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4979" onclick="window.location.hash='#4979'"></td><td class="FileContents-lineContents" id="4979"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4980" onclick="window.location.hash='#4980'"></td><td class="FileContents-lineContents" id="4980"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4981" onclick="window.location.hash='#4981'"></td><td class="FileContents-lineContents" id="4981"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> pResult</span><span class="pun">-&gt;</span><span class="typ">GetCluster</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4982" onclick="window.location.hash='#4982'"></td><td class="FileContents-lineContents" id="4982"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4983" onclick="window.location.hash='#4983'"></td><td class="FileContents-lineContents" id="4983"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4984" onclick="window.location.hash='#4984'"></td><td class="FileContents-lineContents" id="4984"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4985" onclick="window.location.hash='#4985'"></td><td class="FileContents-lineContents" id="4985"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&lt;=</span><span class="pln"> pResult</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">()-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4986" onclick="window.location.hash='#4986'"></td><td class="FileContents-lineContents" id="4986"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4987" onclick="window.location.hash='#4987'"></td><td class="FileContents-lineContents" id="4987"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4988" onclick="window.location.hash='#4988'"></td><td class="FileContents-lineContents" id="4988"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> clusters </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_clusters</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4989" onclick="window.location.hash='#4989'"></td><td class="FileContents-lineContents" id="4989"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">clusters</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4990" onclick="window.location.hash='#4990'"></td><td class="FileContents-lineContents" id="4990"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4991" onclick="window.location.hash='#4991'"></td><td class="FileContents-lineContents" id="4991"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetCount</span><span class="pun">();</span><span class="pln">  </span><span class="com">// loaded only, not pre-loaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4992" onclick="window.location.hash='#4992'"></td><td class="FileContents-lineContents" id="4992"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4993" onclick="window.location.hash='#4993'"></td><td class="FileContents-lineContents" id="4993"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4994" onclick="window.location.hash='#4994'"></td><td class="FileContents-lineContents" id="4994"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> clusters </span><span class="pun">+</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4995" onclick="window.location.hash='#4995'"></td><td class="FileContents-lineContents" id="4995"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4996" onclick="window.location.hash='#4996'"></td><td class="FileContents-lineContents" id="4996"><span class="pln">  assert</span><span class="pun">(*</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4997" onclick="window.location.hash='#4997'"></td><td class="FileContents-lineContents" id="4997"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4998" onclick="window.location.hash='#4998'"></td><td class="FileContents-lineContents" id="4998"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4999" onclick="window.location.hash='#4999'"></td><td class="FileContents-lineContents" id="4999"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> clusters </span><span class="pun">+</span><span class="pln"> count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5000" onclick="window.location.hash='#5000'"></td><td class="FileContents-lineContents" id="5000"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5001" onclick="window.location.hash='#5001'"></td><td class="FileContents-lineContents" id="5001"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> lo </span><span class="pun">=</span><span class="pln"> i</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5002" onclick="window.location.hash='#5002'"></td><td class="FileContents-lineContents" id="5002"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> hi </span><span class="pun">=</span><span class="pln"> j</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5003" onclick="window.location.hash='#5003'"></td><td class="FileContents-lineContents" id="5003"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5004" onclick="window.location.hash='#5004'"></td><td class="FileContents-lineContents" id="5004"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&lt;</span><span class="pln"> hi</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5005" onclick="window.location.hash='#5005'"></td><td class="FileContents-lineContents" id="5005"><span class="pln">    </span><span class="com">// INVARIANT:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5006" onclick="window.location.hash='#5006'"></td><td class="FileContents-lineContents" id="5006"><span class="pln">    </span><span class="com">//[i, lo) &lt;= time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5007" onclick="window.location.hash='#5007'"></td><td class="FileContents-lineContents" id="5007"><span class="pln">    </span><span class="com">//[lo, hi) ?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5008" onclick="window.location.hash='#5008'"></td><td class="FileContents-lineContents" id="5008"><span class="pln">    </span><span class="com">//[hi, j)  &gt; time_ns</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5009" onclick="window.location.hash='#5009'"></td><td class="FileContents-lineContents" id="5009"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5010" onclick="window.location.hash='#5010'"></td><td class="FileContents-lineContents" id="5010"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> lo </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">hi </span><span class="pun">-</span><span class="pln"> lo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5011" onclick="window.location.hash='#5011'"></td><td class="FileContents-lineContents" id="5011"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">mid </span><span class="pun">&lt;</span><span class="pln"> hi</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5012" onclick="window.location.hash='#5012'"></td><td class="FileContents-lineContents" id="5012"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5013" onclick="window.location.hash='#5013'"></td><td class="FileContents-lineContents" id="5013"><span class="pln">    pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">mid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5014" onclick="window.location.hash='#5014'"></td><td class="FileContents-lineContents" id="5014"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5015" onclick="window.location.hash='#5015'"></td><td class="FileContents-lineContents" id="5015"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5016" onclick="window.location.hash='#5016'"></td><td class="FileContents-lineContents" id="5016"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">(</span><span class="pln">mid </span><span class="pun">-</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_clusters</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5017" onclick="window.location.hash='#5017'"></td><td class="FileContents-lineContents" id="5017"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5018" onclick="window.location.hash='#5018'"></td><td class="FileContents-lineContents" id="5018"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5019" onclick="window.location.hash='#5019'"></td><td class="FileContents-lineContents" id="5019"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5020" onclick="window.location.hash='#5020'"></td><td class="FileContents-lineContents" id="5020"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5021" onclick="window.location.hash='#5021'"></td><td class="FileContents-lineContents" id="5021"><span class="pln">      lo </span><span class="pun">=</span><span class="pln"> mid </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5022" onclick="window.location.hash='#5022'"></td><td class="FileContents-lineContents" id="5022"><span class="pln">    </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5023" onclick="window.location.hash='#5023'"></td><td class="FileContents-lineContents" id="5023"><span class="pln">      hi </span><span class="pun">=</span><span class="pln"> mid</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5024" onclick="window.location.hash='#5024'"></td><td class="FileContents-lineContents" id="5024"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5025" onclick="window.location.hash='#5025'"></td><td class="FileContents-lineContents" id="5025"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&lt;=</span><span class="pln"> hi</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5026" onclick="window.location.hash='#5026'"></td><td class="FileContents-lineContents" id="5026"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5027" onclick="window.location.hash='#5027'"></td><td class="FileContents-lineContents" id="5027"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5028" onclick="window.location.hash='#5028'"></td><td class="FileContents-lineContents" id="5028"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">==</span><span class="pln"> hi</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5029" onclick="window.location.hash='#5029'"></td><td class="FileContents-lineContents" id="5029"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&gt;</span><span class="pln"> i</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5030" onclick="window.location.hash='#5030'"></td><td class="FileContents-lineContents" id="5030"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">lo </span><span class="pun">&lt;=</span><span class="pln"> j</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5031" onclick="window.location.hash='#5031'"></td><td class="FileContents-lineContents" id="5031"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5032" onclick="window.location.hash='#5032'"></td><td class="FileContents-lineContents" id="5032"><span class="pln">  pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*--</span><span class="pln">lo</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5033" onclick="window.location.hash='#5033'"></td><td class="FileContents-lineContents" id="5033"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5034" onclick="window.location.hash='#5034'"></td><td class="FileContents-lineContents" id="5034"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5035" onclick="window.location.hash='#5035'"></td><td class="FileContents-lineContents" id="5035"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5036" onclick="window.location.hash='#5036'"></td><td class="FileContents-lineContents" id="5036"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5037" onclick="window.location.hash='#5037'"></td><td class="FileContents-lineContents" id="5037"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5038" onclick="window.location.hash='#5038'"></td><td class="FileContents-lineContents" id="5038"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pResult </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">pResult</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span><span class="pln">  </span><span class="com">// found a keyframe</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5039" onclick="window.location.hash='#5039'"></td><td class="FileContents-lineContents" id="5039"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5040" onclick="window.location.hash='#5040'"></td><td class="FileContents-lineContents" id="5040"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5041" onclick="window.location.hash='#5041'"></td><td class="FileContents-lineContents" id="5041"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lo </span><span class="pun">!=</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5042" onclick="window.location.hash='#5042'"></td><td class="FileContents-lineContents" id="5042"><span class="pln">    pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*--</span><span class="pln">lo</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5043" onclick="window.location.hash='#5043'"></td><td class="FileContents-lineContents" id="5043"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5044" onclick="window.location.hash='#5044'"></td><td class="FileContents-lineContents" id="5044"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5045" onclick="window.location.hash='#5045'"></td><td class="FileContents-lineContents" id="5045"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5046" onclick="window.location.hash='#5046'"></td><td class="FileContents-lineContents" id="5046"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> time_ns</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5047" onclick="window.location.hash='#5047'"></td><td class="FileContents-lineContents" id="5047"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5048" onclick="window.location.hash='#5048'"></td><td class="FileContents-lineContents" id="5048"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pResult </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">pResult</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5049" onclick="window.location.hash='#5049'"></td><td class="FileContents-lineContents" id="5049"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5050" onclick="window.location.hash='#5050'"></td><td class="FileContents-lineContents" id="5050"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5051" onclick="window.location.hash='#5051'"></td><td class="FileContents-lineContents" id="5051"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5052" onclick="window.location.hash='#5052'"></td><td class="FileContents-lineContents" id="5052"><span class="pln">  </span><span class="com">// weird: we&#39;re on the first cluster, but no keyframe found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5053" onclick="window.location.hash='#5053'"></td><td class="FileContents-lineContents" id="5053"><span class="pln">  </span><span class="com">// should never happen but we must return something anyway</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5054" onclick="window.location.hash='#5054'"></td><td class="FileContents-lineContents" id="5054"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5055" onclick="window.location.hash='#5055'"></td><td class="FileContents-lineContents" id="5055"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5056" onclick="window.location.hash='#5056'"></td><td class="FileContents-lineContents" id="5056"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5057" onclick="window.location.hash='#5057'"></td><td class="FileContents-lineContents" id="5057"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5058" onclick="window.location.hash='#5058'"></td><td class="FileContents-lineContents" id="5058"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5059" onclick="window.location.hash='#5059'"></td><td class="FileContents-lineContents" id="5059"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetWidth</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_width</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5060" onclick="window.location.hash='#5060'"></td><td class="FileContents-lineContents" id="5060"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5061" onclick="window.location.hash='#5061'"></td><td class="FileContents-lineContents" id="5061"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetHeight</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_height</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5062" onclick="window.location.hash='#5062'"></td><td class="FileContents-lineContents" id="5062"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5063" onclick="window.location.hash='#5063'"></td><td class="FileContents-lineContents" id="5063"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetDisplayWidth</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5064" onclick="window.location.hash='#5064'"></td><td class="FileContents-lineContents" id="5064"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_display_width </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> m_display_width </span><span class="pun">:</span><span class="pln"> </span><span class="typ">GetWidth</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5065" onclick="window.location.hash='#5065'"></td><td class="FileContents-lineContents" id="5065"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5066" onclick="window.location.hash='#5066'"></td><td class="FileContents-lineContents" id="5066"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5067" onclick="window.location.hash='#5067'"></td><td class="FileContents-lineContents" id="5067"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetDisplayHeight</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5068" onclick="window.location.hash='#5068'"></td><td class="FileContents-lineContents" id="5068"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_display_height </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> m_display_height </span><span class="pun">:</span><span class="pln"> </span><span class="typ">GetHeight</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5069" onclick="window.location.hash='#5069'"></td><td class="FileContents-lineContents" id="5069"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5070" onclick="window.location.hash='#5070'"></td><td class="FileContents-lineContents" id="5070"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5071" onclick="window.location.hash='#5071'"></td><td class="FileContents-lineContents" id="5071"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetDisplayUnit</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_display_unit</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5072" onclick="window.location.hash='#5072'"></td><td class="FileContents-lineContents" id="5072"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5073" onclick="window.location.hash='#5073'"></td><td class="FileContents-lineContents" id="5073"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetStereoMode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_stereo_mode</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5074" onclick="window.location.hash='#5074'"></td><td class="FileContents-lineContents" id="5074"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5075" onclick="window.location.hash='#5075'"></td><td class="FileContents-lineContents" id="5075"><span class="kwd">double</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">GetFrameRate</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_rate</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5076" onclick="window.location.hash='#5076'"></td><td class="FileContents-lineContents" id="5076"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5077" onclick="window.location.hash='#5077'"></td><td class="FileContents-lineContents" id="5077"><span class="typ">AudioTrack</span><span class="pun">::</span><span class="typ">AudioTrack</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5078" onclick="window.location.hash='#5078'"></td><td class="FileContents-lineContents" id="5078"><span class="pln">                       </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5079" onclick="window.location.hash='#5079'"></td><td class="FileContents-lineContents" id="5079"><span class="pln">    </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5080" onclick="window.location.hash='#5080'"></td><td class="FileContents-lineContents" id="5080"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5081" onclick="window.location.hash='#5081'"></td><td class="FileContents-lineContents" id="5081"><span class="kwd">long</span><span class="pln"> </span><span class="typ">AudioTrack</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Info</span><span class="pun">&amp;</span><span class="pln"> info</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5082" onclick="window.location.hash='#5082'"></td><td class="FileContents-lineContents" id="5082"><span class="pln">                       </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5083" onclick="window.location.hash='#5083'"></td><td class="FileContents-lineContents" id="5083"><span class="pln">                       </span><span class="typ">AudioTrack</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5084" onclick="window.location.hash='#5084'"></td><td class="FileContents-lineContents" id="5084"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5085" onclick="window.location.hash='#5085'"></td><td class="FileContents-lineContents" id="5085"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5086" onclick="window.location.hash='#5086'"></td><td class="FileContents-lineContents" id="5086"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5087" onclick="window.location.hash='#5087'"></td><td class="FileContents-lineContents" id="5087"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">!=</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="pln">kAudio</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5088" onclick="window.location.hash='#5088'"></td><td class="FileContents-lineContents" id="5088"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5089" onclick="window.location.hash='#5089'"></td><td class="FileContents-lineContents" id="5089"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5090" onclick="window.location.hash='#5090'"></td><td class="FileContents-lineContents" id="5090"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5091" onclick="window.location.hash='#5091'"></td><td class="FileContents-lineContents" id="5091"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5092" onclick="window.location.hash='#5092'"></td><td class="FileContents-lineContents" id="5092"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Settings</span><span class="pun">&amp;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">settings</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5093" onclick="window.location.hash='#5093'"></td><td class="FileContents-lineContents" id="5093"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5094" onclick="window.location.hash='#5094'"></td><td class="FileContents-lineContents" id="5094"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5095" onclick="window.location.hash='#5095'"></td><td class="FileContents-lineContents" id="5095"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5096" onclick="window.location.hash='#5096'"></td><td class="FileContents-lineContents" id="5096"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5097" onclick="window.location.hash='#5097'"></td><td class="FileContents-lineContents" id="5097"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5098" onclick="window.location.hash='#5098'"></td><td class="FileContents-lineContents" id="5098"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5099" onclick="window.location.hash='#5099'"></td><td class="FileContents-lineContents" id="5099"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5100" onclick="window.location.hash='#5100'"></td><td class="FileContents-lineContents" id="5100"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5101" onclick="window.location.hash='#5101'"></td><td class="FileContents-lineContents" id="5101"><span class="pln">  </span><span class="kwd">double</span><span class="pln"> rate </span><span class="pun">=</span><span class="pln"> </span><span class="lit">8000.0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// MKV default</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5102" onclick="window.location.hash='#5102'"></td><td class="FileContents-lineContents" id="5102"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> channels </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5103" onclick="window.location.hash='#5103'"></td><td class="FileContents-lineContents" id="5103"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> bit_depth </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5104" onclick="window.location.hash='#5104'"></td><td class="FileContents-lineContents" id="5104"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5105" onclick="window.location.hash='#5105'"></td><td class="FileContents-lineContents" id="5105"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5106" onclick="window.location.hash='#5106'"></td><td class="FileContents-lineContents" id="5106"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5107" onclick="window.location.hash='#5107'"></td><td class="FileContents-lineContents" id="5107"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5108" onclick="window.location.hash='#5108'"></td><td class="FileContents-lineContents" id="5108"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5109" onclick="window.location.hash='#5109'"></td><td class="FileContents-lineContents" id="5109"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5110" onclick="window.location.hash='#5110'"></td><td class="FileContents-lineContents" id="5110"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5111" onclick="window.location.hash='#5111'"></td><td class="FileContents-lineContents" id="5111"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5112" onclick="window.location.hash='#5112'"></td><td class="FileContents-lineContents" id="5112"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5113" onclick="window.location.hash='#5113'"></td><td class="FileContents-lineContents" id="5113"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x35</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Sample Rate</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5114" onclick="window.location.hash='#5114'"></td><td class="FileContents-lineContents" id="5114"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeFloat</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> rate</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5115" onclick="window.location.hash='#5115'"></td><td class="FileContents-lineContents" id="5115"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5116" onclick="window.location.hash='#5116'"></td><td class="FileContents-lineContents" id="5116"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5117" onclick="window.location.hash='#5117'"></td><td class="FileContents-lineContents" id="5117"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5118" onclick="window.location.hash='#5118'"></td><td class="FileContents-lineContents" id="5118"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5119" onclick="window.location.hash='#5119'"></td><td class="FileContents-lineContents" id="5119"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rate </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5120" onclick="window.location.hash='#5120'"></td><td class="FileContents-lineContents" id="5120"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5121" onclick="window.location.hash='#5121'"></td><td class="FileContents-lineContents" id="5121"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1F</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Channel Count</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5122" onclick="window.location.hash='#5122'"></td><td class="FileContents-lineContents" id="5122"><span class="pln">      channels </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5123" onclick="window.location.hash='#5123'"></td><td class="FileContents-lineContents" id="5123"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5124" onclick="window.location.hash='#5124'"></td><td class="FileContents-lineContents" id="5124"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">channels </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5125" onclick="window.location.hash='#5125'"></td><td class="FileContents-lineContents" id="5125"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5126" onclick="window.location.hash='#5126'"></td><td class="FileContents-lineContents" id="5126"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x2264</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Bit Depth</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5127" onclick="window.location.hash='#5127'"></td><td class="FileContents-lineContents" id="5127"><span class="pln">      bit_depth </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5128" onclick="window.location.hash='#5128'"></td><td class="FileContents-lineContents" id="5128"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5129" onclick="window.location.hash='#5129'"></td><td class="FileContents-lineContents" id="5129"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bit_depth </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5130" onclick="window.location.hash='#5130'"></td><td class="FileContents-lineContents" id="5130"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5131" onclick="window.location.hash='#5131'"></td><td class="FileContents-lineContents" id="5131"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5132" onclick="window.location.hash='#5132'"></td><td class="FileContents-lineContents" id="5132"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5133" onclick="window.location.hash='#5133'"></td><td class="FileContents-lineContents" id="5133"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5134" onclick="window.location.hash='#5134'"></td><td class="FileContents-lineContents" id="5134"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5135" onclick="window.location.hash='#5135'"></td><td class="FileContents-lineContents" id="5135"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5136" onclick="window.location.hash='#5136'"></td><td class="FileContents-lineContents" id="5136"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5137" onclick="window.location.hash='#5137'"></td><td class="FileContents-lineContents" id="5137"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5138" onclick="window.location.hash='#5138'"></td><td class="FileContents-lineContents" id="5138"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5139" onclick="window.location.hash='#5139'"></td><td class="FileContents-lineContents" id="5139"><span class="pln">  </span><span class="typ">AudioTrack</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTrack </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5140" onclick="window.location.hash='#5140'"></td><td class="FileContents-lineContents" id="5140"><span class="pln">      </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">AudioTrack</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5141" onclick="window.location.hash='#5141'"></td><td class="FileContents-lineContents" id="5141"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5142" onclick="window.location.hash='#5142'"></td><td class="FileContents-lineContents" id="5142"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5143" onclick="window.location.hash='#5143'"></td><td class="FileContents-lineContents" id="5143"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5144" onclick="window.location.hash='#5144'"></td><td class="FileContents-lineContents" id="5144"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5145" onclick="window.location.hash='#5145'"></td><td class="FileContents-lineContents" id="5145"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> info</span><span class="pun">.</span><span class="typ">Copy</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">-&gt;</span><span class="pln">m_info</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5146" onclick="window.location.hash='#5146'"></td><td class="FileContents-lineContents" id="5146"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5147" onclick="window.location.hash='#5147'"></td><td class="FileContents-lineContents" id="5147"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5148" onclick="window.location.hash='#5148'"></td><td class="FileContents-lineContents" id="5148"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5149" onclick="window.location.hash='#5149'"></td><td class="FileContents-lineContents" id="5149"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5150" onclick="window.location.hash='#5150'"></td><td class="FileContents-lineContents" id="5150"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5151" onclick="window.location.hash='#5151'"></td><td class="FileContents-lineContents" id="5151"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5152" onclick="window.location.hash='#5152'"></td><td class="FileContents-lineContents" id="5152"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_rate </span><span class="pun">=</span><span class="pln"> rate</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5153" onclick="window.location.hash='#5153'"></td><td class="FileContents-lineContents" id="5153"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_channels </span><span class="pun">=</span><span class="pln"> channels</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5154" onclick="window.location.hash='#5154'"></td><td class="FileContents-lineContents" id="5154"><span class="pln">  pTrack</span><span class="pun">-&gt;</span><span class="pln">m_bitDepth </span><span class="pun">=</span><span class="pln"> bit_depth</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5155" onclick="window.location.hash='#5155'"></td><td class="FileContents-lineContents" id="5155"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5156" onclick="window.location.hash='#5156'"></td><td class="FileContents-lineContents" id="5156"><span class="pln">  pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5157" onclick="window.location.hash='#5157'"></td><td class="FileContents-lineContents" id="5157"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5158" onclick="window.location.hash='#5158'"></td><td class="FileContents-lineContents" id="5158"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5159" onclick="window.location.hash='#5159'"></td><td class="FileContents-lineContents" id="5159"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5160" onclick="window.location.hash='#5160'"></td><td class="FileContents-lineContents" id="5160"><span class="kwd">double</span><span class="pln"> </span><span class="typ">AudioTrack</span><span class="pun">::</span><span class="typ">GetSamplingRate</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_rate</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5161" onclick="window.location.hash='#5161'"></td><td class="FileContents-lineContents" id="5161"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5162" onclick="window.location.hash='#5162'"></td><td class="FileContents-lineContents" id="5162"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">AudioTrack</span><span class="pun">::</span><span class="typ">GetChannels</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_channels</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5163" onclick="window.location.hash='#5163'"></td><td class="FileContents-lineContents" id="5163"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5164" onclick="window.location.hash='#5164'"></td><td class="FileContents-lineContents" id="5164"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">AudioTrack</span><span class="pun">::</span><span class="typ">GetBitDepth</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_bitDepth</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5165" onclick="window.location.hash='#5165'"></td><td class="FileContents-lineContents" id="5165"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5166" onclick="window.location.hash='#5166'"></td><td class="FileContents-lineContents" id="5166"><span class="typ">Tracks</span><span class="pun">::</span><span class="typ">Tracks</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5167" onclick="window.location.hash='#5167'"></td><td class="FileContents-lineContents" id="5167"><span class="pln">               </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5168" onclick="window.location.hash='#5168'"></td><td class="FileContents-lineContents" id="5168"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5169" onclick="window.location.hash='#5169'"></td><td class="FileContents-lineContents" id="5169"><span class="pln">      m_start</span><span class="pun">(</span><span class="pln">start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5170" onclick="window.location.hash='#5170'"></td><td class="FileContents-lineContents" id="5170"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5171" onclick="window.location.hash='#5171'"></td><td class="FileContents-lineContents" id="5171"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5172" onclick="window.location.hash='#5172'"></td><td class="FileContents-lineContents" id="5172"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="pln">element_size</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5173" onclick="window.location.hash='#5173'"></td><td class="FileContents-lineContents" id="5173"><span class="pln">      m_trackEntries</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5174" onclick="window.location.hash='#5174'"></td><td class="FileContents-lineContents" id="5174"><span class="pln">      m_trackEntriesEnd</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5175" onclick="window.location.hash='#5175'"></td><td class="FileContents-lineContents" id="5175"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5176" onclick="window.location.hash='#5176'"></td><td class="FileContents-lineContents" id="5176"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5177" onclick="window.location.hash='#5177'"></td><td class="FileContents-lineContents" id="5177"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_trackEntries </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5178" onclick="window.location.hash='#5178'"></td><td class="FileContents-lineContents" id="5178"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_trackEntriesEnd </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5179" onclick="window.location.hash='#5179'"></td><td class="FileContents-lineContents" id="5179"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5180" onclick="window.location.hash='#5180'"></td><td class="FileContents-lineContents" id="5180"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5181" onclick="window.location.hash='#5181'"></td><td class="FileContents-lineContents" id="5181"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5182" onclick="window.location.hash='#5182'"></td><td class="FileContents-lineContents" id="5182"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5183" onclick="window.location.hash='#5183'"></td><td class="FileContents-lineContents" id="5183"><span class="pln">  </span><span class="typ">int</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5184" onclick="window.location.hash='#5184'"></td><td class="FileContents-lineContents" id="5184"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5185" onclick="window.location.hash='#5185'"></td><td class="FileContents-lineContents" id="5185"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5186" onclick="window.location.hash='#5186'"></td><td class="FileContents-lineContents" id="5186"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5187" onclick="window.location.hash='#5187'"></td><td class="FileContents-lineContents" id="5187"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5188" onclick="window.location.hash='#5188'"></td><td class="FileContents-lineContents" id="5188"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5189" onclick="window.location.hash='#5189'"></td><td class="FileContents-lineContents" id="5189"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5190" onclick="window.location.hash='#5190'"></td><td class="FileContents-lineContents" id="5190"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5191" onclick="window.location.hash='#5191'"></td><td class="FileContents-lineContents" id="5191"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5192" onclick="window.location.hash='#5192'"></td><td class="FileContents-lineContents" id="5192"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5193" onclick="window.location.hash='#5193'"></td><td class="FileContents-lineContents" id="5193"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5194" onclick="window.location.hash='#5194'"></td><td class="FileContents-lineContents" id="5194"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5195" onclick="window.location.hash='#5195'"></td><td class="FileContents-lineContents" id="5195"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5196" onclick="window.location.hash='#5196'"></td><td class="FileContents-lineContents" id="5196"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5197" onclick="window.location.hash='#5197'"></td><td class="FileContents-lineContents" id="5197"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x2E</span><span class="pun">)</span><span class="pln">  </span><span class="com">// TrackEntry ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5198" onclick="window.location.hash='#5198'"></td><td class="FileContents-lineContents" id="5198"><span class="pln">      </span><span class="pun">++</span><span class="pln">count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5199" onclick="window.location.hash='#5199'"></td><td class="FileContents-lineContents" id="5199"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5200" onclick="window.location.hash='#5200'"></td><td class="FileContents-lineContents" id="5200"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5201" onclick="window.location.hash='#5201'"></td><td class="FileContents-lineContents" id="5201"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5202" onclick="window.location.hash='#5202'"></td><td class="FileContents-lineContents" id="5202"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5203" onclick="window.location.hash='#5203'"></td><td class="FileContents-lineContents" id="5203"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5204" onclick="window.location.hash='#5204'"></td><td class="FileContents-lineContents" id="5204"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5205" onclick="window.location.hash='#5205'"></td><td class="FileContents-lineContents" id="5205"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5206" onclick="window.location.hash='#5206'"></td><td class="FileContents-lineContents" id="5206"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5207" onclick="window.location.hash='#5207'"></td><td class="FileContents-lineContents" id="5207"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5208" onclick="window.location.hash='#5208'"></td><td class="FileContents-lineContents" id="5208"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5209" onclick="window.location.hash='#5209'"></td><td class="FileContents-lineContents" id="5209"><span class="pln">  m_trackEntries </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*[</span><span class="pln">count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5210" onclick="window.location.hash='#5210'"></td><td class="FileContents-lineContents" id="5210"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5211" onclick="window.location.hash='#5211'"></td><td class="FileContents-lineContents" id="5211"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_trackEntries </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5212" onclick="window.location.hash='#5212'"></td><td class="FileContents-lineContents" id="5212"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5213" onclick="window.location.hash='#5213'"></td><td class="FileContents-lineContents" id="5213"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5214" onclick="window.location.hash='#5214'"></td><td class="FileContents-lineContents" id="5214"><span class="pln">  m_trackEntriesEnd </span><span class="pun">=</span><span class="pln"> m_trackEntries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5215" onclick="window.location.hash='#5215'"></td><td class="FileContents-lineContents" id="5215"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5216" onclick="window.location.hash='#5216'"></td><td class="FileContents-lineContents" id="5216"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5217" onclick="window.location.hash='#5217'"></td><td class="FileContents-lineContents" id="5217"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5218" onclick="window.location.hash='#5218'"></td><td class="FileContents-lineContents" id="5218"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5219" onclick="window.location.hash='#5219'"></td><td class="FileContents-lineContents" id="5219"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5220" onclick="window.location.hash='#5220'"></td><td class="FileContents-lineContents" id="5220"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5221" onclick="window.location.hash='#5221'"></td><td class="FileContents-lineContents" id="5221"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> payload_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5222" onclick="window.location.hash='#5222'"></td><td class="FileContents-lineContents" id="5222"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5223" onclick="window.location.hash='#5223'"></td><td class="FileContents-lineContents" id="5223"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5224" onclick="window.location.hash='#5224'"></td><td class="FileContents-lineContents" id="5224"><span class="pln">        </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> payload_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5225" onclick="window.location.hash='#5225'"></td><td class="FileContents-lineContents" id="5225"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5226" onclick="window.location.hash='#5226'"></td><td class="FileContents-lineContents" id="5226"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5227" onclick="window.location.hash='#5227'"></td><td class="FileContents-lineContents" id="5227"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5228" onclick="window.location.hash='#5228'"></td><td class="FileContents-lineContents" id="5228"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5229" onclick="window.location.hash='#5229'"></td><td class="FileContents-lineContents" id="5229"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">payload_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5230" onclick="window.location.hash='#5230'"></td><td class="FileContents-lineContents" id="5230"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5231" onclick="window.location.hash='#5231'"></td><td class="FileContents-lineContents" id="5231"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5232" onclick="window.location.hash='#5232'"></td><td class="FileContents-lineContents" id="5232"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> payload_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5233" onclick="window.location.hash='#5233'"></td><td class="FileContents-lineContents" id="5233"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">payload_stop </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span><span class="pln">  </span><span class="com">// checked in ParseElement</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5234" onclick="window.location.hash='#5234'"></td><td class="FileContents-lineContents" id="5234"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5235" onclick="window.location.hash='#5235'"></td><td class="FileContents-lineContents" id="5235"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size </span><span class="pun">=</span><span class="pln"> payload_stop </span><span class="pun">-</span><span class="pln"> element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5236" onclick="window.location.hash='#5236'"></td><td class="FileContents-lineContents" id="5236"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5237" onclick="window.location.hash='#5237'"></td><td class="FileContents-lineContents" id="5237"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x2E</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// TrackEntry ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5238" onclick="window.location.hash='#5238'"></td><td class="FileContents-lineContents" id="5238"><span class="pln">      </span><span class="typ">Track</span><span class="pun">*&amp;</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">m_trackEntriesEnd</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5239" onclick="window.location.hash='#5239'"></td><td class="FileContents-lineContents" id="5239"><span class="pln">      pTrack </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5240" onclick="window.location.hash='#5240'"></td><td class="FileContents-lineContents" id="5240"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5241" onclick="window.location.hash='#5241'"></td><td class="FileContents-lineContents" id="5241"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseTrackEntry</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> payload_size</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5242" onclick="window.location.hash='#5242'"></td><td class="FileContents-lineContents" id="5242"><span class="pln">                                          element_size</span><span class="pun">,</span><span class="pln"> pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5243" onclick="window.location.hash='#5243'"></td><td class="FileContents-lineContents" id="5243"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5244" onclick="window.location.hash='#5244'"></td><td class="FileContents-lineContents" id="5244"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5245" onclick="window.location.hash='#5245'"></td><td class="FileContents-lineContents" id="5245"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5246" onclick="window.location.hash='#5246'"></td><td class="FileContents-lineContents" id="5246"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5247" onclick="window.location.hash='#5247'"></td><td class="FileContents-lineContents" id="5247"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5248" onclick="window.location.hash='#5248'"></td><td class="FileContents-lineContents" id="5248"><span class="pln">        </span><span class="pun">++</span><span class="pln">m_trackEntriesEnd</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5249" onclick="window.location.hash='#5249'"></td><td class="FileContents-lineContents" id="5249"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5250" onclick="window.location.hash='#5250'"></td><td class="FileContents-lineContents" id="5250"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5251" onclick="window.location.hash='#5251'"></td><td class="FileContents-lineContents" id="5251"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> payload_stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5252" onclick="window.location.hash='#5252'"></td><td class="FileContents-lineContents" id="5252"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5253" onclick="window.location.hash='#5253'"></td><td class="FileContents-lineContents" id="5253"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5254" onclick="window.location.hash='#5254'"></td><td class="FileContents-lineContents" id="5254"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5255" onclick="window.location.hash='#5255'"></td><td class="FileContents-lineContents" id="5255"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5256" onclick="window.location.hash='#5256'"></td><td class="FileContents-lineContents" id="5256"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5257" onclick="window.location.hash='#5257'"></td><td class="FileContents-lineContents" id="5257"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5258" onclick="window.location.hash='#5258'"></td><td class="FileContents-lineContents" id="5258"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5259" onclick="window.location.hash='#5259'"></td><td class="FileContents-lineContents" id="5259"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5260" onclick="window.location.hash='#5260'"></td><td class="FileContents-lineContents" id="5260"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">::</span><span class="typ">GetTracksCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5261" onclick="window.location.hash='#5261'"></td><td class="FileContents-lineContents" id="5261"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> m_trackEntriesEnd </span><span class="pun">-</span><span class="pln"> m_trackEntries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5262" onclick="window.location.hash='#5262'"></td><td class="FileContents-lineContents" id="5262"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5263" onclick="window.location.hash='#5263'"></td><td class="FileContents-lineContents" id="5263"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5264" onclick="window.location.hash='#5264'"></td><td class="FileContents-lineContents" id="5264"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5265" onclick="window.location.hash='#5265'"></td><td class="FileContents-lineContents" id="5265"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5266" onclick="window.location.hash='#5266'"></td><td class="FileContents-lineContents" id="5266"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5267" onclick="window.location.hash='#5267'"></td><td class="FileContents-lineContents" id="5267"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">::</span><span class="typ">ParseTrackEntry</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> track_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> track_size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5268" onclick="window.location.hash='#5268'"></td><td class="FileContents-lineContents" id="5268"><span class="pln">                             </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5269" onclick="window.location.hash='#5269'"></td><td class="FileContents-lineContents" id="5269"><span class="pln">                             </span><span class="typ">Track</span><span class="pun">*&amp;</span><span class="pln"> pResult</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5270" onclick="window.location.hash='#5270'"></td><td class="FileContents-lineContents" id="5270"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5271" onclick="window.location.hash='#5271'"></td><td class="FileContents-lineContents" id="5271"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5272" onclick="window.location.hash='#5272'"></td><td class="FileContents-lineContents" id="5272"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5273" onclick="window.location.hash='#5273'"></td><td class="FileContents-lineContents" id="5273"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5274" onclick="window.location.hash='#5274'"></td><td class="FileContents-lineContents" id="5274"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5275" onclick="window.location.hash='#5275'"></td><td class="FileContents-lineContents" id="5275"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> track_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5276" onclick="window.location.hash='#5276'"></td><td class="FileContents-lineContents" id="5276"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> track_stop </span><span class="pun">=</span><span class="pln"> track_start </span><span class="pun">+</span><span class="pln"> track_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5277" onclick="window.location.hash='#5277'"></td><td class="FileContents-lineContents" id="5277"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5278" onclick="window.location.hash='#5278'"></td><td class="FileContents-lineContents" id="5278"><span class="pln">  </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Info</span><span class="pln"> info</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5279" onclick="window.location.hash='#5279'"></td><td class="FileContents-lineContents" id="5279"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5280" onclick="window.location.hash='#5280'"></td><td class="FileContents-lineContents" id="5280"><span class="pln">  info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5281" onclick="window.location.hash='#5281'"></td><td class="FileContents-lineContents" id="5281"><span class="pln">  info</span><span class="pun">.</span><span class="pln">number </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5282" onclick="window.location.hash='#5282'"></td><td class="FileContents-lineContents" id="5282"><span class="pln">  info</span><span class="pun">.</span><span class="pln">uid </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5283" onclick="window.location.hash='#5283'"></td><td class="FileContents-lineContents" id="5283"><span class="pln">  info</span><span class="pun">.</span><span class="pln">defaultDuration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5284" onclick="window.location.hash='#5284'"></td><td class="FileContents-lineContents" id="5284"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5285" onclick="window.location.hash='#5285'"></td><td class="FileContents-lineContents" id="5285"><span class="pln">  </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Settings</span><span class="pln"> v</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5286" onclick="window.location.hash='#5286'"></td><td class="FileContents-lineContents" id="5286"><span class="pln">  v</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5287" onclick="window.location.hash='#5287'"></td><td class="FileContents-lineContents" id="5287"><span class="pln">  v</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5288" onclick="window.location.hash='#5288'"></td><td class="FileContents-lineContents" id="5288"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5289" onclick="window.location.hash='#5289'"></td><td class="FileContents-lineContents" id="5289"><span class="pln">  </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Settings</span><span class="pln"> a</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5290" onclick="window.location.hash='#5290'"></td><td class="FileContents-lineContents" id="5290"><span class="pln">  a</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5291" onclick="window.location.hash='#5291'"></td><td class="FileContents-lineContents" id="5291"><span class="pln">  a</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5292" onclick="window.location.hash='#5292'"></td><td class="FileContents-lineContents" id="5292"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5293" onclick="window.location.hash='#5293'"></td><td class="FileContents-lineContents" id="5293"><span class="pln">  </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Settings</span><span class="pln"> e</span><span class="pun">;</span><span class="pln">  </span><span class="com">// content_encodings_settings;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5294" onclick="window.location.hash='#5294'"></td><td class="FileContents-lineContents" id="5294"><span class="pln">  e</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5295" onclick="window.location.hash='#5295'"></td><td class="FileContents-lineContents" id="5295"><span class="pln">  e</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5296" onclick="window.location.hash='#5296'"></td><td class="FileContents-lineContents" id="5296"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5297" onclick="window.location.hash='#5297'"></td><td class="FileContents-lineContents" id="5297"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> lacing </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// default is true</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5298" onclick="window.location.hash='#5298'"></td><td class="FileContents-lineContents" id="5298"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5299" onclick="window.location.hash='#5299'"></td><td class="FileContents-lineContents" id="5299"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> track_stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5300" onclick="window.location.hash='#5300'"></td><td class="FileContents-lineContents" id="5300"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5301" onclick="window.location.hash='#5301'"></td><td class="FileContents-lineContents" id="5301"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5302" onclick="window.location.hash='#5302'"></td><td class="FileContents-lineContents" id="5302"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ParseElementHeader</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> track_stop</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5303" onclick="window.location.hash='#5303'"></td><td class="FileContents-lineContents" id="5303"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5304" onclick="window.location.hash='#5304'"></td><td class="FileContents-lineContents" id="5304"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5305" onclick="window.location.hash='#5305'"></td><td class="FileContents-lineContents" id="5305"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5306" onclick="window.location.hash='#5306'"></td><td class="FileContents-lineContents" id="5306"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5307" onclick="window.location.hash='#5307'"></td><td class="FileContents-lineContents" id="5307"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5308" onclick="window.location.hash='#5308'"></td><td class="FileContents-lineContents" id="5308"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5309" onclick="window.location.hash='#5309'"></td><td class="FileContents-lineContents" id="5309"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5310" onclick="window.location.hash='#5310'"></td><td class="FileContents-lineContents" id="5310"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5311" onclick="window.location.hash='#5311'"></td><td class="FileContents-lineContents" id="5311"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5312" onclick="window.location.hash='#5312'"></td><td class="FileContents-lineContents" id="5312"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x60</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// VideoSettings ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5313" onclick="window.location.hash='#5313'"></td><td class="FileContents-lineContents" id="5313"><span class="pln">      v</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5314" onclick="window.location.hash='#5314'"></td><td class="FileContents-lineContents" id="5314"><span class="pln">      v</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5315" onclick="window.location.hash='#5315'"></td><td class="FileContents-lineContents" id="5315"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x61</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// AudioSettings ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5316" onclick="window.location.hash='#5316'"></td><td class="FileContents-lineContents" id="5316"><span class="pln">      a</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5317" onclick="window.location.hash='#5317'"></td><td class="FileContents-lineContents" id="5317"><span class="pln">      a</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5318" onclick="window.location.hash='#5318'"></td><td class="FileContents-lineContents" id="5318"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x2D80</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// ContentEncodings ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5319" onclick="window.location.hash='#5319'"></td><td class="FileContents-lineContents" id="5319"><span class="pln">      e</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5320" onclick="window.location.hash='#5320'"></td><td class="FileContents-lineContents" id="5320"><span class="pln">      e</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5321" onclick="window.location.hash='#5321'"></td><td class="FileContents-lineContents" id="5321"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x33C5</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Track UID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5322" onclick="window.location.hash='#5322'"></td><td class="FileContents-lineContents" id="5322"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">8</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5323" onclick="window.location.hash='#5323'"></td><td class="FileContents-lineContents" id="5323"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5324" onclick="window.location.hash='#5324'"></td><td class="FileContents-lineContents" id="5324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5325" onclick="window.location.hash='#5325'"></td><td class="FileContents-lineContents" id="5325"><span class="pln">      info</span><span class="pun">.</span><span class="pln">uid </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5326" onclick="window.location.hash='#5326'"></td><td class="FileContents-lineContents" id="5326"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5327" onclick="window.location.hash='#5327'"></td><td class="FileContents-lineContents" id="5327"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos_ </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5328" onclick="window.location.hash='#5328'"></td><td class="FileContents-lineContents" id="5328"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos_end </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5329" onclick="window.location.hash='#5329'"></td><td class="FileContents-lineContents" id="5329"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5330" onclick="window.location.hash='#5330'"></td><td class="FileContents-lineContents" id="5330"><span class="pln">      </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos_ </span><span class="pun">!=</span><span class="pln"> pos_end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5331" onclick="window.location.hash='#5331'"></td><td class="FileContents-lineContents" id="5331"><span class="pln">        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5332" onclick="window.location.hash='#5332'"></td><td class="FileContents-lineContents" id="5332"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5333" onclick="window.location.hash='#5333'"></td><td class="FileContents-lineContents" id="5333"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos_</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5334" onclick="window.location.hash='#5334'"></td><td class="FileContents-lineContents" id="5334"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5335" onclick="window.location.hash='#5335'"></td><td class="FileContents-lineContents" id="5335"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5336" onclick="window.location.hash='#5336'"></td><td class="FileContents-lineContents" id="5336"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5337" onclick="window.location.hash='#5337'"></td><td class="FileContents-lineContents" id="5337"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5338" onclick="window.location.hash='#5338'"></td><td class="FileContents-lineContents" id="5338"><span class="pln">        info</span><span class="pun">.</span><span class="pln">uid </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">8</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5339" onclick="window.location.hash='#5339'"></td><td class="FileContents-lineContents" id="5339"><span class="pln">        info</span><span class="pun">.</span><span class="pln">uid </span><span class="pun">|=</span><span class="pln"> b</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5340" onclick="window.location.hash='#5340'"></td><td class="FileContents-lineContents" id="5340"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5341" onclick="window.location.hash='#5341'"></td><td class="FileContents-lineContents" id="5341"><span class="pln">        </span><span class="pun">++</span><span class="pln">pos_</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5342" onclick="window.location.hash='#5342'"></td><td class="FileContents-lineContents" id="5342"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5343" onclick="window.location.hash='#5343'"></td><td class="FileContents-lineContents" id="5343"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x57</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Track Number</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5344" onclick="window.location.hash='#5344'"></td><td class="FileContents-lineContents" id="5344"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> num </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5345" onclick="window.location.hash='#5345'"></td><td class="FileContents-lineContents" id="5345"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5346" onclick="window.location.hash='#5346'"></td><td class="FileContents-lineContents" id="5346"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">num </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">num </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">127</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5347" onclick="window.location.hash='#5347'"></td><td class="FileContents-lineContents" id="5347"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5348" onclick="window.location.hash='#5348'"></td><td class="FileContents-lineContents" id="5348"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5349" onclick="window.location.hash='#5349'"></td><td class="FileContents-lineContents" id="5349"><span class="pln">      info</span><span class="pun">.</span><span class="pln">number </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">num</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5350" onclick="window.location.hash='#5350'"></td><td class="FileContents-lineContents" id="5350"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x03</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Track Type</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5351" onclick="window.location.hash='#5351'"></td><td class="FileContents-lineContents" id="5351"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5352" onclick="window.location.hash='#5352'"></td><td class="FileContents-lineContents" id="5352"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5353" onclick="window.location.hash='#5353'"></td><td class="FileContents-lineContents" id="5353"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">type </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">type </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">254</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5354" onclick="window.location.hash='#5354'"></td><td class="FileContents-lineContents" id="5354"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5355" onclick="window.location.hash='#5355'"></td><td class="FileContents-lineContents" id="5355"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5356" onclick="window.location.hash='#5356'"></td><td class="FileContents-lineContents" id="5356"><span class="pln">      info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">type</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5357" onclick="window.location.hash='#5357'"></td><td class="FileContents-lineContents" id="5357"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x136E</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Track Name</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5358" onclick="window.location.hash='#5358'"></td><td class="FileContents-lineContents" id="5358"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5359" onclick="window.location.hash='#5359'"></td><td class="FileContents-lineContents" id="5359"><span class="pln">          </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">nameAsUTF8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5360" onclick="window.location.hash='#5360'"></td><td class="FileContents-lineContents" id="5360"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5361" onclick="window.location.hash='#5361'"></td><td class="FileContents-lineContents" id="5361"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5362" onclick="window.location.hash='#5362'"></td><td class="FileContents-lineContents" id="5362"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5363" onclick="window.location.hash='#5363'"></td><td class="FileContents-lineContents" id="5363"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x02B59C</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Track Language</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5364" onclick="window.location.hash='#5364'"></td><td class="FileContents-lineContents" id="5364"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">language</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5365" onclick="window.location.hash='#5365'"></td><td class="FileContents-lineContents" id="5365"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5366" onclick="window.location.hash='#5366'"></td><td class="FileContents-lineContents" id="5366"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5367" onclick="window.location.hash='#5367'"></td><td class="FileContents-lineContents" id="5367"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5368" onclick="window.location.hash='#5368'"></td><td class="FileContents-lineContents" id="5368"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x03E383</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Default Duration</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5369" onclick="window.location.hash='#5369'"></td><td class="FileContents-lineContents" id="5369"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> duration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5370" onclick="window.location.hash='#5370'"></td><td class="FileContents-lineContents" id="5370"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5371" onclick="window.location.hash='#5371'"></td><td class="FileContents-lineContents" id="5371"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5372" onclick="window.location.hash='#5372'"></td><td class="FileContents-lineContents" id="5372"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5373" onclick="window.location.hash='#5373'"></td><td class="FileContents-lineContents" id="5373"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5374" onclick="window.location.hash='#5374'"></td><td class="FileContents-lineContents" id="5374"><span class="pln">      info</span><span class="pun">.</span><span class="pln">defaultDuration </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">duration</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5375" onclick="window.location.hash='#5375'"></td><td class="FileContents-lineContents" id="5375"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x06</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// CodecID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5376" onclick="window.location.hash='#5376'"></td><td class="FileContents-lineContents" id="5376"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">codecId</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5377" onclick="window.location.hash='#5377'"></td><td class="FileContents-lineContents" id="5377"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5378" onclick="window.location.hash='#5378'"></td><td class="FileContents-lineContents" id="5378"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5379" onclick="window.location.hash='#5379'"></td><td class="FileContents-lineContents" id="5379"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5380" onclick="window.location.hash='#5380'"></td><td class="FileContents-lineContents" id="5380"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1C</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// lacing</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5381" onclick="window.location.hash='#5381'"></td><td class="FileContents-lineContents" id="5381"><span class="pln">      lacing </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5382" onclick="window.location.hash='#5382'"></td><td class="FileContents-lineContents" id="5382"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5383" onclick="window.location.hash='#5383'"></td><td class="FileContents-lineContents" id="5383"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">lacing </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lacing </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5384" onclick="window.location.hash='#5384'"></td><td class="FileContents-lineContents" id="5384"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5385" onclick="window.location.hash='#5385'"></td><td class="FileContents-lineContents" id="5385"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x23A2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Codec Private</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5386" onclick="window.location.hash='#5386'"></td><td class="FileContents-lineContents" id="5386"><span class="pln">      </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">codecPrivate</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5387" onclick="window.location.hash='#5387'"></td><td class="FileContents-lineContents" id="5387"><span class="pln">      info</span><span class="pun">.</span><span class="pln">codecPrivate </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5388" onclick="window.location.hash='#5388'"></td><td class="FileContents-lineContents" id="5388"><span class="pln">      info</span><span class="pun">.</span><span class="pln">codecPrivateSize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5389" onclick="window.location.hash='#5389'"></td><td class="FileContents-lineContents" id="5389"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5390" onclick="window.location.hash='#5390'"></td><td class="FileContents-lineContents" id="5390"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">size_t</span><span class="pln"> buflen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;size_t&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5391" onclick="window.location.hash='#5391'"></td><td class="FileContents-lineContents" id="5391"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5392" onclick="window.location.hash='#5392'"></td><td class="FileContents-lineContents" id="5392"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buflen</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5393" onclick="window.location.hash='#5393'"></td><td class="FileContents-lineContents" id="5393"><span class="pln">        </span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5394" onclick="window.location.hash='#5394'"></td><td class="FileContents-lineContents" id="5394"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5395" onclick="window.location.hash='#5395'"></td><td class="FileContents-lineContents" id="5395"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">buf_t</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="pln">buflen</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5396" onclick="window.location.hash='#5396'"></td><td class="FileContents-lineContents" id="5396"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5397" onclick="window.location.hash='#5397'"></td><td class="FileContents-lineContents" id="5397"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buf </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5398" onclick="window.location.hash='#5398'"></td><td class="FileContents-lineContents" id="5398"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5399" onclick="window.location.hash='#5399'"></td><td class="FileContents-lineContents" id="5399"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5400" onclick="window.location.hash='#5400'"></td><td class="FileContents-lineContents" id="5400"><span class="pln">        </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">buflen</span><span class="pun">),</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5401" onclick="window.location.hash='#5401'"></td><td class="FileContents-lineContents" id="5401"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5402" onclick="window.location.hash='#5402'"></td><td class="FileContents-lineContents" id="5402"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5403" onclick="window.location.hash='#5403'"></td><td class="FileContents-lineContents" id="5403"><span class="pln">          </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5404" onclick="window.location.hash='#5404'"></td><td class="FileContents-lineContents" id="5404"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5405" onclick="window.location.hash='#5405'"></td><td class="FileContents-lineContents" id="5405"><span class="pln">        </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5406" onclick="window.location.hash='#5406'"></td><td class="FileContents-lineContents" id="5406"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5407" onclick="window.location.hash='#5407'"></td><td class="FileContents-lineContents" id="5407"><span class="pln">        info</span><span class="pun">.</span><span class="pln">codecPrivate </span><span class="pun">=</span><span class="pln"> buf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5408" onclick="window.location.hash='#5408'"></td><td class="FileContents-lineContents" id="5408"><span class="pln">        info</span><span class="pun">.</span><span class="pln">codecPrivateSize </span><span class="pun">=</span><span class="pln"> buflen</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5409" onclick="window.location.hash='#5409'"></td><td class="FileContents-lineContents" id="5409"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5410" onclick="window.location.hash='#5410'"></td><td class="FileContents-lineContents" id="5410"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x058688</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Codec Name</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5411" onclick="window.location.hash='#5411'"></td><td class="FileContents-lineContents" id="5411"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5412" onclick="window.location.hash='#5412'"></td><td class="FileContents-lineContents" id="5412"><span class="pln">          </span><span class="typ">UnserializeString</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">codecNameAsUTF8</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5413" onclick="window.location.hash='#5413'"></td><td class="FileContents-lineContents" id="5413"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5414" onclick="window.location.hash='#5414'"></td><td class="FileContents-lineContents" id="5414"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5415" onclick="window.location.hash='#5415'"></td><td class="FileContents-lineContents" id="5415"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5416" onclick="window.location.hash='#5416'"></td><td class="FileContents-lineContents" id="5416"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x16AA</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Codec Delay</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5417" onclick="window.location.hash='#5417'"></td><td class="FileContents-lineContents" id="5417"><span class="pln">      info</span><span class="pun">.</span><span class="pln">codecDelay </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5418" onclick="window.location.hash='#5418'"></td><td class="FileContents-lineContents" id="5418"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x16BB</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Seek Pre Roll</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5419" onclick="window.location.hash='#5419'"></td><td class="FileContents-lineContents" id="5419"><span class="pln">      info</span><span class="pun">.</span><span class="pln">seekPreRoll </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5420" onclick="window.location.hash='#5420'"></td><td class="FileContents-lineContents" id="5420"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5421" onclick="window.location.hash='#5421'"></td><td class="FileContents-lineContents" id="5421"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5422" onclick="window.location.hash='#5422'"></td><td class="FileContents-lineContents" id="5422"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5423" onclick="window.location.hash='#5423'"></td><td class="FileContents-lineContents" id="5423"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> track_stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5424" onclick="window.location.hash='#5424'"></td><td class="FileContents-lineContents" id="5424"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5425" onclick="window.location.hash='#5425'"></td><td class="FileContents-lineContents" id="5425"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5426" onclick="window.location.hash='#5426'"></td><td class="FileContents-lineContents" id="5426"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> track_stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5427" onclick="window.location.hash='#5427'"></td><td class="FileContents-lineContents" id="5427"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5428" onclick="window.location.hash='#5428'"></td><td class="FileContents-lineContents" id="5428"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">number </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// not specified</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5429" onclick="window.location.hash='#5429'"></td><td class="FileContents-lineContents" id="5429"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5430" onclick="window.location.hash='#5430'"></td><td class="FileContents-lineContents" id="5430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5431" onclick="window.location.hash='#5431'"></td><td class="FileContents-lineContents" id="5431"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GetTrackByNumber</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">number</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5432" onclick="window.location.hash='#5432'"></td><td class="FileContents-lineContents" id="5432"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5433" onclick="window.location.hash='#5433'"></td><td class="FileContents-lineContents" id="5433"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5434" onclick="window.location.hash='#5434'"></td><td class="FileContents-lineContents" id="5434"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// not specified</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5435" onclick="window.location.hash='#5435'"></td><td class="FileContents-lineContents" id="5435"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5436" onclick="window.location.hash='#5436'"></td><td class="FileContents-lineContents" id="5436"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5437" onclick="window.location.hash='#5437'"></td><td class="FileContents-lineContents" id="5437"><span class="pln">  info</span><span class="pun">.</span><span class="pln">lacing </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lacing </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5438" onclick="window.location.hash='#5438'"></td><td class="FileContents-lineContents" id="5438"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5439" onclick="window.location.hash='#5439'"></td><td class="FileContents-lineContents" id="5439"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="pln">kVideo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5440" onclick="window.location.hash='#5440'"></td><td class="FileContents-lineContents" id="5440"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5441" onclick="window.location.hash='#5441'"></td><td class="FileContents-lineContents" id="5441"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5442" onclick="window.location.hash='#5442'"></td><td class="FileContents-lineContents" id="5442"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5443" onclick="window.location.hash='#5443'"></td><td class="FileContents-lineContents" id="5443"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5444" onclick="window.location.hash='#5444'"></td><td class="FileContents-lineContents" id="5444"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5445" onclick="window.location.hash='#5445'"></td><td class="FileContents-lineContents" id="5445"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5446" onclick="window.location.hash='#5446'"></td><td class="FileContents-lineContents" id="5446"><span class="pln">    info</span><span class="pun">.</span><span class="pln">settings </span><span class="pun">=</span><span class="pln"> v</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5447" onclick="window.location.hash='#5447'"></td><td class="FileContents-lineContents" id="5447"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5448" onclick="window.location.hash='#5448'"></td><td class="FileContents-lineContents" id="5448"><span class="pln">    </span><span class="typ">VideoTrack</span><span class="pun">*</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5449" onclick="window.location.hash='#5449'"></td><td class="FileContents-lineContents" id="5449"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5450" onclick="window.location.hash='#5450'"></td><td class="FileContents-lineContents" id="5450"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">VideoTrack</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5451" onclick="window.location.hash='#5451'"></td><td class="FileContents-lineContents" id="5451"><span class="pln">                                          element_size</span><span class="pun">,</span><span class="pln"> pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5452" onclick="window.location.hash='#5452'"></td><td class="FileContents-lineContents" id="5452"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5453" onclick="window.location.hash='#5453'"></td><td class="FileContents-lineContents" id="5453"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5454" onclick="window.location.hash='#5454'"></td><td class="FileContents-lineContents" id="5454"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5455" onclick="window.location.hash='#5455'"></td><td class="FileContents-lineContents" id="5455"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5456" onclick="window.location.hash='#5456'"></td><td class="FileContents-lineContents" id="5456"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5457" onclick="window.location.hash='#5457'"></td><td class="FileContents-lineContents" id="5457"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5458" onclick="window.location.hash='#5458'"></td><td class="FileContents-lineContents" id="5458"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5459" onclick="window.location.hash='#5459'"></td><td class="FileContents-lineContents" id="5459"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5460" onclick="window.location.hash='#5460'"></td><td class="FileContents-lineContents" id="5460"><span class="pln">      pResult</span><span class="pun">-&gt;</span><span class="typ">ParseContentEncodingsEntry</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">start</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5461" onclick="window.location.hash='#5461'"></td><td class="FileContents-lineContents" id="5461"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="pln">kAudio</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5462" onclick="window.location.hash='#5462'"></td><td class="FileContents-lineContents" id="5462"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5463" onclick="window.location.hash='#5463'"></td><td class="FileContents-lineContents" id="5463"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5464" onclick="window.location.hash='#5464'"></td><td class="FileContents-lineContents" id="5464"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5465" onclick="window.location.hash='#5465'"></td><td class="FileContents-lineContents" id="5465"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5466" onclick="window.location.hash='#5466'"></td><td class="FileContents-lineContents" id="5466"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5467" onclick="window.location.hash='#5467'"></td><td class="FileContents-lineContents" id="5467"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5468" onclick="window.location.hash='#5468'"></td><td class="FileContents-lineContents" id="5468"><span class="pln">    info</span><span class="pun">.</span><span class="pln">settings </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5469" onclick="window.location.hash='#5469'"></td><td class="FileContents-lineContents" id="5469"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5470" onclick="window.location.hash='#5470'"></td><td class="FileContents-lineContents" id="5470"><span class="pln">    </span><span class="typ">AudioTrack</span><span class="pun">*</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5471" onclick="window.location.hash='#5471'"></td><td class="FileContents-lineContents" id="5471"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5472" onclick="window.location.hash='#5472'"></td><td class="FileContents-lineContents" id="5472"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">AudioTrack</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5473" onclick="window.location.hash='#5473'"></td><td class="FileContents-lineContents" id="5473"><span class="pln">                                          element_size</span><span class="pun">,</span><span class="pln"> pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5474" onclick="window.location.hash='#5474'"></td><td class="FileContents-lineContents" id="5474"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5475" onclick="window.location.hash='#5475'"></td><td class="FileContents-lineContents" id="5475"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5476" onclick="window.location.hash='#5476'"></td><td class="FileContents-lineContents" id="5476"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5477" onclick="window.location.hash='#5477'"></td><td class="FileContents-lineContents" id="5477"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5478" onclick="window.location.hash='#5478'"></td><td class="FileContents-lineContents" id="5478"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5479" onclick="window.location.hash='#5479'"></td><td class="FileContents-lineContents" id="5479"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5480" onclick="window.location.hash='#5480'"></td><td class="FileContents-lineContents" id="5480"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5481" onclick="window.location.hash='#5481'"></td><td class="FileContents-lineContents" id="5481"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5482" onclick="window.location.hash='#5482'"></td><td class="FileContents-lineContents" id="5482"><span class="pln">      pResult</span><span class="pun">-&gt;</span><span class="typ">ParseContentEncodingsEntry</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">start</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5483" onclick="window.location.hash='#5483'"></td><td class="FileContents-lineContents" id="5483"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5484" onclick="window.location.hash='#5484'"></td><td class="FileContents-lineContents" id="5484"><span class="pln">    </span><span class="com">// neither video nor audio - probably metadata or subtitles</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5485" onclick="window.location.hash='#5485'"></td><td class="FileContents-lineContents" id="5485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5486" onclick="window.location.hash='#5486'"></td><td class="FileContents-lineContents" id="5486"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5487" onclick="window.location.hash='#5487'"></td><td class="FileContents-lineContents" id="5487"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5488" onclick="window.location.hash='#5488'"></td><td class="FileContents-lineContents" id="5488"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5489" onclick="window.location.hash='#5489'"></td><td class="FileContents-lineContents" id="5489"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5490" onclick="window.location.hash='#5490'"></td><td class="FileContents-lineContents" id="5490"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5491" onclick="window.location.hash='#5491'"></td><td class="FileContents-lineContents" id="5491"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5492" onclick="window.location.hash='#5492'"></td><td class="FileContents-lineContents" id="5492"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">::</span><span class="pln">kMetadata </span><span class="pun">&amp;&amp;</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5493" onclick="window.location.hash='#5493'"></td><td class="FileContents-lineContents" id="5493"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5494" onclick="window.location.hash='#5494'"></td><td class="FileContents-lineContents" id="5494"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5495" onclick="window.location.hash='#5495'"></td><td class="FileContents-lineContents" id="5495"><span class="pln">    info</span><span class="pun">.</span><span class="pln">settings</span><span class="pun">.</span><span class="pln">start </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5496" onclick="window.location.hash='#5496'"></td><td class="FileContents-lineContents" id="5496"><span class="pln">    info</span><span class="pun">.</span><span class="pln">settings</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5497" onclick="window.location.hash='#5497'"></td><td class="FileContents-lineContents" id="5497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5498" onclick="window.location.hash='#5498'"></td><td class="FileContents-lineContents" id="5498"><span class="pln">    </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5499" onclick="window.location.hash='#5499'"></td><td class="FileContents-lineContents" id="5499"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5500" onclick="window.location.hash='#5500'"></td><td class="FileContents-lineContents" id="5500"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5501" onclick="window.location.hash='#5501'"></td><td class="FileContents-lineContents" id="5501"><span class="pln">        </span><span class="typ">Track</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">,</span><span class="pln"> info</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">,</span><span class="pln"> element_size</span><span class="pun">,</span><span class="pln"> pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5502" onclick="window.location.hash='#5502'"></td><td class="FileContents-lineContents" id="5502"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5503" onclick="window.location.hash='#5503'"></td><td class="FileContents-lineContents" id="5503"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5504" onclick="window.location.hash='#5504'"></td><td class="FileContents-lineContents" id="5504"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5505" onclick="window.location.hash='#5505'"></td><td class="FileContents-lineContents" id="5505"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5506" onclick="window.location.hash='#5506'"></td><td class="FileContents-lineContents" id="5506"><span class="pln">    pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5507" onclick="window.location.hash='#5507'"></td><td class="FileContents-lineContents" id="5507"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pResult</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5508" onclick="window.location.hash='#5508'"></td><td class="FileContents-lineContents" id="5508"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5509" onclick="window.location.hash='#5509'"></td><td class="FileContents-lineContents" id="5509"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5510" onclick="window.location.hash='#5510'"></td><td class="FileContents-lineContents" id="5510"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5511" onclick="window.location.hash='#5511'"></td><td class="FileContents-lineContents" id="5511"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5512" onclick="window.location.hash='#5512'"></td><td class="FileContents-lineContents" id="5512"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5513" onclick="window.location.hash='#5513'"></td><td class="FileContents-lineContents" id="5513"><span class="typ">Tracks</span><span class="pun">::~</span><span class="typ">Tracks</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5514" onclick="window.location.hash='#5514'"></td><td class="FileContents-lineContents" id="5514"><span class="pln">  </span><span class="typ">Track</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> m_trackEntries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5515" onclick="window.location.hash='#5515'"></td><td class="FileContents-lineContents" id="5515"><span class="pln">  </span><span class="typ">Track</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> m_trackEntriesEnd</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5516" onclick="window.location.hash='#5516'"></td><td class="FileContents-lineContents" id="5516"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5517" onclick="window.location.hash='#5517'"></td><td class="FileContents-lineContents" id="5517"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5518" onclick="window.location.hash='#5518'"></td><td class="FileContents-lineContents" id="5518"><span class="pln">    </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5519" onclick="window.location.hash='#5519'"></td><td class="FileContents-lineContents" id="5519"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5520" onclick="window.location.hash='#5520'"></td><td class="FileContents-lineContents" id="5520"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5521" onclick="window.location.hash='#5521'"></td><td class="FileContents-lineContents" id="5521"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5522" onclick="window.location.hash='#5522'"></td><td class="FileContents-lineContents" id="5522"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_trackEntries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5523" onclick="window.location.hash='#5523'"></td><td class="FileContents-lineContents" id="5523"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5524" onclick="window.location.hash='#5524'"></td><td class="FileContents-lineContents" id="5524"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5525" onclick="window.location.hash='#5525'"></td><td class="FileContents-lineContents" id="5525"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">::</span><span class="typ">GetTrackByNumber</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> tn</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5526" onclick="window.location.hash='#5526'"></td><td class="FileContents-lineContents" id="5526"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tn </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5527" onclick="window.location.hash='#5527'"></td><td class="FileContents-lineContents" id="5527"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5528" onclick="window.location.hash='#5528'"></td><td class="FileContents-lineContents" id="5528"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5529" onclick="window.location.hash='#5529'"></td><td class="FileContents-lineContents" id="5529"><span class="pln">  </span><span class="typ">Track</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> m_trackEntries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5530" onclick="window.location.hash='#5530'"></td><td class="FileContents-lineContents" id="5530"><span class="pln">  </span><span class="typ">Track</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> m_trackEntriesEnd</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5531" onclick="window.location.hash='#5531'"></td><td class="FileContents-lineContents" id="5531"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5532" onclick="window.location.hash='#5532'"></td><td class="FileContents-lineContents" id="5532"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5533" onclick="window.location.hash='#5533'"></td><td class="FileContents-lineContents" id="5533"><span class="pln">    </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5534" onclick="window.location.hash='#5534'"></td><td class="FileContents-lineContents" id="5534"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5535" onclick="window.location.hash='#5535'"></td><td class="FileContents-lineContents" id="5535"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5536" onclick="window.location.hash='#5536'"></td><td class="FileContents-lineContents" id="5536"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5537" onclick="window.location.hash='#5537'"></td><td class="FileContents-lineContents" id="5537"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5538" onclick="window.location.hash='#5538'"></td><td class="FileContents-lineContents" id="5538"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tn </span><span class="pun">==</span><span class="pln"> pTrack</span><span class="pun">-&gt;</span><span class="typ">GetNumber</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5539" onclick="window.location.hash='#5539'"></td><td class="FileContents-lineContents" id="5539"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pTrack</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5540" onclick="window.location.hash='#5540'"></td><td class="FileContents-lineContents" id="5540"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5541" onclick="window.location.hash='#5541'"></td><td class="FileContents-lineContents" id="5541"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5542" onclick="window.location.hash='#5542'"></td><td class="FileContents-lineContents" id="5542"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">  </span><span class="com">// not found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5543" onclick="window.location.hash='#5543'"></td><td class="FileContents-lineContents" id="5543"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5544" onclick="window.location.hash='#5544'"></td><td class="FileContents-lineContents" id="5544"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5545" onclick="window.location.hash='#5545'"></td><td class="FileContents-lineContents" id="5545"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">::</span><span class="typ">GetTrackByIndex</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5546" onclick="window.location.hash='#5546'"></td><td class="FileContents-lineContents" id="5546"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ptrdiff_t</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> m_trackEntriesEnd </span><span class="pun">-</span><span class="pln"> m_trackEntries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5547" onclick="window.location.hash='#5547'"></td><td class="FileContents-lineContents" id="5547"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5548" onclick="window.location.hash='#5548'"></td><td class="FileContents-lineContents" id="5548"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&gt;(</span><span class="pln">count</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5549" onclick="window.location.hash='#5549'"></td><td class="FileContents-lineContents" id="5549"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5550" onclick="window.location.hash='#5550'"></td><td class="FileContents-lineContents" id="5550"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5551" onclick="window.location.hash='#5551'"></td><td class="FileContents-lineContents" id="5551"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_trackEntries</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5552" onclick="window.location.hash='#5552'"></td><td class="FileContents-lineContents" id="5552"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5553" onclick="window.location.hash='#5553'"></td><td class="FileContents-lineContents" id="5553"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5554" onclick="window.location.hash='#5554'"></td><td class="FileContents-lineContents" id="5554"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Load</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5555" onclick="window.location.hash='#5555'"></td><td class="FileContents-lineContents" id="5555"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5556" onclick="window.location.hash='#5556'"></td><td class="FileContents-lineContents" id="5556"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> m_element_start</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5557" onclick="window.location.hash='#5557'"></td><td class="FileContents-lineContents" id="5557"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5558" onclick="window.location.hash='#5558'"></td><td class="FileContents-lineContents" id="5558"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_timecode </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// at least partially loaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5559" onclick="window.location.hash='#5559'"></td><td class="FileContents-lineContents" id="5559"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5560" onclick="window.location.hash='#5560'"></td><td class="FileContents-lineContents" id="5560"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5561" onclick="window.location.hash='#5561'"></td><td class="FileContents-lineContents" id="5561"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">==</span><span class="pln"> m_element_start</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5562" onclick="window.location.hash='#5562'"></td><td class="FileContents-lineContents" id="5562"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_element_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5563" onclick="window.location.hash='#5563'"></td><td class="FileContents-lineContents" id="5563"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5564" onclick="window.location.hash='#5564'"></td><td class="FileContents-lineContents" id="5564"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5565" onclick="window.location.hash='#5565'"></td><td class="FileContents-lineContents" id="5565"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5566" onclick="window.location.hash='#5566'"></td><td class="FileContents-lineContents" id="5566"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5567" onclick="window.location.hash='#5567'"></td><td class="FileContents-lineContents" id="5567"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5568" onclick="window.location.hash='#5568'"></td><td class="FileContents-lineContents" id="5568"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5569" onclick="window.location.hash='#5569'"></td><td class="FileContents-lineContents" id="5569"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5570" onclick="window.location.hash='#5570'"></td><td class="FileContents-lineContents" id="5570"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5571" onclick="window.location.hash='#5571'"></td><td class="FileContents-lineContents" id="5571"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5572" onclick="window.location.hash='#5572'"></td><td class="FileContents-lineContents" id="5572"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5573" onclick="window.location.hash='#5573'"></td><td class="FileContents-lineContents" id="5573"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5574" onclick="window.location.hash='#5574'"></td><td class="FileContents-lineContents" id="5574"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span><span class="pln">  </span><span class="com">// TODO: verify this</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5575" onclick="window.location.hash='#5575'"></td><td class="FileContents-lineContents" id="5575"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5576" onclick="window.location.hash='#5576'"></td><td class="FileContents-lineContents" id="5576"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> m_pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5577" onclick="window.location.hash='#5577'"></td><td class="FileContents-lineContents" id="5577"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5578" onclick="window.location.hash='#5578'"></td><td class="FileContents-lineContents" id="5578"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5579" onclick="window.location.hash='#5579'"></td><td class="FileContents-lineContents" id="5579"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5580" onclick="window.location.hash='#5580'"></td><td class="FileContents-lineContents" id="5580"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5581" onclick="window.location.hash='#5581'"></td><td class="FileContents-lineContents" id="5581"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5582" onclick="window.location.hash='#5582'"></td><td class="FileContents-lineContents" id="5582"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5583" onclick="window.location.hash='#5583'"></td><td class="FileContents-lineContents" id="5583"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5584" onclick="window.location.hash='#5584'"></td><td class="FileContents-lineContents" id="5584"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5585" onclick="window.location.hash='#5585'"></td><td class="FileContents-lineContents" id="5585"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5586" onclick="window.location.hash='#5586'"></td><td class="FileContents-lineContents" id="5586"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5587" onclick="window.location.hash='#5587'"></td><td class="FileContents-lineContents" id="5587"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5588" onclick="window.location.hash='#5588'"></td><td class="FileContents-lineContents" id="5588"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5589" onclick="window.location.hash='#5589'"></td><td class="FileContents-lineContents" id="5589"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5590" onclick="window.location.hash='#5590'"></td><td class="FileContents-lineContents" id="5590"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5591" onclick="window.location.hash='#5591'"></td><td class="FileContents-lineContents" id="5591"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow (weird)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5592" onclick="window.location.hash='#5592'"></td><td class="FileContents-lineContents" id="5592"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5593" onclick="window.location.hash='#5593'"></td><td class="FileContents-lineContents" id="5593"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5594" onclick="window.location.hash='#5594'"></td><td class="FileContents-lineContents" id="5594"><span class="pln">    </span><span class="com">// if ((pos + len) &gt; segment_stop)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5595" onclick="window.location.hash='#5595'"></td><td class="FileContents-lineContents" id="5595"><span class="pln">    </span><span class="com">//    return E_FILE_FORMAT_INVALID;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5596" onclick="window.location.hash='#5596'"></td><td class="FileContents-lineContents" id="5596"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5597" onclick="window.location.hash='#5597'"></td><td class="FileContents-lineContents" id="5597"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5598" onclick="window.location.hash='#5598'"></td><td class="FileContents-lineContents" id="5598"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5599" onclick="window.location.hash='#5599'"></td><td class="FileContents-lineContents" id="5599"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5600" onclick="window.location.hash='#5600'"></td><td class="FileContents-lineContents" id="5600"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5601" onclick="window.location.hash='#5601'"></td><td class="FileContents-lineContents" id="5601"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5602" onclick="window.location.hash='#5602'"></td><td class="FileContents-lineContents" id="5602"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id_ </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5603" onclick="window.location.hash='#5603'"></td><td class="FileContents-lineContents" id="5603"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id_</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5604" onclick="window.location.hash='#5604'"></td><td class="FileContents-lineContents" id="5604"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5605" onclick="window.location.hash='#5605'"></td><td class="FileContents-lineContents" id="5605"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id_ </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5606" onclick="window.location.hash='#5606'"></td><td class="FileContents-lineContents" id="5606"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5607" onclick="window.location.hash='#5607'"></td><td class="FileContents-lineContents" id="5607"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5608" onclick="window.location.hash='#5608'"></td><td class="FileContents-lineContents" id="5608"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5609" onclick="window.location.hash='#5609'"></td><td class="FileContents-lineContents" id="5609"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5610" onclick="window.location.hash='#5610'"></td><td class="FileContents-lineContents" id="5610"><span class="pln">    </span><span class="com">// read cluster size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5611" onclick="window.location.hash='#5611'"></td><td class="FileContents-lineContents" id="5611"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5612" onclick="window.location.hash='#5612'"></td><td class="FileContents-lineContents" id="5612"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5613" onclick="window.location.hash='#5613'"></td><td class="FileContents-lineContents" id="5613"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5614" onclick="window.location.hash='#5614'"></td><td class="FileContents-lineContents" id="5614"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5615" onclick="window.location.hash='#5615'"></td><td class="FileContents-lineContents" id="5615"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5616" onclick="window.location.hash='#5616'"></td><td class="FileContents-lineContents" id="5616"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5617" onclick="window.location.hash='#5617'"></td><td class="FileContents-lineContents" id="5617"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5618" onclick="window.location.hash='#5618'"></td><td class="FileContents-lineContents" id="5618"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5619" onclick="window.location.hash='#5619'"></td><td class="FileContents-lineContents" id="5619"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5620" onclick="window.location.hash='#5620'"></td><td class="FileContents-lineContents" id="5620"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5621" onclick="window.location.hash='#5621'"></td><td class="FileContents-lineContents" id="5621"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5622" onclick="window.location.hash='#5622'"></td><td class="FileContents-lineContents" id="5622"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5623" onclick="window.location.hash='#5623'"></td><td class="FileContents-lineContents" id="5623"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5624" onclick="window.location.hash='#5624'"></td><td class="FileContents-lineContents" id="5624"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5625" onclick="window.location.hash='#5625'"></td><td class="FileContents-lineContents" id="5625"><span class="pln">    </span><span class="com">// if ((pos + len) &gt; segment_stop)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5626" onclick="window.location.hash='#5626'"></td><td class="FileContents-lineContents" id="5626"><span class="pln">    </span><span class="com">//    return E_FILE_FORMAT_INVALID;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5627" onclick="window.location.hash='#5627'"></td><td class="FileContents-lineContents" id="5627"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5628" onclick="window.location.hash='#5628'"></td><td class="FileContents-lineContents" id="5628"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5629" onclick="window.location.hash='#5629'"></td><td class="FileContents-lineContents" id="5629"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5630" onclick="window.location.hash='#5630'"></td><td class="FileContents-lineContents" id="5630"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5631" onclick="window.location.hash='#5631'"></td><td class="FileContents-lineContents" id="5631"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5632" onclick="window.location.hash='#5632'"></td><td class="FileContents-lineContents" id="5632"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5633" onclick="window.location.hash='#5633'"></td><td class="FileContents-lineContents" id="5633"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5634" onclick="window.location.hash='#5634'"></td><td class="FileContents-lineContents" id="5634"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">cluster_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5635" onclick="window.location.hash='#5635'"></td><td class="FileContents-lineContents" id="5635"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5636" onclick="window.location.hash='#5636'"></td><td class="FileContents-lineContents" id="5636"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5637" onclick="window.location.hash='#5637'"></td><td class="FileContents-lineContents" id="5637"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// TODO: verify this</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5638" onclick="window.location.hash='#5638'"></td><td class="FileContents-lineContents" id="5638"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5639" onclick="window.location.hash='#5639'"></td><td class="FileContents-lineContents" id="5639"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of element</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5640" onclick="window.location.hash='#5640'"></td><td class="FileContents-lineContents" id="5640"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5641" onclick="window.location.hash='#5641'"></td><td class="FileContents-lineContents" id="5641"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5642" onclick="window.location.hash='#5642'"></td><td class="FileContents-lineContents" id="5642"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5643" onclick="window.location.hash='#5643'"></td><td class="FileContents-lineContents" id="5643"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">!=</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5644" onclick="window.location.hash='#5644'"></td><td class="FileContents-lineContents" id="5644"><span class="pln">      cluster_size </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5645" onclick="window.location.hash='#5645'"></td><td class="FileContents-lineContents" id="5645"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5646" onclick="window.location.hash='#5646'"></td><td class="FileContents-lineContents" id="5646"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5647" onclick="window.location.hash='#5647'"></td><td class="FileContents-lineContents" id="5647"><span class="pln">  </span><span class="com">// pos points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5648" onclick="window.location.hash='#5648'"></td><td class="FileContents-lineContents" id="5648"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> timecode </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5649" onclick="window.location.hash='#5649'"></td><td class="FileContents-lineContents" id="5649"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> new_pos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5650" onclick="window.location.hash='#5650'"></td><td class="FileContents-lineContents" id="5650"><span class="pln">  </span><span class="kwd">bool</span><span class="pln"> bBlock </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5651" onclick="window.location.hash='#5651'"></td><td class="FileContents-lineContents" id="5651"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5652" onclick="window.location.hash='#5652'"></td><td class="FileContents-lineContents" id="5652"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> cluster_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5653" onclick="window.location.hash='#5653'"></td><td class="FileContents-lineContents" id="5653"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5654" onclick="window.location.hash='#5654'"></td><td class="FileContents-lineContents" id="5654"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5655" onclick="window.location.hash='#5655'"></td><td class="FileContents-lineContents" id="5655"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5656" onclick="window.location.hash='#5656'"></td><td class="FileContents-lineContents" id="5656"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5657" onclick="window.location.hash='#5657'"></td><td class="FileContents-lineContents" id="5657"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5658" onclick="window.location.hash='#5658'"></td><td class="FileContents-lineContents" id="5658"><span class="pln">    </span><span class="com">// Parse ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5659" onclick="window.location.hash='#5659'"></td><td class="FileContents-lineContents" id="5659"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5660" onclick="window.location.hash='#5660'"></td><td class="FileContents-lineContents" id="5660"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5661" onclick="window.location.hash='#5661'"></td><td class="FileContents-lineContents" id="5661"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5662" onclick="window.location.hash='#5662'"></td><td class="FileContents-lineContents" id="5662"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5663" onclick="window.location.hash='#5663'"></td><td class="FileContents-lineContents" id="5663"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5664" onclick="window.location.hash='#5664'"></td><td class="FileContents-lineContents" id="5664"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5665" onclick="window.location.hash='#5665'"></td><td class="FileContents-lineContents" id="5665"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5666" onclick="window.location.hash='#5666'"></td><td class="FileContents-lineContents" id="5666"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5667" onclick="window.location.hash='#5667'"></td><td class="FileContents-lineContents" id="5667"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5668" onclick="window.location.hash='#5668'"></td><td class="FileContents-lineContents" id="5668"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5669" onclick="window.location.hash='#5669'"></td><td class="FileContents-lineContents" id="5669"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5670" onclick="window.location.hash='#5670'"></td><td class="FileContents-lineContents" id="5670"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5671" onclick="window.location.hash='#5671'"></td><td class="FileContents-lineContents" id="5671"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5672" onclick="window.location.hash='#5672'"></td><td class="FileContents-lineContents" id="5672"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5673" onclick="window.location.hash='#5673'"></td><td class="FileContents-lineContents" id="5673"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5674" onclick="window.location.hash='#5674'"></td><td class="FileContents-lineContents" id="5674"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5675" onclick="window.location.hash='#5675'"></td><td class="FileContents-lineContents" id="5675"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5676" onclick="window.location.hash='#5676'"></td><td class="FileContents-lineContents" id="5676"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5677" onclick="window.location.hash='#5677'"></td><td class="FileContents-lineContents" id="5677"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5678" onclick="window.location.hash='#5678'"></td><td class="FileContents-lineContents" id="5678"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5679" onclick="window.location.hash='#5679'"></td><td class="FileContents-lineContents" id="5679"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5680" onclick="window.location.hash='#5680'"></td><td class="FileContents-lineContents" id="5680"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5681" onclick="window.location.hash='#5681'"></td><td class="FileContents-lineContents" id="5681"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5682" onclick="window.location.hash='#5682'"></td><td class="FileContents-lineContents" id="5682"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5683" onclick="window.location.hash='#5683'"></td><td class="FileContents-lineContents" id="5683"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5684" onclick="window.location.hash='#5684'"></td><td class="FileContents-lineContents" id="5684"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5685" onclick="window.location.hash='#5685'"></td><td class="FileContents-lineContents" id="5685"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5686" onclick="window.location.hash='#5686'"></td><td class="FileContents-lineContents" id="5686"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5687" onclick="window.location.hash='#5687'"></td><td class="FileContents-lineContents" id="5687"><span class="pln">    </span><span class="com">// This is the distinguished set of ID&#39;s we use to determine</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5688" onclick="window.location.hash='#5688'"></td><td class="FileContents-lineContents" id="5688"><span class="pln">    </span><span class="com">// that we have exhausted the sub-element&#39;s inside the cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5689" onclick="window.location.hash='#5689'"></td><td class="FileContents-lineContents" id="5689"><span class="pln">    </span><span class="com">// whose ID we parsed earlier.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5690" onclick="window.location.hash='#5690'"></td><td class="FileContents-lineContents" id="5690"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5691" onclick="window.location.hash='#5691'"></td><td class="FileContents-lineContents" id="5691"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5692" onclick="window.location.hash='#5692'"></td><td class="FileContents-lineContents" id="5692"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5693" onclick="window.location.hash='#5693'"></td><td class="FileContents-lineContents" id="5693"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5694" onclick="window.location.hash='#5694'"></td><td class="FileContents-lineContents" id="5694"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5695" onclick="window.location.hash='#5695'"></td><td class="FileContents-lineContents" id="5695"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5696" onclick="window.location.hash='#5696'"></td><td class="FileContents-lineContents" id="5696"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5697" onclick="window.location.hash='#5697'"></td><td class="FileContents-lineContents" id="5697"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5698" onclick="window.location.hash='#5698'"></td><td class="FileContents-lineContents" id="5698"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5699" onclick="window.location.hash='#5699'"></td><td class="FileContents-lineContents" id="5699"><span class="pln">    </span><span class="com">// Parse Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5700" onclick="window.location.hash='#5700'"></td><td class="FileContents-lineContents" id="5700"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5701" onclick="window.location.hash='#5701'"></td><td class="FileContents-lineContents" id="5701"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5702" onclick="window.location.hash='#5702'"></td><td class="FileContents-lineContents" id="5702"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5703" onclick="window.location.hash='#5703'"></td><td class="FileContents-lineContents" id="5703"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5704" onclick="window.location.hash='#5704'"></td><td class="FileContents-lineContents" id="5704"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5705" onclick="window.location.hash='#5705'"></td><td class="FileContents-lineContents" id="5705"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5706" onclick="window.location.hash='#5706'"></td><td class="FileContents-lineContents" id="5706"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5707" onclick="window.location.hash='#5707'"></td><td class="FileContents-lineContents" id="5707"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5708" onclick="window.location.hash='#5708'"></td><td class="FileContents-lineContents" id="5708"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5709" onclick="window.location.hash='#5709'"></td><td class="FileContents-lineContents" id="5709"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5710" onclick="window.location.hash='#5710'"></td><td class="FileContents-lineContents" id="5710"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5711" onclick="window.location.hash='#5711'"></td><td class="FileContents-lineContents" id="5711"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5712" onclick="window.location.hash='#5712'"></td><td class="FileContents-lineContents" id="5712"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5713" onclick="window.location.hash='#5713'"></td><td class="FileContents-lineContents" id="5713"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5714" onclick="window.location.hash='#5714'"></td><td class="FileContents-lineContents" id="5714"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5715" onclick="window.location.hash='#5715'"></td><td class="FileContents-lineContents" id="5715"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5716" onclick="window.location.hash='#5716'"></td><td class="FileContents-lineContents" id="5716"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5717" onclick="window.location.hash='#5717'"></td><td class="FileContents-lineContents" id="5717"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5718" onclick="window.location.hash='#5718'"></td><td class="FileContents-lineContents" id="5718"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5719" onclick="window.location.hash='#5719'"></td><td class="FileContents-lineContents" id="5719"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5720" onclick="window.location.hash='#5720'"></td><td class="FileContents-lineContents" id="5720"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5721" onclick="window.location.hash='#5721'"></td><td class="FileContents-lineContents" id="5721"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5722" onclick="window.location.hash='#5722'"></td><td class="FileContents-lineContents" id="5722"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5723" onclick="window.location.hash='#5723'"></td><td class="FileContents-lineContents" id="5723"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5724" onclick="window.location.hash='#5724'"></td><td class="FileContents-lineContents" id="5724"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5725" onclick="window.location.hash='#5725'"></td><td class="FileContents-lineContents" id="5725"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5726" onclick="window.location.hash='#5726'"></td><td class="FileContents-lineContents" id="5726"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5727" onclick="window.location.hash='#5727'"></td><td class="FileContents-lineContents" id="5727"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5728" onclick="window.location.hash='#5728'"></td><td class="FileContents-lineContents" id="5728"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5729" onclick="window.location.hash='#5729'"></td><td class="FileContents-lineContents" id="5729"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5730" onclick="window.location.hash='#5730'"></td><td class="FileContents-lineContents" id="5730"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5731" onclick="window.location.hash='#5731'"></td><td class="FileContents-lineContents" id="5731"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5732" onclick="window.location.hash='#5732'"></td><td class="FileContents-lineContents" id="5732"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5733" onclick="window.location.hash='#5733'"></td><td class="FileContents-lineContents" id="5733"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5734" onclick="window.location.hash='#5734'"></td><td class="FileContents-lineContents" id="5734"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5735" onclick="window.location.hash='#5735'"></td><td class="FileContents-lineContents" id="5735"><span class="pln">    </span><span class="com">// pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5736" onclick="window.location.hash='#5736'"></td><td class="FileContents-lineContents" id="5736"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5737" onclick="window.location.hash='#5737'"></td><td class="FileContents-lineContents" id="5737"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5738" onclick="window.location.hash='#5738'"></td><td class="FileContents-lineContents" id="5738"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5739" onclick="window.location.hash='#5739'"></td><td class="FileContents-lineContents" id="5739"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5740" onclick="window.location.hash='#5740'"></td><td class="FileContents-lineContents" id="5740"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5741" onclick="window.location.hash='#5741'"></td><td class="FileContents-lineContents" id="5741"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5742" onclick="window.location.hash='#5742'"></td><td class="FileContents-lineContents" id="5742"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5743" onclick="window.location.hash='#5743'"></td><td class="FileContents-lineContents" id="5743"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x67</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// TimeCode ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5744" onclick="window.location.hash='#5744'"></td><td class="FileContents-lineContents" id="5744"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5745" onclick="window.location.hash='#5745'"></td><td class="FileContents-lineContents" id="5745"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5746" onclick="window.location.hash='#5746'"></td><td class="FileContents-lineContents" id="5746"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5747" onclick="window.location.hash='#5747'"></td><td class="FileContents-lineContents" id="5747"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5748" onclick="window.location.hash='#5748'"></td><td class="FileContents-lineContents" id="5748"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5749" onclick="window.location.hash='#5749'"></td><td class="FileContents-lineContents" id="5749"><span class="pln">      timecode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5750" onclick="window.location.hash='#5750'"></td><td class="FileContents-lineContents" id="5750"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5751" onclick="window.location.hash='#5751'"></td><td class="FileContents-lineContents" id="5751"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">timecode </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error (or underflow)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5752" onclick="window.location.hash='#5752'"></td><td class="FileContents-lineContents" id="5752"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">timecode</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5753" onclick="window.location.hash='#5753'"></td><td class="FileContents-lineContents" id="5753"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5754" onclick="window.location.hash='#5754'"></td><td class="FileContents-lineContents" id="5754"><span class="pln">      new_pos </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5755" onclick="window.location.hash='#5755'"></td><td class="FileContents-lineContents" id="5755"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5756" onclick="window.location.hash='#5756'"></td><td class="FileContents-lineContents" id="5756"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bBlock</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5757" onclick="window.location.hash='#5757'"></td><td class="FileContents-lineContents" id="5757"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5758" onclick="window.location.hash='#5758'"></td><td class="FileContents-lineContents" id="5758"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x20</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// BlockGroup ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5759" onclick="window.location.hash='#5759'"></td><td class="FileContents-lineContents" id="5759"><span class="pln">      bBlock </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5760" onclick="window.location.hash='#5760'"></td><td class="FileContents-lineContents" id="5760"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5761" onclick="window.location.hash='#5761'"></td><td class="FileContents-lineContents" id="5761"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x23</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// SimpleBlock ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5762" onclick="window.location.hash='#5762'"></td><td class="FileContents-lineContents" id="5762"><span class="pln">      bBlock </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5763" onclick="window.location.hash='#5763'"></td><td class="FileContents-lineContents" id="5763"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5764" onclick="window.location.hash='#5764'"></td><td class="FileContents-lineContents" id="5764"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5765" onclick="window.location.hash='#5765'"></td><td class="FileContents-lineContents" id="5765"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5766" onclick="window.location.hash='#5766'"></td><td class="FileContents-lineContents" id="5766"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5767" onclick="window.location.hash='#5767'"></td><td class="FileContents-lineContents" id="5767"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> cluster_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5768" onclick="window.location.hash='#5768'"></td><td class="FileContents-lineContents" id="5768"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5769" onclick="window.location.hash='#5769'"></td><td class="FileContents-lineContents" id="5769"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5770" onclick="window.location.hash='#5770'"></td><td class="FileContents-lineContents" id="5770"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> cluster_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5771" onclick="window.location.hash='#5771'"></td><td class="FileContents-lineContents" id="5771"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5772" onclick="window.location.hash='#5772'"></td><td class="FileContents-lineContents" id="5772"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">timecode </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// no timecode found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5773" onclick="window.location.hash='#5773'"></td><td class="FileContents-lineContents" id="5773"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5774" onclick="window.location.hash='#5774'"></td><td class="FileContents-lineContents" id="5774"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5775" onclick="window.location.hash='#5775'"></td><td class="FileContents-lineContents" id="5775"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">bBlock</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5776" onclick="window.location.hash='#5776'"></td><td class="FileContents-lineContents" id="5776"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5777" onclick="window.location.hash='#5777'"></td><td class="FileContents-lineContents" id="5777"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5778" onclick="window.location.hash='#5778'"></td><td class="FileContents-lineContents" id="5778"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> new_pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// designates position just beyond timecode payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5779" onclick="window.location.hash='#5779'"></td><td class="FileContents-lineContents" id="5779"><span class="pln">  m_timecode </span><span class="pun">=</span><span class="pln"> timecode</span><span class="pun">;</span><span class="pln">  </span><span class="com">// m_timecode &gt;= 0 means we&#39;re partially loaded</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5780" onclick="window.location.hash='#5780'"></td><td class="FileContents-lineContents" id="5780"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5781" onclick="window.location.hash='#5781'"></td><td class="FileContents-lineContents" id="5781"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5782" onclick="window.location.hash='#5782'"></td><td class="FileContents-lineContents" id="5782"><span class="pln">    m_element_size </span><span class="pun">=</span><span class="pln"> cluster_stop </span><span class="pun">-</span><span class="pln"> m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5783" onclick="window.location.hash='#5783'"></td><td class="FileContents-lineContents" id="5783"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5784" onclick="window.location.hash='#5784'"></td><td class="FileContents-lineContents" id="5784"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5785" onclick="window.location.hash='#5785'"></td><td class="FileContents-lineContents" id="5785"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5786" onclick="window.location.hash='#5786'"></td><td class="FileContents-lineContents" id="5786"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5787" onclick="window.location.hash='#5787'"></td><td class="FileContents-lineContents" id="5787"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5788" onclick="window.location.hash='#5788'"></td><td class="FileContents-lineContents" id="5788"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Load</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5789" onclick="window.location.hash='#5789'"></td><td class="FileContents-lineContents" id="5789"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5790" onclick="window.location.hash='#5790'"></td><td class="FileContents-lineContents" id="5790"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5791" onclick="window.location.hash='#5791'"></td><td class="FileContents-lineContents" id="5791"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5792" onclick="window.location.hash='#5792'"></td><td class="FileContents-lineContents" id="5792"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5793" onclick="window.location.hash='#5793'"></td><td class="FileContents-lineContents" id="5793"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> m_element_start</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5794" onclick="window.location.hash='#5794'"></td><td class="FileContents-lineContents" id="5794"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_timecode </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5795" onclick="window.location.hash='#5795'"></td><td class="FileContents-lineContents" id="5795"><span class="pln">  </span><span class="com">// assert(m_size &gt; 0);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5796" onclick="window.location.hash='#5796'"></td><td class="FileContents-lineContents" id="5796"><span class="pln">  </span><span class="com">// assert(m_element_size &gt; m_size);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5797" onclick="window.location.hash='#5797'"></td><td class="FileContents-lineContents" id="5797"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5798" onclick="window.location.hash='#5798'"></td><td class="FileContents-lineContents" id="5798"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_stop </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5799" onclick="window.location.hash='#5799'"></td><td class="FileContents-lineContents" id="5799"><span class="pln">      </span><span class="pun">(</span><span class="pln">m_element_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_element_start </span><span class="pun">+</span><span class="pln"> m_element_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5800" onclick="window.location.hash='#5800'"></td><td class="FileContents-lineContents" id="5800"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5801" onclick="window.location.hash='#5801'"></td><td class="FileContents-lineContents" id="5801"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5802" onclick="window.location.hash='#5802'"></td><td class="FileContents-lineContents" id="5802"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing else to do</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5803" onclick="window.location.hash='#5803'"></td><td class="FileContents-lineContents" id="5803"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5804" onclick="window.location.hash='#5804'"></td><td class="FileContents-lineContents" id="5804"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5805" onclick="window.location.hash='#5805'"></td><td class="FileContents-lineContents" id="5805"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5806" onclick="window.location.hash='#5806'"></td><td class="FileContents-lineContents" id="5806"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5807" onclick="window.location.hash='#5807'"></td><td class="FileContents-lineContents" id="5807"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5808" onclick="window.location.hash='#5808'"></td><td class="FileContents-lineContents" id="5808"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5809" onclick="window.location.hash='#5809'"></td><td class="FileContents-lineContents" id="5809"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5810" onclick="window.location.hash='#5810'"></td><td class="FileContents-lineContents" id="5810"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5811" onclick="window.location.hash='#5811'"></td><td class="FileContents-lineContents" id="5811"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5812" onclick="window.location.hash='#5812'"></td><td class="FileContents-lineContents" id="5812"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5813" onclick="window.location.hash='#5813'"></td><td class="FileContents-lineContents" id="5813"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5814" onclick="window.location.hash='#5814'"></td><td class="FileContents-lineContents" id="5814"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5815" onclick="window.location.hash='#5815'"></td><td class="FileContents-lineContents" id="5815"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> m_pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5816" onclick="window.location.hash='#5816'"></td><td class="FileContents-lineContents" id="5816"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5817" onclick="window.location.hash='#5817'"></td><td class="FileContents-lineContents" id="5817"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5818" onclick="window.location.hash='#5818'"></td><td class="FileContents-lineContents" id="5818"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5819" onclick="window.location.hash='#5819'"></td><td class="FileContents-lineContents" id="5819"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5820" onclick="window.location.hash='#5820'"></td><td class="FileContents-lineContents" id="5820"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5821" onclick="window.location.hash='#5821'"></td><td class="FileContents-lineContents" id="5821"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5822" onclick="window.location.hash='#5822'"></td><td class="FileContents-lineContents" id="5822"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_element_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5823" onclick="window.location.hash='#5823'"></td><td class="FileContents-lineContents" id="5823"><span class="pln">        m_element_size </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">-</span><span class="pln"> m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5824" onclick="window.location.hash='#5824'"></td><td class="FileContents-lineContents" id="5824"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5825" onclick="window.location.hash='#5825'"></td><td class="FileContents-lineContents" id="5825"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5826" onclick="window.location.hash='#5826'"></td><td class="FileContents-lineContents" id="5826"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5827" onclick="window.location.hash='#5827'"></td><td class="FileContents-lineContents" id="5827"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5828" onclick="window.location.hash='#5828'"></td><td class="FileContents-lineContents" id="5828"><span class="pln">    </span><span class="com">// Parse ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5829" onclick="window.location.hash='#5829'"></td><td class="FileContents-lineContents" id="5829"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5830" onclick="window.location.hash='#5830'"></td><td class="FileContents-lineContents" id="5830"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5831" onclick="window.location.hash='#5831'"></td><td class="FileContents-lineContents" id="5831"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5832" onclick="window.location.hash='#5832'"></td><td class="FileContents-lineContents" id="5832"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5833" onclick="window.location.hash='#5833'"></td><td class="FileContents-lineContents" id="5833"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5834" onclick="window.location.hash='#5834'"></td><td class="FileContents-lineContents" id="5834"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5835" onclick="window.location.hash='#5835'"></td><td class="FileContents-lineContents" id="5835"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5836" onclick="window.location.hash='#5836'"></td><td class="FileContents-lineContents" id="5836"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5837" onclick="window.location.hash='#5837'"></td><td class="FileContents-lineContents" id="5837"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5838" onclick="window.location.hash='#5838'"></td><td class="FileContents-lineContents" id="5838"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5839" onclick="window.location.hash='#5839'"></td><td class="FileContents-lineContents" id="5839"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5840" onclick="window.location.hash='#5840'"></td><td class="FileContents-lineContents" id="5840"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5841" onclick="window.location.hash='#5841'"></td><td class="FileContents-lineContents" id="5841"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5842" onclick="window.location.hash='#5842'"></td><td class="FileContents-lineContents" id="5842"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5843" onclick="window.location.hash='#5843'"></td><td class="FileContents-lineContents" id="5843"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5844" onclick="window.location.hash='#5844'"></td><td class="FileContents-lineContents" id="5844"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5845" onclick="window.location.hash='#5845'"></td><td class="FileContents-lineContents" id="5845"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5846" onclick="window.location.hash='#5846'"></td><td class="FileContents-lineContents" id="5846"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5847" onclick="window.location.hash='#5847'"></td><td class="FileContents-lineContents" id="5847"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5848" onclick="window.location.hash='#5848'"></td><td class="FileContents-lineContents" id="5848"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5849" onclick="window.location.hash='#5849'"></td><td class="FileContents-lineContents" id="5849"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5850" onclick="window.location.hash='#5850'"></td><td class="FileContents-lineContents" id="5850"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5851" onclick="window.location.hash='#5851'"></td><td class="FileContents-lineContents" id="5851"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5852" onclick="window.location.hash='#5852'"></td><td class="FileContents-lineContents" id="5852"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5853" onclick="window.location.hash='#5853'"></td><td class="FileContents-lineContents" id="5853"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5854" onclick="window.location.hash='#5854'"></td><td class="FileContents-lineContents" id="5854"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5855" onclick="window.location.hash='#5855'"></td><td class="FileContents-lineContents" id="5855"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5856" onclick="window.location.hash='#5856'"></td><td class="FileContents-lineContents" id="5856"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5857" onclick="window.location.hash='#5857'"></td><td class="FileContents-lineContents" id="5857"><span class="pln">    </span><span class="com">// This is the distinguished set of ID&#39;s we use to determine</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5858" onclick="window.location.hash='#5858'"></td><td class="FileContents-lineContents" id="5858"><span class="pln">    </span><span class="com">// that we have exhausted the sub-element&#39;s inside the cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5859" onclick="window.location.hash='#5859'"></td><td class="FileContents-lineContents" id="5859"><span class="pln">    </span><span class="com">// whose ID we parsed earlier.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5860" onclick="window.location.hash='#5860'"></td><td class="FileContents-lineContents" id="5860"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5861" onclick="window.location.hash='#5861'"></td><td class="FileContents-lineContents" id="5861"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Cluster or Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5862" onclick="window.location.hash='#5862'"></td><td class="FileContents-lineContents" id="5862"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_element_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5863" onclick="window.location.hash='#5863'"></td><td class="FileContents-lineContents" id="5863"><span class="pln">        m_element_size </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">-</span><span class="pln"> m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5864" onclick="window.location.hash='#5864'"></td><td class="FileContents-lineContents" id="5864"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5865" onclick="window.location.hash='#5865'"></td><td class="FileContents-lineContents" id="5865"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5866" onclick="window.location.hash='#5866'"></td><td class="FileContents-lineContents" id="5866"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5867" onclick="window.location.hash='#5867'"></td><td class="FileContents-lineContents" id="5867"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5868" onclick="window.location.hash='#5868'"></td><td class="FileContents-lineContents" id="5868"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5869" onclick="window.location.hash='#5869'"></td><td class="FileContents-lineContents" id="5869"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5870" onclick="window.location.hash='#5870'"></td><td class="FileContents-lineContents" id="5870"><span class="pln">    </span><span class="com">// Parse Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5871" onclick="window.location.hash='#5871'"></td><td class="FileContents-lineContents" id="5871"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5872" onclick="window.location.hash='#5872'"></td><td class="FileContents-lineContents" id="5872"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5873" onclick="window.location.hash='#5873'"></td><td class="FileContents-lineContents" id="5873"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5874" onclick="window.location.hash='#5874'"></td><td class="FileContents-lineContents" id="5874"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5875" onclick="window.location.hash='#5875'"></td><td class="FileContents-lineContents" id="5875"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5876" onclick="window.location.hash='#5876'"></td><td class="FileContents-lineContents" id="5876"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5877" onclick="window.location.hash='#5877'"></td><td class="FileContents-lineContents" id="5877"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5878" onclick="window.location.hash='#5878'"></td><td class="FileContents-lineContents" id="5878"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5879" onclick="window.location.hash='#5879'"></td><td class="FileContents-lineContents" id="5879"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5880" onclick="window.location.hash='#5880'"></td><td class="FileContents-lineContents" id="5880"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5881" onclick="window.location.hash='#5881'"></td><td class="FileContents-lineContents" id="5881"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5882" onclick="window.location.hash='#5882'"></td><td class="FileContents-lineContents" id="5882"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5883" onclick="window.location.hash='#5883'"></td><td class="FileContents-lineContents" id="5883"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5884" onclick="window.location.hash='#5884'"></td><td class="FileContents-lineContents" id="5884"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5885" onclick="window.location.hash='#5885'"></td><td class="FileContents-lineContents" id="5885"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5886" onclick="window.location.hash='#5886'"></td><td class="FileContents-lineContents" id="5886"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5887" onclick="window.location.hash='#5887'"></td><td class="FileContents-lineContents" id="5887"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5888" onclick="window.location.hash='#5888'"></td><td class="FileContents-lineContents" id="5888"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5889" onclick="window.location.hash='#5889'"></td><td class="FileContents-lineContents" id="5889"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5890" onclick="window.location.hash='#5890'"></td><td class="FileContents-lineContents" id="5890"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5891" onclick="window.location.hash='#5891'"></td><td class="FileContents-lineContents" id="5891"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5892" onclick="window.location.hash='#5892'"></td><td class="FileContents-lineContents" id="5892"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5893" onclick="window.location.hash='#5893'"></td><td class="FileContents-lineContents" id="5893"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5894" onclick="window.location.hash='#5894'"></td><td class="FileContents-lineContents" id="5894"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5895" onclick="window.location.hash='#5895'"></td><td class="FileContents-lineContents" id="5895"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5896" onclick="window.location.hash='#5896'"></td><td class="FileContents-lineContents" id="5896"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5897" onclick="window.location.hash='#5897'"></td><td class="FileContents-lineContents" id="5897"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5898" onclick="window.location.hash='#5898'"></td><td class="FileContents-lineContents" id="5898"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5899" onclick="window.location.hash='#5899'"></td><td class="FileContents-lineContents" id="5899"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5900" onclick="window.location.hash='#5900'"></td><td class="FileContents-lineContents" id="5900"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5901" onclick="window.location.hash='#5901'"></td><td class="FileContents-lineContents" id="5901"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5902" onclick="window.location.hash='#5902'"></td><td class="FileContents-lineContents" id="5902"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5903" onclick="window.location.hash='#5903'"></td><td class="FileContents-lineContents" id="5903"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5904" onclick="window.location.hash='#5904'"></td><td class="FileContents-lineContents" id="5904"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5905" onclick="window.location.hash='#5905'"></td><td class="FileContents-lineContents" id="5905"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5906" onclick="window.location.hash='#5906'"></td><td class="FileContents-lineContents" id="5906"><span class="pln">    </span><span class="com">// pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5907" onclick="window.location.hash='#5907'"></td><td class="FileContents-lineContents" id="5907"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5908" onclick="window.location.hash='#5908'"></td><td class="FileContents-lineContents" id="5908"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5909" onclick="window.location.hash='#5909'"></td><td class="FileContents-lineContents" id="5909"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5910" onclick="window.location.hash='#5910'"></td><td class="FileContents-lineContents" id="5910"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5911" onclick="window.location.hash='#5911'"></td><td class="FileContents-lineContents" id="5911"><span class="pln">    </span><span class="com">// const long long block_start = pos;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5912" onclick="window.location.hash='#5912'"></td><td class="FileContents-lineContents" id="5912"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5913" onclick="window.location.hash='#5913'"></td><td class="FileContents-lineContents" id="5913"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5914" onclick="window.location.hash='#5914'"></td><td class="FileContents-lineContents" id="5914"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5915" onclick="window.location.hash='#5915'"></td><td class="FileContents-lineContents" id="5915"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5916" onclick="window.location.hash='#5916'"></td><td class="FileContents-lineContents" id="5916"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x20</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x23</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5917" onclick="window.location.hash='#5917'"></td><td class="FileContents-lineContents" id="5917"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5918" onclick="window.location.hash='#5918'"></td><td class="FileContents-lineContents" id="5918"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5919" onclick="window.location.hash='#5919'"></td><td class="FileContents-lineContents" id="5919"><span class="pln">        pos </span><span class="pun">=</span><span class="pln"> cluster_stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5920" onclick="window.location.hash='#5920'"></td><td class="FileContents-lineContents" id="5920"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5921" onclick="window.location.hash='#5921'"></td><td class="FileContents-lineContents" id="5921"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5922" onclick="window.location.hash='#5922'"></td><td class="FileContents-lineContents" id="5922"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5923" onclick="window.location.hash='#5923'"></td><td class="FileContents-lineContents" id="5923"><span class="pln">      m_element_size </span><span class="pun">=</span><span class="pln"> total </span><span class="pun">-</span><span class="pln"> m_element_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5924" onclick="window.location.hash='#5924'"></td><td class="FileContents-lineContents" id="5924"><span class="pln">      pos </span><span class="pun">=</span><span class="pln"> total</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5925" onclick="window.location.hash='#5925'"></td><td class="FileContents-lineContents" id="5925"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5926" onclick="window.location.hash='#5926'"></td><td class="FileContents-lineContents" id="5926"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5927" onclick="window.location.hash='#5927'"></td><td class="FileContents-lineContents" id="5927"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5928" onclick="window.location.hash='#5928'"></td><td class="FileContents-lineContents" id="5928"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5929" onclick="window.location.hash='#5929'"></td><td class="FileContents-lineContents" id="5929"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5930" onclick="window.location.hash='#5930'"></td><td class="FileContents-lineContents" id="5930"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5931" onclick="window.location.hash='#5931'"></td><td class="FileContents-lineContents" id="5931"><span class="pln">    </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> this_ </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">const_cast</span><span class="pun">&lt;</span><span class="typ">Cluster</span><span class="pun">*&gt;(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5932" onclick="window.location.hash='#5932'"></td><td class="FileContents-lineContents" id="5932"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5933" onclick="window.location.hash='#5933'"></td><td class="FileContents-lineContents" id="5933"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x20</span><span class="pun">)</span><span class="pln">  </span><span class="com">// BlockGroup</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5934" onclick="window.location.hash='#5934'"></td><td class="FileContents-lineContents" id="5934"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> this_</span><span class="pun">-&gt;</span><span class="typ">ParseBlockGroup</span><span class="pun">(</span><span class="pln">size</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5935" onclick="window.location.hash='#5935'"></td><td class="FileContents-lineContents" id="5935"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5936" onclick="window.location.hash='#5936'"></td><td class="FileContents-lineContents" id="5936"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x23</span><span class="pun">)</span><span class="pln">  </span><span class="com">// SimpleBlock</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5937" onclick="window.location.hash='#5937'"></td><td class="FileContents-lineContents" id="5937"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> this_</span><span class="pun">-&gt;</span><span class="typ">ParseSimpleBlock</span><span class="pun">(</span><span class="pln">size</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5938" onclick="window.location.hash='#5938'"></td><td class="FileContents-lineContents" id="5938"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5939" onclick="window.location.hash='#5939'"></td><td class="FileContents-lineContents" id="5939"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5940" onclick="window.location.hash='#5940'"></td><td class="FileContents-lineContents" id="5940"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> cluster_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5941" onclick="window.location.hash='#5941'"></td><td class="FileContents-lineContents" id="5941"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5942" onclick="window.location.hash='#5942'"></td><td class="FileContents-lineContents" id="5942"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5943" onclick="window.location.hash='#5943'"></td><td class="FileContents-lineContents" id="5943"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_element_size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5944" onclick="window.location.hash='#5944'"></td><td class="FileContents-lineContents" id="5944"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5945" onclick="window.location.hash='#5945'"></td><td class="FileContents-lineContents" id="5945"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5946" onclick="window.location.hash='#5946'"></td><td class="FileContents-lineContents" id="5946"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&lt;=</span><span class="pln"> cluster_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5947" onclick="window.location.hash='#5947'"></td><td class="FileContents-lineContents" id="5947"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5948" onclick="window.location.hash='#5948'"></td><td class="FileContents-lineContents" id="5948"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5949" onclick="window.location.hash='#5949'"></td><td class="FileContents-lineContents" id="5949"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> m_entries_count </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5950" onclick="window.location.hash='#5950'"></td><td class="FileContents-lineContents" id="5950"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5951" onclick="window.location.hash='#5951'"></td><td class="FileContents-lineContents" id="5951"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pLast </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5952" onclick="window.location.hash='#5952'"></td><td class="FileContents-lineContents" id="5952"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pLast</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5953" onclick="window.location.hash='#5953'"></td><td class="FileContents-lineContents" id="5953"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5954" onclick="window.location.hash='#5954'"></td><td class="FileContents-lineContents" id="5954"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pLast</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5955" onclick="window.location.hash='#5955'"></td><td class="FileContents-lineContents" id="5955"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5956" onclick="window.location.hash='#5956'"></td><td class="FileContents-lineContents" id="5956"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5957" onclick="window.location.hash='#5957'"></td><td class="FileContents-lineContents" id="5957"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="pln">m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5958" onclick="window.location.hash='#5958'"></td><td class="FileContents-lineContents" id="5958"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5959" onclick="window.location.hash='#5959'"></td><td class="FileContents-lineContents" id="5959"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">start </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5960" onclick="window.location.hash='#5960'"></td><td class="FileContents-lineContents" id="5960"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// defend against trucated stream</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5961" onclick="window.location.hash='#5961'"></td><td class="FileContents-lineContents" id="5961"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5962" onclick="window.location.hash='#5962'"></td><td class="FileContents-lineContents" id="5962"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="pln">m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5963" onclick="window.location.hash='#5963'"></td><td class="FileContents-lineContents" id="5963"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5964" onclick="window.location.hash='#5964'"></td><td class="FileContents-lineContents" id="5964"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5965" onclick="window.location.hash='#5965'"></td><td class="FileContents-lineContents" id="5965"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">stop </span><span class="pun">&lt;=</span><span class="pln"> cluster_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5966" onclick="window.location.hash='#5966'"></td><td class="FileContents-lineContents" id="5966"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5967" onclick="window.location.hash='#5967'"></td><td class="FileContents-lineContents" id="5967"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">stop </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5968" onclick="window.location.hash='#5968'"></td><td class="FileContents-lineContents" id="5968"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// defend against trucated stream</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5969" onclick="window.location.hash='#5969'"></td><td class="FileContents-lineContents" id="5969"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5970" onclick="window.location.hash='#5970'"></td><td class="FileContents-lineContents" id="5970"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5971" onclick="window.location.hash='#5971'"></td><td class="FileContents-lineContents" id="5971"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no more entries</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5972" onclick="window.location.hash='#5972'"></td><td class="FileContents-lineContents" id="5972"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5973" onclick="window.location.hash='#5973'"></td><td class="FileContents-lineContents" id="5973"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5974" onclick="window.location.hash='#5974'"></td><td class="FileContents-lineContents" id="5974"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">ParseSimpleBlock</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5975" onclick="window.location.hash='#5975'"></td><td class="FileContents-lineContents" id="5975"><span class="pln">                               </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5976" onclick="window.location.hash='#5976'"></td><td class="FileContents-lineContents" id="5976"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_start </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5977" onclick="window.location.hash='#5977'"></td><td class="FileContents-lineContents" id="5977"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> block_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5978" onclick="window.location.hash='#5978'"></td><td class="FileContents-lineContents" id="5978"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5979" onclick="window.location.hash='#5979'"></td><td class="FileContents-lineContents" id="5979"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5980" onclick="window.location.hash='#5980'"></td><td class="FileContents-lineContents" id="5980"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5981" onclick="window.location.hash='#5981'"></td><td class="FileContents-lineContents" id="5981"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5982" onclick="window.location.hash='#5982'"></td><td class="FileContents-lineContents" id="5982"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5983" onclick="window.location.hash='#5983'"></td><td class="FileContents-lineContents" id="5983"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5984" onclick="window.location.hash='#5984'"></td><td class="FileContents-lineContents" id="5984"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5985" onclick="window.location.hash='#5985'"></td><td class="FileContents-lineContents" id="5985"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5986" onclick="window.location.hash='#5986'"></td><td class="FileContents-lineContents" id="5986"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5987" onclick="window.location.hash='#5987'"></td><td class="FileContents-lineContents" id="5987"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5988" onclick="window.location.hash='#5988'"></td><td class="FileContents-lineContents" id="5988"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5989" onclick="window.location.hash='#5989'"></td><td class="FileContents-lineContents" id="5989"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5990" onclick="window.location.hash='#5990'"></td><td class="FileContents-lineContents" id="5990"><span class="pln">  </span><span class="com">// parse track number</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5991" onclick="window.location.hash='#5991'"></td><td class="FileContents-lineContents" id="5991"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5992" onclick="window.location.hash='#5992'"></td><td class="FileContents-lineContents" id="5992"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5993" onclick="window.location.hash='#5993'"></td><td class="FileContents-lineContents" id="5993"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5994" onclick="window.location.hash='#5994'"></td><td class="FileContents-lineContents" id="5994"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5995" onclick="window.location.hash='#5995'"></td><td class="FileContents-lineContents" id="5995"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5996" onclick="window.location.hash='#5996'"></td><td class="FileContents-lineContents" id="5996"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5997" onclick="window.location.hash='#5997'"></td><td class="FileContents-lineContents" id="5997"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5998" onclick="window.location.hash='#5998'"></td><td class="FileContents-lineContents" id="5998"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5999" onclick="window.location.hash='#5999'"></td><td class="FileContents-lineContents" id="5999"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6000" onclick="window.location.hash='#6000'"></td><td class="FileContents-lineContents" id="6000"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6001" onclick="window.location.hash='#6001'"></td><td class="FileContents-lineContents" id="6001"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6002" onclick="window.location.hash='#6002'"></td><td class="FileContents-lineContents" id="6002"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6003" onclick="window.location.hash='#6003'"></td><td class="FileContents-lineContents" id="6003"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6004" onclick="window.location.hash='#6004'"></td><td class="FileContents-lineContents" id="6004"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6005" onclick="window.location.hash='#6005'"></td><td class="FileContents-lineContents" id="6005"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6006" onclick="window.location.hash='#6006'"></td><td class="FileContents-lineContents" id="6006"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6007" onclick="window.location.hash='#6007'"></td><td class="FileContents-lineContents" id="6007"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6008" onclick="window.location.hash='#6008'"></td><td class="FileContents-lineContents" id="6008"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6009" onclick="window.location.hash='#6009'"></td><td class="FileContents-lineContents" id="6009"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6010" onclick="window.location.hash='#6010'"></td><td class="FileContents-lineContents" id="6010"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6011" onclick="window.location.hash='#6011'"></td><td class="FileContents-lineContents" id="6011"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> track </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6012" onclick="window.location.hash='#6012'"></td><td class="FileContents-lineContents" id="6012"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6013" onclick="window.location.hash='#6013'"></td><td class="FileContents-lineContents" id="6013"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">track </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6014" onclick="window.location.hash='#6014'"></td><td class="FileContents-lineContents" id="6014"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">track</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6015" onclick="window.location.hash='#6015'"></td><td class="FileContents-lineContents" id="6015"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6016" onclick="window.location.hash='#6016'"></td><td class="FileContents-lineContents" id="6016"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">track </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6017" onclick="window.location.hash='#6017'"></td><td class="FileContents-lineContents" id="6017"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6018" onclick="window.location.hash='#6018'"></td><td class="FileContents-lineContents" id="6018"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6019" onclick="window.location.hash='#6019'"></td><td class="FileContents-lineContents" id="6019"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume track number</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6020" onclick="window.location.hash='#6020'"></td><td class="FileContents-lineContents" id="6020"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6021" onclick="window.location.hash='#6021'"></td><td class="FileContents-lineContents" id="6021"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6022" onclick="window.location.hash='#6022'"></td><td class="FileContents-lineContents" id="6022"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6023" onclick="window.location.hash='#6023'"></td><td class="FileContents-lineContents" id="6023"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6024" onclick="window.location.hash='#6024'"></td><td class="FileContents-lineContents" id="6024"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6025" onclick="window.location.hash='#6025'"></td><td class="FileContents-lineContents" id="6025"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6026" onclick="window.location.hash='#6026'"></td><td class="FileContents-lineContents" id="6026"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6027" onclick="window.location.hash='#6027'"></td><td class="FileContents-lineContents" id="6027"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6028" onclick="window.location.hash='#6028'"></td><td class="FileContents-lineContents" id="6028"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6029" onclick="window.location.hash='#6029'"></td><td class="FileContents-lineContents" id="6029"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume timecode</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6030" onclick="window.location.hash='#6030'"></td><td class="FileContents-lineContents" id="6030"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6031" onclick="window.location.hash='#6031'"></td><td class="FileContents-lineContents" id="6031"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6032" onclick="window.location.hash='#6032'"></td><td class="FileContents-lineContents" id="6032"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6033" onclick="window.location.hash='#6033'"></td><td class="FileContents-lineContents" id="6033"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6034" onclick="window.location.hash='#6034'"></td><td class="FileContents-lineContents" id="6034"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6035" onclick="window.location.hash='#6035'"></td><td class="FileContents-lineContents" id="6035"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6036" onclick="window.location.hash='#6036'"></td><td class="FileContents-lineContents" id="6036"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6037" onclick="window.location.hash='#6037'"></td><td class="FileContents-lineContents" id="6037"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6038" onclick="window.location.hash='#6038'"></td><td class="FileContents-lineContents" id="6038"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6039" onclick="window.location.hash='#6039'"></td><td class="FileContents-lineContents" id="6039"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> flags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6040" onclick="window.location.hash='#6040'"></td><td class="FileContents-lineContents" id="6040"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6041" onclick="window.location.hash='#6041'"></td><td class="FileContents-lineContents" id="6041"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">flags</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6042" onclick="window.location.hash='#6042'"></td><td class="FileContents-lineContents" id="6042"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6043" onclick="window.location.hash='#6043'"></td><td class="FileContents-lineContents" id="6043"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6044" onclick="window.location.hash='#6044'"></td><td class="FileContents-lineContents" id="6044"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6045" onclick="window.location.hash='#6045'"></td><td class="FileContents-lineContents" id="6045"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6046" onclick="window.location.hash='#6046'"></td><td class="FileContents-lineContents" id="6046"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6047" onclick="window.location.hash='#6047'"></td><td class="FileContents-lineContents" id="6047"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6048" onclick="window.location.hash='#6048'"></td><td class="FileContents-lineContents" id="6048"><span class="pln">  </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume flags byte</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6049" onclick="window.location.hash='#6049'"></td><td class="FileContents-lineContents" id="6049"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6050" onclick="window.location.hash='#6050'"></td><td class="FileContents-lineContents" id="6050"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6051" onclick="window.location.hash='#6051'"></td><td class="FileContents-lineContents" id="6051"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6052" onclick="window.location.hash='#6052'"></td><td class="FileContents-lineContents" id="6052"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6053" onclick="window.location.hash='#6053'"></td><td class="FileContents-lineContents" id="6053"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6054" onclick="window.location.hash='#6054'"></td><td class="FileContents-lineContents" id="6054"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> lacing </span><span class="pun">=</span><span class="pln"> </span><span class="typ">int</span><span class="pun">(</span><span class="pln">flags </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x06</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6055" onclick="window.location.hash='#6055'"></td><td class="FileContents-lineContents" id="6055"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6056" onclick="window.location.hash='#6056'"></td><td class="FileContents-lineContents" id="6056"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">lacing </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6057" onclick="window.location.hash='#6057'"></td><td class="FileContents-lineContents" id="6057"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6058" onclick="window.location.hash='#6058'"></td><td class="FileContents-lineContents" id="6058"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6059" onclick="window.location.hash='#6059'"></td><td class="FileContents-lineContents" id="6059"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6060" onclick="window.location.hash='#6060'"></td><td class="FileContents-lineContents" id="6060"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6061" onclick="window.location.hash='#6061'"></td><td class="FileContents-lineContents" id="6061"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateBlock</span><span class="pun">(</span><span class="lit">0x23</span><span class="pun">,</span><span class="pln">  </span><span class="com">// simple block id</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6062" onclick="window.location.hash='#6062'"></td><td class="FileContents-lineContents" id="6062"><span class="pln">                       block_start</span><span class="pun">,</span><span class="pln"> block_size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6063" onclick="window.location.hash='#6063'"></td><td class="FileContents-lineContents" id="6063"><span class="pln">                       </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// DiscardPadding</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6064" onclick="window.location.hash='#6064'"></td><td class="FileContents-lineContents" id="6064"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6065" onclick="window.location.hash='#6065'"></td><td class="FileContents-lineContents" id="6065"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6066" onclick="window.location.hash='#6066'"></td><td class="FileContents-lineContents" id="6066"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6067" onclick="window.location.hash='#6067'"></td><td class="FileContents-lineContents" id="6067"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6068" onclick="window.location.hash='#6068'"></td><td class="FileContents-lineContents" id="6068"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> block_stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6069" onclick="window.location.hash='#6069'"></td><td class="FileContents-lineContents" id="6069"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6070" onclick="window.location.hash='#6070'"></td><td class="FileContents-lineContents" id="6070"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6071" onclick="window.location.hash='#6071'"></td><td class="FileContents-lineContents" id="6071"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6072" onclick="window.location.hash='#6072'"></td><td class="FileContents-lineContents" id="6072"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6073" onclick="window.location.hash='#6073'"></td><td class="FileContents-lineContents" id="6073"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">ParseBlockGroup</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6074" onclick="window.location.hash='#6074'"></td><td class="FileContents-lineContents" id="6074"><span class="pln">                              </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6075" onclick="window.location.hash='#6075'"></td><td class="FileContents-lineContents" id="6075"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_start </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6076" onclick="window.location.hash='#6076'"></td><td class="FileContents-lineContents" id="6076"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> payload_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> payload_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6077" onclick="window.location.hash='#6077'"></td><td class="FileContents-lineContents" id="6077"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6078" onclick="window.location.hash='#6078'"></td><td class="FileContents-lineContents" id="6078"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6079" onclick="window.location.hash='#6079'"></td><td class="FileContents-lineContents" id="6079"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6080" onclick="window.location.hash='#6080'"></td><td class="FileContents-lineContents" id="6080"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6081" onclick="window.location.hash='#6081'"></td><td class="FileContents-lineContents" id="6081"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6082" onclick="window.location.hash='#6082'"></td><td class="FileContents-lineContents" id="6082"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6083" onclick="window.location.hash='#6083'"></td><td class="FileContents-lineContents" id="6083"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6084" onclick="window.location.hash='#6084'"></td><td class="FileContents-lineContents" id="6084"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6085" onclick="window.location.hash='#6085'"></td><td class="FileContents-lineContents" id="6085"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6086" onclick="window.location.hash='#6086'"></td><td class="FileContents-lineContents" id="6086"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6087" onclick="window.location.hash='#6087'"></td><td class="FileContents-lineContents" id="6087"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6088" onclick="window.location.hash='#6088'"></td><td class="FileContents-lineContents" id="6088"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6089" onclick="window.location.hash='#6089'"></td><td class="FileContents-lineContents" id="6089"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">payload_stop </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6090" onclick="window.location.hash='#6090'"></td><td class="FileContents-lineContents" id="6090"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6091" onclick="window.location.hash='#6091'"></td><td class="FileContents-lineContents" id="6091"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6092" onclick="window.location.hash='#6092'"></td><td class="FileContents-lineContents" id="6092"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">payload_stop </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6093" onclick="window.location.hash='#6093'"></td><td class="FileContents-lineContents" id="6093"><span class="pln">    len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">payload_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6094" onclick="window.location.hash='#6094'"></td><td class="FileContents-lineContents" id="6094"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6095" onclick="window.location.hash='#6095'"></td><td class="FileContents-lineContents" id="6095"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6096" onclick="window.location.hash='#6096'"></td><td class="FileContents-lineContents" id="6096"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6097" onclick="window.location.hash='#6097'"></td><td class="FileContents-lineContents" id="6097"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> discard_padding </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6098" onclick="window.location.hash='#6098'"></td><td class="FileContents-lineContents" id="6098"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6099" onclick="window.location.hash='#6099'"></td><td class="FileContents-lineContents" id="6099"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> payload_stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6100" onclick="window.location.hash='#6100'"></td><td class="FileContents-lineContents" id="6100"><span class="pln">    </span><span class="com">// parse sub-block element ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6101" onclick="window.location.hash='#6101'"></td><td class="FileContents-lineContents" id="6101"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6102" onclick="window.location.hash='#6102'"></td><td class="FileContents-lineContents" id="6102"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6103" onclick="window.location.hash='#6103'"></td><td class="FileContents-lineContents" id="6103"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6104" onclick="window.location.hash='#6104'"></td><td class="FileContents-lineContents" id="6104"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6105" onclick="window.location.hash='#6105'"></td><td class="FileContents-lineContents" id="6105"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6106" onclick="window.location.hash='#6106'"></td><td class="FileContents-lineContents" id="6106"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6107" onclick="window.location.hash='#6107'"></td><td class="FileContents-lineContents" id="6107"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6108" onclick="window.location.hash='#6108'"></td><td class="FileContents-lineContents" id="6108"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6109" onclick="window.location.hash='#6109'"></td><td class="FileContents-lineContents" id="6109"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6110" onclick="window.location.hash='#6110'"></td><td class="FileContents-lineContents" id="6110"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6111" onclick="window.location.hash='#6111'"></td><td class="FileContents-lineContents" id="6111"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6112" onclick="window.location.hash='#6112'"></td><td class="FileContents-lineContents" id="6112"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6113" onclick="window.location.hash='#6113'"></td><td class="FileContents-lineContents" id="6113"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6114" onclick="window.location.hash='#6114'"></td><td class="FileContents-lineContents" id="6114"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6115" onclick="window.location.hash='#6115'"></td><td class="FileContents-lineContents" id="6115"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> payload_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6116" onclick="window.location.hash='#6116'"></td><td class="FileContents-lineContents" id="6116"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6117" onclick="window.location.hash='#6117'"></td><td class="FileContents-lineContents" id="6117"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6118" onclick="window.location.hash='#6118'"></td><td class="FileContents-lineContents" id="6118"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6119" onclick="window.location.hash='#6119'"></td><td class="FileContents-lineContents" id="6119"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6120" onclick="window.location.hash='#6120'"></td><td class="FileContents-lineContents" id="6120"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6121" onclick="window.location.hash='#6121'"></td><td class="FileContents-lineContents" id="6121"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6122" onclick="window.location.hash='#6122'"></td><td class="FileContents-lineContents" id="6122"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6123" onclick="window.location.hash='#6123'"></td><td class="FileContents-lineContents" id="6123"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6124" onclick="window.location.hash='#6124'"></td><td class="FileContents-lineContents" id="6124"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6125" onclick="window.location.hash='#6125'"></td><td class="FileContents-lineContents" id="6125"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6126" onclick="window.location.hash='#6126'"></td><td class="FileContents-lineContents" id="6126"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// not a value ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6127" onclick="window.location.hash='#6127'"></td><td class="FileContents-lineContents" id="6127"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6128" onclick="window.location.hash='#6128'"></td><td class="FileContents-lineContents" id="6128"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6129" onclick="window.location.hash='#6129'"></td><td class="FileContents-lineContents" id="6129"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6130" onclick="window.location.hash='#6130'"></td><td class="FileContents-lineContents" id="6130"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6131" onclick="window.location.hash='#6131'"></td><td class="FileContents-lineContents" id="6131"><span class="pln">    </span><span class="com">// Parse Size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6132" onclick="window.location.hash='#6132'"></td><td class="FileContents-lineContents" id="6132"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6133" onclick="window.location.hash='#6133'"></td><td class="FileContents-lineContents" id="6133"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6134" onclick="window.location.hash='#6134'"></td><td class="FileContents-lineContents" id="6134"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6135" onclick="window.location.hash='#6135'"></td><td class="FileContents-lineContents" id="6135"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6136" onclick="window.location.hash='#6136'"></td><td class="FileContents-lineContents" id="6136"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6137" onclick="window.location.hash='#6137'"></td><td class="FileContents-lineContents" id="6137"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6138" onclick="window.location.hash='#6138'"></td><td class="FileContents-lineContents" id="6138"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6139" onclick="window.location.hash='#6139'"></td><td class="FileContents-lineContents" id="6139"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6140" onclick="window.location.hash='#6140'"></td><td class="FileContents-lineContents" id="6140"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6141" onclick="window.location.hash='#6141'"></td><td class="FileContents-lineContents" id="6141"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6142" onclick="window.location.hash='#6142'"></td><td class="FileContents-lineContents" id="6142"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6143" onclick="window.location.hash='#6143'"></td><td class="FileContents-lineContents" id="6143"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6144" onclick="window.location.hash='#6144'"></td><td class="FileContents-lineContents" id="6144"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6145" onclick="window.location.hash='#6145'"></td><td class="FileContents-lineContents" id="6145"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6146" onclick="window.location.hash='#6146'"></td><td class="FileContents-lineContents" id="6146"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> payload_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6147" onclick="window.location.hash='#6147'"></td><td class="FileContents-lineContents" id="6147"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6148" onclick="window.location.hash='#6148'"></td><td class="FileContents-lineContents" id="6148"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6149" onclick="window.location.hash='#6149'"></td><td class="FileContents-lineContents" id="6149"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6150" onclick="window.location.hash='#6150'"></td><td class="FileContents-lineContents" id="6150"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6151" onclick="window.location.hash='#6151'"></td><td class="FileContents-lineContents" id="6151"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6152" onclick="window.location.hash='#6152'"></td><td class="FileContents-lineContents" id="6152"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6153" onclick="window.location.hash='#6153'"></td><td class="FileContents-lineContents" id="6153"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6154" onclick="window.location.hash='#6154'"></td><td class="FileContents-lineContents" id="6154"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6155" onclick="window.location.hash='#6155'"></td><td class="FileContents-lineContents" id="6155"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6156" onclick="window.location.hash='#6156'"></td><td class="FileContents-lineContents" id="6156"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6157" onclick="window.location.hash='#6157'"></td><td class="FileContents-lineContents" id="6157"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6158" onclick="window.location.hash='#6158'"></td><td class="FileContents-lineContents" id="6158"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6159" onclick="window.location.hash='#6159'"></td><td class="FileContents-lineContents" id="6159"><span class="pln">    </span><span class="com">// pos now points to start of sub-block group payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6160" onclick="window.location.hash='#6160'"></td><td class="FileContents-lineContents" id="6160"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6161" onclick="window.location.hash='#6161'"></td><td class="FileContents-lineContents" id="6161"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> payload_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6162" onclick="window.location.hash='#6162'"></td><td class="FileContents-lineContents" id="6162"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6163" onclick="window.location.hash='#6163'"></td><td class="FileContents-lineContents" id="6163"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6164" onclick="window.location.hash='#6164'"></td><td class="FileContents-lineContents" id="6164"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6165" onclick="window.location.hash='#6165'"></td><td class="FileContents-lineContents" id="6165"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6166" onclick="window.location.hash='#6166'"></td><td class="FileContents-lineContents" id="6166"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6167" onclick="window.location.hash='#6167'"></td><td class="FileContents-lineContents" id="6167"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6168" onclick="window.location.hash='#6168'"></td><td class="FileContents-lineContents" id="6168"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6169" onclick="window.location.hash='#6169'"></td><td class="FileContents-lineContents" id="6169"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6170" onclick="window.location.hash='#6170'"></td><td class="FileContents-lineContents" id="6170"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6171" onclick="window.location.hash='#6171'"></td><td class="FileContents-lineContents" id="6171"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6172" onclick="window.location.hash='#6172'"></td><td class="FileContents-lineContents" id="6172"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x35A2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// DiscardPadding</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6173" onclick="window.location.hash='#6173'"></td><td class="FileContents-lineContents" id="6173"><span class="pln">      status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> discard_padding</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6174" onclick="window.location.hash='#6174'"></td><td class="FileContents-lineContents" id="6174"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6175" onclick="window.location.hash='#6175'"></td><td class="FileContents-lineContents" id="6175"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6176" onclick="window.location.hash='#6176'"></td><td class="FileContents-lineContents" id="6176"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6177" onclick="window.location.hash='#6177'"></td><td class="FileContents-lineContents" id="6177"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6178" onclick="window.location.hash='#6178'"></td><td class="FileContents-lineContents" id="6178"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6179" onclick="window.location.hash='#6179'"></td><td class="FileContents-lineContents" id="6179"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x21</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// sub-part of BlockGroup is not a Block</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6180" onclick="window.location.hash='#6180'"></td><td class="FileContents-lineContents" id="6180"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume sub-part of block group</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6181" onclick="window.location.hash='#6181'"></td><td class="FileContents-lineContents" id="6181"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6182" onclick="window.location.hash='#6182'"></td><td class="FileContents-lineContents" id="6182"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> payload_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6183" onclick="window.location.hash='#6183'"></td><td class="FileContents-lineContents" id="6183"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6184" onclick="window.location.hash='#6184'"></td><td class="FileContents-lineContents" id="6184"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6185" onclick="window.location.hash='#6185'"></td><td class="FileContents-lineContents" id="6185"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6186" onclick="window.location.hash='#6186'"></td><td class="FileContents-lineContents" id="6186"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6187" onclick="window.location.hash='#6187'"></td><td class="FileContents-lineContents" id="6187"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6188" onclick="window.location.hash='#6188'"></td><td class="FileContents-lineContents" id="6188"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6189" onclick="window.location.hash='#6189'"></td><td class="FileContents-lineContents" id="6189"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6190" onclick="window.location.hash='#6190'"></td><td class="FileContents-lineContents" id="6190"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">&gt;</span><span class="pln"> payload_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6191" onclick="window.location.hash='#6191'"></td><td class="FileContents-lineContents" id="6191"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6192" onclick="window.location.hash='#6192'"></td><td class="FileContents-lineContents" id="6192"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6193" onclick="window.location.hash='#6193'"></td><td class="FileContents-lineContents" id="6193"><span class="pln">    </span><span class="com">// parse track number</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6194" onclick="window.location.hash='#6194'"></td><td class="FileContents-lineContents" id="6194"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6195" onclick="window.location.hash='#6195'"></td><td class="FileContents-lineContents" id="6195"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6196" onclick="window.location.hash='#6196'"></td><td class="FileContents-lineContents" id="6196"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6197" onclick="window.location.hash='#6197'"></td><td class="FileContents-lineContents" id="6197"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6198" onclick="window.location.hash='#6198'"></td><td class="FileContents-lineContents" id="6198"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6199" onclick="window.location.hash='#6199'"></td><td class="FileContents-lineContents" id="6199"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6200" onclick="window.location.hash='#6200'"></td><td class="FileContents-lineContents" id="6200"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6201" onclick="window.location.hash='#6201'"></td><td class="FileContents-lineContents" id="6201"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6202" onclick="window.location.hash='#6202'"></td><td class="FileContents-lineContents" id="6202"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6203" onclick="window.location.hash='#6203'"></td><td class="FileContents-lineContents" id="6203"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6204" onclick="window.location.hash='#6204'"></td><td class="FileContents-lineContents" id="6204"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6205" onclick="window.location.hash='#6205'"></td><td class="FileContents-lineContents" id="6205"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6206" onclick="window.location.hash='#6206'"></td><td class="FileContents-lineContents" id="6206"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6207" onclick="window.location.hash='#6207'"></td><td class="FileContents-lineContents" id="6207"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6208" onclick="window.location.hash='#6208'"></td><td class="FileContents-lineContents" id="6208"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6209" onclick="window.location.hash='#6209'"></td><td class="FileContents-lineContents" id="6209"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6210" onclick="window.location.hash='#6210'"></td><td class="FileContents-lineContents" id="6210"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6211" onclick="window.location.hash='#6211'"></td><td class="FileContents-lineContents" id="6211"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6212" onclick="window.location.hash='#6212'"></td><td class="FileContents-lineContents" id="6212"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6213" onclick="window.location.hash='#6213'"></td><td class="FileContents-lineContents" id="6213"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6214" onclick="window.location.hash='#6214'"></td><td class="FileContents-lineContents" id="6214"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> track </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6215" onclick="window.location.hash='#6215'"></td><td class="FileContents-lineContents" id="6215"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6216" onclick="window.location.hash='#6216'"></td><td class="FileContents-lineContents" id="6216"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">track </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6217" onclick="window.location.hash='#6217'"></td><td class="FileContents-lineContents" id="6217"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">track</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6218" onclick="window.location.hash='#6218'"></td><td class="FileContents-lineContents" id="6218"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6219" onclick="window.location.hash='#6219'"></td><td class="FileContents-lineContents" id="6219"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">track </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6220" onclick="window.location.hash='#6220'"></td><td class="FileContents-lineContents" id="6220"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6221" onclick="window.location.hash='#6221'"></td><td class="FileContents-lineContents" id="6221"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6222" onclick="window.location.hash='#6222'"></td><td class="FileContents-lineContents" id="6222"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume track number</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6223" onclick="window.location.hash='#6223'"></td><td class="FileContents-lineContents" id="6223"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6224" onclick="window.location.hash='#6224'"></td><td class="FileContents-lineContents" id="6224"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6225" onclick="window.location.hash='#6225'"></td><td class="FileContents-lineContents" id="6225"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6226" onclick="window.location.hash='#6226'"></td><td class="FileContents-lineContents" id="6226"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6227" onclick="window.location.hash='#6227'"></td><td class="FileContents-lineContents" id="6227"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6228" onclick="window.location.hash='#6228'"></td><td class="FileContents-lineContents" id="6228"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6229" onclick="window.location.hash='#6229'"></td><td class="FileContents-lineContents" id="6229"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6230" onclick="window.location.hash='#6230'"></td><td class="FileContents-lineContents" id="6230"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6231" onclick="window.location.hash='#6231'"></td><td class="FileContents-lineContents" id="6231"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6232" onclick="window.location.hash='#6232'"></td><td class="FileContents-lineContents" id="6232"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume timecode</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6233" onclick="window.location.hash='#6233'"></td><td class="FileContents-lineContents" id="6233"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6234" onclick="window.location.hash='#6234'"></td><td class="FileContents-lineContents" id="6234"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6235" onclick="window.location.hash='#6235'"></td><td class="FileContents-lineContents" id="6235"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6236" onclick="window.location.hash='#6236'"></td><td class="FileContents-lineContents" id="6236"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6237" onclick="window.location.hash='#6237'"></td><td class="FileContents-lineContents" id="6237"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6238" onclick="window.location.hash='#6238'"></td><td class="FileContents-lineContents" id="6238"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6239" onclick="window.location.hash='#6239'"></td><td class="FileContents-lineContents" id="6239"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6240" onclick="window.location.hash='#6240'"></td><td class="FileContents-lineContents" id="6240"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6241" onclick="window.location.hash='#6241'"></td><td class="FileContents-lineContents" id="6241"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6242" onclick="window.location.hash='#6242'"></td><td class="FileContents-lineContents" id="6242"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> flags</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6243" onclick="window.location.hash='#6243'"></td><td class="FileContents-lineContents" id="6243"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6244" onclick="window.location.hash='#6244'"></td><td class="FileContents-lineContents" id="6244"><span class="pln">    status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">flags</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6245" onclick="window.location.hash='#6245'"></td><td class="FileContents-lineContents" id="6245"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6246" onclick="window.location.hash='#6246'"></td><td class="FileContents-lineContents" id="6246"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error or underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6247" onclick="window.location.hash='#6247'"></td><td class="FileContents-lineContents" id="6247"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6248" onclick="window.location.hash='#6248'"></td><td class="FileContents-lineContents" id="6248"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6249" onclick="window.location.hash='#6249'"></td><td class="FileContents-lineContents" id="6249"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6250" onclick="window.location.hash='#6250'"></td><td class="FileContents-lineContents" id="6250"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6251" onclick="window.location.hash='#6251'"></td><td class="FileContents-lineContents" id="6251"><span class="pln">    </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume flags byte</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6252" onclick="window.location.hash='#6252'"></td><td class="FileContents-lineContents" id="6252"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6253" onclick="window.location.hash='#6253'"></td><td class="FileContents-lineContents" id="6253"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6254" onclick="window.location.hash='#6254'"></td><td class="FileContents-lineContents" id="6254"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> block_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6255" onclick="window.location.hash='#6255'"></td><td class="FileContents-lineContents" id="6255"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6256" onclick="window.location.hash='#6256'"></td><td class="FileContents-lineContents" id="6256"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6257" onclick="window.location.hash='#6257'"></td><td class="FileContents-lineContents" id="6257"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> lacing </span><span class="pun">=</span><span class="pln"> </span><span class="typ">int</span><span class="pun">(</span><span class="pln">flags </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x06</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6258" onclick="window.location.hash='#6258'"></td><td class="FileContents-lineContents" id="6258"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6259" onclick="window.location.hash='#6259'"></td><td class="FileContents-lineContents" id="6259"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">lacing </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6260" onclick="window.location.hash='#6260'"></td><td class="FileContents-lineContents" id="6260"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">block_stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6261" onclick="window.location.hash='#6261'"></td><td class="FileContents-lineContents" id="6261"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6262" onclick="window.location.hash='#6262'"></td><td class="FileContents-lineContents" id="6262"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6263" onclick="window.location.hash='#6263'"></td><td class="FileContents-lineContents" id="6263"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6264" onclick="window.location.hash='#6264'"></td><td class="FileContents-lineContents" id="6264"><span class="pln">    pos </span><span class="pun">=</span><span class="pln"> block_stop</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume block-part of block group</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6265" onclick="window.location.hash='#6265'"></td><td class="FileContents-lineContents" id="6265"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> payload_stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6266" onclick="window.location.hash='#6266'"></td><td class="FileContents-lineContents" id="6266"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6267" onclick="window.location.hash='#6267'"></td><td class="FileContents-lineContents" id="6267"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6268" onclick="window.location.hash='#6268'"></td><td class="FileContents-lineContents" id="6268"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> payload_stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6269" onclick="window.location.hash='#6269'"></td><td class="FileContents-lineContents" id="6269"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6270" onclick="window.location.hash='#6270'"></td><td class="FileContents-lineContents" id="6270"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateBlock</span><span class="pun">(</span><span class="lit">0x20</span><span class="pun">,</span><span class="pln">  </span><span class="com">// BlockGroup ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6271" onclick="window.location.hash='#6271'"></td><td class="FileContents-lineContents" id="6271"><span class="pln">                       payload_start</span><span class="pun">,</span><span class="pln"> payload_size</span><span class="pun">,</span><span class="pln"> discard_padding</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6272" onclick="window.location.hash='#6272'"></td><td class="FileContents-lineContents" id="6272"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6273" onclick="window.location.hash='#6273'"></td><td class="FileContents-lineContents" id="6273"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6274" onclick="window.location.hash='#6274'"></td><td class="FileContents-lineContents" id="6274"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6275" onclick="window.location.hash='#6275'"></td><td class="FileContents-lineContents" id="6275"><span class="pln">  m_pos </span><span class="pun">=</span><span class="pln"> payload_stop</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6276" onclick="window.location.hash='#6276'"></td><td class="FileContents-lineContents" id="6276"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6277" onclick="window.location.hash='#6277'"></td><td class="FileContents-lineContents" id="6277"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6278" onclick="window.location.hash='#6278'"></td><td class="FileContents-lineContents" id="6278"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6279" onclick="window.location.hash='#6279'"></td><td class="FileContents-lineContents" id="6279"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6280" onclick="window.location.hash='#6280'"></td><td class="FileContents-lineContents" id="6280"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> index</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> mkvparser</span><span class="pun">::</span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pEntry</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6281" onclick="window.location.hash='#6281'"></td><td class="FileContents-lineContents" id="6281"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> m_element_start</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6282" onclick="window.location.hash='#6282'"></td><td class="FileContents-lineContents" id="6282"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6283" onclick="window.location.hash='#6283'"></td><td class="FileContents-lineContents" id="6283"><span class="pln">  pEntry </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6284" onclick="window.location.hash='#6284'"></td><td class="FileContents-lineContents" id="6284"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6285" onclick="window.location.hash='#6285'"></td><td class="FileContents-lineContents" id="6285"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6286" onclick="window.location.hash='#6286'"></td><td class="FileContents-lineContents" id="6286"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6287" onclick="window.location.hash='#6287'"></td><td class="FileContents-lineContents" id="6287"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6288" onclick="window.location.hash='#6288'"></td><td class="FileContents-lineContents" id="6288"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6289" onclick="window.location.hash='#6289'"></td><td class="FileContents-lineContents" id="6289"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6290" onclick="window.location.hash='#6290'"></td><td class="FileContents-lineContents" id="6290"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6291" onclick="window.location.hash='#6291'"></td><td class="FileContents-lineContents" id="6291"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6292" onclick="window.location.hash='#6292'"></td><td class="FileContents-lineContents" id="6292"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6293" onclick="window.location.hash='#6293'"></td><td class="FileContents-lineContents" id="6293"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;=</span><span class="pln"> m_entries_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6294" onclick="window.location.hash='#6294'"></td><td class="FileContents-lineContents" id="6294"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6295" onclick="window.location.hash='#6295'"></td><td class="FileContents-lineContents" id="6295"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> m_entries_count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6296" onclick="window.location.hash='#6296'"></td><td class="FileContents-lineContents" id="6296"><span class="pln">    pEntry </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6297" onclick="window.location.hash='#6297'"></td><td class="FileContents-lineContents" id="6297"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6298" onclick="window.location.hash='#6298'"></td><td class="FileContents-lineContents" id="6298"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6299" onclick="window.location.hash='#6299'"></td><td class="FileContents-lineContents" id="6299"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// found entry</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6300" onclick="window.location.hash='#6300'"></td><td class="FileContents-lineContents" id="6300"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6301" onclick="window.location.hash='#6301'"></td><td class="FileContents-lineContents" id="6301"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6302" onclick="window.location.hash='#6302'"></td><td class="FileContents-lineContents" id="6302"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_element_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// we don&#39;t know cluster end yet</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6303" onclick="window.location.hash='#6303'"></td><td class="FileContents-lineContents" id="6303"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span><span class="pln">  </span><span class="com">// underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6304" onclick="window.location.hash='#6304'"></td><td class="FileContents-lineContents" id="6304"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6305" onclick="window.location.hash='#6305'"></td><td class="FileContents-lineContents" id="6305"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_stop </span><span class="pun">=</span><span class="pln"> m_element_start </span><span class="pun">+</span><span class="pln"> m_element_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6306" onclick="window.location.hash='#6306'"></td><td class="FileContents-lineContents" id="6306"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6307" onclick="window.location.hash='#6307'"></td><td class="FileContents-lineContents" id="6307"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pos </span><span class="pun">&gt;=</span><span class="pln"> element_stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6308" onclick="window.location.hash='#6308'"></td><td class="FileContents-lineContents" id="6308"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nothing left to parse</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6309" onclick="window.location.hash='#6309'"></td><td class="FileContents-lineContents" id="6309"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6310" onclick="window.location.hash='#6310'"></td><td class="FileContents-lineContents" id="6310"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span><span class="pln">  </span><span class="com">// underflow, since more remains to be parsed</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6311" onclick="window.location.hash='#6311'"></td><td class="FileContents-lineContents" id="6311"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6312" onclick="window.location.hash='#6312'"></td><td class="FileContents-lineContents" id="6312"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6313" onclick="window.location.hash='#6313'"></td><td class="FileContents-lineContents" id="6313"><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Create</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6314" onclick="window.location.hash='#6314'"></td><td class="FileContents-lineContents" id="6314"><span class="com">// long long element_size)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6315" onclick="window.location.hash='#6315'"></td><td class="FileContents-lineContents" id="6315"><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6316" onclick="window.location.hash='#6316'"></td><td class="FileContents-lineContents" id="6316"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6317" onclick="window.location.hash='#6317'"></td><td class="FileContents-lineContents" id="6317"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">off </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6318" onclick="window.location.hash='#6318'"></td><td class="FileContents-lineContents" id="6318"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6319" onclick="window.location.hash='#6319'"></td><td class="FileContents-lineContents" id="6319"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_start </span><span class="pun">+</span><span class="pln"> off</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6320" onclick="window.location.hash='#6320'"></td><td class="FileContents-lineContents" id="6320"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6321" onclick="window.location.hash='#6321'"></td><td class="FileContents-lineContents" id="6321"><span class="pln">  </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pCluster </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> element_start</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6322" onclick="window.location.hash='#6322'"></td><td class="FileContents-lineContents" id="6322"><span class="pln">  </span><span class="com">// element_size);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6323" onclick="window.location.hash='#6323'"></td><td class="FileContents-lineContents" id="6323"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6324" onclick="window.location.hash='#6324'"></td><td class="FileContents-lineContents" id="6324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6325" onclick="window.location.hash='#6325'"></td><td class="FileContents-lineContents" id="6325"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pCluster</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6326" onclick="window.location.hash='#6326'"></td><td class="FileContents-lineContents" id="6326"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6327" onclick="window.location.hash='#6327'"></td><td class="FileContents-lineContents" id="6327"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6328" onclick="window.location.hash='#6328'"></td><td class="FileContents-lineContents" id="6328"><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Cluster</span><span class="pun">()</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6329" onclick="window.location.hash='#6329'"></td><td class="FileContents-lineContents" id="6329"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6330" onclick="window.location.hash='#6330'"></td><td class="FileContents-lineContents" id="6330"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6331" onclick="window.location.hash='#6331'"></td><td class="FileContents-lineContents" id="6331"><span class="pln">      m_index</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6332" onclick="window.location.hash='#6332'"></td><td class="FileContents-lineContents" id="6332"><span class="pln">      m_pos</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6333" onclick="window.location.hash='#6333'"></td><td class="FileContents-lineContents" id="6333"><span class="pln">      m_element_size</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6334" onclick="window.location.hash='#6334'"></td><td class="FileContents-lineContents" id="6334"><span class="pln">      m_timecode</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6335" onclick="window.location.hash='#6335'"></td><td class="FileContents-lineContents" id="6335"><span class="pln">      m_entries</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6336" onclick="window.location.hash='#6336'"></td><td class="FileContents-lineContents" id="6336"><span class="pln">      m_entries_size</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6337" onclick="window.location.hash='#6337'"></td><td class="FileContents-lineContents" id="6337"><span class="pln">      m_entries_count</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// means &quot;no entries&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6338" onclick="window.location.hash='#6338'"></td><td class="FileContents-lineContents" id="6338"><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6339" onclick="window.location.hash='#6339'"></td><td class="FileContents-lineContents" id="6339"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6340" onclick="window.location.hash='#6340'"></td><td class="FileContents-lineContents" id="6340"><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">Cluster</span><span class="pun">(</span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> element_start</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6341" onclick="window.location.hash='#6341'"></td><td class="FileContents-lineContents" id="6341"><span class="pln">                 </span><span class="com">/* long long element_size */</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6342" onclick="window.location.hash='#6342'"></td><td class="FileContents-lineContents" id="6342"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_pSegment</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6343" onclick="window.location.hash='#6343'"></td><td class="FileContents-lineContents" id="6343"><span class="pln">      m_element_start</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6344" onclick="window.location.hash='#6344'"></td><td class="FileContents-lineContents" id="6344"><span class="pln">      m_index</span><span class="pun">(</span><span class="pln">idx</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6345" onclick="window.location.hash='#6345'"></td><td class="FileContents-lineContents" id="6345"><span class="pln">      m_pos</span><span class="pun">(</span><span class="pln">element_start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6346" onclick="window.location.hash='#6346'"></td><td class="FileContents-lineContents" id="6346"><span class="pln">      m_element_size</span><span class="pun">(-</span><span class="lit">1</span><span class="pln"> </span><span class="com">/* element_size */</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6347" onclick="window.location.hash='#6347'"></td><td class="FileContents-lineContents" id="6347"><span class="pln">      m_timecode</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6348" onclick="window.location.hash='#6348'"></td><td class="FileContents-lineContents" id="6348"><span class="pln">      m_entries</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6349" onclick="window.location.hash='#6349'"></td><td class="FileContents-lineContents" id="6349"><span class="pln">      m_entries_size</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6350" onclick="window.location.hash='#6350'"></td><td class="FileContents-lineContents" id="6350"><span class="pln">      m_entries_count</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">)</span><span class="pln">  </span><span class="com">// means &quot;has not been parsed yet&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6351" onclick="window.location.hash='#6351'"></td><td class="FileContents-lineContents" id="6351"><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6352" onclick="window.location.hash='#6352'"></td><td class="FileContents-lineContents" id="6352"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6353" onclick="window.location.hash='#6353'"></td><td class="FileContents-lineContents" id="6353"><span class="typ">Cluster</span><span class="pun">::~</span><span class="typ">Cluster</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6354" onclick="window.location.hash='#6354'"></td><td class="FileContents-lineContents" id="6354"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6355" onclick="window.location.hash='#6355'"></td><td class="FileContents-lineContents" id="6355"><span class="pln">    </span><span class="kwd">return</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6356" onclick="window.location.hash='#6356'"></td><td class="FileContents-lineContents" id="6356"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6357" onclick="window.location.hash='#6357'"></td><td class="FileContents-lineContents" id="6357"><span class="pln">  </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6358" onclick="window.location.hash='#6358'"></td><td class="FileContents-lineContents" id="6358"><span class="pln">  </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> m_entries </span><span class="pun">+</span><span class="pln"> m_entries_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6359" onclick="window.location.hash='#6359'"></td><td class="FileContents-lineContents" id="6359"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6360" onclick="window.location.hash='#6360'"></td><td class="FileContents-lineContents" id="6360"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6361" onclick="window.location.hash='#6361'"></td><td class="FileContents-lineContents" id="6361"><span class="pln">    </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">i</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6362" onclick="window.location.hash='#6362'"></td><td class="FileContents-lineContents" id="6362"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">p</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6363" onclick="window.location.hash='#6363'"></td><td class="FileContents-lineContents" id="6363"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6364" onclick="window.location.hash='#6364'"></td><td class="FileContents-lineContents" id="6364"><span class="pln">    </span><span class="kwd">delete</span><span class="pln"> p</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6365" onclick="window.location.hash='#6365'"></td><td class="FileContents-lineContents" id="6365"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6366" onclick="window.location.hash='#6366'"></td><td class="FileContents-lineContents" id="6366"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6367" onclick="window.location.hash='#6367'"></td><td class="FileContents-lineContents" id="6367"><span class="pln">  </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6368" onclick="window.location.hash='#6368'"></td><td class="FileContents-lineContents" id="6368"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6369" onclick="window.location.hash='#6369'"></td><td class="FileContents-lineContents" id="6369"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6370" onclick="window.location.hash='#6370'"></td><td class="FileContents-lineContents" id="6370"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="pln">EOS</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pSegment </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6371" onclick="window.location.hash='#6371'"></td><td class="FileContents-lineContents" id="6371"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6372" onclick="window.location.hash='#6372'"></td><td class="FileContents-lineContents" id="6372"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_index</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6373" onclick="window.location.hash='#6373'"></td><td class="FileContents-lineContents" id="6373"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6374" onclick="window.location.hash='#6374'"></td><td class="FileContents-lineContents" id="6374"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetPosition</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6375" onclick="window.location.hash='#6375'"></td><td class="FileContents-lineContents" id="6375"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_element_start </span><span class="pun">-</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6376" onclick="window.location.hash='#6376'"></td><td class="FileContents-lineContents" id="6376"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6377" onclick="window.location.hash='#6377'"></td><td class="FileContents-lineContents" id="6377"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6378" onclick="window.location.hash='#6378'"></td><td class="FileContents-lineContents" id="6378"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6379" onclick="window.location.hash='#6379'"></td><td class="FileContents-lineContents" id="6379"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6380" onclick="window.location.hash='#6380'"></td><td class="FileContents-lineContents" id="6380"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6381" onclick="window.location.hash='#6381'"></td><td class="FileContents-lineContents" id="6381"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetElementSize</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_element_size</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6382" onclick="window.location.hash='#6382'"></td><td class="FileContents-lineContents" id="6382"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6383" onclick="window.location.hash='#6383'"></td><td class="FileContents-lineContents" id="6383"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">HasBlockEntries</span><span class="pun">(</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6384" onclick="window.location.hash='#6384'"></td><td class="FileContents-lineContents" id="6384"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> pSegment</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6385" onclick="window.location.hash='#6385'"></td><td class="FileContents-lineContents" id="6385"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> off</span><span class="pun">,</span><span class="pln">  </span><span class="com">// relative to start of segment payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6386" onclick="window.location.hash='#6386'"></td><td class="FileContents-lineContents" id="6386"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">&amp;</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6387" onclick="window.location.hash='#6387'"></td><td class="FileContents-lineContents" id="6387"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6388" onclick="window.location.hash='#6388'"></td><td class="FileContents-lineContents" id="6388"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">off </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// relative to segment</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6389" onclick="window.location.hash='#6389'"></td><td class="FileContents-lineContents" id="6389"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6390" onclick="window.location.hash='#6390'"></td><td class="FileContents-lineContents" id="6390"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6391" onclick="window.location.hash='#6391'"></td><td class="FileContents-lineContents" id="6391"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6392" onclick="window.location.hash='#6392'"></td><td class="FileContents-lineContents" id="6392"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total</span><span class="pun">,</span><span class="pln"> avail</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6393" onclick="window.location.hash='#6393'"></td><td class="FileContents-lineContents" id="6393"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6394" onclick="window.location.hash='#6394'"></td><td class="FileContents-lineContents" id="6394"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Length</span><span class="pun">(&amp;</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">avail</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6395" onclick="window.location.hash='#6395'"></td><td class="FileContents-lineContents" id="6395"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6396" onclick="window.location.hash='#6396'"></td><td class="FileContents-lineContents" id="6396"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6397" onclick="window.location.hash='#6397'"></td><td class="FileContents-lineContents" id="6397"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6398" onclick="window.location.hash='#6398'"></td><td class="FileContents-lineContents" id="6398"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6399" onclick="window.location.hash='#6399'"></td><td class="FileContents-lineContents" id="6399"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">total </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">avail </span><span class="pun">&lt;=</span><span class="pln"> total</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6400" onclick="window.location.hash='#6400'"></td><td class="FileContents-lineContents" id="6400"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6401" onclick="window.location.hash='#6401'"></td><td class="FileContents-lineContents" id="6401"><span class="pln">  pos </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_start </span><span class="pun">+</span><span class="pln"> off</span><span class="pun">;</span><span class="pln">  </span><span class="com">// absolute</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6402" onclick="window.location.hash='#6402'"></td><td class="FileContents-lineContents" id="6402"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6403" onclick="window.location.hash='#6403'"></td><td class="FileContents-lineContents" id="6403"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6404" onclick="window.location.hash='#6404'"></td><td class="FileContents-lineContents" id="6404"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// we don&#39;t even have a complete cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6405" onclick="window.location.hash='#6405'"></td><td class="FileContents-lineContents" id="6405"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6406" onclick="window.location.hash='#6406'"></td><td class="FileContents-lineContents" id="6406"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> segment_stop </span><span class="pun">=</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6407" onclick="window.location.hash='#6407'"></td><td class="FileContents-lineContents" id="6407"><span class="pln">      </span><span class="pun">(</span><span class="pln">pSegment</span><span class="pun">-&gt;</span><span class="pln">m_size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_start </span><span class="pun">+</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="pln">m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6408" onclick="window.location.hash='#6408'"></td><td class="FileContents-lineContents" id="6408"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6409" onclick="window.location.hash='#6409'"></td><td class="FileContents-lineContents" id="6409"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> cluster_stop </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// interpreted later to mean &quot;unknown size&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6410" onclick="window.location.hash='#6410'"></td><td class="FileContents-lineContents" id="6410"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6411" onclick="window.location.hash='#6411'"></td><td class="FileContents-lineContents" id="6411"><span class="pln">  </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6412" onclick="window.location.hash='#6412'"></td><td class="FileContents-lineContents" id="6412"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6413" onclick="window.location.hash='#6413'"></td><td class="FileContents-lineContents" id="6413"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6414" onclick="window.location.hash='#6414'"></td><td class="FileContents-lineContents" id="6414"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6415" onclick="window.location.hash='#6415'"></td><td class="FileContents-lineContents" id="6415"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6416" onclick="window.location.hash='#6416'"></td><td class="FileContents-lineContents" id="6416"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6417" onclick="window.location.hash='#6417'"></td><td class="FileContents-lineContents" id="6417"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6418" onclick="window.location.hash='#6418'"></td><td class="FileContents-lineContents" id="6418"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6419" onclick="window.location.hash='#6419'"></td><td class="FileContents-lineContents" id="6419"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6420" onclick="window.location.hash='#6420'"></td><td class="FileContents-lineContents" id="6420"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6421" onclick="window.location.hash='#6421'"></td><td class="FileContents-lineContents" id="6421"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6422" onclick="window.location.hash='#6422'"></td><td class="FileContents-lineContents" id="6422"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// need more data</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6423" onclick="window.location.hash='#6423'"></td><td class="FileContents-lineContents" id="6423"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6424" onclick="window.location.hash='#6424'"></td><td class="FileContents-lineContents" id="6424"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6425" onclick="window.location.hash='#6425'"></td><td class="FileContents-lineContents" id="6425"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6426" onclick="window.location.hash='#6426'"></td><td class="FileContents-lineContents" id="6426"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6427" onclick="window.location.hash='#6427'"></td><td class="FileContents-lineContents" id="6427"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6428" onclick="window.location.hash='#6428'"></td><td class="FileContents-lineContents" id="6428"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6429" onclick="window.location.hash='#6429'"></td><td class="FileContents-lineContents" id="6429"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6430" onclick="window.location.hash='#6430'"></td><td class="FileContents-lineContents" id="6430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6431" onclick="window.location.hash='#6431'"></td><td class="FileContents-lineContents" id="6431"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6432" onclick="window.location.hash='#6432'"></td><td class="FileContents-lineContents" id="6432"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6433" onclick="window.location.hash='#6433'"></td><td class="FileContents-lineContents" id="6433"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6434" onclick="window.location.hash='#6434'"></td><td class="FileContents-lineContents" id="6434"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6435" onclick="window.location.hash='#6435'"></td><td class="FileContents-lineContents" id="6435"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6436" onclick="window.location.hash='#6436'"></td><td class="FileContents-lineContents" id="6436"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6437" onclick="window.location.hash='#6437'"></td><td class="FileContents-lineContents" id="6437"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6438" onclick="window.location.hash='#6438'"></td><td class="FileContents-lineContents" id="6438"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6439" onclick="window.location.hash='#6439'"></td><td class="FileContents-lineContents" id="6439"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird: not cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6440" onclick="window.location.hash='#6440'"></td><td class="FileContents-lineContents" id="6440"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6441" onclick="window.location.hash='#6441'"></td><td class="FileContents-lineContents" id="6441"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6442" onclick="window.location.hash='#6442'"></td><td class="FileContents-lineContents" id="6442"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume Cluster ID field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6443" onclick="window.location.hash='#6443'"></td><td class="FileContents-lineContents" id="6443"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6444" onclick="window.location.hash='#6444'"></td><td class="FileContents-lineContents" id="6444"><span class="pln">    </span><span class="com">// read size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6445" onclick="window.location.hash='#6445'"></td><td class="FileContents-lineContents" id="6445"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6446" onclick="window.location.hash='#6446'"></td><td class="FileContents-lineContents" id="6446"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6447" onclick="window.location.hash='#6447'"></td><td class="FileContents-lineContents" id="6447"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6448" onclick="window.location.hash='#6448'"></td><td class="FileContents-lineContents" id="6448"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6449" onclick="window.location.hash='#6449'"></td><td class="FileContents-lineContents" id="6449"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6450" onclick="window.location.hash='#6450'"></td><td class="FileContents-lineContents" id="6450"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6451" onclick="window.location.hash='#6451'"></td><td class="FileContents-lineContents" id="6451"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6452" onclick="window.location.hash='#6452'"></td><td class="FileContents-lineContents" id="6452"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6453" onclick="window.location.hash='#6453'"></td><td class="FileContents-lineContents" id="6453"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6454" onclick="window.location.hash='#6454'"></td><td class="FileContents-lineContents" id="6454"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6455" onclick="window.location.hash='#6455'"></td><td class="FileContents-lineContents" id="6455"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6456" onclick="window.location.hash='#6456'"></td><td class="FileContents-lineContents" id="6456"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6457" onclick="window.location.hash='#6457'"></td><td class="FileContents-lineContents" id="6457"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6458" onclick="window.location.hash='#6458'"></td><td class="FileContents-lineContents" id="6458"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6459" onclick="window.location.hash='#6459'"></td><td class="FileContents-lineContents" id="6459"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6460" onclick="window.location.hash='#6460'"></td><td class="FileContents-lineContents" id="6460"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6461" onclick="window.location.hash='#6461'"></td><td class="FileContents-lineContents" id="6461"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6462" onclick="window.location.hash='#6462'"></td><td class="FileContents-lineContents" id="6462"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6463" onclick="window.location.hash='#6463'"></td><td class="FileContents-lineContents" id="6463"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6464" onclick="window.location.hash='#6464'"></td><td class="FileContents-lineContents" id="6464"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6465" onclick="window.location.hash='#6465'"></td><td class="FileContents-lineContents" id="6465"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6466" onclick="window.location.hash='#6466'"></td><td class="FileContents-lineContents" id="6466"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6467" onclick="window.location.hash='#6467'"></td><td class="FileContents-lineContents" id="6467"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6468" onclick="window.location.hash='#6468'"></td><td class="FileContents-lineContents" id="6468"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6469" onclick="window.location.hash='#6469'"></td><td class="FileContents-lineContents" id="6469"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6470" onclick="window.location.hash='#6470'"></td><td class="FileContents-lineContents" id="6470"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6471" onclick="window.location.hash='#6471'"></td><td class="FileContents-lineContents" id="6471"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6472" onclick="window.location.hash='#6472'"></td><td class="FileContents-lineContents" id="6472"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6473" onclick="window.location.hash='#6473'"></td><td class="FileContents-lineContents" id="6473"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6474" onclick="window.location.hash='#6474'"></td><td class="FileContents-lineContents" id="6474"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// cluster does not have entries</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6475" onclick="window.location.hash='#6475'"></td><td class="FileContents-lineContents" id="6475"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6476" onclick="window.location.hash='#6476'"></td><td class="FileContents-lineContents" id="6476"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6477" onclick="window.location.hash='#6477'"></td><td class="FileContents-lineContents" id="6477"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6478" onclick="window.location.hash='#6478'"></td><td class="FileContents-lineContents" id="6478"><span class="pln">    </span><span class="com">// pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6479" onclick="window.location.hash='#6479'"></td><td class="FileContents-lineContents" id="6479"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6480" onclick="window.location.hash='#6480'"></td><td class="FileContents-lineContents" id="6480"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6481" onclick="window.location.hash='#6481'"></td><td class="FileContents-lineContents" id="6481"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6482" onclick="window.location.hash='#6482'"></td><td class="FileContents-lineContents" id="6482"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">!=</span><span class="pln"> unknown_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6483" onclick="window.location.hash='#6483'"></td><td class="FileContents-lineContents" id="6483"><span class="pln">      cluster_stop </span><span class="pun">=</span><span class="pln"> pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6484" onclick="window.location.hash='#6484'"></td><td class="FileContents-lineContents" id="6484"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6485" onclick="window.location.hash='#6485'"></td><td class="FileContents-lineContents" id="6485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6486" onclick="window.location.hash='#6486'"></td><td class="FileContents-lineContents" id="6486"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">segment_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_stop </span><span class="pun">&gt;</span><span class="pln"> segment_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6487" onclick="window.location.hash='#6487'"></td><td class="FileContents-lineContents" id="6487"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6488" onclick="window.location.hash='#6488'"></td><td class="FileContents-lineContents" id="6488"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6489" onclick="window.location.hash='#6489'"></td><td class="FileContents-lineContents" id="6489"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cluster_stop </span><span class="pun">&gt;</span><span class="pln"> total</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6490" onclick="window.location.hash='#6490'"></td><td class="FileContents-lineContents" id="6490"><span class="pln">        </span><span class="com">// return E_FILE_FORMAT_INVALID;  //too conservative</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6491" onclick="window.location.hash='#6491'"></td><td class="FileContents-lineContents" id="6491"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// cluster does not have any entries</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6492" onclick="window.location.hash='#6492'"></td><td class="FileContents-lineContents" id="6492"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6493" onclick="window.location.hash='#6493'"></td><td class="FileContents-lineContents" id="6493"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6494" onclick="window.location.hash='#6494'"></td><td class="FileContents-lineContents" id="6494"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6495" onclick="window.location.hash='#6495'"></td><td class="FileContents-lineContents" id="6495"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6496" onclick="window.location.hash='#6496'"></td><td class="FileContents-lineContents" id="6496"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6497" onclick="window.location.hash='#6497'"></td><td class="FileContents-lineContents" id="6497"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no entries detected</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6498" onclick="window.location.hash='#6498'"></td><td class="FileContents-lineContents" id="6498"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6499" onclick="window.location.hash='#6499'"></td><td class="FileContents-lineContents" id="6499"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6500" onclick="window.location.hash='#6500'"></td><td class="FileContents-lineContents" id="6500"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6501" onclick="window.location.hash='#6501'"></td><td class="FileContents-lineContents" id="6501"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6502" onclick="window.location.hash='#6502'"></td><td class="FileContents-lineContents" id="6502"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6503" onclick="window.location.hash='#6503'"></td><td class="FileContents-lineContents" id="6503"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6504" onclick="window.location.hash='#6504'"></td><td class="FileContents-lineContents" id="6504"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6505" onclick="window.location.hash='#6505'"></td><td class="FileContents-lineContents" id="6505"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6506" onclick="window.location.hash='#6506'"></td><td class="FileContents-lineContents" id="6506"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6507" onclick="window.location.hash='#6507'"></td><td class="FileContents-lineContents" id="6507"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6508" onclick="window.location.hash='#6508'"></td><td class="FileContents-lineContents" id="6508"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6509" onclick="window.location.hash='#6509'"></td><td class="FileContents-lineContents" id="6509"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// need more data</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6510" onclick="window.location.hash='#6510'"></td><td class="FileContents-lineContents" id="6510"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6511" onclick="window.location.hash='#6511'"></td><td class="FileContents-lineContents" id="6511"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6512" onclick="window.location.hash='#6512'"></td><td class="FileContents-lineContents" id="6512"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6513" onclick="window.location.hash='#6513'"></td><td class="FileContents-lineContents" id="6513"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6514" onclick="window.location.hash='#6514'"></td><td class="FileContents-lineContents" id="6514"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6515" onclick="window.location.hash='#6515'"></td><td class="FileContents-lineContents" id="6515"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6516" onclick="window.location.hash='#6516'"></td><td class="FileContents-lineContents" id="6516"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6517" onclick="window.location.hash='#6517'"></td><td class="FileContents-lineContents" id="6517"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6518" onclick="window.location.hash='#6518'"></td><td class="FileContents-lineContents" id="6518"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6519" onclick="window.location.hash='#6519'"></td><td class="FileContents-lineContents" id="6519"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6520" onclick="window.location.hash='#6520'"></td><td class="FileContents-lineContents" id="6520"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6521" onclick="window.location.hash='#6521'"></td><td class="FileContents-lineContents" id="6521"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6522" onclick="window.location.hash='#6522'"></td><td class="FileContents-lineContents" id="6522"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6523" onclick="window.location.hash='#6523'"></td><td class="FileContents-lineContents" id="6523"><span class="pln">    </span><span class="com">// This is the distinguished set of ID&#39;s we use to determine</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6524" onclick="window.location.hash='#6524'"></td><td class="FileContents-lineContents" id="6524"><span class="pln">    </span><span class="com">// that we have exhausted the sub-element&#39;s inside the cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6525" onclick="window.location.hash='#6525'"></td><td class="FileContents-lineContents" id="6525"><span class="pln">    </span><span class="com">// whose ID we parsed earlier.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6526" onclick="window.location.hash='#6526'"></td><td class="FileContents-lineContents" id="6526"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6527" onclick="window.location.hash='#6527'"></td><td class="FileContents-lineContents" id="6527"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0F43B675</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cluster ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6528" onclick="window.location.hash='#6528'"></td><td class="FileContents-lineContents" id="6528"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no entries found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6529" onclick="window.location.hash='#6529'"></td><td class="FileContents-lineContents" id="6529"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6530" onclick="window.location.hash='#6530'"></td><td class="FileContents-lineContents" id="6530"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x0C53BB6B</span><span class="pun">)</span><span class="pln">  </span><span class="com">// Cues ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6531" onclick="window.location.hash='#6531'"></td><td class="FileContents-lineContents" id="6531"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// no entries found</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6532" onclick="window.location.hash='#6532'"></td><td class="FileContents-lineContents" id="6532"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6533" onclick="window.location.hash='#6533'"></td><td class="FileContents-lineContents" id="6533"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume id field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6534" onclick="window.location.hash='#6534'"></td><td class="FileContents-lineContents" id="6534"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6535" onclick="window.location.hash='#6535'"></td><td class="FileContents-lineContents" id="6535"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6536" onclick="window.location.hash='#6536'"></td><td class="FileContents-lineContents" id="6536"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6537" onclick="window.location.hash='#6537'"></td><td class="FileContents-lineContents" id="6537"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6538" onclick="window.location.hash='#6538'"></td><td class="FileContents-lineContents" id="6538"><span class="pln">    </span><span class="com">// read size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6539" onclick="window.location.hash='#6539'"></td><td class="FileContents-lineContents" id="6539"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6540" onclick="window.location.hash='#6540'"></td><td class="FileContents-lineContents" id="6540"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6541" onclick="window.location.hash='#6541'"></td><td class="FileContents-lineContents" id="6541"><span class="pln">      len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6542" onclick="window.location.hash='#6542'"></td><td class="FileContents-lineContents" id="6542"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6543" onclick="window.location.hash='#6543'"></td><td class="FileContents-lineContents" id="6543"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6544" onclick="window.location.hash='#6544'"></td><td class="FileContents-lineContents" id="6544"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6545" onclick="window.location.hash='#6545'"></td><td class="FileContents-lineContents" id="6545"><span class="pln">    result </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetUIntLength</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6546" onclick="window.location.hash='#6546'"></td><td class="FileContents-lineContents" id="6546"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6547" onclick="window.location.hash='#6547'"></td><td class="FileContents-lineContents" id="6547"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6548" onclick="window.location.hash='#6548'"></td><td class="FileContents-lineContents" id="6548"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6549" onclick="window.location.hash='#6549'"></td><td class="FileContents-lineContents" id="6549"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6550" onclick="window.location.hash='#6550'"></td><td class="FileContents-lineContents" id="6550"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// underflow</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6551" onclick="window.location.hash='#6551'"></td><td class="FileContents-lineContents" id="6551"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6552" onclick="window.location.hash='#6552'"></td><td class="FileContents-lineContents" id="6552"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6553" onclick="window.location.hash='#6553'"></td><td class="FileContents-lineContents" id="6553"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6554" onclick="window.location.hash='#6554'"></td><td class="FileContents-lineContents" id="6554"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6555" onclick="window.location.hash='#6555'"></td><td class="FileContents-lineContents" id="6555"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6556" onclick="window.location.hash='#6556'"></td><td class="FileContents-lineContents" id="6556"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> avail</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6557" onclick="window.location.hash='#6557'"></td><td class="FileContents-lineContents" id="6557"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_BUFFER_NOT_FULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6558" onclick="window.location.hash='#6558'"></td><td class="FileContents-lineContents" id="6558"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6559" onclick="window.location.hash='#6559'"></td><td class="FileContents-lineContents" id="6559"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6560" onclick="window.location.hash='#6560'"></td><td class="FileContents-lineContents" id="6560"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6561" onclick="window.location.hash='#6561'"></td><td class="FileContents-lineContents" id="6561"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6562" onclick="window.location.hash='#6562'"></td><td class="FileContents-lineContents" id="6562"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6563" onclick="window.location.hash='#6563'"></td><td class="FileContents-lineContents" id="6563"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6564" onclick="window.location.hash='#6564'"></td><td class="FileContents-lineContents" id="6564"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size field</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6565" onclick="window.location.hash='#6565'"></td><td class="FileContents-lineContents" id="6565"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6566" onclick="window.location.hash='#6566'"></td><td class="FileContents-lineContents" id="6566"><span class="pln">    </span><span class="com">// pos now points to start of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6567" onclick="window.location.hash='#6567'"></td><td class="FileContents-lineContents" id="6567"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6568" onclick="window.location.hash='#6568'"></td><td class="FileContents-lineContents" id="6568"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6569" onclick="window.location.hash='#6569'"></td><td class="FileContents-lineContents" id="6569"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6570" onclick="window.location.hash='#6570'"></td><td class="FileContents-lineContents" id="6570"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6571" onclick="window.location.hash='#6571'"></td><td class="FileContents-lineContents" id="6571"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6572" onclick="window.location.hash='#6572'"></td><td class="FileContents-lineContents" id="6572"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6573" onclick="window.location.hash='#6573'"></td><td class="FileContents-lineContents" id="6573"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6574" onclick="window.location.hash='#6574'"></td><td class="FileContents-lineContents" id="6574"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6575" onclick="window.location.hash='#6575'"></td><td class="FileContents-lineContents" id="6575"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6576" onclick="window.location.hash='#6576'"></td><td class="FileContents-lineContents" id="6576"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> unknown_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6577" onclick="window.location.hash='#6577'"></td><td class="FileContents-lineContents" id="6577"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span><span class="pln">  </span><span class="com">// not supported inside cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6578" onclick="window.location.hash='#6578'"></td><td class="FileContents-lineContents" id="6578"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6579" onclick="window.location.hash='#6579'"></td><td class="FileContents-lineContents" id="6579"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster_stop</span><span class="pun">))</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6580" onclick="window.location.hash='#6580'"></td><td class="FileContents-lineContents" id="6580"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6581" onclick="window.location.hash='#6581'"></td><td class="FileContents-lineContents" id="6581"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6582" onclick="window.location.hash='#6582'"></td><td class="FileContents-lineContents" id="6582"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x20</span><span class="pun">)</span><span class="pln">  </span><span class="com">// BlockGroup ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6583" onclick="window.location.hash='#6583'"></td><td class="FileContents-lineContents" id="6583"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// have at least one entry</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6584" onclick="window.location.hash='#6584'"></td><td class="FileContents-lineContents" id="6584"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6585" onclick="window.location.hash='#6585'"></td><td class="FileContents-lineContents" id="6585"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x23</span><span class="pun">)</span><span class="pln">  </span><span class="com">// SimpleBlock ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6586" onclick="window.location.hash='#6586'"></td><td class="FileContents-lineContents" id="6586"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// have at least one entry</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6587" onclick="window.location.hash='#6587'"></td><td class="FileContents-lineContents" id="6587"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6588" onclick="window.location.hash='#6588'"></td><td class="FileContents-lineContents" id="6588"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6589" onclick="window.location.hash='#6589'"></td><td class="FileContents-lineContents" id="6589"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">cluster_stop </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> cluster_stop</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6590" onclick="window.location.hash='#6590'"></td><td class="FileContents-lineContents" id="6590"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6591" onclick="window.location.hash='#6591'"></td><td class="FileContents-lineContents" id="6591"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6592" onclick="window.location.hash='#6592'"></td><td class="FileContents-lineContents" id="6592"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6593" onclick="window.location.hash='#6593'"></td><td class="FileContents-lineContents" id="6593"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6594" onclick="window.location.hash='#6594'"></td><td class="FileContents-lineContents" id="6594"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6595" onclick="window.location.hash='#6595'"></td><td class="FileContents-lineContents" id="6595"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6596" onclick="window.location.hash='#6596'"></td><td class="FileContents-lineContents" id="6596"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6597" onclick="window.location.hash='#6597'"></td><td class="FileContents-lineContents" id="6597"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Load</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6598" onclick="window.location.hash='#6598'"></td><td class="FileContents-lineContents" id="6598"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6599" onclick="window.location.hash='#6599'"></td><td class="FileContents-lineContents" id="6599"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6600" onclick="window.location.hash='#6600'"></td><td class="FileContents-lineContents" id="6600"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6601" onclick="window.location.hash='#6601'"></td><td class="FileContents-lineContents" id="6601"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6602" onclick="window.location.hash='#6602'"></td><td class="FileContents-lineContents" id="6602"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> m_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6603" onclick="window.location.hash='#6603'"></td><td class="FileContents-lineContents" id="6603"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6604" onclick="window.location.hash='#6604'"></td><td class="FileContents-lineContents" id="6604"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6605" onclick="window.location.hash='#6605'"></td><td class="FileContents-lineContents" id="6605"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetTime</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6606" onclick="window.location.hash='#6606'"></td><td class="FileContents-lineContents" id="6606"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tc </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetTimeCode</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6607" onclick="window.location.hash='#6607'"></td><td class="FileContents-lineContents" id="6607"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6608" onclick="window.location.hash='#6608'"></td><td class="FileContents-lineContents" id="6608"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tc </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6609" onclick="window.location.hash='#6609'"></td><td class="FileContents-lineContents" id="6609"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> tc</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6610" onclick="window.location.hash='#6610'"></td><td class="FileContents-lineContents" id="6610"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6611" onclick="window.location.hash='#6611'"></td><td class="FileContents-lineContents" id="6611"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pInfo </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetInfo</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6612" onclick="window.location.hash='#6612'"></td><td class="FileContents-lineContents" id="6612"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pInfo</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6613" onclick="window.location.hash='#6613'"></td><td class="FileContents-lineContents" id="6613"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6614" onclick="window.location.hash='#6614'"></td><td class="FileContents-lineContents" id="6614"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> scale </span><span class="pun">=</span><span class="pln"> pInfo</span><span class="pun">-&gt;</span><span class="typ">GetTimeCodeScale</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6615" onclick="window.location.hash='#6615'"></td><td class="FileContents-lineContents" id="6615"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">scale </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6616" onclick="window.location.hash='#6616'"></td><td class="FileContents-lineContents" id="6616"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6617" onclick="window.location.hash='#6617'"></td><td class="FileContents-lineContents" id="6617"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> m_timecode </span><span class="pun">*</span><span class="pln"> scale</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6618" onclick="window.location.hash='#6618'"></td><td class="FileContents-lineContents" id="6618"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6619" onclick="window.location.hash='#6619'"></td><td class="FileContents-lineContents" id="6619"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> t</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6620" onclick="window.location.hash='#6620'"></td><td class="FileContents-lineContents" id="6620"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6621" onclick="window.location.hash='#6621'"></td><td class="FileContents-lineContents" id="6621"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6622" onclick="window.location.hash='#6622'"></td><td class="FileContents-lineContents" id="6622"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetFirstTime</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6623" onclick="window.location.hash='#6623'"></td><td class="FileContents-lineContents" id="6623"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6624" onclick="window.location.hash='#6624'"></td><td class="FileContents-lineContents" id="6624"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6625" onclick="window.location.hash='#6625'"></td><td class="FileContents-lineContents" id="6625"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetFirst</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6626" onclick="window.location.hash='#6626'"></td><td class="FileContents-lineContents" id="6626"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6627" onclick="window.location.hash='#6627'"></td><td class="FileContents-lineContents" id="6627"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6628" onclick="window.location.hash='#6628'"></td><td class="FileContents-lineContents" id="6628"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6629" onclick="window.location.hash='#6629'"></td><td class="FileContents-lineContents" id="6629"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6630" onclick="window.location.hash='#6630'"></td><td class="FileContents-lineContents" id="6630"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pEntry </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">  </span><span class="com">// empty cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6631" onclick="window.location.hash='#6631'"></td><td class="FileContents-lineContents" id="6631"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">GetTime</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6632" onclick="window.location.hash='#6632'"></td><td class="FileContents-lineContents" id="6632"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6633" onclick="window.location.hash='#6633'"></td><td class="FileContents-lineContents" id="6633"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6634" onclick="window.location.hash='#6634'"></td><td class="FileContents-lineContents" id="6634"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6635" onclick="window.location.hash='#6635'"></td><td class="FileContents-lineContents" id="6635"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6636" onclick="window.location.hash='#6636'"></td><td class="FileContents-lineContents" id="6636"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6637" onclick="window.location.hash='#6637'"></td><td class="FileContents-lineContents" id="6637"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6638" onclick="window.location.hash='#6638'"></td><td class="FileContents-lineContents" id="6638"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6639" onclick="window.location.hash='#6639'"></td><td class="FileContents-lineContents" id="6639"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetLastTime</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6640" onclick="window.location.hash='#6640'"></td><td class="FileContents-lineContents" id="6640"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6641" onclick="window.location.hash='#6641'"></td><td class="FileContents-lineContents" id="6641"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6642" onclick="window.location.hash='#6642'"></td><td class="FileContents-lineContents" id="6642"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetLast</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6643" onclick="window.location.hash='#6643'"></td><td class="FileContents-lineContents" id="6643"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6644" onclick="window.location.hash='#6644'"></td><td class="FileContents-lineContents" id="6644"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6645" onclick="window.location.hash='#6645'"></td><td class="FileContents-lineContents" id="6645"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6646" onclick="window.location.hash='#6646'"></td><td class="FileContents-lineContents" id="6646"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6647" onclick="window.location.hash='#6647'"></td><td class="FileContents-lineContents" id="6647"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pEntry </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">  </span><span class="com">// empty cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6648" onclick="window.location.hash='#6648'"></td><td class="FileContents-lineContents" id="6648"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">GetTime</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6649" onclick="window.location.hash='#6649'"></td><td class="FileContents-lineContents" id="6649"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6650" onclick="window.location.hash='#6650'"></td><td class="FileContents-lineContents" id="6650"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6651" onclick="window.location.hash='#6651'"></td><td class="FileContents-lineContents" id="6651"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6652" onclick="window.location.hash='#6652'"></td><td class="FileContents-lineContents" id="6652"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6653" onclick="window.location.hash='#6653'"></td><td class="FileContents-lineContents" id="6653"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6654" onclick="window.location.hash='#6654'"></td><td class="FileContents-lineContents" id="6654"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6655" onclick="window.location.hash='#6655'"></td><td class="FileContents-lineContents" id="6655"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6656" onclick="window.location.hash='#6656'"></td><td class="FileContents-lineContents" id="6656"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">CreateBlock</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6657" onclick="window.location.hash='#6657'"></td><td class="FileContents-lineContents" id="6657"><span class="pln">                          </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln">  </span><span class="com">// absolute pos of payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6658" onclick="window.location.hash='#6658'"></td><td class="FileContents-lineContents" id="6658"><span class="pln">                          </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> discard_padding</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6659" onclick="window.location.hash='#6659'"></td><td class="FileContents-lineContents" id="6659"><span class="pln">  assert</span><span class="pun">((</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x20</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x23</span><span class="pun">));</span><span class="pln">  </span><span class="com">// BlockGroup or SimpleBlock</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6660" onclick="window.location.hash='#6660'"></td><td class="FileContents-lineContents" id="6660"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6661" onclick="window.location.hash='#6661'"></td><td class="FileContents-lineContents" id="6661"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// haven&#39;t parsed anything yet</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6662" onclick="window.location.hash='#6662'"></td><td class="FileContents-lineContents" id="6662"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6663" onclick="window.location.hash='#6663'"></td><td class="FileContents-lineContents" id="6663"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries_size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6664" onclick="window.location.hash='#6664'"></td><td class="FileContents-lineContents" id="6664"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6665" onclick="window.location.hash='#6665'"></td><td class="FileContents-lineContents" id="6665"><span class="pln">    m_entries_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6666" onclick="window.location.hash='#6666'"></td><td class="FileContents-lineContents" id="6666"><span class="pln">    m_entries </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*[</span><span class="pln">m_entries_size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6667" onclick="window.location.hash='#6667'"></td><td class="FileContents-lineContents" id="6667"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6668" onclick="window.location.hash='#6668'"></td><td class="FileContents-lineContents" id="6668"><span class="pln">    m_entries_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6669" onclick="window.location.hash='#6669'"></td><td class="FileContents-lineContents" id="6669"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6670" onclick="window.location.hash='#6670'"></td><td class="FileContents-lineContents" id="6670"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6671" onclick="window.location.hash='#6671'"></td><td class="FileContents-lineContents" id="6671"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries_size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6672" onclick="window.location.hash='#6672'"></td><td class="FileContents-lineContents" id="6672"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;=</span><span class="pln"> m_entries_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6673" onclick="window.location.hash='#6673'"></td><td class="FileContents-lineContents" id="6673"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6674" onclick="window.location.hash='#6674'"></td><td class="FileContents-lineContents" id="6674"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&gt;=</span><span class="pln"> m_entries_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6675" onclick="window.location.hash='#6675'"></td><td class="FileContents-lineContents" id="6675"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> entries_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> m_entries_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6676" onclick="window.location.hash='#6676'"></td><td class="FileContents-lineContents" id="6676"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6677" onclick="window.location.hash='#6677'"></td><td class="FileContents-lineContents" id="6677"><span class="pln">      </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> entries </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*[</span><span class="pln">entries_size</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6678" onclick="window.location.hash='#6678'"></td><td class="FileContents-lineContents" id="6678"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6679" onclick="window.location.hash='#6679'"></td><td class="FileContents-lineContents" id="6679"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6680" onclick="window.location.hash='#6680'"></td><td class="FileContents-lineContents" id="6680"><span class="pln">      </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> src </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6681" onclick="window.location.hash='#6681'"></td><td class="FileContents-lineContents" id="6681"><span class="pln">      </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> src_end </span><span class="pun">=</span><span class="pln"> src </span><span class="pun">+</span><span class="pln"> m_entries_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6682" onclick="window.location.hash='#6682'"></td><td class="FileContents-lineContents" id="6682"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6683" onclick="window.location.hash='#6683'"></td><td class="FileContents-lineContents" id="6683"><span class="pln">      </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> dst </span><span class="pun">=</span><span class="pln"> entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6684" onclick="window.location.hash='#6684'"></td><td class="FileContents-lineContents" id="6684"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6685" onclick="window.location.hash='#6685'"></td><td class="FileContents-lineContents" id="6685"><span class="pln">      </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">src </span><span class="pun">!=</span><span class="pln"> src_end</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6686" onclick="window.location.hash='#6686'"></td><td class="FileContents-lineContents" id="6686"><span class="pln">        </span><span class="pun">*</span><span class="pln">dst</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">src</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6687" onclick="window.location.hash='#6687'"></td><td class="FileContents-lineContents" id="6687"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6688" onclick="window.location.hash='#6688'"></td><td class="FileContents-lineContents" id="6688"><span class="pln">      </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6689" onclick="window.location.hash='#6689'"></td><td class="FileContents-lineContents" id="6689"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6690" onclick="window.location.hash='#6690'"></td><td class="FileContents-lineContents" id="6690"><span class="pln">      m_entries </span><span class="pun">=</span><span class="pln"> entries</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6691" onclick="window.location.hash='#6691'"></td><td class="FileContents-lineContents" id="6691"><span class="pln">      m_entries_size </span><span class="pun">=</span><span class="pln"> entries_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6692" onclick="window.location.hash='#6692'"></td><td class="FileContents-lineContents" id="6692"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6693" onclick="window.location.hash='#6693'"></td><td class="FileContents-lineContents" id="6693"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6694" onclick="window.location.hash='#6694'"></td><td class="FileContents-lineContents" id="6694"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6695" onclick="window.location.hash='#6695'"></td><td class="FileContents-lineContents" id="6695"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x20</span><span class="pun">)</span><span class="pln">  </span><span class="com">// BlockGroup ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6696" onclick="window.location.hash='#6696'"></td><td class="FileContents-lineContents" id="6696"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">CreateBlockGroup</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> discard_padding</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6697" onclick="window.location.hash='#6697'"></td><td class="FileContents-lineContents" id="6697"><span class="pln">  </span><span class="kwd">else</span><span class="pln">  </span><span class="com">// SimpleBlock ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6698" onclick="window.location.hash='#6698'"></td><td class="FileContents-lineContents" id="6698"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">CreateSimpleBlock</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6699" onclick="window.location.hash='#6699'"></td><td class="FileContents-lineContents" id="6699"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6700" onclick="window.location.hash='#6700'"></td><td class="FileContents-lineContents" id="6700"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6701" onclick="window.location.hash='#6701'"></td><td class="FileContents-lineContents" id="6701"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">CreateBlockGroup</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start_offset</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6702" onclick="window.location.hash='#6702'"></td><td class="FileContents-lineContents" id="6702"><span class="pln">                               </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> discard_padding</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6703" onclick="window.location.hash='#6703'"></td><td class="FileContents-lineContents" id="6703"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6704" onclick="window.location.hash='#6704'"></td><td class="FileContents-lineContents" id="6704"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6705" onclick="window.location.hash='#6705'"></td><td class="FileContents-lineContents" id="6705"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6706" onclick="window.location.hash='#6706'"></td><td class="FileContents-lineContents" id="6706"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;</span><span class="pln"> m_entries_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6707" onclick="window.location.hash='#6707'"></td><td class="FileContents-lineContents" id="6707"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6708" onclick="window.location.hash='#6708'"></td><td class="FileContents-lineContents" id="6708"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6709" onclick="window.location.hash='#6709'"></td><td class="FileContents-lineContents" id="6709"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6710" onclick="window.location.hash='#6710'"></td><td class="FileContents-lineContents" id="6710"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> start_offset</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6711" onclick="window.location.hash='#6711'"></td><td class="FileContents-lineContents" id="6711"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> start_offset </span><span class="pun">+</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6712" onclick="window.location.hash='#6712'"></td><td class="FileContents-lineContents" id="6712"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6713" onclick="window.location.hash='#6713'"></td><td class="FileContents-lineContents" id="6713"><span class="pln">  </span><span class="com">// For WebM files, there is a bias towards previous reference times</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6714" onclick="window.location.hash='#6714'"></td><td class="FileContents-lineContents" id="6714"><span class="pln">  </span><span class="com">//(in order to support alt-ref frames, which refer back to the previous</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6715" onclick="window.location.hash='#6715'"></td><td class="FileContents-lineContents" id="6715"><span class="pln">  </span><span class="com">// keyframe).  Normally a 0 value is not possible, but here we tenatively</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6716" onclick="window.location.hash='#6716'"></td><td class="FileContents-lineContents" id="6716"><span class="pln">  </span><span class="com">// allow 0 as the value of a reference frame, with the interpretation</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6717" onclick="window.location.hash='#6717'"></td><td class="FileContents-lineContents" id="6717"><span class="pln">  </span><span class="com">// that this is a &quot;previous&quot; reference time.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6718" onclick="window.location.hash='#6718'"></td><td class="FileContents-lineContents" id="6718"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6719" onclick="window.location.hash='#6719'"></td><td class="FileContents-lineContents" id="6719"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nonce</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6720" onclick="window.location.hash='#6720'"></td><td class="FileContents-lineContents" id="6720"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> next </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// nonce</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6721" onclick="window.location.hash='#6721'"></td><td class="FileContents-lineContents" id="6721"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> duration </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// really, this is unsigned</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6722" onclick="window.location.hash='#6722'"></td><td class="FileContents-lineContents" id="6722"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6723" onclick="window.location.hash='#6723'"></td><td class="FileContents-lineContents" id="6723"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> bpos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6724" onclick="window.location.hash='#6724'"></td><td class="FileContents-lineContents" id="6724"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> bsize </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6725" onclick="window.location.hash='#6725'"></td><td class="FileContents-lineContents" id="6725"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6726" onclick="window.location.hash='#6726'"></td><td class="FileContents-lineContents" id="6726"><span class="pln">  </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;</span><span class="pln"> stop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6727" onclick="window.location.hash='#6727'"></td><td class="FileContents-lineContents" id="6727"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6728" onclick="window.location.hash='#6728'"></td><td class="FileContents-lineContents" id="6728"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6729" onclick="window.location.hash='#6729'"></td><td class="FileContents-lineContents" id="6729"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">id </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6730" onclick="window.location.hash='#6730'"></td><td class="FileContents-lineContents" id="6730"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6731" onclick="window.location.hash='#6731'"></td><td class="FileContents-lineContents" id="6731"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6732" onclick="window.location.hash='#6732'"></td><td class="FileContents-lineContents" id="6732"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6733" onclick="window.location.hash='#6733'"></td><td class="FileContents-lineContents" id="6733"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6734" onclick="window.location.hash='#6734'"></td><td class="FileContents-lineContents" id="6734"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6735" onclick="window.location.hash='#6735'"></td><td class="FileContents-lineContents" id="6735"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// TODO</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6736" onclick="window.location.hash='#6736'"></td><td class="FileContents-lineContents" id="6736"><span class="pln">    assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6737" onclick="window.location.hash='#6737'"></td><td class="FileContents-lineContents" id="6737"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6738" onclick="window.location.hash='#6738'"></td><td class="FileContents-lineContents" id="6738"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6739" onclick="window.location.hash='#6739'"></td><td class="FileContents-lineContents" id="6739"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6740" onclick="window.location.hash='#6740'"></td><td class="FileContents-lineContents" id="6740"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x21</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Block ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6741" onclick="window.location.hash='#6741'"></td><td class="FileContents-lineContents" id="6741"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bpos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Block ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6742" onclick="window.location.hash='#6742'"></td><td class="FileContents-lineContents" id="6742"><span class="pln">        bpos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6743" onclick="window.location.hash='#6743'"></td><td class="FileContents-lineContents" id="6743"><span class="pln">        bsize </span><span class="pun">=</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6744" onclick="window.location.hash='#6744'"></td><td class="FileContents-lineContents" id="6744"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6745" onclick="window.location.hash='#6745'"></td><td class="FileContents-lineContents" id="6745"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x1B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Duration ID</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6746" onclick="window.location.hash='#6746'"></td><td class="FileContents-lineContents" id="6746"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">8</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6747" onclick="window.location.hash='#6747'"></td><td class="FileContents-lineContents" id="6747"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6748" onclick="window.location.hash='#6748'"></td><td class="FileContents-lineContents" id="6748"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6749" onclick="window.location.hash='#6749'"></td><td class="FileContents-lineContents" id="6749"><span class="pln">      duration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6750" onclick="window.location.hash='#6750'"></td><td class="FileContents-lineContents" id="6750"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6751" onclick="window.location.hash='#6751'"></td><td class="FileContents-lineContents" id="6751"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6752" onclick="window.location.hash='#6752'"></td><td class="FileContents-lineContents" id="6752"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6753" onclick="window.location.hash='#6753'"></td><td class="FileContents-lineContents" id="6753"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x7B</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// ReferenceBlock</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6754" onclick="window.location.hash='#6754'"></td><td class="FileContents-lineContents" id="6754"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">8</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6755" onclick="window.location.hash='#6755'"></td><td class="FileContents-lineContents" id="6755"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6756" onclick="window.location.hash='#6756'"></td><td class="FileContents-lineContents" id="6756"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_ </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6757" onclick="window.location.hash='#6757'"></td><td class="FileContents-lineContents" id="6757"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6758" onclick="window.location.hash='#6758'"></td><td class="FileContents-lineContents" id="6758"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6759" onclick="window.location.hash='#6759'"></td><td class="FileContents-lineContents" id="6759"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6760" onclick="window.location.hash='#6760'"></td><td class="FileContents-lineContents" id="6760"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> size_</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6761" onclick="window.location.hash='#6761'"></td><td class="FileContents-lineContents" id="6761"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6762" onclick="window.location.hash='#6762'"></td><td class="FileContents-lineContents" id="6762"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6763" onclick="window.location.hash='#6763'"></td><td class="FileContents-lineContents" id="6763"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6764" onclick="window.location.hash='#6764'"></td><td class="FileContents-lineContents" id="6764"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6765" onclick="window.location.hash='#6765'"></td><td class="FileContents-lineContents" id="6765"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// see note above</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6766" onclick="window.location.hash='#6766'"></td><td class="FileContents-lineContents" id="6766"><span class="pln">        prev </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6767" onclick="window.location.hash='#6767'"></td><td class="FileContents-lineContents" id="6767"><span class="pln">      </span><span class="kwd">else</span><span class="pln">  </span><span class="com">// weird</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6768" onclick="window.location.hash='#6768'"></td><td class="FileContents-lineContents" id="6768"><span class="pln">        next </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6769" onclick="window.location.hash='#6769'"></td><td class="FileContents-lineContents" id="6769"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6770" onclick="window.location.hash='#6770'"></td><td class="FileContents-lineContents" id="6770"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6771" onclick="window.location.hash='#6771'"></td><td class="FileContents-lineContents" id="6771"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume payload</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6772" onclick="window.location.hash='#6772'"></td><td class="FileContents-lineContents" id="6772"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6773" onclick="window.location.hash='#6773'"></td><td class="FileContents-lineContents" id="6773"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6774" onclick="window.location.hash='#6774'"></td><td class="FileContents-lineContents" id="6774"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bpos </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6775" onclick="window.location.hash='#6775'"></td><td class="FileContents-lineContents" id="6775"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6776" onclick="window.location.hash='#6776'"></td><td class="FileContents-lineContents" id="6776"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6777" onclick="window.location.hash='#6777'"></td><td class="FileContents-lineContents" id="6777"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6778" onclick="window.location.hash='#6778'"></td><td class="FileContents-lineContents" id="6778"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">bsize </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6779" onclick="window.location.hash='#6779'"></td><td class="FileContents-lineContents" id="6779"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6780" onclick="window.location.hash='#6780'"></td><td class="FileContents-lineContents" id="6780"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> m_entries_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6781" onclick="window.location.hash='#6781'"></td><td class="FileContents-lineContents" id="6781"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6782" onclick="window.location.hash='#6782'"></td><td class="FileContents-lineContents" id="6782"><span class="pln">  </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ppEntry </span><span class="pun">=</span><span class="pln"> m_entries </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6783" onclick="window.location.hash='#6783'"></td><td class="FileContents-lineContents" id="6783"><span class="pln">  </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pEntry </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ppEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6784" onclick="window.location.hash='#6784'"></td><td class="FileContents-lineContents" id="6784"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6785" onclick="window.location.hash='#6785'"></td><td class="FileContents-lineContents" id="6785"><span class="pln">  pEntry </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6786" onclick="window.location.hash='#6786'"></td><td class="FileContents-lineContents" id="6786"><span class="pln">      </span><span class="typ">BlockGroup</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> bpos</span><span class="pun">,</span><span class="pln"> bsize</span><span class="pun">,</span><span class="pln"> prev</span><span class="pun">,</span><span class="pln"> next</span><span class="pun">,</span><span class="pln"> duration</span><span class="pun">,</span><span class="pln"> discard_padding</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6787" onclick="window.location.hash='#6787'"></td><td class="FileContents-lineContents" id="6787"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6788" onclick="window.location.hash='#6788'"></td><td class="FileContents-lineContents" id="6788"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pEntry </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6789" onclick="window.location.hash='#6789'"></td><td class="FileContents-lineContents" id="6789"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6790" onclick="window.location.hash='#6790'"></td><td class="FileContents-lineContents" id="6790"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6791" onclick="window.location.hash='#6791'"></td><td class="FileContents-lineContents" id="6791"><span class="pln">  </span><span class="typ">BlockGroup</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="typ">BlockGroup</span><span class="pun">*&gt;(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6792" onclick="window.location.hash='#6792'"></td><td class="FileContents-lineContents" id="6792"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6793" onclick="window.location.hash='#6793'"></td><td class="FileContents-lineContents" id="6793"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6794" onclick="window.location.hash='#6794'"></td><td class="FileContents-lineContents" id="6794"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6795" onclick="window.location.hash='#6795'"></td><td class="FileContents-lineContents" id="6795"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6796" onclick="window.location.hash='#6796'"></td><td class="FileContents-lineContents" id="6796"><span class="pln">    </span><span class="pun">++</span><span class="pln">m_entries_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6797" onclick="window.location.hash='#6797'"></td><td class="FileContents-lineContents" id="6797"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6798" onclick="window.location.hash='#6798'"></td><td class="FileContents-lineContents" id="6798"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6799" onclick="window.location.hash='#6799'"></td><td class="FileContents-lineContents" id="6799"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6800" onclick="window.location.hash='#6800'"></td><td class="FileContents-lineContents" id="6800"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6801" onclick="window.location.hash='#6801'"></td><td class="FileContents-lineContents" id="6801"><span class="pln">  pEntry </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6802" onclick="window.location.hash='#6802'"></td><td class="FileContents-lineContents" id="6802"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6803" onclick="window.location.hash='#6803'"></td><td class="FileContents-lineContents" id="6803"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6804" onclick="window.location.hash='#6804'"></td><td class="FileContents-lineContents" id="6804"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6805" onclick="window.location.hash='#6805'"></td><td class="FileContents-lineContents" id="6805"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6806" onclick="window.location.hash='#6806'"></td><td class="FileContents-lineContents" id="6806"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">CreateSimpleBlock</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> st</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> sz</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6807" onclick="window.location.hash='#6807'"></td><td class="FileContents-lineContents" id="6807"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6808" onclick="window.location.hash='#6808'"></td><td class="FileContents-lineContents" id="6808"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_size </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6809" onclick="window.location.hash='#6809'"></td><td class="FileContents-lineContents" id="6809"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6810" onclick="window.location.hash='#6810'"></td><td class="FileContents-lineContents" id="6810"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;</span><span class="pln"> m_entries_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6811" onclick="window.location.hash='#6811'"></td><td class="FileContents-lineContents" id="6811"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6812" onclick="window.location.hash='#6812'"></td><td class="FileContents-lineContents" id="6812"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> m_entries_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6813" onclick="window.location.hash='#6813'"></td><td class="FileContents-lineContents" id="6813"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6814" onclick="window.location.hash='#6814'"></td><td class="FileContents-lineContents" id="6814"><span class="pln">  </span><span class="typ">BlockEntry</span><span class="pun">**</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> ppEntry </span><span class="pun">=</span><span class="pln"> m_entries </span><span class="pun">+</span><span class="pln"> idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6815" onclick="window.location.hash='#6815'"></td><td class="FileContents-lineContents" id="6815"><span class="pln">  </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pEntry </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ppEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6816" onclick="window.location.hash='#6816'"></td><td class="FileContents-lineContents" id="6816"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6817" onclick="window.location.hash='#6817'"></td><td class="FileContents-lineContents" id="6817"><span class="pln">  pEntry </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">nothrow</span><span class="pun">)</span><span class="pln"> </span><span class="typ">SimpleBlock</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> st</span><span class="pun">,</span><span class="pln"> sz</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6818" onclick="window.location.hash='#6818'"></td><td class="FileContents-lineContents" id="6818"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6819" onclick="window.location.hash='#6819'"></td><td class="FileContents-lineContents" id="6819"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pEntry </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6820" onclick="window.location.hash='#6820'"></td><td class="FileContents-lineContents" id="6820"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">// generic error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6821" onclick="window.location.hash='#6821'"></td><td class="FileContents-lineContents" id="6821"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6822" onclick="window.location.hash='#6822'"></td><td class="FileContents-lineContents" id="6822"><span class="pln">  </span><span class="typ">SimpleBlock</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="typ">SimpleBlock</span><span class="pun">*&gt;(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6823" onclick="window.location.hash='#6823'"></td><td class="FileContents-lineContents" id="6823"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6824" onclick="window.location.hash='#6824'"></td><td class="FileContents-lineContents" id="6824"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">-&gt;</span><span class="typ">Parse</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6825" onclick="window.location.hash='#6825'"></td><td class="FileContents-lineContents" id="6825"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6826" onclick="window.location.hash='#6826'"></td><td class="FileContents-lineContents" id="6826"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6827" onclick="window.location.hash='#6827'"></td><td class="FileContents-lineContents" id="6827"><span class="pln">    </span><span class="pun">++</span><span class="pln">m_entries_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6828" onclick="window.location.hash='#6828'"></td><td class="FileContents-lineContents" id="6828"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6829" onclick="window.location.hash='#6829'"></td><td class="FileContents-lineContents" id="6829"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6830" onclick="window.location.hash='#6830'"></td><td class="FileContents-lineContents" id="6830"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6831" onclick="window.location.hash='#6831'"></td><td class="FileContents-lineContents" id="6831"><span class="pln">  </span><span class="kwd">delete</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6832" onclick="window.location.hash='#6832'"></td><td class="FileContents-lineContents" id="6832"><span class="pln">  pEntry </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6833" onclick="window.location.hash='#6833'"></td><td class="FileContents-lineContents" id="6833"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6834" onclick="window.location.hash='#6834'"></td><td class="FileContents-lineContents" id="6834"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6835" onclick="window.location.hash='#6835'"></td><td class="FileContents-lineContents" id="6835"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6836" onclick="window.location.hash='#6836'"></td><td class="FileContents-lineContents" id="6836"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6837" onclick="window.location.hash='#6837'"></td><td class="FileContents-lineContents" id="6837"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetFirst</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pFirst</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6838" onclick="window.location.hash='#6838'"></td><td class="FileContents-lineContents" id="6838"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6839" onclick="window.location.hash='#6839'"></td><td class="FileContents-lineContents" id="6839"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6840" onclick="window.location.hash='#6840'"></td><td class="FileContents-lineContents" id="6840"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6841" onclick="window.location.hash='#6841'"></td><td class="FileContents-lineContents" id="6841"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6842" onclick="window.location.hash='#6842'"></td><td class="FileContents-lineContents" id="6842"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6843" onclick="window.location.hash='#6843'"></td><td class="FileContents-lineContents" id="6843"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6844" onclick="window.location.hash='#6844'"></td><td class="FileContents-lineContents" id="6844"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6845" onclick="window.location.hash='#6845'"></td><td class="FileContents-lineContents" id="6845"><span class="pln">      pFirst </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6846" onclick="window.location.hash='#6846'"></td><td class="FileContents-lineContents" id="6846"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6847" onclick="window.location.hash='#6847'"></td><td class="FileContents-lineContents" id="6847"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6848" onclick="window.location.hash='#6848'"></td><td class="FileContents-lineContents" id="6848"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6849" onclick="window.location.hash='#6849'"></td><td class="FileContents-lineContents" id="6849"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// empty cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6850" onclick="window.location.hash='#6850'"></td><td class="FileContents-lineContents" id="6850"><span class="pln">      pFirst </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6851" onclick="window.location.hash='#6851'"></td><td class="FileContents-lineContents" id="6851"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6852" onclick="window.location.hash='#6852'"></td><td class="FileContents-lineContents" id="6852"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6853" onclick="window.location.hash='#6853'"></td><td class="FileContents-lineContents" id="6853"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6854" onclick="window.location.hash='#6854'"></td><td class="FileContents-lineContents" id="6854"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6855" onclick="window.location.hash='#6855'"></td><td class="FileContents-lineContents" id="6855"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6856" onclick="window.location.hash='#6856'"></td><td class="FileContents-lineContents" id="6856"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6857" onclick="window.location.hash='#6857'"></td><td class="FileContents-lineContents" id="6857"><span class="pln">  pFirst </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6858" onclick="window.location.hash='#6858'"></td><td class="FileContents-lineContents" id="6858"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pFirst</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6859" onclick="window.location.hash='#6859'"></td><td class="FileContents-lineContents" id="6859"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6860" onclick="window.location.hash='#6860'"></td><td class="FileContents-lineContents" id="6860"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6861" onclick="window.location.hash='#6861'"></td><td class="FileContents-lineContents" id="6861"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6862" onclick="window.location.hash='#6862'"></td><td class="FileContents-lineContents" id="6862"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6863" onclick="window.location.hash='#6863'"></td><td class="FileContents-lineContents" id="6863"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetLast</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pLast</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6864" onclick="window.location.hash='#6864'"></td><td class="FileContents-lineContents" id="6864"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6865" onclick="window.location.hash='#6865'"></td><td class="FileContents-lineContents" id="6865"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6866" onclick="window.location.hash='#6866'"></td><td class="FileContents-lineContents" id="6866"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6867" onclick="window.location.hash='#6867'"></td><td class="FileContents-lineContents" id="6867"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6868" onclick="window.location.hash='#6868'"></td><td class="FileContents-lineContents" id="6868"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6869" onclick="window.location.hash='#6869'"></td><td class="FileContents-lineContents" id="6869"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6870" onclick="window.location.hash='#6870'"></td><td class="FileContents-lineContents" id="6870"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6871" onclick="window.location.hash='#6871'"></td><td class="FileContents-lineContents" id="6871"><span class="pln">      pLast </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6872" onclick="window.location.hash='#6872'"></td><td class="FileContents-lineContents" id="6872"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6873" onclick="window.location.hash='#6873'"></td><td class="FileContents-lineContents" id="6873"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6874" onclick="window.location.hash='#6874'"></td><td class="FileContents-lineContents" id="6874"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6875" onclick="window.location.hash='#6875'"></td><td class="FileContents-lineContents" id="6875"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// no new block</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6876" onclick="window.location.hash='#6876'"></td><td class="FileContents-lineContents" id="6876"><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6877" onclick="window.location.hash='#6877'"></td><td class="FileContents-lineContents" id="6877"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6878" onclick="window.location.hash='#6878'"></td><td class="FileContents-lineContents" id="6878"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6879" onclick="window.location.hash='#6879'"></td><td class="FileContents-lineContents" id="6879"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6880" onclick="window.location.hash='#6880'"></td><td class="FileContents-lineContents" id="6880"><span class="pln">    pLast </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6881" onclick="window.location.hash='#6881'"></td><td class="FileContents-lineContents" id="6881"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6882" onclick="window.location.hash='#6882'"></td><td class="FileContents-lineContents" id="6882"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6883" onclick="window.location.hash='#6883'"></td><td class="FileContents-lineContents" id="6883"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6884" onclick="window.location.hash='#6884'"></td><td class="FileContents-lineContents" id="6884"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6885" onclick="window.location.hash='#6885'"></td><td class="FileContents-lineContents" id="6885"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6886" onclick="window.location.hash='#6886'"></td><td class="FileContents-lineContents" id="6886"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> m_entries_count </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6887" onclick="window.location.hash='#6887'"></td><td class="FileContents-lineContents" id="6887"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6888" onclick="window.location.hash='#6888'"></td><td class="FileContents-lineContents" id="6888"><span class="pln">  pLast </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6889" onclick="window.location.hash='#6889'"></td><td class="FileContents-lineContents" id="6889"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pLast</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6890" onclick="window.location.hash='#6890'"></td><td class="FileContents-lineContents" id="6890"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6891" onclick="window.location.hash='#6891'"></td><td class="FileContents-lineContents" id="6891"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6892" onclick="window.location.hash='#6892'"></td><td class="FileContents-lineContents" id="6892"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6893" onclick="window.location.hash='#6893'"></td><td class="FileContents-lineContents" id="6893"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6894" onclick="window.location.hash='#6894'"></td><td class="FileContents-lineContents" id="6894"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetNext</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pCurr</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*&amp;</span><span class="pln"> pNext</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6895" onclick="window.location.hash='#6895'"></td><td class="FileContents-lineContents" id="6895"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCurr</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6896" onclick="window.location.hash='#6896'"></td><td class="FileContents-lineContents" id="6896"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6897" onclick="window.location.hash='#6897'"></td><td class="FileContents-lineContents" id="6897"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6898" onclick="window.location.hash='#6898'"></td><td class="FileContents-lineContents" id="6898"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6899" onclick="window.location.hash='#6899'"></td><td class="FileContents-lineContents" id="6899"><span class="pln">  </span><span class="typ">size_t</span><span class="pln"> idx </span><span class="pun">=</span><span class="pln"> pCurr</span><span class="pun">-&gt;</span><span class="typ">GetIndex</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6900" onclick="window.location.hash='#6900'"></td><td class="FileContents-lineContents" id="6900"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">size_t</span><span class="pun">(</span><span class="pln">m_entries_count</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6901" onclick="window.location.hash='#6901'"></td><td class="FileContents-lineContents" id="6901"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> pCurr</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6902" onclick="window.location.hash='#6902'"></td><td class="FileContents-lineContents" id="6902"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6903" onclick="window.location.hash='#6903'"></td><td class="FileContents-lineContents" id="6903"><span class="pln">  </span><span class="pun">++</span><span class="pln">idx</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6904" onclick="window.location.hash='#6904'"></td><td class="FileContents-lineContents" id="6904"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6905" onclick="window.location.hash='#6905'"></td><td class="FileContents-lineContents" id="6905"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="typ">size_t</span><span class="pun">(</span><span class="pln">m_entries_count</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6906" onclick="window.location.hash='#6906'"></td><td class="FileContents-lineContents" id="6906"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6907" onclick="window.location.hash='#6907'"></td><td class="FileContents-lineContents" id="6907"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6908" onclick="window.location.hash='#6908'"></td><td class="FileContents-lineContents" id="6908"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6909" onclick="window.location.hash='#6909'"></td><td class="FileContents-lineContents" id="6909"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6910" onclick="window.location.hash='#6910'"></td><td class="FileContents-lineContents" id="6910"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6911" onclick="window.location.hash='#6911'"></td><td class="FileContents-lineContents" id="6911"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// error</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6912" onclick="window.location.hash='#6912'"></td><td class="FileContents-lineContents" id="6912"><span class="pln">      pNext </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6913" onclick="window.location.hash='#6913'"></td><td class="FileContents-lineContents" id="6913"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6914" onclick="window.location.hash='#6914'"></td><td class="FileContents-lineContents" id="6914"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6915" onclick="window.location.hash='#6915'"></td><td class="FileContents-lineContents" id="6915"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6916" onclick="window.location.hash='#6916'"></td><td class="FileContents-lineContents" id="6916"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6917" onclick="window.location.hash='#6917'"></td><td class="FileContents-lineContents" id="6917"><span class="pln">      pNext </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6918" onclick="window.location.hash='#6918'"></td><td class="FileContents-lineContents" id="6918"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6919" onclick="window.location.hash='#6919'"></td><td class="FileContents-lineContents" id="6919"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6920" onclick="window.location.hash='#6920'"></td><td class="FileContents-lineContents" id="6920"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6921" onclick="window.location.hash='#6921'"></td><td class="FileContents-lineContents" id="6921"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6922" onclick="window.location.hash='#6922'"></td><td class="FileContents-lineContents" id="6922"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">m_entries_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6923" onclick="window.location.hash='#6923'"></td><td class="FileContents-lineContents" id="6923"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">size_t</span><span class="pun">(</span><span class="pln">m_entries_count</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6924" onclick="window.location.hash='#6924'"></td><td class="FileContents-lineContents" id="6924"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6925" onclick="window.location.hash='#6925'"></td><td class="FileContents-lineContents" id="6925"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6926" onclick="window.location.hash='#6926'"></td><td class="FileContents-lineContents" id="6926"><span class="pln">  pNext </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6927" onclick="window.location.hash='#6927'"></td><td class="FileContents-lineContents" id="6927"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pNext</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6928" onclick="window.location.hash='#6928'"></td><td class="FileContents-lineContents" id="6928"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6929" onclick="window.location.hash='#6929'"></td><td class="FileContents-lineContents" id="6929"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6930" onclick="window.location.hash='#6930'"></td><td class="FileContents-lineContents" id="6930"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6931" onclick="window.location.hash='#6931'"></td><td class="FileContents-lineContents" id="6931"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6932" onclick="window.location.hash='#6932'"></td><td class="FileContents-lineContents" id="6932"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetEntryCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_entries_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6933" onclick="window.location.hash='#6933'"></td><td class="FileContents-lineContents" id="6933"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6934" onclick="window.location.hash='#6934'"></td><td class="FileContents-lineContents" id="6934"><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> pTrack</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6935" onclick="window.location.hash='#6935'"></td><td class="FileContents-lineContents" id="6935"><span class="pln">                                    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> time_ns</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6936" onclick="window.location.hash='#6936'"></td><td class="FileContents-lineContents" id="6936"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6937" onclick="window.location.hash='#6937'"></td><td class="FileContents-lineContents" id="6937"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6938" onclick="window.location.hash='#6938'"></td><td class="FileContents-lineContents" id="6938"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_pSegment </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">  </span><span class="com">// this is the special EOS cluster</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6939" onclick="window.location.hash='#6939'"></td><td class="FileContents-lineContents" id="6939"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> pTrack</span><span class="pun">-&gt;</span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6940" onclick="window.location.hash='#6940'"></td><td class="FileContents-lineContents" id="6940"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6941" onclick="window.location.hash='#6941'"></td><td class="FileContents-lineContents" id="6941"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> pResult </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">-&gt;</span><span class="typ">GetEOS</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6942" onclick="window.location.hash='#6942'"></td><td class="FileContents-lineContents" id="6942"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6943" onclick="window.location.hash='#6943'"></td><td class="FileContents-lineContents" id="6943"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6944" onclick="window.location.hash='#6944'"></td><td class="FileContents-lineContents" id="6944"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6945" onclick="window.location.hash='#6945'"></td><td class="FileContents-lineContents" id="6945"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6946" onclick="window.location.hash='#6946'"></td><td class="FileContents-lineContents" id="6946"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_entries_count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6947" onclick="window.location.hash='#6947'"></td><td class="FileContents-lineContents" id="6947"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6948" onclick="window.location.hash='#6948'"></td><td class="FileContents-lineContents" id="6948"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6949" onclick="window.location.hash='#6949'"></td><td class="FileContents-lineContents" id="6949"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6950" onclick="window.location.hash='#6950'"></td><td class="FileContents-lineContents" id="6950"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6951" onclick="window.location.hash='#6951'"></td><td class="FileContents-lineContents" id="6951"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6952" onclick="window.location.hash='#6952'"></td><td class="FileContents-lineContents" id="6952"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6953" onclick="window.location.hash='#6953'"></td><td class="FileContents-lineContents" id="6953"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// completely parsed, and no more entries</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6954" onclick="window.location.hash='#6954'"></td><td class="FileContents-lineContents" id="6954"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> pResult</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6955" onclick="window.location.hash='#6955'"></td><td class="FileContents-lineContents" id="6955"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6956" onclick="window.location.hash='#6956'"></td><td class="FileContents-lineContents" id="6956"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// should never happen</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6957" onclick="window.location.hash='#6957'"></td><td class="FileContents-lineContents" id="6957"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6958" onclick="window.location.hash='#6958'"></td><td class="FileContents-lineContents" id="6958"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6959" onclick="window.location.hash='#6959'"></td><td class="FileContents-lineContents" id="6959"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6960" onclick="window.location.hash='#6960'"></td><td class="FileContents-lineContents" id="6960"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> m_entries_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6961" onclick="window.location.hash='#6961'"></td><td class="FileContents-lineContents" id="6961"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6962" onclick="window.location.hash='#6962'"></td><td class="FileContents-lineContents" id="6962"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6963" onclick="window.location.hash='#6963'"></td><td class="FileContents-lineContents" id="6963"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pEntry </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6964" onclick="window.location.hash='#6964'"></td><td class="FileContents-lineContents" id="6964"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6965" onclick="window.location.hash='#6965'"></td><td class="FileContents-lineContents" id="6965"><span class="pln">    assert</span><span class="pun">(!</span><span class="pln">pEntry</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">());</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6966" onclick="window.location.hash='#6966'"></td><td class="FileContents-lineContents" id="6966"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6967" onclick="window.location.hash='#6967'"></td><td class="FileContents-lineContents" id="6967"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6968" onclick="window.location.hash='#6968'"></td><td class="FileContents-lineContents" id="6968"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6969" onclick="window.location.hash='#6969'"></td><td class="FileContents-lineContents" id="6969"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6970" onclick="window.location.hash='#6970'"></td><td class="FileContents-lineContents" id="6970"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> pTrack</span><span class="pun">-&gt;</span><span class="typ">GetNumber</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6971" onclick="window.location.hash='#6971'"></td><td class="FileContents-lineContents" id="6971"><span class="pln">      </span><span class="pun">++</span><span class="pln">index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6972" onclick="window.location.hash='#6972'"></td><td class="FileContents-lineContents" id="6972"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6973" onclick="window.location.hash='#6973'"></td><td class="FileContents-lineContents" id="6973"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6974" onclick="window.location.hash='#6974'"></td><td class="FileContents-lineContents" id="6974"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6975" onclick="window.location.hash='#6975'"></td><td class="FileContents-lineContents" id="6975"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack</span><span class="pun">-&gt;</span><span class="typ">VetEntry</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6976" onclick="window.location.hash='#6976'"></td><td class="FileContents-lineContents" id="6976"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// just want first candidate block</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6977" onclick="window.location.hash='#6977'"></td><td class="FileContents-lineContents" id="6977"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6978" onclick="window.location.hash='#6978'"></td><td class="FileContents-lineContents" id="6978"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6979" onclick="window.location.hash='#6979'"></td><td class="FileContents-lineContents" id="6979"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> ns </span><span class="pun">=</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6980" onclick="window.location.hash='#6980'"></td><td class="FileContents-lineContents" id="6980"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6981" onclick="window.location.hash='#6981'"></td><td class="FileContents-lineContents" id="6981"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ns </span><span class="pun">&gt;</span><span class="pln"> time_ns</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6982" onclick="window.location.hash='#6982'"></td><td class="FileContents-lineContents" id="6982"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> pResult</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6983" onclick="window.location.hash='#6983'"></td><td class="FileContents-lineContents" id="6983"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6984" onclick="window.location.hash='#6984'"></td><td class="FileContents-lineContents" id="6984"><span class="pln">      pResult </span><span class="pun">=</span><span class="pln"> pEntry</span><span class="pun">;</span><span class="pln">  </span><span class="com">// have a candidate</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6985" onclick="window.location.hash='#6985'"></td><td class="FileContents-lineContents" id="6985"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time_ns </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6986" onclick="window.location.hash='#6986'"></td><td class="FileContents-lineContents" id="6986"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> ns </span><span class="pun">=</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6987" onclick="window.location.hash='#6987'"></td><td class="FileContents-lineContents" id="6987"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6988" onclick="window.location.hash='#6988'"></td><td class="FileContents-lineContents" id="6988"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ns </span><span class="pun">&gt;</span><span class="pln"> time_ns</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6989" onclick="window.location.hash='#6989'"></td><td class="FileContents-lineContents" id="6989"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> pResult</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6990" onclick="window.location.hash='#6990'"></td><td class="FileContents-lineContents" id="6990"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6991" onclick="window.location.hash='#6991'"></td><td class="FileContents-lineContents" id="6991"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6992" onclick="window.location.hash='#6992'"></td><td class="FileContents-lineContents" id="6992"><span class="pln">    </span><span class="pun">++</span><span class="pln">index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6993" onclick="window.location.hash='#6993'"></td><td class="FileContents-lineContents" id="6993"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6994" onclick="window.location.hash='#6994'"></td><td class="FileContents-lineContents" id="6994"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6995" onclick="window.location.hash='#6995'"></td><td class="FileContents-lineContents" id="6995"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6996" onclick="window.location.hash='#6996'"></td><td class="FileContents-lineContents" id="6996"><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">::</span><span class="typ">GetEntry</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">&amp;</span><span class="pln"> cp</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6997" onclick="window.location.hash='#6997'"></td><td class="FileContents-lineContents" id="6997"><span class="pln">                                    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">CuePoint</span><span class="pun">::</span><span class="typ">TrackPosition</span><span class="pun">&amp;</span><span class="pln"> tp</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6998" onclick="window.location.hash='#6998'"></td><td class="FileContents-lineContents" id="6998"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_pSegment</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6999" onclick="window.location.hash='#6999'"></td><td class="FileContents-lineContents" id="6999"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tc </span><span class="pun">=</span><span class="pln"> cp</span><span class="pun">.</span><span class="typ">GetTimeCode</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7000" onclick="window.location.hash='#7000'"></td><td class="FileContents-lineContents" id="7000"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7001" onclick="window.location.hash='#7001'"></td><td class="FileContents-lineContents" id="7001"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tp</span><span class="pun">.</span><span class="pln">m_block </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7002" onclick="window.location.hash='#7002'"></td><td class="FileContents-lineContents" id="7002"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">tp</span><span class="pun">.</span><span class="pln">m_block</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7003" onclick="window.location.hash='#7003'"></td><td class="FileContents-lineContents" id="7003"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> block </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7004" onclick="window.location.hash='#7004'"></td><td class="FileContents-lineContents" id="7004"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7005" onclick="window.location.hash='#7005'"></td><td class="FileContents-lineContents" id="7005"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_entries_count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7006" onclick="window.location.hash='#7006'"></td><td class="FileContents-lineContents" id="7006"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7007" onclick="window.location.hash='#7007'"></td><td class="FileContents-lineContents" id="7007"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7008" onclick="window.location.hash='#7008'"></td><td class="FileContents-lineContents" id="7008"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7009" onclick="window.location.hash='#7009'"></td><td class="FileContents-lineContents" id="7009"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7010" onclick="window.location.hash='#7010'"></td><td class="FileContents-lineContents" id="7010"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7011" onclick="window.location.hash='#7011'"></td><td class="FileContents-lineContents" id="7011"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// TODO: can this happen?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7012" onclick="window.location.hash='#7012'"></td><td class="FileContents-lineContents" id="7012"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7013" onclick="window.location.hash='#7013'"></td><td class="FileContents-lineContents" id="7013"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7014" onclick="window.location.hash='#7014'"></td><td class="FileContents-lineContents" id="7014"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// nothing remains to be parsed</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7015" onclick="window.location.hash='#7015'"></td><td class="FileContents-lineContents" id="7015"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7016" onclick="window.location.hash='#7016'"></td><td class="FileContents-lineContents" id="7016"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7017" onclick="window.location.hash='#7017'"></td><td class="FileContents-lineContents" id="7017"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7018" onclick="window.location.hash='#7018'"></td><td class="FileContents-lineContents" id="7018"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pEntry </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7019" onclick="window.location.hash='#7019'"></td><td class="FileContents-lineContents" id="7019"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7020" onclick="window.location.hash='#7020'"></td><td class="FileContents-lineContents" id="7020"><span class="pln">    assert</span><span class="pun">(!</span><span class="pln">pEntry</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">());</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7021" onclick="window.location.hash='#7021'"></td><td class="FileContents-lineContents" id="7021"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7022" onclick="window.location.hash='#7022'"></td><td class="FileContents-lineContents" id="7022"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7023" onclick="window.location.hash='#7023'"></td><td class="FileContents-lineContents" id="7023"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7024" onclick="window.location.hash='#7024'"></td><td class="FileContents-lineContents" id="7024"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7025" onclick="window.location.hash='#7025'"></td><td class="FileContents-lineContents" id="7025"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> tp</span><span class="pun">.</span><span class="pln">m_track</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7026" onclick="window.location.hash='#7026'"></td><td class="FileContents-lineContents" id="7026"><span class="pln">        </span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> tc</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7027" onclick="window.location.hash='#7027'"></td><td class="FileContents-lineContents" id="7027"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7028" onclick="window.location.hash='#7028'"></td><td class="FileContents-lineContents" id="7028"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7029" onclick="window.location.hash='#7029'"></td><td class="FileContents-lineContents" id="7029"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7030" onclick="window.location.hash='#7030'"></td><td class="FileContents-lineContents" id="7030"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7031" onclick="window.location.hash='#7031'"></td><td class="FileContents-lineContents" id="7031"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7032" onclick="window.location.hash='#7032'"></td><td class="FileContents-lineContents" id="7032"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7033" onclick="window.location.hash='#7033'"></td><td class="FileContents-lineContents" id="7033"><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7034" onclick="window.location.hash='#7034'"></td><td class="FileContents-lineContents" id="7034"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&gt;=</span><span class="pln"> m_entries_count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7035" onclick="window.location.hash='#7035'"></td><td class="FileContents-lineContents" id="7035"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7036" onclick="window.location.hash='#7036'"></td><td class="FileContents-lineContents" id="7036"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7037" onclick="window.location.hash='#7037'"></td><td class="FileContents-lineContents" id="7037"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7038" onclick="window.location.hash='#7038'"></td><td class="FileContents-lineContents" id="7038"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7039" onclick="window.location.hash='#7039'"></td><td class="FileContents-lineContents" id="7039"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7040" onclick="window.location.hash='#7040'"></td><td class="FileContents-lineContents" id="7040"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// TODO: can this happen?</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7041" onclick="window.location.hash='#7041'"></td><td class="FileContents-lineContents" id="7041"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7042" onclick="window.location.hash='#7042'"></td><td class="FileContents-lineContents" id="7042"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7043" onclick="window.location.hash='#7043'"></td><td class="FileContents-lineContents" id="7043"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">  </span><span class="com">// nothing remains to be parsed</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7044" onclick="window.location.hash='#7044'"></td><td class="FileContents-lineContents" id="7044"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7045" onclick="window.location.hash='#7045'"></td><td class="FileContents-lineContents" id="7045"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7046" onclick="window.location.hash='#7046'"></td><td class="FileContents-lineContents" id="7046"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">m_entries</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7047" onclick="window.location.hash='#7047'"></td><td class="FileContents-lineContents" id="7047"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> m_entries_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7048" onclick="window.location.hash='#7048'"></td><td class="FileContents-lineContents" id="7048"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7049" onclick="window.location.hash='#7049'"></td><td class="FileContents-lineContents" id="7049"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7050" onclick="window.location.hash='#7050'"></td><td class="FileContents-lineContents" id="7050"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pEntry </span><span class="pun">=</span><span class="pln"> m_entries</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7051" onclick="window.location.hash='#7051'"></td><td class="FileContents-lineContents" id="7051"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pEntry</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7052" onclick="window.location.hash='#7052'"></td><td class="FileContents-lineContents" id="7052"><span class="pln">    assert</span><span class="pun">(!</span><span class="pln">pEntry</span><span class="pun">-&gt;</span><span class="pln">EOS</span><span class="pun">());</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7053" onclick="window.location.hash='#7053'"></td><td class="FileContents-lineContents" id="7053"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7054" onclick="window.location.hash='#7054'"></td><td class="FileContents-lineContents" id="7054"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pBlock </span><span class="pun">=</span><span class="pln"> pEntry</span><span class="pun">-&gt;</span><span class="typ">GetBlock</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7055" onclick="window.location.hash='#7055'"></td><td class="FileContents-lineContents" id="7055"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7056" onclick="window.location.hash='#7056'"></td><td class="FileContents-lineContents" id="7056"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7057" onclick="window.location.hash='#7057'"></td><td class="FileContents-lineContents" id="7057"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> tp</span><span class="pun">.</span><span class="pln">m_track</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7058" onclick="window.location.hash='#7058'"></td><td class="FileContents-lineContents" id="7058"><span class="pln">      </span><span class="pun">++</span><span class="pln">index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7059" onclick="window.location.hash='#7059'"></td><td class="FileContents-lineContents" id="7059"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7060" onclick="window.location.hash='#7060'"></td><td class="FileContents-lineContents" id="7060"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7061" onclick="window.location.hash='#7061'"></td><td class="FileContents-lineContents" id="7061"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7062" onclick="window.location.hash='#7062'"></td><td class="FileContents-lineContents" id="7062"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tc_ </span><span class="pun">=</span><span class="pln"> pBlock</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7063" onclick="window.location.hash='#7063'"></td><td class="FileContents-lineContents" id="7063"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7064" onclick="window.location.hash='#7064'"></td><td class="FileContents-lineContents" id="7064"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tc_ </span><span class="pun">&lt;</span><span class="pln"> tc</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7065" onclick="window.location.hash='#7065'"></td><td class="FileContents-lineContents" id="7065"><span class="pln">      </span><span class="pun">++</span><span class="pln">index</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7066" onclick="window.location.hash='#7066'"></td><td class="FileContents-lineContents" id="7066"><span class="pln">      </span><span class="kwd">continue</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7067" onclick="window.location.hash='#7067'"></td><td class="FileContents-lineContents" id="7067"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7068" onclick="window.location.hash='#7068'"></td><td class="FileContents-lineContents" id="7068"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7069" onclick="window.location.hash='#7069'"></td><td class="FileContents-lineContents" id="7069"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tc_ </span><span class="pun">&gt;</span><span class="pln"> tc</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7070" onclick="window.location.hash='#7070'"></td><td class="FileContents-lineContents" id="7070"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7071" onclick="window.location.hash='#7071'"></td><td class="FileContents-lineContents" id="7071"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7072" onclick="window.location.hash='#7072'"></td><td class="FileContents-lineContents" id="7072"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Tracks</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTracks </span><span class="pun">=</span><span class="pln"> m_pSegment</span><span class="pun">-&gt;</span><span class="typ">GetTracks</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7073" onclick="window.location.hash='#7073'"></td><td class="FileContents-lineContents" id="7073"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pTracks</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7074" onclick="window.location.hash='#7074'"></td><td class="FileContents-lineContents" id="7074"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7075" onclick="window.location.hash='#7075'"></td><td class="FileContents-lineContents" id="7075"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tn </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">tp</span><span class="pun">.</span><span class="pln">m_track</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7076" onclick="window.location.hash='#7076'"></td><td class="FileContents-lineContents" id="7076"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Track</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pTrack </span><span class="pun">=</span><span class="pln"> pTracks</span><span class="pun">-&gt;</span><span class="typ">GetTrackByNumber</span><span class="pun">(</span><span class="pln">tn</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7077" onclick="window.location.hash='#7077'"></td><td class="FileContents-lineContents" id="7077"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7078" onclick="window.location.hash='#7078'"></td><td class="FileContents-lineContents" id="7078"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pTrack </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7079" onclick="window.location.hash='#7079'"></td><td class="FileContents-lineContents" id="7079"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7080" onclick="window.location.hash='#7080'"></td><td class="FileContents-lineContents" id="7080"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7081" onclick="window.location.hash='#7081'"></td><td class="FileContents-lineContents" id="7081"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> type </span><span class="pun">=</span><span class="pln"> pTrack</span><span class="pun">-&gt;</span><span class="typ">GetType</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7082" onclick="window.location.hash='#7082'"></td><td class="FileContents-lineContents" id="7082"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7083" onclick="window.location.hash='#7083'"></td><td class="FileContents-lineContents" id="7083"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">  </span><span class="com">// audio</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7084" onclick="window.location.hash='#7084'"></td><td class="FileContents-lineContents" id="7084"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7085" onclick="window.location.hash='#7085'"></td><td class="FileContents-lineContents" id="7085"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7086" onclick="window.location.hash='#7086'"></td><td class="FileContents-lineContents" id="7086"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">type </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">  </span><span class="com">// not video</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7087" onclick="window.location.hash='#7087'"></td><td class="FileContents-lineContents" id="7087"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7088" onclick="window.location.hash='#7088'"></td><td class="FileContents-lineContents" id="7088"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7089" onclick="window.location.hash='#7089'"></td><td class="FileContents-lineContents" id="7089"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">pBlock</span><span class="pun">-&gt;</span><span class="typ">IsKey</span><span class="pun">())</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7090" onclick="window.location.hash='#7090'"></td><td class="FileContents-lineContents" id="7090"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7091" onclick="window.location.hash='#7091'"></td><td class="FileContents-lineContents" id="7091"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7092" onclick="window.location.hash='#7092'"></td><td class="FileContents-lineContents" id="7092"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> pEntry</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7093" onclick="window.location.hash='#7093'"></td><td class="FileContents-lineContents" id="7093"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7094" onclick="window.location.hash='#7094'"></td><td class="FileContents-lineContents" id="7094"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7095" onclick="window.location.hash='#7095'"></td><td class="FileContents-lineContents" id="7095"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7096" onclick="window.location.hash='#7096'"></td><td class="FileContents-lineContents" id="7096"><span class="typ">BlockEntry</span><span class="pun">::</span><span class="typ">BlockEntry</span><span class="pun">(</span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> p</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> m_pCluster</span><span class="pun">(</span><span class="pln">p</span><span class="pun">),</span><span class="pln"> m_index</span><span class="pun">(</span><span class="pln">idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7097" onclick="window.location.hash='#7097'"></td><td class="FileContents-lineContents" id="7097"><span class="typ">BlockEntry</span><span class="pun">::~</span><span class="typ">BlockEntry</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7098" onclick="window.location.hash='#7098'"></td><td class="FileContents-lineContents" id="7098"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">::</span><span class="pln">EOS</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GetKind</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> kBlockEOS</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7099" onclick="window.location.hash='#7099'"></td><td class="FileContents-lineContents" id="7099"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">::</span><span class="typ">GetCluster</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_pCluster</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7100" onclick="window.location.hash='#7100'"></td><td class="FileContents-lineContents" id="7100"><span class="kwd">long</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">::</span><span class="typ">GetIndex</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_index</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7101" onclick="window.location.hash='#7101'"></td><td class="FileContents-lineContents" id="7101"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7102" onclick="window.location.hash='#7102'"></td><td class="FileContents-lineContents" id="7102"><span class="typ">SimpleBlock</span><span class="pun">::</span><span class="typ">SimpleBlock</span><span class="pun">(</span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7103" onclick="window.location.hash='#7103'"></td><td class="FileContents-lineContents" id="7103"><span class="pln">                         </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7104" onclick="window.location.hash='#7104'"></td><td class="FileContents-lineContents" id="7104"><span class="pln">    </span><span class="pun">:</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">),</span><span class="pln"> m_block</span><span class="pun">(</span><span class="pln">start</span><span class="pun">,</span><span class="pln"> size</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7105" onclick="window.location.hash='#7105'"></td><td class="FileContents-lineContents" id="7105"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7106" onclick="window.location.hash='#7106'"></td><td class="FileContents-lineContents" id="7106"><span class="kwd">long</span><span class="pln"> </span><span class="typ">SimpleBlock</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_block</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">m_pCluster</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7107" onclick="window.location.hash='#7107'"></td><td class="FileContents-lineContents" id="7107"><span class="typ">BlockEntry</span><span class="pun">::</span><span class="typ">Kind</span><span class="pln"> </span><span class="typ">SimpleBlock</span><span class="pun">::</span><span class="typ">GetKind</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> kBlockSimple</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7108" onclick="window.location.hash='#7108'"></td><td class="FileContents-lineContents" id="7108"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="typ">SimpleBlock</span><span class="pun">::</span><span class="typ">GetBlock</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_block</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7109" onclick="window.location.hash='#7109'"></td><td class="FileContents-lineContents" id="7109"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7110" onclick="window.location.hash='#7110'"></td><td class="FileContents-lineContents" id="7110"><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">BlockGroup</span><span class="pun">(</span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> idx</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_start</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7111" onclick="window.location.hash='#7111'"></td><td class="FileContents-lineContents" id="7111"><span class="pln">                       </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> block_size</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> prev</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> next</span><span class="pun">,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7112" onclick="window.location.hash='#7112'"></td><td class="FileContents-lineContents" id="7112"><span class="pln">                       </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> duration</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> discard_padding</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7113" onclick="window.location.hash='#7113'"></td><td class="FileContents-lineContents" id="7113"><span class="pln">    </span><span class="pun">:</span><span class="pln"> </span><span class="typ">BlockEntry</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">,</span><span class="pln"> idx</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7114" onclick="window.location.hash='#7114'"></td><td class="FileContents-lineContents" id="7114"><span class="pln">      m_block</span><span class="pun">(</span><span class="pln">block_start</span><span class="pun">,</span><span class="pln"> block_size</span><span class="pun">,</span><span class="pln"> discard_padding</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7115" onclick="window.location.hash='#7115'"></td><td class="FileContents-lineContents" id="7115"><span class="pln">      m_prev</span><span class="pun">(</span><span class="pln">prev</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7116" onclick="window.location.hash='#7116'"></td><td class="FileContents-lineContents" id="7116"><span class="pln">      m_next</span><span class="pun">(</span><span class="pln">next</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7117" onclick="window.location.hash='#7117'"></td><td class="FileContents-lineContents" id="7117"><span class="pln">      m_duration</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7118" onclick="window.location.hash='#7118'"></td><td class="FileContents-lineContents" id="7118"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7119" onclick="window.location.hash='#7119'"></td><td class="FileContents-lineContents" id="7119"><span class="kwd">long</span><span class="pln"> </span><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7120" onclick="window.location.hash='#7120'"></td><td class="FileContents-lineContents" id="7120"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> m_block</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">m_pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7121" onclick="window.location.hash='#7121'"></td><td class="FileContents-lineContents" id="7121"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7122" onclick="window.location.hash='#7122'"></td><td class="FileContents-lineContents" id="7122"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7123" onclick="window.location.hash='#7123'"></td><td class="FileContents-lineContents" id="7123"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7124" onclick="window.location.hash='#7124'"></td><td class="FileContents-lineContents" id="7124"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7125" onclick="window.location.hash='#7125'"></td><td class="FileContents-lineContents" id="7125"><span class="pln">  m_block</span><span class="pun">.</span><span class="typ">SetKey</span><span class="pun">((</span><span class="pln">m_prev </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_next </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">));</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7126" onclick="window.location.hash='#7126'"></td><td class="FileContents-lineContents" id="7126"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7127" onclick="window.location.hash='#7127'"></td><td class="FileContents-lineContents" id="7127"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7128" onclick="window.location.hash='#7128'"></td><td class="FileContents-lineContents" id="7128"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7129" onclick="window.location.hash='#7129'"></td><td class="FileContents-lineContents" id="7129"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7130" onclick="window.location.hash='#7130'"></td><td class="FileContents-lineContents" id="7130"><span class="typ">BlockEntry</span><span class="pun">::</span><span class="typ">Kind</span><span class="pln"> </span><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">GetKind</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> kBlockGroup</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7131" onclick="window.location.hash='#7131'"></td><td class="FileContents-lineContents" id="7131"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">*</span><span class="pln"> </span><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">GetBlock</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_block</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7132" onclick="window.location.hash='#7132'"></td><td class="FileContents-lineContents" id="7132"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">GetPrevTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_prev</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7133" onclick="window.location.hash='#7133'"></td><td class="FileContents-lineContents" id="7133"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">GetNextTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_next</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7134" onclick="window.location.hash='#7134'"></td><td class="FileContents-lineContents" id="7134"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">BlockGroup</span><span class="pun">::</span><span class="typ">GetDurationTimeCode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_duration</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7135" onclick="window.location.hash='#7135'"></td><td class="FileContents-lineContents" id="7135"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7136" onclick="window.location.hash='#7136'"></td><td class="FileContents-lineContents" id="7136"><span class="typ">Block</span><span class="pun">::</span><span class="typ">Block</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> size_</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> discard_padding</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7137" onclick="window.location.hash='#7137'"></td><td class="FileContents-lineContents" id="7137"><span class="pln">    </span><span class="pun">:</span><span class="pln"> m_start</span><span class="pun">(</span><span class="pln">start</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7138" onclick="window.location.hash='#7138'"></td><td class="FileContents-lineContents" id="7138"><span class="pln">      m_size</span><span class="pun">(</span><span class="pln">size_</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7139" onclick="window.location.hash='#7139'"></td><td class="FileContents-lineContents" id="7139"><span class="pln">      m_track</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7140" onclick="window.location.hash='#7140'"></td><td class="FileContents-lineContents" id="7140"><span class="pln">      m_timecode</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7141" onclick="window.location.hash='#7141'"></td><td class="FileContents-lineContents" id="7141"><span class="pln">      m_flags</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7142" onclick="window.location.hash='#7142'"></td><td class="FileContents-lineContents" id="7142"><span class="pln">      m_frames</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7143" onclick="window.location.hash='#7143'"></td><td class="FileContents-lineContents" id="7143"><span class="pln">      m_frame_count</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7144" onclick="window.location.hash='#7144'"></td><td class="FileContents-lineContents" id="7144"><span class="pln">      m_discard_padding</span><span class="pun">(</span><span class="pln">discard_padding</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7145" onclick="window.location.hash='#7145'"></td><td class="FileContents-lineContents" id="7145"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7146" onclick="window.location.hash='#7146'"></td><td class="FileContents-lineContents" id="7146"><span class="typ">Block</span><span class="pun">::~</span><span class="typ">Block</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">delete</span><span class="pun">[]</span><span class="pln"> m_frames</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7147" onclick="window.location.hash='#7147'"></td><td class="FileContents-lineContents" id="7147"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7148" onclick="window.location.hash='#7148'"></td><td class="FileContents-lineContents" id="7148"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">Parse</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7149" onclick="window.location.hash='#7149'"></td><td class="FileContents-lineContents" id="7149"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7150" onclick="window.location.hash='#7150'"></td><td class="FileContents-lineContents" id="7150"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7151" onclick="window.location.hash='#7151'"></td><td class="FileContents-lineContents" id="7151"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7152" onclick="window.location.hash='#7152'"></td><td class="FileContents-lineContents" id="7152"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">-&gt;</span><span class="pln">m_pSegment </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7153" onclick="window.location.hash='#7153'"></td><td class="FileContents-lineContents" id="7153"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7154" onclick="window.location.hash='#7154'"></td><td class="FileContents-lineContents" id="7154"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7155" onclick="window.location.hash='#7155'"></td><td class="FileContents-lineContents" id="7155"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_start </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7156" onclick="window.location.hash='#7156'"></td><td class="FileContents-lineContents" id="7156"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_size </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7157" onclick="window.location.hash='#7157'"></td><td class="FileContents-lineContents" id="7157"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_track </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7158" onclick="window.location.hash='#7158'"></td><td class="FileContents-lineContents" id="7158"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_frames </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7159" onclick="window.location.hash='#7159'"></td><td class="FileContents-lineContents" id="7159"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_frame_count </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7160" onclick="window.location.hash='#7160'"></td><td class="FileContents-lineContents" id="7160"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7161" onclick="window.location.hash='#7161'"></td><td class="FileContents-lineContents" id="7161"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> m_start</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7162" onclick="window.location.hash='#7162'"></td><td class="FileContents-lineContents" id="7162"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> stop </span><span class="pun">=</span><span class="pln"> m_start </span><span class="pun">+</span><span class="pln"> m_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7163" onclick="window.location.hash='#7163'"></td><td class="FileContents-lineContents" id="7163"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7164" onclick="window.location.hash='#7164'"></td><td class="FileContents-lineContents" id="7164"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7165" onclick="window.location.hash='#7165'"></td><td class="FileContents-lineContents" id="7165"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7166" onclick="window.location.hash='#7166'"></td><td class="FileContents-lineContents" id="7166"><span class="pln">  </span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pReader </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="pln">m_pSegment</span><span class="pun">-&gt;</span><span class="pln">m_pReader</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7167" onclick="window.location.hash='#7167'"></td><td class="FileContents-lineContents" id="7167"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7168" onclick="window.location.hash='#7168'"></td><td class="FileContents-lineContents" id="7168"><span class="pln">  m_track </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7169" onclick="window.location.hash='#7169'"></td><td class="FileContents-lineContents" id="7169"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7170" onclick="window.location.hash='#7170'"></td><td class="FileContents-lineContents" id="7170"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m_track </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7171" onclick="window.location.hash='#7171'"></td><td class="FileContents-lineContents" id="7171"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7172" onclick="window.location.hash='#7172'"></td><td class="FileContents-lineContents" id="7172"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7173" onclick="window.location.hash='#7173'"></td><td class="FileContents-lineContents" id="7173"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7174" onclick="window.location.hash='#7174'"></td><td class="FileContents-lineContents" id="7174"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7175" onclick="window.location.hash='#7175'"></td><td class="FileContents-lineContents" id="7175"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7176" onclick="window.location.hash='#7176'"></td><td class="FileContents-lineContents" id="7176"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume track number</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7177" onclick="window.location.hash='#7177'"></td><td class="FileContents-lineContents" id="7177"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7178" onclick="window.location.hash='#7178'"></td><td class="FileContents-lineContents" id="7178"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7179" onclick="window.location.hash='#7179'"></td><td class="FileContents-lineContents" id="7179"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7180" onclick="window.location.hash='#7180'"></td><td class="FileContents-lineContents" id="7180"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7181" onclick="window.location.hash='#7181'"></td><td class="FileContents-lineContents" id="7181"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7182" onclick="window.location.hash='#7182'"></td><td class="FileContents-lineContents" id="7182"><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> value</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7183" onclick="window.location.hash='#7183'"></td><td class="FileContents-lineContents" id="7183"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7184" onclick="window.location.hash='#7184'"></td><td class="FileContents-lineContents" id="7184"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> </span><span class="typ">UnserializeInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7185" onclick="window.location.hash='#7185'"></td><td class="FileContents-lineContents" id="7185"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7186" onclick="window.location.hash='#7186'"></td><td class="FileContents-lineContents" id="7186"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7187" onclick="window.location.hash='#7187'"></td><td class="FileContents-lineContents" id="7187"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7188" onclick="window.location.hash='#7188'"></td><td class="FileContents-lineContents" id="7188"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7189" onclick="window.location.hash='#7189'"></td><td class="FileContents-lineContents" id="7189"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">value </span><span class="pun">&lt;</span><span class="pln"> SHRT_MIN</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7190" onclick="window.location.hash='#7190'"></td><td class="FileContents-lineContents" id="7190"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7191" onclick="window.location.hash='#7191'"></td><td class="FileContents-lineContents" id="7191"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7192" onclick="window.location.hash='#7192'"></td><td class="FileContents-lineContents" id="7192"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">value </span><span class="pun">&gt;</span><span class="pln"> SHRT_MAX</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7193" onclick="window.location.hash='#7193'"></td><td class="FileContents-lineContents" id="7193"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7194" onclick="window.location.hash='#7194'"></td><td class="FileContents-lineContents" id="7194"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7195" onclick="window.location.hash='#7195'"></td><td class="FileContents-lineContents" id="7195"><span class="pln">  m_timecode </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;short&gt;</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7196" onclick="window.location.hash='#7196'"></td><td class="FileContents-lineContents" id="7196"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7197" onclick="window.location.hash='#7197'"></td><td class="FileContents-lineContents" id="7197"><span class="pln">  pos </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7198" onclick="window.location.hash='#7198'"></td><td class="FileContents-lineContents" id="7198"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7199" onclick="window.location.hash='#7199'"></td><td class="FileContents-lineContents" id="7199"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7200" onclick="window.location.hash='#7200'"></td><td class="FileContents-lineContents" id="7200"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7201" onclick="window.location.hash='#7201'"></td><td class="FileContents-lineContents" id="7201"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7202" onclick="window.location.hash='#7202'"></td><td class="FileContents-lineContents" id="7202"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">m_flags</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7203" onclick="window.location.hash='#7203'"></td><td class="FileContents-lineContents" id="7203"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7204" onclick="window.location.hash='#7204'"></td><td class="FileContents-lineContents" id="7204"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7205" onclick="window.location.hash='#7205'"></td><td class="FileContents-lineContents" id="7205"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7206" onclick="window.location.hash='#7206'"></td><td class="FileContents-lineContents" id="7206"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7207" onclick="window.location.hash='#7207'"></td><td class="FileContents-lineContents" id="7207"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> lacing </span><span class="pun">=</span><span class="pln"> </span><span class="typ">int</span><span class="pun">(</span><span class="pln">m_flags </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x06</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7208" onclick="window.location.hash='#7208'"></td><td class="FileContents-lineContents" id="7208"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7209" onclick="window.location.hash='#7209'"></td><td class="FileContents-lineContents" id="7209"><span class="pln">  </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume flags byte</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7210" onclick="window.location.hash='#7210'"></td><td class="FileContents-lineContents" id="7210"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7211" onclick="window.location.hash='#7211'"></td><td class="FileContents-lineContents" id="7211"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lacing </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// no lacing</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7212" onclick="window.location.hash='#7212'"></td><td class="FileContents-lineContents" id="7212"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7213" onclick="window.location.hash='#7213'"></td><td class="FileContents-lineContents" id="7213"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7214" onclick="window.location.hash='#7214'"></td><td class="FileContents-lineContents" id="7214"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7215" onclick="window.location.hash='#7215'"></td><td class="FileContents-lineContents" id="7215"><span class="pln">    m_frame_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7216" onclick="window.location.hash='#7216'"></td><td class="FileContents-lineContents" id="7216"><span class="pln">    m_frames </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Frame</span><span class="pun">[</span><span class="pln">m_frame_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7217" onclick="window.location.hash='#7217'"></td><td class="FileContents-lineContents" id="7217"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7218" onclick="window.location.hash='#7218'"></td><td class="FileContents-lineContents" id="7218"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7219" onclick="window.location.hash='#7219'"></td><td class="FileContents-lineContents" id="7219"><span class="pln">    f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7220" onclick="window.location.hash='#7220'"></td><td class="FileContents-lineContents" id="7220"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7221" onclick="window.location.hash='#7221'"></td><td class="FileContents-lineContents" id="7221"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> frame_size </span><span class="pun">=</span><span class="pln"> stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7222" onclick="window.location.hash='#7222'"></td><td class="FileContents-lineContents" id="7222"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7223" onclick="window.location.hash='#7223'"></td><td class="FileContents-lineContents" id="7223"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&gt;</span><span class="pln"> LONG_MAX </span><span class="pun">||</span><span class="pln"> frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7224" onclick="window.location.hash='#7224'"></td><td class="FileContents-lineContents" id="7224"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7225" onclick="window.location.hash='#7225'"></td><td class="FileContents-lineContents" id="7225"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7226" onclick="window.location.hash='#7226'"></td><td class="FileContents-lineContents" id="7226"><span class="pln">    f</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7227" onclick="window.location.hash='#7227'"></td><td class="FileContents-lineContents" id="7227"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7228" onclick="window.location.hash='#7228'"></td><td class="FileContents-lineContents" id="7228"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7229" onclick="window.location.hash='#7229'"></td><td class="FileContents-lineContents" id="7229"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7230" onclick="window.location.hash='#7230'"></td><td class="FileContents-lineContents" id="7230"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7231" onclick="window.location.hash='#7231'"></td><td class="FileContents-lineContents" id="7231"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7232" onclick="window.location.hash='#7232'"></td><td class="FileContents-lineContents" id="7232"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7233" onclick="window.location.hash='#7233'"></td><td class="FileContents-lineContents" id="7233"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7234" onclick="window.location.hash='#7234'"></td><td class="FileContents-lineContents" id="7234"><span class="pln">  </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> biased_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7235" onclick="window.location.hash='#7235'"></td><td class="FileContents-lineContents" id="7235"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7236" onclick="window.location.hash='#7236'"></td><td class="FileContents-lineContents" id="7236"><span class="pln">  status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">biased_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7237" onclick="window.location.hash='#7237'"></td><td class="FileContents-lineContents" id="7237"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7238" onclick="window.location.hash='#7238'"></td><td class="FileContents-lineContents" id="7238"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7239" onclick="window.location.hash='#7239'"></td><td class="FileContents-lineContents" id="7239"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7240" onclick="window.location.hash='#7240'"></td><td class="FileContents-lineContents" id="7240"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7241" onclick="window.location.hash='#7241'"></td><td class="FileContents-lineContents" id="7241"><span class="pln">  </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume frame count</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7242" onclick="window.location.hash='#7242'"></td><td class="FileContents-lineContents" id="7242"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7243" onclick="window.location.hash='#7243'"></td><td class="FileContents-lineContents" id="7243"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7244" onclick="window.location.hash='#7244'"></td><td class="FileContents-lineContents" id="7244"><span class="pln">  m_frame_count </span><span class="pun">=</span><span class="pln"> </span><span class="typ">int</span><span class="pun">(</span><span class="pln">biased_count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7245" onclick="window.location.hash='#7245'"></td><td class="FileContents-lineContents" id="7245"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7246" onclick="window.location.hash='#7246'"></td><td class="FileContents-lineContents" id="7246"><span class="pln">  m_frames </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Frame</span><span class="pun">[</span><span class="pln">m_frame_count</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7247" onclick="window.location.hash='#7247'"></td><td class="FileContents-lineContents" id="7247"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">m_frames</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7248" onclick="window.location.hash='#7248'"></td><td class="FileContents-lineContents" id="7248"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7249" onclick="window.location.hash='#7249'"></td><td class="FileContents-lineContents" id="7249"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lacing </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// Xiph</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7250" onclick="window.location.hash='#7250'"></td><td class="FileContents-lineContents" id="7250"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">*</span><span class="pln"> pf </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7251" onclick="window.location.hash='#7251'"></td><td class="FileContents-lineContents" id="7251"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pf_end </span><span class="pun">=</span><span class="pln"> pf </span><span class="pun">+</span><span class="pln"> m_frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7252" onclick="window.location.hash='#7252'"></td><td class="FileContents-lineContents" id="7252"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7253" onclick="window.location.hash='#7253'"></td><td class="FileContents-lineContents" id="7253"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7254" onclick="window.location.hash='#7254'"></td><td class="FileContents-lineContents" id="7254"><span class="pln">    </span><span class="typ">int</span><span class="pln"> frame_count </span><span class="pun">=</span><span class="pln"> m_frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7255" onclick="window.location.hash='#7255'"></td><td class="FileContents-lineContents" id="7255"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7256" onclick="window.location.hash='#7256'"></td><td class="FileContents-lineContents" id="7256"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7257" onclick="window.location.hash='#7257'"></td><td class="FileContents-lineContents" id="7257"><span class="pln">      </span><span class="kwd">long</span><span class="pln"> frame_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7258" onclick="window.location.hash='#7258'"></td><td class="FileContents-lineContents" id="7258"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7259" onclick="window.location.hash='#7259'"></td><td class="FileContents-lineContents" id="7259"><span class="pln">      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;;)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7260" onclick="window.location.hash='#7260'"></td><td class="FileContents-lineContents" id="7260"><span class="pln">        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> val</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7261" onclick="window.location.hash='#7261'"></td><td class="FileContents-lineContents" id="7261"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7262" onclick="window.location.hash='#7262'"></td><td class="FileContents-lineContents" id="7262"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7263" onclick="window.location.hash='#7263'"></td><td class="FileContents-lineContents" id="7263"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7264" onclick="window.location.hash='#7264'"></td><td class="FileContents-lineContents" id="7264"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7265" onclick="window.location.hash='#7265'"></td><td class="FileContents-lineContents" id="7265"><span class="pln">        status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">val</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7266" onclick="window.location.hash='#7266'"></td><td class="FileContents-lineContents" id="7266"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7267" onclick="window.location.hash='#7267'"></td><td class="FileContents-lineContents" id="7267"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7268" onclick="window.location.hash='#7268'"></td><td class="FileContents-lineContents" id="7268"><span class="pln">          </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7269" onclick="window.location.hash='#7269'"></td><td class="FileContents-lineContents" id="7269"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7270" onclick="window.location.hash='#7270'"></td><td class="FileContents-lineContents" id="7270"><span class="pln">        </span><span class="pun">++</span><span class="pln">pos</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume xiph size byte</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7271" onclick="window.location.hash='#7271'"></td><td class="FileContents-lineContents" id="7271"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7272" onclick="window.location.hash='#7272'"></td><td class="FileContents-lineContents" id="7272"><span class="pln">        frame_size </span><span class="pun">+=</span><span class="pln"> val</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7273" onclick="window.location.hash='#7273'"></td><td class="FileContents-lineContents" id="7273"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7274" onclick="window.location.hash='#7274'"></td><td class="FileContents-lineContents" id="7274"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">val </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">255</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7275" onclick="window.location.hash='#7275'"></td><td class="FileContents-lineContents" id="7275"><span class="pln">          </span><span class="kwd">break</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7276" onclick="window.location.hash='#7276'"></td><td class="FileContents-lineContents" id="7276"><span class="pln">      </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7277" onclick="window.location.hash='#7277'"></td><td class="FileContents-lineContents" id="7277"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7278" onclick="window.location.hash='#7278'"></td><td class="FileContents-lineContents" id="7278"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7279" onclick="window.location.hash='#7279'"></td><td class="FileContents-lineContents" id="7279"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">&lt;</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7280" onclick="window.location.hash='#7280'"></td><td class="FileContents-lineContents" id="7280"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7281" onclick="window.location.hash='#7281'"></td><td class="FileContents-lineContents" id="7281"><span class="pln">      f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// patch later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7282" onclick="window.location.hash='#7282'"></td><td class="FileContents-lineContents" id="7282"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7283" onclick="window.location.hash='#7283'"></td><td class="FileContents-lineContents" id="7283"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7284" onclick="window.location.hash='#7284'"></td><td class="FileContents-lineContents" id="7284"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7285" onclick="window.location.hash='#7285'"></td><td class="FileContents-lineContents" id="7285"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7286" onclick="window.location.hash='#7286'"></td><td class="FileContents-lineContents" id="7286"><span class="pln">      f</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> frame_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7287" onclick="window.location.hash='#7287'"></td><td class="FileContents-lineContents" id="7287"><span class="pln">      size </span><span class="pun">+=</span><span class="pln"> frame_size</span><span class="pun">;</span><span class="pln">  </span><span class="com">// contribution of this frame</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7288" onclick="window.location.hash='#7288'"></td><td class="FileContents-lineContents" id="7288"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7289" onclick="window.location.hash='#7289'"></td><td class="FileContents-lineContents" id="7289"><span class="pln">      </span><span class="pun">--</span><span class="pln">frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7290" onclick="window.location.hash='#7290'"></td><td class="FileContents-lineContents" id="7290"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7291" onclick="window.location.hash='#7291'"></td><td class="FileContents-lineContents" id="7291"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7292" onclick="window.location.hash='#7292'"></td><td class="FileContents-lineContents" id="7292"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">&lt;</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7293" onclick="window.location.hash='#7293'"></td><td class="FileContents-lineContents" id="7293"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7294" onclick="window.location.hash='#7294'"></td><td class="FileContents-lineContents" id="7294"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7295" onclick="window.location.hash='#7295'"></td><td class="FileContents-lineContents" id="7295"><span class="pln">    </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7296" onclick="window.location.hash='#7296'"></td><td class="FileContents-lineContents" id="7296"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7297" onclick="window.location.hash='#7297'"></td><td class="FileContents-lineContents" id="7297"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7298" onclick="window.location.hash='#7298'"></td><td class="FileContents-lineContents" id="7298"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pf </span><span class="pun">!=</span><span class="pln"> pf_end</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7299" onclick="window.location.hash='#7299'"></td><td class="FileContents-lineContents" id="7299"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7300" onclick="window.location.hash='#7300'"></td><td class="FileContents-lineContents" id="7300"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7301" onclick="window.location.hash='#7301'"></td><td class="FileContents-lineContents" id="7301"><span class="pln">      f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// patch later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7302" onclick="window.location.hash='#7302'"></td><td class="FileContents-lineContents" id="7302"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7303" onclick="window.location.hash='#7303'"></td><td class="FileContents-lineContents" id="7303"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total_size </span><span class="pun">=</span><span class="pln"> stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7304" onclick="window.location.hash='#7304'"></td><td class="FileContents-lineContents" id="7304"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7305" onclick="window.location.hash='#7305'"></td><td class="FileContents-lineContents" id="7305"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total_size </span><span class="pun">&lt;</span><span class="pln"> size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7306" onclick="window.location.hash='#7306'"></td><td class="FileContents-lineContents" id="7306"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7307" onclick="window.location.hash='#7307'"></td><td class="FileContents-lineContents" id="7307"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7308" onclick="window.location.hash='#7308'"></td><td class="FileContents-lineContents" id="7308"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> frame_size </span><span class="pun">=</span><span class="pln"> total_size </span><span class="pun">-</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7309" onclick="window.location.hash='#7309'"></td><td class="FileContents-lineContents" id="7309"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7310" onclick="window.location.hash='#7310'"></td><td class="FileContents-lineContents" id="7310"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&gt;</span><span class="pln"> LONG_MAX </span><span class="pun">||</span><span class="pln"> frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7311" onclick="window.location.hash='#7311'"></td><td class="FileContents-lineContents" id="7311"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7312" onclick="window.location.hash='#7312'"></td><td class="FileContents-lineContents" id="7312"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7313" onclick="window.location.hash='#7313'"></td><td class="FileContents-lineContents" id="7313"><span class="pln">      f</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7314" onclick="window.location.hash='#7314'"></td><td class="FileContents-lineContents" id="7314"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7315" onclick="window.location.hash='#7315'"></td><td class="FileContents-lineContents" id="7315"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7316" onclick="window.location.hash='#7316'"></td><td class="FileContents-lineContents" id="7316"><span class="pln">    pf </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7317" onclick="window.location.hash='#7317'"></td><td class="FileContents-lineContents" id="7317"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pf </span><span class="pun">!=</span><span class="pln"> pf_end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7318" onclick="window.location.hash='#7318'"></td><td class="FileContents-lineContents" id="7318"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7319" onclick="window.location.hash='#7319'"></td><td class="FileContents-lineContents" id="7319"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7320" onclick="window.location.hash='#7320'"></td><td class="FileContents-lineContents" id="7320"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7321" onclick="window.location.hash='#7321'"></td><td class="FileContents-lineContents" id="7321"><span class="pln">      f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7322" onclick="window.location.hash='#7322'"></td><td class="FileContents-lineContents" id="7322"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7323" onclick="window.location.hash='#7323'"></td><td class="FileContents-lineContents" id="7323"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7324" onclick="window.location.hash='#7324'"></td><td class="FileContents-lineContents" id="7324"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7325" onclick="window.location.hash='#7325'"></td><td class="FileContents-lineContents" id="7325"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7326" onclick="window.location.hash='#7326'"></td><td class="FileContents-lineContents" id="7326"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lacing </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// fixed-size lacing</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7327" onclick="window.location.hash='#7327'"></td><td class="FileContents-lineContents" id="7327"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7328" onclick="window.location.hash='#7328'"></td><td class="FileContents-lineContents" id="7328"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7329" onclick="window.location.hash='#7329'"></td><td class="FileContents-lineContents" id="7329"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7330" onclick="window.location.hash='#7330'"></td><td class="FileContents-lineContents" id="7330"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total_size </span><span class="pun">=</span><span class="pln"> stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7331" onclick="window.location.hash='#7331'"></td><td class="FileContents-lineContents" id="7331"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7332" onclick="window.location.hash='#7332'"></td><td class="FileContents-lineContents" id="7332"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">total_size </span><span class="pun">%</span><span class="pln"> m_frame_count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7333" onclick="window.location.hash='#7333'"></td><td class="FileContents-lineContents" id="7333"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7334" onclick="window.location.hash='#7334'"></td><td class="FileContents-lineContents" id="7334"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7335" onclick="window.location.hash='#7335'"></td><td class="FileContents-lineContents" id="7335"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> frame_size </span><span class="pun">=</span><span class="pln"> total_size </span><span class="pun">/</span><span class="pln"> m_frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7336" onclick="window.location.hash='#7336'"></td><td class="FileContents-lineContents" id="7336"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7337" onclick="window.location.hash='#7337'"></td><td class="FileContents-lineContents" id="7337"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&gt;</span><span class="pln"> LONG_MAX </span><span class="pun">||</span><span class="pln"> frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7338" onclick="window.location.hash='#7338'"></td><td class="FileContents-lineContents" id="7338"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7339" onclick="window.location.hash='#7339'"></td><td class="FileContents-lineContents" id="7339"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7340" onclick="window.location.hash='#7340'"></td><td class="FileContents-lineContents" id="7340"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">*</span><span class="pln"> pf </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7341" onclick="window.location.hash='#7341'"></td><td class="FileContents-lineContents" id="7341"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pf_end </span><span class="pun">=</span><span class="pln"> pf </span><span class="pun">+</span><span class="pln"> m_frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7342" onclick="window.location.hash='#7342'"></td><td class="FileContents-lineContents" id="7342"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7343" onclick="window.location.hash='#7343'"></td><td class="FileContents-lineContents" id="7343"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pf </span><span class="pun">!=</span><span class="pln"> pf_end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7344" onclick="window.location.hash='#7344'"></td><td class="FileContents-lineContents" id="7344"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> frame_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7345" onclick="window.location.hash='#7345'"></td><td class="FileContents-lineContents" id="7345"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7346" onclick="window.location.hash='#7346'"></td><td class="FileContents-lineContents" id="7346"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7347" onclick="window.location.hash='#7347'"></td><td class="FileContents-lineContents" id="7347"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7348" onclick="window.location.hash='#7348'"></td><td class="FileContents-lineContents" id="7348"><span class="pln">      f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7349" onclick="window.location.hash='#7349'"></td><td class="FileContents-lineContents" id="7349"><span class="pln">      f</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7350" onclick="window.location.hash='#7350'"></td><td class="FileContents-lineContents" id="7350"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7351" onclick="window.location.hash='#7351'"></td><td class="FileContents-lineContents" id="7351"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> frame_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7352" onclick="window.location.hash='#7352'"></td><td class="FileContents-lineContents" id="7352"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7353" onclick="window.location.hash='#7353'"></td><td class="FileContents-lineContents" id="7353"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7354" onclick="window.location.hash='#7354'"></td><td class="FileContents-lineContents" id="7354"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">==</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7355" onclick="window.location.hash='#7355'"></td><td class="FileContents-lineContents" id="7355"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7356" onclick="window.location.hash='#7356'"></td><td class="FileContents-lineContents" id="7356"><span class="pln">    assert</span><span class="pun">(</span><span class="pln">lacing </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">);</span><span class="pln">  </span><span class="com">// EBML lacing</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7357" onclick="window.location.hash='#7357'"></td><td class="FileContents-lineContents" id="7357"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7358" onclick="window.location.hash='#7358'"></td><td class="FileContents-lineContents" id="7358"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7359" onclick="window.location.hash='#7359'"></td><td class="FileContents-lineContents" id="7359"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7360" onclick="window.location.hash='#7360'"></td><td class="FileContents-lineContents" id="7360"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7361" onclick="window.location.hash='#7361'"></td><td class="FileContents-lineContents" id="7361"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7362" onclick="window.location.hash='#7362'"></td><td class="FileContents-lineContents" id="7362"><span class="pln">    </span><span class="typ">int</span><span class="pln"> frame_count </span><span class="pun">=</span><span class="pln"> m_frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7363" onclick="window.location.hash='#7363'"></td><td class="FileContents-lineContents" id="7363"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7364" onclick="window.location.hash='#7364'"></td><td class="FileContents-lineContents" id="7364"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> frame_size </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7365" onclick="window.location.hash='#7365'"></td><td class="FileContents-lineContents" id="7365"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7366" onclick="window.location.hash='#7366'"></td><td class="FileContents-lineContents" id="7366"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7367" onclick="window.location.hash='#7367'"></td><td class="FileContents-lineContents" id="7367"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7368" onclick="window.location.hash='#7368'"></td><td class="FileContents-lineContents" id="7368"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7369" onclick="window.location.hash='#7369'"></td><td class="FileContents-lineContents" id="7369"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&gt;</span><span class="pln"> LONG_MAX</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7370" onclick="window.location.hash='#7370'"></td><td class="FileContents-lineContents" id="7370"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7371" onclick="window.location.hash='#7371'"></td><td class="FileContents-lineContents" id="7371"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7372" onclick="window.location.hash='#7372'"></td><td class="FileContents-lineContents" id="7372"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7373" onclick="window.location.hash='#7373'"></td><td class="FileContents-lineContents" id="7373"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7374" onclick="window.location.hash='#7374'"></td><td class="FileContents-lineContents" id="7374"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7375" onclick="window.location.hash='#7375'"></td><td class="FileContents-lineContents" id="7375"><span class="pln">    pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of size of first frame</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7376" onclick="window.location.hash='#7376'"></td><td class="FileContents-lineContents" id="7376"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7377" onclick="window.location.hash='#7377'"></td><td class="FileContents-lineContents" id="7377"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> frame_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7378" onclick="window.location.hash='#7378'"></td><td class="FileContents-lineContents" id="7378"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7379" onclick="window.location.hash='#7379'"></td><td class="FileContents-lineContents" id="7379"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7380" onclick="window.location.hash='#7380'"></td><td class="FileContents-lineContents" id="7380"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">*</span><span class="pln"> pf </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7381" onclick="window.location.hash='#7381'"></td><td class="FileContents-lineContents" id="7381"><span class="pln">    </span><span class="typ">Frame</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pf_end </span><span class="pun">=</span><span class="pln"> pf </span><span class="pun">+</span><span class="pln"> m_frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7382" onclick="window.location.hash='#7382'"></td><td class="FileContents-lineContents" id="7382"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7383" onclick="window.location.hash='#7383'"></td><td class="FileContents-lineContents" id="7383"><span class="pln">    </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7384" onclick="window.location.hash='#7384'"></td><td class="FileContents-lineContents" id="7384"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> curr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7385" onclick="window.location.hash='#7385'"></td><td class="FileContents-lineContents" id="7385"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7386" onclick="window.location.hash='#7386'"></td><td class="FileContents-lineContents" id="7386"><span class="pln">      curr</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// patch later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7387" onclick="window.location.hash='#7387'"></td><td class="FileContents-lineContents" id="7387"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7388" onclick="window.location.hash='#7388'"></td><td class="FileContents-lineContents" id="7388"><span class="pln">      curr</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7389" onclick="window.location.hash='#7389'"></td><td class="FileContents-lineContents" id="7389"><span class="pln">      size </span><span class="pun">+=</span><span class="pln"> curr</span><span class="pun">.</span><span class="pln">len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// contribution of this frame</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7390" onclick="window.location.hash='#7390'"></td><td class="FileContents-lineContents" id="7390"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7391" onclick="window.location.hash='#7391'"></td><td class="FileContents-lineContents" id="7391"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7392" onclick="window.location.hash='#7392'"></td><td class="FileContents-lineContents" id="7392"><span class="pln">    </span><span class="pun">--</span><span class="pln">frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7393" onclick="window.location.hash='#7393'"></td><td class="FileContents-lineContents" id="7393"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7394" onclick="window.location.hash='#7394'"></td><td class="FileContents-lineContents" id="7394"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7395" onclick="window.location.hash='#7395'"></td><td class="FileContents-lineContents" id="7395"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&gt;=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7396" onclick="window.location.hash='#7396'"></td><td class="FileContents-lineContents" id="7396"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7397" onclick="window.location.hash='#7397'"></td><td class="FileContents-lineContents" id="7397"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7398" onclick="window.location.hash='#7398'"></td><td class="FileContents-lineContents" id="7398"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">&lt;</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7399" onclick="window.location.hash='#7399'"></td><td class="FileContents-lineContents" id="7399"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7400" onclick="window.location.hash='#7400'"></td><td class="FileContents-lineContents" id="7400"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7401" onclick="window.location.hash='#7401'"></td><td class="FileContents-lineContents" id="7401"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">prev</span><span class="pun">.</span><span class="pln">len </span><span class="pun">==</span><span class="pln"> frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7402" onclick="window.location.hash='#7402'"></td><td class="FileContents-lineContents" id="7402"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prev</span><span class="pun">.</span><span class="pln">len </span><span class="pun">!=</span><span class="pln"> frame_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7403" onclick="window.location.hash='#7403'"></td><td class="FileContents-lineContents" id="7403"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7404" onclick="window.location.hash='#7404'"></td><td class="FileContents-lineContents" id="7404"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7405" onclick="window.location.hash='#7405'"></td><td class="FileContents-lineContents" id="7405"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">&lt;</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7406" onclick="window.location.hash='#7406'"></td><td class="FileContents-lineContents" id="7406"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7407" onclick="window.location.hash='#7407'"></td><td class="FileContents-lineContents" id="7407"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> curr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7408" onclick="window.location.hash='#7408'"></td><td class="FileContents-lineContents" id="7408"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7409" onclick="window.location.hash='#7409'"></td><td class="FileContents-lineContents" id="7409"><span class="pln">      curr</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// patch later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7410" onclick="window.location.hash='#7410'"></td><td class="FileContents-lineContents" id="7410"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7411" onclick="window.location.hash='#7411'"></td><td class="FileContents-lineContents" id="7411"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> delta_size_ </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ReadUInt</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">,</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7412" onclick="window.location.hash='#7412'"></td><td class="FileContents-lineContents" id="7412"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7413" onclick="window.location.hash='#7413'"></td><td class="FileContents-lineContents" id="7413"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">delta_size_ </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7414" onclick="window.location.hash='#7414'"></td><td class="FileContents-lineContents" id="7414"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7415" onclick="window.location.hash='#7415'"></td><td class="FileContents-lineContents" id="7415"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7416" onclick="window.location.hash='#7416'"></td><td class="FileContents-lineContents" id="7416"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7417" onclick="window.location.hash='#7417'"></td><td class="FileContents-lineContents" id="7417"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7418" onclick="window.location.hash='#7418'"></td><td class="FileContents-lineContents" id="7418"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7419" onclick="window.location.hash='#7419'"></td><td class="FileContents-lineContents" id="7419"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// consume length of (delta) size</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7420" onclick="window.location.hash='#7420'"></td><td class="FileContents-lineContents" id="7420"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7421" onclick="window.location.hash='#7421'"></td><td class="FileContents-lineContents" id="7421"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7422" onclick="window.location.hash='#7422'"></td><td class="FileContents-lineContents" id="7422"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> exp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> len </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7423" onclick="window.location.hash='#7423'"></td><td class="FileContents-lineContents" id="7423"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> bias </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> exp</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1LL</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7424" onclick="window.location.hash='#7424'"></td><td class="FileContents-lineContents" id="7424"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> delta_size </span><span class="pun">=</span><span class="pln"> delta_size_ </span><span class="pun">-</span><span class="pln"> bias</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7425" onclick="window.location.hash='#7425'"></td><td class="FileContents-lineContents" id="7425"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7426" onclick="window.location.hash='#7426'"></td><td class="FileContents-lineContents" id="7426"><span class="pln">      frame_size </span><span class="pun">+=</span><span class="pln"> delta_size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7427" onclick="window.location.hash='#7427'"></td><td class="FileContents-lineContents" id="7427"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7428" onclick="window.location.hash='#7428'"></td><td class="FileContents-lineContents" id="7428"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7429" onclick="window.location.hash='#7429'"></td><td class="FileContents-lineContents" id="7429"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7430" onclick="window.location.hash='#7430'"></td><td class="FileContents-lineContents" id="7430"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7431" onclick="window.location.hash='#7431'"></td><td class="FileContents-lineContents" id="7431"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&gt;</span><span class="pln"> LONG_MAX</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7432" onclick="window.location.hash='#7432'"></td><td class="FileContents-lineContents" id="7432"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7433" onclick="window.location.hash='#7433'"></td><td class="FileContents-lineContents" id="7433"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7434" onclick="window.location.hash='#7434'"></td><td class="FileContents-lineContents" id="7434"><span class="pln">      curr</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7435" onclick="window.location.hash='#7435'"></td><td class="FileContents-lineContents" id="7435"><span class="pln">      size </span><span class="pun">+=</span><span class="pln"> curr</span><span class="pun">.</span><span class="pln">len</span><span class="pun">;</span><span class="pln">  </span><span class="com">// contribution of this frame</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7436" onclick="window.location.hash='#7436'"></td><td class="FileContents-lineContents" id="7436"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7437" onclick="window.location.hash='#7437'"></td><td class="FileContents-lineContents" id="7437"><span class="pln">      </span><span class="pun">--</span><span class="pln">frame_count</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7438" onclick="window.location.hash='#7438'"></td><td class="FileContents-lineContents" id="7438"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7439" onclick="window.location.hash='#7439'"></td><td class="FileContents-lineContents" id="7439"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7440" onclick="window.location.hash='#7440'"></td><td class="FileContents-lineContents" id="7440"><span class="pln">    </span><span class="com">// parse last frame</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7441" onclick="window.location.hash='#7441'"></td><td class="FileContents-lineContents" id="7441"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_count </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7442" onclick="window.location.hash='#7442'"></td><td class="FileContents-lineContents" id="7442"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pos </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7443" onclick="window.location.hash='#7443'"></td><td class="FileContents-lineContents" id="7443"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">&lt;</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7444" onclick="window.location.hash='#7444'"></td><td class="FileContents-lineContents" id="7444"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7445" onclick="window.location.hash='#7445'"></td><td class="FileContents-lineContents" id="7445"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7446" onclick="window.location.hash='#7446'"></td><td class="FileContents-lineContents" id="7446"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">prev</span><span class="pun">.</span><span class="pln">len </span><span class="pun">==</span><span class="pln"> frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7447" onclick="window.location.hash='#7447'"></td><td class="FileContents-lineContents" id="7447"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prev</span><span class="pun">.</span><span class="pln">len </span><span class="pun">!=</span><span class="pln"> frame_size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7448" onclick="window.location.hash='#7448'"></td><td class="FileContents-lineContents" id="7448"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7449" onclick="window.location.hash='#7449'"></td><td class="FileContents-lineContents" id="7449"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7450" onclick="window.location.hash='#7450'"></td><td class="FileContents-lineContents" id="7450"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">&lt;</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7451" onclick="window.location.hash='#7451'"></td><td class="FileContents-lineContents" id="7451"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7452" onclick="window.location.hash='#7452'"></td><td class="FileContents-lineContents" id="7452"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> curr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7453" onclick="window.location.hash='#7453'"></td><td class="FileContents-lineContents" id="7453"><span class="pln">      assert</span><span class="pun">(</span><span class="pln">pf </span><span class="pun">==</span><span class="pln"> pf_end</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7454" onclick="window.location.hash='#7454'"></td><td class="FileContents-lineContents" id="7454"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7455" onclick="window.location.hash='#7455'"></td><td class="FileContents-lineContents" id="7455"><span class="pln">      curr</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// patch later</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7456" onclick="window.location.hash='#7456'"></td><td class="FileContents-lineContents" id="7456"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7457" onclick="window.location.hash='#7457'"></td><td class="FileContents-lineContents" id="7457"><span class="pln">      </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> total_size </span><span class="pun">=</span><span class="pln"> stop </span><span class="pun">-</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7458" onclick="window.location.hash='#7458'"></td><td class="FileContents-lineContents" id="7458"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7459" onclick="window.location.hash='#7459'"></td><td class="FileContents-lineContents" id="7459"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total_size </span><span class="pun">&lt;</span><span class="pln"> size</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7460" onclick="window.location.hash='#7460'"></td><td class="FileContents-lineContents" id="7460"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7461" onclick="window.location.hash='#7461'"></td><td class="FileContents-lineContents" id="7461"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7462" onclick="window.location.hash='#7462'"></td><td class="FileContents-lineContents" id="7462"><span class="pln">      frame_size </span><span class="pun">=</span><span class="pln"> total_size </span><span class="pun">-</span><span class="pln"> size</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7463" onclick="window.location.hash='#7463'"></td><td class="FileContents-lineContents" id="7463"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7464" onclick="window.location.hash='#7464'"></td><td class="FileContents-lineContents" id="7464"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">frame_size </span><span class="pun">&gt;</span><span class="pln"> LONG_MAX </span><span class="pun">||</span><span class="pln"> frame_size </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7465" onclick="window.location.hash='#7465'"></td><td class="FileContents-lineContents" id="7465"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7466" onclick="window.location.hash='#7466'"></td><td class="FileContents-lineContents" id="7466"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7467" onclick="window.location.hash='#7467'"></td><td class="FileContents-lineContents" id="7467"><span class="pln">      curr</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;long&gt;</span><span class="pun">(</span><span class="pln">frame_size</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7468" onclick="window.location.hash='#7468'"></td><td class="FileContents-lineContents" id="7468"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7469" onclick="window.location.hash='#7469'"></td><td class="FileContents-lineContents" id="7469"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7470" onclick="window.location.hash='#7470'"></td><td class="FileContents-lineContents" id="7470"><span class="pln">    pf </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7471" onclick="window.location.hash='#7471'"></td><td class="FileContents-lineContents" id="7471"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pf </span><span class="pun">!=</span><span class="pln"> pf_end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7472" onclick="window.location.hash='#7472'"></td><td class="FileContents-lineContents" id="7472"><span class="pln">      </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">pf</span><span class="pun">++;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7473" onclick="window.location.hash='#7473'"></td><td class="FileContents-lineContents" id="7473"><span class="pln">      assert</span><span class="pun">((</span><span class="pln">pos </span><span class="pun">+</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">len</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> stop</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7474" onclick="window.location.hash='#7474'"></td><td class="FileContents-lineContents" id="7474"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7475" onclick="window.location.hash='#7475'"></td><td class="FileContents-lineContents" id="7475"><span class="pln">      f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">=</span><span class="pln"> pos</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7476" onclick="window.location.hash='#7476'"></td><td class="FileContents-lineContents" id="7476"><span class="pln">      pos </span><span class="pun">+=</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">len</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7477" onclick="window.location.hash='#7477'"></td><td class="FileContents-lineContents" id="7477"><span class="pln">    </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7478" onclick="window.location.hash='#7478'"></td><td class="FileContents-lineContents" id="7478"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7479" onclick="window.location.hash='#7479'"></td><td class="FileContents-lineContents" id="7479"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos </span><span class="pun">!=</span><span class="pln"> stop</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7480" onclick="window.location.hash='#7480'"></td><td class="FileContents-lineContents" id="7480"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> E_FILE_FORMAT_INVALID</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7481" onclick="window.location.hash='#7481'"></td><td class="FileContents-lineContents" id="7481"><span class="pln">  </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7482" onclick="window.location.hash='#7482'"></td><td class="FileContents-lineContents" id="7482"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7483" onclick="window.location.hash='#7483'"></td><td class="FileContents-lineContents" id="7483"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// success</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7484" onclick="window.location.hash='#7484'"></td><td class="FileContents-lineContents" id="7484"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7485" onclick="window.location.hash='#7485'"></td><td class="FileContents-lineContents" id="7485"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7486" onclick="window.location.hash='#7486'"></td><td class="FileContents-lineContents" id="7486"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetTimeCode</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7487" onclick="window.location.hash='#7487'"></td><td class="FileContents-lineContents" id="7487"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pCluster </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7488" onclick="window.location.hash='#7488'"></td><td class="FileContents-lineContents" id="7488"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> m_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7489" onclick="window.location.hash='#7489'"></td><td class="FileContents-lineContents" id="7489"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7490" onclick="window.location.hash='#7490'"></td><td class="FileContents-lineContents" id="7490"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tc0 </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="typ">GetTimeCode</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7491" onclick="window.location.hash='#7491'"></td><td class="FileContents-lineContents" id="7491"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">tc0 </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7492" onclick="window.location.hash='#7492'"></td><td class="FileContents-lineContents" id="7492"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7493" onclick="window.location.hash='#7493'"></td><td class="FileContents-lineContents" id="7493"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tc </span><span class="pun">=</span><span class="pln"> tc0 </span><span class="pun">+</span><span class="pln"> m_timecode</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7494" onclick="window.location.hash='#7494'"></td><td class="FileContents-lineContents" id="7494"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7495" onclick="window.location.hash='#7495'"></td><td class="FileContents-lineContents" id="7495"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> tc</span><span class="pun">;</span><span class="pln">  </span><span class="com">// unscaled timecode units</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7496" onclick="window.location.hash='#7496'"></td><td class="FileContents-lineContents" id="7496"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7497" onclick="window.location.hash='#7497'"></td><td class="FileContents-lineContents" id="7497"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7498" onclick="window.location.hash='#7498'"></td><td class="FileContents-lineContents" id="7498"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetTime</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Cluster</span><span class="pun">*</span><span class="pln"> pCluster</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7499" onclick="window.location.hash='#7499'"></td><td class="FileContents-lineContents" id="7499"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7500" onclick="window.location.hash='#7500'"></td><td class="FileContents-lineContents" id="7500"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7501" onclick="window.location.hash='#7501'"></td><td class="FileContents-lineContents" id="7501"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> tc </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetTimeCode</span><span class="pun">(</span><span class="pln">pCluster</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7502" onclick="window.location.hash='#7502'"></td><td class="FileContents-lineContents" id="7502"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7503" onclick="window.location.hash='#7503'"></td><td class="FileContents-lineContents" id="7503"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Segment</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pSegment </span><span class="pun">=</span><span class="pln"> pCluster</span><span class="pun">-&gt;</span><span class="pln">m_pSegment</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7504" onclick="window.location.hash='#7504'"></td><td class="FileContents-lineContents" id="7504"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">SegmentInfo</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> pInfo </span><span class="pun">=</span><span class="pln"> pSegment</span><span class="pun">-&gt;</span><span class="typ">GetInfo</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7505" onclick="window.location.hash='#7505'"></td><td class="FileContents-lineContents" id="7505"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pInfo</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7506" onclick="window.location.hash='#7506'"></td><td class="FileContents-lineContents" id="7506"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7507" onclick="window.location.hash='#7507'"></td><td class="FileContents-lineContents" id="7507"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> scale </span><span class="pun">=</span><span class="pln"> pInfo</span><span class="pun">-&gt;</span><span class="typ">GetTimeCodeScale</span><span class="pun">();</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7508" onclick="window.location.hash='#7508'"></td><td class="FileContents-lineContents" id="7508"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">scale </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7509" onclick="window.location.hash='#7509'"></td><td class="FileContents-lineContents" id="7509"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7510" onclick="window.location.hash='#7510'"></td><td class="FileContents-lineContents" id="7510"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> ns </span><span class="pun">=</span><span class="pln"> tc </span><span class="pun">*</span><span class="pln"> scale</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7511" onclick="window.location.hash='#7511'"></td><td class="FileContents-lineContents" id="7511"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7512" onclick="window.location.hash='#7512'"></td><td class="FileContents-lineContents" id="7512"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> ns</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7513" onclick="window.location.hash='#7513'"></td><td class="FileContents-lineContents" id="7513"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7514" onclick="window.location.hash='#7514'"></td><td class="FileContents-lineContents" id="7514"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7515" onclick="window.location.hash='#7515'"></td><td class="FileContents-lineContents" id="7515"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetTrackNumber</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_track</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7516" onclick="window.location.hash='#7516'"></td><td class="FileContents-lineContents" id="7516"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7517" onclick="window.location.hash='#7517'"></td><td class="FileContents-lineContents" id="7517"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">IsKey</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7518" onclick="window.location.hash='#7518'"></td><td class="FileContents-lineContents" id="7518"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">((</span><span class="pln">m_flags </span><span class="pun">&amp;</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">&gt;(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">7</span><span class="pun">))</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7519" onclick="window.location.hash='#7519'"></td><td class="FileContents-lineContents" id="7519"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7520" onclick="window.location.hash='#7520'"></td><td class="FileContents-lineContents" id="7520"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7521" onclick="window.location.hash='#7521'"></td><td class="FileContents-lineContents" id="7521"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">SetKey</span><span class="pun">(</span><span class="kwd">bool</span><span class="pln"> bKey</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7522" onclick="window.location.hash='#7522'"></td><td class="FileContents-lineContents" id="7522"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bKey</span><span class="pun">)</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7523" onclick="window.location.hash='#7523'"></td><td class="FileContents-lineContents" id="7523"><span class="pln">    m_flags </span><span class="pun">|=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">&gt;(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">7</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7524" onclick="window.location.hash='#7524'"></td><td class="FileContents-lineContents" id="7524"><span class="pln">  </span><span class="kwd">else</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7525" onclick="window.location.hash='#7525'"></td><td class="FileContents-lineContents" id="7525"><span class="pln">    m_flags </span><span class="pun">&amp;=</span><span class="pln"> </span><span class="lit">0x7F</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7526" onclick="window.location.hash='#7526'"></td><td class="FileContents-lineContents" id="7526"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7527" onclick="window.location.hash='#7527'"></td><td class="FileContents-lineContents" id="7527"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7528" onclick="window.location.hash='#7528'"></td><td class="FileContents-lineContents" id="7528"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">IsInvisible</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">bool</span><span class="pun">(</span><span class="typ">int</span><span class="pun">(</span><span class="pln">m_flags </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x08</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7529" onclick="window.location.hash='#7529'"></td><td class="FileContents-lineContents" id="7529"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7530" onclick="window.location.hash='#7530'"></td><td class="FileContents-lineContents" id="7530"><span class="typ">Block</span><span class="pun">::</span><span class="typ">Lacing</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetLacing</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7531" onclick="window.location.hash='#7531'"></td><td class="FileContents-lineContents" id="7531"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="typ">int</span><span class="pun">(</span><span class="pln">m_flags </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x06</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7532" onclick="window.location.hash='#7532'"></td><td class="FileContents-lineContents" id="7532"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="pun">&lt;</span><span class="typ">Lacing</span><span class="pun">&gt;(</span><span class="pln">value</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7533" onclick="window.location.hash='#7533'"></td><td class="FileContents-lineContents" id="7533"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7534" onclick="window.location.hash='#7534'"></td><td class="FileContents-lineContents" id="7534"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7535" onclick="window.location.hash='#7535'"></td><td class="FileContents-lineContents" id="7535"><span class="typ">int</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetFrameCount</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_frame_count</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7536" onclick="window.location.hash='#7536'"></td><td class="FileContents-lineContents" id="7536"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7537" onclick="window.location.hash='#7537'"></td><td class="FileContents-lineContents" id="7537"><span class="kwd">const</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetFrame</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7538" onclick="window.location.hash='#7538'"></td><td class="FileContents-lineContents" id="7538"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7539" onclick="window.location.hash='#7539'"></td><td class="FileContents-lineContents" id="7539"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">idx </span><span class="pun">&lt;</span><span class="pln"> m_frame_count</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7540" onclick="window.location.hash='#7540'"></td><td class="FileContents-lineContents" id="7540"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7541" onclick="window.location.hash='#7541'"></td><td class="FileContents-lineContents" id="7541"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Frame</span><span class="pun">&amp;</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> m_frames</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">];</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7542" onclick="window.location.hash='#7542'"></td><td class="FileContents-lineContents" id="7542"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">f</span><span class="pun">.</span><span class="pln">pos </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7543" onclick="window.location.hash='#7543'"></td><td class="FileContents-lineContents" id="7543"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">f</span><span class="pun">.</span><span class="pln">len </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7544" onclick="window.location.hash='#7544'"></td><td class="FileContents-lineContents" id="7544"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7545" onclick="window.location.hash='#7545'"></td><td class="FileContents-lineContents" id="7545"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> f</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7546" onclick="window.location.hash='#7546'"></td><td class="FileContents-lineContents" id="7546"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7547" onclick="window.location.hash='#7547'"></td><td class="FileContents-lineContents" id="7547"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7548" onclick="window.location.hash='#7548'"></td><td class="FileContents-lineContents" id="7548"><span class="kwd">long</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">Frame</span><span class="pun">::</span><span class="typ">Read</span><span class="pun">(</span><span class="typ">IMkvReader</span><span class="pun">*</span><span class="pln"> pReader</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> buf</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7549" onclick="window.location.hash='#7549'"></td><td class="FileContents-lineContents" id="7549"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">pReader</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7550" onclick="window.location.hash='#7550'"></td><td class="FileContents-lineContents" id="7550"><span class="pln">  assert</span><span class="pun">(</span><span class="pln">buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7551" onclick="window.location.hash='#7551'"></td><td class="FileContents-lineContents" id="7551"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7552" onclick="window.location.hash='#7552'"></td><td class="FileContents-lineContents" id="7552"><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> pReader</span><span class="pun">-&gt;</span><span class="typ">Read</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">,</span><span class="pln"> buf</span><span class="pun">);</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7553" onclick="window.location.hash='#7553'"></td><td class="FileContents-lineContents" id="7553"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7554" onclick="window.location.hash='#7554'"></td><td class="FileContents-lineContents" id="7554"><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7555" onclick="window.location.hash='#7555'"></td><td class="FileContents-lineContents" id="7555"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7556" onclick="window.location.hash='#7556'"></td><td class="FileContents-lineContents" id="7556"><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="typ">Block</span><span class="pun">::</span><span class="typ">GetDiscardPadding</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> m_discard_padding</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7557" onclick="window.location.hash='#7557'"></td><td class="FileContents-lineContents" id="7557"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7558" onclick="window.location.hash='#7558'"></td><td class="FileContents-lineContents" id="7558"><span class="pun">}</span><span class="pln">  </span><span class="com">// end namespace mkvparser</span></td></tr></table></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>